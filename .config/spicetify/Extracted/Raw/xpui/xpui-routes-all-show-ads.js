"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[1845],{18060:(e,t,r)=>{r.d(t,{o:()=>R});var n=r(51488),a=r(5904),i=r(71523),s=r(64501),c=r.n(s),l=(r(7651),r(30456),r(26701),r(25550),r(47994),r(37417),r(11737),r(51691),r(702),r(5672),r(43379),r(34192),r(88856),r(51565),r(15342),r(18316),r(30758)),d=r(7852),u=r(72300),o=r(72071),v=r(6046),f=r(99),h=r(80080),p=r(10659),b=r(47973),g=r(9434),_=r(36734),m=r(95707),k=r(63130);const x="c5Ml9BbBuUEHjNkcSwZA";var w=r(86070),y="70px",j=function(e){var t=e.adId,r=e.advertiser,n=e.tagline,a=e.displayImage,i=e.buttonMessage,s=e.cardOnClick,c=e.buttonOnClick,l=e.clickthroughUrl;return(0,w.jsx)(k.N,{to:(0,m.H)(l),className:x,"data-testid":"leavebehind",children:(0,w.jsx)(h.v,{onClick:s,onClickHint:f.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:t,size:"xl",title:(0,w.jsx)(p.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:r}),subtitle:(0,w.jsx)(b.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:n}),media:(0,w.jsx)(g.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:y,imageWidth:y,size:"xl"}),trailing:(0,w.jsx)(_.$,{onClick:function(){c&&c()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":f.Ru.get("ad-formats.learnMore"),children:i})})})},O=r(8430),I=r(80267),E=r(19451),A=r(1131);const q="zlUJfROzFEOsEDWL7ucP",C="Fxvq1Fw7XQdGRDvYokRg";function F(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?F(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):F(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var R=function(e){var t=e.leavebehinds,r=e.seeAllButton,n=e.surface,s=e.uri,h=(0,A.vh)(),p=(0,E.w)(E.P),b=(0,l.useState)(void 0),g=(0,i.A)(b,2),_=g[0],m=g[1];(0,l.useEffect)((function(){t&&t.length>0&&_!==t[0].requestId&&s&&(t.forEach((function(e,t){var r;e.uri===s&&(null===(r=e.trackingEvents)||void 0===r||r.viewed.forEach(function(){var t=(0,a.A)(c().mark((function t(r){var a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(r);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),a=t.t0,h.send((0,o.G)({error_type:"trackingURLFailure",error_message:a.message,http_error_code:422,surface:(0,O.Fh)(n),request_url:r,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,I.Zl)(n)}));case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()),h.send((0,v.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:"viewed_on_".concat((0,O.Fh)(n).toLowerCase()),surface:(0,O.Fh)(n),surface_position:t+1,uri:s})))})),m(t[0].requestId))}),[h,p,t,s,n,_]);var k=function(e){var t=e.eventReason,r=e.lineitemId,i=e.requestId,l=e.trackingEvents,d=e.surfacePosition;!function(e,t){null==t||t.forEach(function(){var t=(0,a.A)(c().mark((function t(r){var a;return c().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(r);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),a=t.t0,h.send((0,o.G)({error_type:"trackingURLFailure",error_message:a.name,http_error_code:422,surface:(0,O.Fh)(n),request_url:r,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,I.Zl)(n)}));case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}(r,l),h.send((0,v.x)({leavebehind_lineitem_id:r,leavebehind_request_id:i,event:"event_clicked",event_reason:t,surface:(0,O.Fh)(n),surface_position:d,uri:s}))};return(0,w.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,w.jsxs)("div",{className:C,children:[(0,w.jsx)(d.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,u.po)("tighter"),"data-testid":"leavebehinds-title",children:f.Ru.get("podcast-ads.recent_ads")}),r]}),(0,w.jsx)("div",{className:q,"data-testid":"leavebehinds-list-wrapper",children:t.map((function(e,t){return(0,w.jsx)(j,P(P({},e),{},{buttonOnClick:function(){var r;k({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:null===(r=e.trackingEvents)||void 0===r?void 0:r.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:function(){var r;k({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:null===(r=e.trackingEvents)||void 0===r?void 0:r.clicked,requestId:e.requestId,surfacePosition:t+1})}}),e.adId)}))})]})}},61836:(e,t,r)=>{r.d(t,{A:()=>b});var n=r(5904),a=r(71523),i=r(64501),s=r.n(i),c=(r(47994),r(30758)),l=r(72071),d=r(65277),u=r(47781),o=r(8430),v=r(80267),f=r(1131),h=r(49093),p=r(46908);const b=function(e){var t=(0,c.useState)(),r=(0,a.A)(t,2),i=r[0],b=r[1],g=(0,c.useState)(!1),_=(0,a.A)(g,2),m=_[0],k=_[1],x=(0,f.vh)(),w=(0,d.NC)(h.SAn,{loadingValue:!1});return{data:i,error:m,getLeavebehinds:(0,c.useCallback)((0,n.A)(s().mark((function t(){var r,n;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.b6(p.n.getInstance(),(0,o.Fh)(e.surface),e.uri,e.playlistName,w);case 3:r=t.sent,b(r.body),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),n=t.t0,x.send((0,l.G)({error_type:"fetchAdsFailure",error_message:n.name,http_error_code:n.status,surface:(0,o.Fh)(e.surface),request_type:"leavebehindAds",ad_content_origin:(0,v.Zl)(e.surface)})),k(!0);case 12:case"end":return t.stop()}}),t,null,[[0,7]])}))),[x,e.playlistName,e.surface,e.uri,w])}}},44949:(e,t,r)=>{r.r(t),r.d(t,{default:()=>d});r(70750);var n=r(30758),a=r(90543),i=r(18060),s=r(61836),c=r(80267),l=r(86070);function d(e){var t=e.surface,r=(0,a.zy)().state,d=(0,s.A)({surface:t,uri:r.uri}),u=d.data,o=d.error,v=d.getLeavebehinds;if((0,n.useEffect)((function(){v()}),[]),null==u||!u.leavebehindAds||o)return null;var f=(0,c.iT)(u,r.uri);return(0,l.jsx)("div",{className:"contentSpacing",children:(0,l.jsx)(i.o,{leavebehinds:f.slice(0,c.E9),surface:t,uri:r.uri})})}}}]);
//# sourceMappingURL=xpui-routes-all-show-ads.js.map