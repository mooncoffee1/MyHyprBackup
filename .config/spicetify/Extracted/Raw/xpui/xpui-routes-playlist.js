"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[2355],{79509:(e,t,n)=>{n.d(t,{w:()=>m});var r=n(30758),i=n(97500),a=n.n(i),l=n(43727),s=n(92107),o=n(96992),c=n(52708);const u="pvGZ831aNzHTQMZ8CA_u";var d=n(86070),m=(0,r.memo)((function(e){var t=e.onClick,n=void 0===t?function(){}:t,i=e.size,m=e.className,p=e.uri,f=e.sharingInfo,v=e.interactionData,y=e.ariaLabel,h=void 0===y?s.Ru.get("mwp.list.item.share"):y,x=e.condensedAll,b=e.placement,g=e.semanticColor,j=e.disableTooltip,A=(0,c.L)({sharingInfo:f,uri:p,interactionData:v}).onCopyLink,k=(0,r.useCallback)((function(){A(),n()}),[n,A]);return(0,d.jsx)(o.a,{ariaLabel:h,size:i,onClick:k,className:a()(u,m),icon:l.C,condensedAll:x,placement:b,condensed:!0,semanticColor:g,disableTooltip:j})}))},45155:(e,t,n)=>{n.r(t),n.d(t,{ThisIsTourCard:()=>d,default:()=>d,useThisisPlaylistExtensionQuery:()=>v});var r=n(13534),i=n(12072),a=n(92107),l=n(93051),s=n(70566),o=n(60256),c=n(87106),u=n(86070);const d=function(e){var t=e.artistImageUrl,n=e.artistName,d=e.artistConcertsUri,m=e.spec,p=(0,s.s)(),f=(0,o.t)(m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}));return t&&n&&d?(0,u.jsxs)("section",{ref:f,className:"contentSpacing",children:[(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",semanticColor:"textBase",children:a.Ru.get("concerts")}),(0,u.jsx)("div",{className:c.A.cards,children:(0,u.jsxs)("div",{className:c.A.tourCard,"data-testid":"on-tour-card",children:[(0,u.jsx)("img",{className:c.A.cardImage,src:t,alt:""}),(0,u.jsxs)("div",{className:c.A.cardContent,children:[(0,u.jsx)(r.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",className:c.A.subtitle,children:a.Ru.get("concerts_on_tour")}),(0,u.jsx)(r.E,{as:"h1",variant:"bodyMediumBold",className:c.A.title,semanticColor:"textBase",children:n}),(0,u.jsx)(l.N,{to:d,className:c.A.cardLink,children:(0,u.jsx)(i.n,{as:"span",size:"small",onClick:function(){var e=m.concertsCardFactory({identifier:n,uri:d,reason:"This is On Tour phase 1 MVP"}).hitUiNavigate({destination:d});p.logInteraction(e)},className:c.A.cardButton,children:a.Ru.get("concerts_see_all_events")})})]})]})})]}):null};var m=n(86295),p=n(87718),f=new m.l("thisisPlaylistExtension","query","906c2e14927400c8a71645c647576ce032f837a112d5e6f9375b19c80445c8cf",null),v=function(e,t){return(0,p.I)(f,e,t)}},71070:(e,t,n)=>{n.r(t),n.d(t,{default:()=>Aa});var r=n(52542),i=n(13734),a=n(85093),l=n(12341),s=(n(7651),n(83234),n(30456),n(24302),n(26701),n(53276),n(79024),n(34518),n(25550),n(70750),n(57149),n(47994),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(72636),n(51234),n(2823),n(59255),n(85130),n(55636),n(28509),n(97332),n(46555),n(13296),n(24594),n(97460),n(29426),n(34072),n(34192),n(88856),n(49166),n(51565),n(15342),n(18316),n(93577),n(54520),n(91531),n(93678),n(34145),n(30758)),o=n(88677),c=n(44286),u=n(13534),d=n(93493),m=n(75260),p=n(80366),f=n(92107),v=n(96334),y=(n(28430),n(77905),n(9582),n(21120)),h=(n(26851),n(9750),n(86070)),x=function(e,t,n){return{event:e,app_startup_id:null,ad_playback_id:null,ad_id:String(t),lineitem_id:String(n),creative_id:String(t),ad_format:"sponsored playlist",slot:null,in_focus:null,username:null,jsondata:JSON.stringify({platform:"WebPlayer",revision:"1.0.0"})}},b=function(e){var t=e.clickTracking,n=e.clickThrough,r=e.thirdPartyImpression,i=e.impression,a=e.logoUrl,c=e.advertiserName,d=e.creativeId,m=e.lineItemId,p=(0,o.wA)(),v=(0,s.useState)(!1),b=(0,l.A)(v,2),g=b[0],j=b[1];return(0,s.useEffect)((function(){return p((0,y.tb)()),p((0,y.i2)(x("event_viewed",d,m))),function(){p((0,y.zV)())}}),[p,d,m]),(0,h.jsxs)("div",{className:"sponsor-container",children:[(0,h.jsx)(u.E,{variant:"marginal",className:"sponsor-text","data-ta-id":"sponsor-text",children:f.Ru.get("playlist.presented_by",c)}),(0,h.jsxs)("div",{className:"sponsor-logo",children:[(0,h.jsx)("a",{draggable:!1,className:"sponsor-logo__link",target:"_blank",href:n,onClick:function(){p((0,y.i2)(x("event_clicked",d,m))),j(!0)},children:(0,h.jsx)("img",{draggable:!1,className:"sponsor-logo__image",src:a,alt:c,"data-ta-id":"sponsor-logo"})}),(0,h.jsx)("img",{className:"sponsor-logo__imp-pixel",src:i,alt:""}),r&&(0,h.jsx)("img",{className:"sponsor-logo__3p-imp-pixel",src:r,alt:""}),g&&(0,h.jsx)("img",{className:"sponsor-logo__click-img-pixel",src:t,alt:""})]})]})};function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var A=function(e){var t=e.playlistUri,n=(0,o.wA)(),r=(0,o.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd||e.ads.sponsoredPlaylist.sponsoredPlaylist.get(t)}));return(0,s.useEffect)((function(){r||n((0,y.uP)(t))}),[n,t,r]),r?(0,h.jsx)("div",{children:(0,h.jsx)(b,j({},r))}):null},k=function(e){var t=e.playlistUri,n=(0,o.wA)(),r=(0,o.d4)((function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")})),i=(0,o.d4)((function(e){return e.ads.sponsoredPlaylist.previewAd}));(0,s.useEffect)((function(){r||n((0,y.uU)())}),[n,r]);var a=i||r&&function(e,t){var n=Date.now()/1e3,r=e.split(":"),i=r[r.length-1];return t.some((function(e){var t=e.playlistId,r=e.endTime,a=e.startTime;return t===i&&n>=a&&n<(r||n+1)}))}(t,r);return a?(0,h.jsx)(A,{playlistUri:t}):null},R=n(26596),C=n(33672),T=n(3035),S=n(45625),P=n(72527),O=n(31477),w=n(60930),E=n(81973),I=n(42526),N=n(44206),L=n(51069),U=n(7308),D=n(6453),_=n(83437),M=n(10373),B=n(45155),F=n(83691),z=n(62822),$=n(93091),V=n.n($),q=n(64399),W=n(2378),H=n(58017),K=n(86295),Y=n(87718),G=new K.l("queryInlineCurationSearchV2","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),J=new K.l("queryInlineCurationSearchV2Booklists","query","ba8322962d1da0bfea18fd0831d1af7936344c8b7401510608a272a23adad800",null),Q=new K.l("queryInlineCurationSearchAlbum","query","74a97c6afa1c6c23e1d9b897756fc362ca7e5ed718ac59ba65ffa85f687f7113",null),X=new K.l("queryInlineCurationSearchArtist","query","657c07a8943ea6e49c61833dde16d8d51cb64e921dd80827255d6e2519621c34",null),Z=(n(16347),n(18653),n(16920)),ee=n(30804),te=n(53670);function ne(e){var t,n,r,i,a,l,s,o,c,u,d,m,p;return{type:Z.c.AUDIOBOOK,uri:e.uri,name:e.name,description:null!==(t=e.htmlDescriptionPlain)&&void 0!==t?t:"",authorName:(null===(n=e.authors)||void 0===n?void 0:n.map((function(e){return null==e?void 0:e.name})).join(f.Ru.getSeparator()))||"",images:null!==(r=null===(i=e.coverArt)||void 0===i?void 0:i.sources)&&void 0!==r?r:[],isLocked:(0,ee.e$)(e.accessInfo),isExplicit:(null===(a=e.contentRating)||void 0===a?void 0:a.label)===te.x7.Explicit,durationMs:null!==(l=null===(s=e.duration)||void 0===s?void 0:s.totalMilliseconds)&&void 0!==l?l:0,topics:(null===(o=e.genres)||void 0===o?void 0:o.map((function(e){return{uri:e.destinationUri,title:e.contextualName}})))||[],signifierText:null!==(c=null===(u=e.accessInfo)||void 0===u||null===(u=u.signifier)||void 0===u?void 0:u.text)&&void 0!==c?c:"",rating:{average:null!==(d=null===(m=e.rating)||void 0===m||null===(m=m.averageRating)||void 0===m?void 0:m.average)&&void 0!==d?d:0,showAverage:!(null===(p=e.rating)||void 0===p||null===(p=p.averageRating)||void 0===p||!p.showAverage)},sharingInfo:e.sharingInfo,publishDate:null,isOutOfMarket:!1,consumptionCapExplanation:null,uid:"",playIndex:null,addedAt:null,addedBy:null,formatListAttributes:null}}var re=n(4140),ie=n(66192),ae=n(53586),le=n(71104),se=n(82704);function oe(e,t){var n,r,i,a,l,s,o,c,u,d,m,p,f,v,y,h;return{albums:null!==(y=e.albumsV2,h=null==y?void 0:y.items.filter((function(e){return"AlbumResponseWrapper"===e.__typename})),n=(null!=h?h:[]).map((function(e){return ue(e)})).filter(le.P)||[])&&void 0!==n?n:[],artists:null!==(f=e.artists,r=(null!==(v=null==f?void 0:f.items)&&void 0!==v?v:[]).map((function(e){return de(e)})).filter(le.P)||[])&&void 0!==r?r:[],episodes:null!==(m=e.episodes,i=(null!==(p=null==m?void 0:m.items)&&void 0!==p?p:[]).map((function(e){return me(e)})).filter(le.P)||[])&&void 0!==i?i:[],tracks:null!==(u=e.tracksV2,a=(null!==(d=null==u?void 0:u.items)&&void 0!==d?d:[]).map((function(e){return fe(e.item)})).filter(le.P)||[])&&void 0!==a?a:[],topResults:null!==(s=e.topResultsV2,c=null!==(o=null==s?void 0:s.itemsV2)&&void 0!==o?o:[],l=c.map((function(e){var t=(0,ie.Jt)(e,"item");switch(t.__typename){case"AlbumResponseWrapper":return ue(t);case"ArtistResponseWrapper":return de(t);case"EpisodeResponseWrapper":return me(t);case"TrackResponseWrapper":return fe(t);default:return(0,se.k)(t),null}})).filter(le.P)||[])&&void 0!==l?l:[],query:t}}function ce(e){return{type:Z.c.ALBUM,uri:e.uri,id:e.id,name:e.name,images:(0,ae.r)(e.coverArt)}}function ue(e){return"Album"!==e.data.__typename?null:ce(e.data)}function de(e){if("Artist"!==e.data.__typename)return null;var t=e.data;return{type:Z.c.ARTIST,uri:t.uri,id:t.id,name:t.profile.name,images:(0,ae.r)(t.visuals.avatarImage)}}function me(e){var t,n;if("Episode"!==e.data.__typename)return null;var r=e.data,i=r.podcastV2.data;return"Podcast"!==i.__typename?null:{type:Z.c.EPISODE,uri:r.uri,id:r.id,name:r.name,images:(0,ae.r)(r.coverArt),isExplicit:(null===(t=r.contentRating)||void 0===t?void 0:t.label)===re.x7.Explicit,is19PlusOnly:(null===(n=r.contentRating)||void 0===n?void 0:n.label)===re.x7.NineteenPlus,podcast:{id:i.id,uri:i.uri,name:i.name},isPlayable:r.playability.playable}}function pe(e){var t,n,r,i,a,l,s,o=(0,ae.r)((null===(t=e.albumOfTrack)||void 0===t?void 0:t.coverArt)||null);return{type:Z.c.TRACK,uri:e.uri,id:e.id,name:e.name,album:{name:(null===(n=e.albumOfTrack)||void 0===n?void 0:n.name)||"",uri:(null===(r=e.albumOfTrack)||void 0===r?void 0:r.uri)||"",imgUrl:(null===(i=o.at(0))||void 0===i?void 0:i.url)||"",id:(null===(a=e.albumOfTrack)||void 0===a?void 0:a.id)||""},artists:e.artists.items.map((function(e){return{id:e.id,name:e.profile.name,uri:e.uri}})),isPlayable:e.playability.playable,isExplicit:(null===(l=e.contentRating)||void 0===l?void 0:l.label)===re.x7.Explicit,is19PlusOnly:(null===(s=e.contentRating)||void 0===s?void 0:s.label)===re.x7.NineteenPlus}}function fe(e){return"Track"!==e.data.__typename?null:pe(e.data)}function ve(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Album":return{albums:[],artists:[],episodes:[],tracks:t.tracks.items.map((function(e){return pe(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,se.k)(t),null}}function ye(e){var t=e.at(0);if(!t)return null;switch(t.__typename){case"Artist":return{albums:t.discography.popularReleasesAlbums.items.map((function(e){return ce(e)}))||[],artists:[],episodes:[],tracks:t.discography.topTracks.items.map((function(e){return pe(e.track)}))||[],topResults:[]};case"GenericError":case"NotFound":return null;default:return(0,se.k)(t),null}}function he(e,t){var n,r,i,a;return{albums:[],artists:[],episodes:[],tracks:[],topResults:null!==(r=e.topResultsV2,a=null!==(i=null==r?void 0:r.itemsV2)&&void 0!==i?i:[],n=a.map((function(e){var t=(0,ie.Jt)(e,"item");return"AudiobookResponseWrapper"===t.__typename&&"Audiobook"===t.data.__typename?ne(t.data):null})).filter(le.P)||[])&&void 0!==n?n:[],query:t}}var xe=function(){var e=(0,z.A)(V().mark((function e(t,n,r){var i,a,l,s,o,c,u,d=arguments;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a={term:n,offset:d.length>3&&void 0!==d[3]?d[3]:0,limit:d.length>4&&void 0!==d[4]?d[4]:10,numberOfTopResults:d.length>5&&void 0!==d[5]?d[5]:10},!r){e.next=12;break}return e.next=7,t(J,a);case 7:if(s=e.sent,o=null==s||null===(l=s.data)||void 0===l?void 0:l.searchV2){e.next=11;break}return e.abrupt("return",null);case 11:return e.abrupt("return",he(o,n));case 12:return e.next=14,t(G,a);case 14:if(c=e.sent,u=null==c||null===(i=c.data)||void 0===i?void 0:i.searchV2){e.next=18;break}return e.abrupt("return",null);case 18:return e.abrupt("return",oe(u,n));case 19:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),be=function(){var e=(0,z.A)(V().mark((function e(t,n){var r,i,a,l,s=arguments;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:s.length>2&&void 0!==s[2]?s[2]:50,offset:s.length>3&&void 0!==s[3]?s[3]:0},e.next=5,t(Q,i);case 5:if(a=e.sent,l=null==a||null===(r=a.data)||void 0===r?void 0:r.albums){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",ve(l));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ge=function(){var e=(0,z.A)(V().mark((function e(t,n){var r,i,a,l,s=arguments;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i={uris:[n],limit:s.length>2&&void 0!==s[2]?s[2]:50,offset:s.length>3&&void 0!==s[3]?s[3]:0},e.next=5,t(X,i);case 5:if(a=e.sent,l=null==a||null===(r=a.data)||void 0===r?void 0:r.artists){e.next=9;break}return e.abrupt("return",null);case 9:return e.abrupt("return",ye(l));case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ae(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ke=function(e){return e[e.SEARCH=0]="SEARCH",e[e.ALBUM=1]="ALBUM",e[e.ARTIST=2]="ARTIST",e[e.PODCAST=3]="PODCAST",e[e.PLAYLIST=4]="PLAYLIST",e[e.ALBUMRESULTS=5]="ALBUMRESULTS",e[e.ARTISTRESULTS=6]="ARTISTRESULTS",e[e.PODCASTRESULTS=7]="PODCASTRESULTS",e[e.EPISODERESULTS=8]="EPISODERESULTS",e[e.TRACKRESULTS=9]="TRACKRESULTS",e}({}),Re=function(e,t){return"GO_BACK"===t.type?1===e.breadcrumbs.length?e:e=Ae(Ae({},e),{},{breadcrumbs:e.breadcrumbs.slice(0,e.breadcrumbs.length-1)}):"NAV_TO_ENTITY"===t.type?e=Ae(Ae({},e),{},{breadcrumbs:[].concat((0,a.A)(e.breadcrumbs),[t.level])}):("NAV_TO_RESULTS"===t.type?e=Ae(Ae({},e),{},{breadcrumbs:[].concat((0,a.A)(e.breadcrumbs),[t.level])}):"CHANGE_TERM"===t.type&&(e={term:t.term,breadcrumbs:[{navType:ke.SEARCH,term:t.term,title:""}]}),e)},Ce=n(97500),Te=n.n(Ce),Se=n(15057),Pe=n(96027);const Oe="playlist-inlineSearchBox-filterInputContainer",we="playlist-inlineSearchBox-filterInput",Ee="playlist-inlineSearchBox-overlay",Ie="playlist-inlineSearchBox-searchIconContainer",Ne="playlist-inlineSearchBox-searchIcon",Le="playlist-inlineSearchBox-clearButton";var Ue=s.memo((function(e){var t=e.placeholder,n=e.onChange,r=void 0===n?function(){}:n,i=e.onFocus,a=void 0===i?function(){}:i,o=(0,s.useState)(""),c=(0,l.A)(o,2),d=c[0],m=c[1],p=(0,s.useRef)(null),v=(0,Se.YQ)((function(e){r(e)}),200),y=(0,s.useCallback)((function(e){var t=e.currentTarget.value;m(t),v(t)}),[m,v]),x=(0,s.useCallback)((function(){p.current&&p.current.focus(),m(""),r("")}),[m,r]),b=(0,s.useCallback)((function(e){"Escape"===e.key&&d&&x()}),[d,x]);return(0,h.jsxs)("div",{className:Oe,role:"search",children:[(0,h.jsx)(u.E,{as:"input",variant:"bodySmall",ref:p,className:Te()(we),role:"searchbox",maxLength:80,autoCorrect:"off",autoCapitalize:"off",spellCheck:!1,placeholder:t,onChange:y,onKeyDown:b,onFocus:a,value:d}),(0,h.jsxs)("div",{className:Ee,children:[(0,h.jsx)("span",{className:Ie,children:(0,h.jsx)(Pe.C,{size:"small",className:Ne,"aria-hidden":"true"})}),d&&(0,h.jsx)("button",{className:Le,onClick:x,"aria-label":f.Ru.get("search.a11y.clear-input"),children:(0,h.jsx)(q.M,{size:"small"})})]})]})})),De=(n(4672),n(14551),n(77894)),_e=n(12072),Me=n(66475),Be=n(88183),Fe=n(77979),ze=n(78988),$e=n(48035),Ve=n(41366),qe=n(79509),We=n(80021),He=n(83643),Ke=n(86533),Ye=n(21308),Ge=n(77836),Je=n(87389),Qe=n(85703),Xe=n(59950),Ze=n(83263),et=n(49757),tt=n(31247),nt=n(75905),rt=n(93051),it=n(46366),at=n(99888),lt=n(63749),st=n(48133),ot=n(87700),ct=n(79431),ut=n(72316),dt=n(5769),mt=n(70566),pt=n(12574),ft=n(24119),vt=n(50028);const yt="i3wVxndfxMEqUujUJOYc",ht="XFwXZEToljeXDRWQYSEm",xt="hZ_wTiRO870PNY1cRKCd";var bt=["book","contextUri","featureIdentifier","index","sharingInfo","uid","rating","isRecommendation","canRemove","showSeparator","highlightText"];function gt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?gt(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):gt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var At=(0,s.memo)((function(e){var t,n,a=e.book,o=e.contextUri,d=e.featureIdentifier,m=e.index,v=e.sharingInfo,y=e.uid,x=e.rating,b=e.isRecommendation,g=void 0!==b&&b,j=e.canRemove,A=void 0!==j&&j,k=e.showSeparator,R=void 0!==k&&k,C=e.highlightText,T=void 0===C?function(e){return e}:C,S=(0,i.A)(e,bt),P=a.name,O=a.description,w=a.isLocked,E=a.isExplicit,I=a.images,N=a.type,L=a.uri,U=a.authorName,D=a.consumptionCapExplanation,_=a.durationMs,M=a.topics,B=void 0===M?[]:M,F=a.signifierText,z=(0,mt.s)(),$=(0,pt.r)(Fe.m,{data:{position:m,uri:L}}).spec,V=(0,ct.P)({uri:L},{featureIdentifier:d}),q=V.isPlaying,W=V.isActive,H=V.togglePlay,K=(0,c.Zp)(),Y=(0,p.o_)(L).toURLPath(!0),G=(0,ut.x)(o).addItems,J=(0,nt.$)(),Q=(0,dt.p)(L),X=(0,at.A)(L),Z=(0,l.A)(X,2),ee=Z[0],ne=Z[1],re=(0,st.T)(L),ie=J===nt.e.SMALL?"small":"medium",ae=(0,s.useCallback)((function(){z.logInteraction($.addButtonFactory().hitAddToPlaylist({playlist:o,itemToBeAdded:L})),G([L],{after:"end"})}),[z,$,o,L,G]),le=(0,s.useCallback)((function(){if(w&&!D)K(Y);else{var e=(0,it.$I)({isPlaying:q,isActive:W,spec:$.playButtonFactory(),logger:z,uri:L});H({loggingParams:e})}}),[D,W,w,q,z,K,$,H,L,Y]),se=(0,s.useCallback)((function(){var e,t;z.logInteraction($.genreLinkFactory({uri:null!==(e=B[0].uri)&&void 0!==e?e:""}).hitUiNavigate({destination:null!==(t=B[0].uri)&&void 0!==t?t:""}))}),[z,$,B]),oe=(0,h.jsx)(et.U,{children:T(P,tt.u.TITLE)}),ce=(0,h.jsx)(Qe.k,{description:O,children:(0,h.jsxs)(Ye.X,{isExplicit:!!E,children:[!0===(null==x?void 0:x.showAverage)&&void 0!==x.average&&(0,h.jsxs)("span",{children:[(0,h.jsx)(De.j,{size:"xsmall",className:yt}),f.Ru.formatNumber(x.average,{maximumFractionDigits:1})]}),(null===(t=B.at(0))||void 0===t?void 0:t.title)&&(0,h.jsx)(rt.N,{className:ht,to:null!==(n=B[0].uri)&&void 0!==n?n:"",onClick:se,children:B[0].title}),void 0!==_&&(0,h.jsx)(ft.j,{isPlaying:!1,fullyPlayed:(null==Q?void 0:Q.state)===te.H7.Completed,durationMs:_,position:null==Q?void 0:Q.playPositionMilliseconds})]})}),ue=(0,h.jsx)(Ke.p,{uri:L,uid:y,contextUri:o,includeGoToAudiobook:!0,canBeRemovedFromPlaylist:A}),de=!w&&!!!D,me=(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(ze.M,{className:Te()((0,r.A)({},vt.A.visibleAction,ee)),isAdded:ee,onClick:function(){ee?z.logInteraction($.saveToLibraryButtonFactory().hitRemoveLike({itemNoLongerLiked:L})):z.logInteraction($.saveToLibraryButtonFactory().hitLike({itemToBeLiked:L})),ne(!ee)},size:ie,isAudiobook:!0,condensedAll:!0,condensed:!0}),(0,h.jsx)($e.I,{className:Te()((0,r.A)({},vt.A.visibleAction,(0,lt.X)(re))),uri:L,onClick:function(e,t){t===ot.NV.ADD&&z.logInteraction($.downloadButtonFactory().hitDownload({itemToDownload:L}))},size:ie,canDownload:de,condensedAll:!0}),(0,h.jsx)(qe.w,{uri:L,sharingInfo:null!=v?v:null,interactionData:{intent:"share",type:"click"},size:ie,onClick:function(){var e;z.logInteraction($.shareButtonFactory().hitShare({entityToBeShared:L,shareId:null!==(e=null==v?void 0:v.shareId)&&void 0!==e?e:""}))},condensedAll:!0}),(0,h.jsx)(We.b,{menu:ue,children:(0,h.jsx)(Ve.e,{label:f.Ru.get("more.label.context",P),size:ie,onClick:function(){z.logInteraction($.contextMenuButtonFactory().hitUiReveal())},condensedAll:!0})})]}),pe=g?null:(0,h.jsx)(Xe.F,{actions:me,playButton:(0,h.jsx)(Ge.q,{onClick:le,isPlaying:q,ariaPlayLabel:f.Ru.get("tracklist.a11y.play",P,U),ariaPauseLabel:f.Ru.get("tracklist.a11y.pause",P,U),locked:w})}),fe=(0,h.jsx)(Ze.e,{images:I,name:P,type:N,breakpoint:J}),ve=F?(0,h.jsx)(u.E,{as:"div",variant:"bodySmall",semanticColor:"textBrightAccent",children:F}):null,ye=g?(0,h.jsx)(_e.n,{size:"small",onClick:ae,children:f.Ru.get("playlist.extender.button.add")}):null,he=(0,h.jsxs)(Me.j,{hasTextSeparator:!0,children:[(0,h.jsxs)(h.Fragment,{children:[g&&w&&(0,h.jsx)(Be.u,{semanticColor:"textSubdued",title:f.Ru.get("mwp.header.content.unavailable"),size:"xsmall",className:xt}),f.Ru.get("card.tag.audiobook")]}),T(U,tt.u.SUBTITLE)]});return(0,h.jsx)(He.h,{menu:ue,onShow:function(){z.logInteraction($.secondaryHitUiReveal())},children:(0,h.jsx)(Je.k,jt({breakpoint:J,id:"book-".concat(L),media:fe,pretitle:ve,title:oe,body:ce,subtitle:he,footer:pe,trailing:ye,isActive:W,onClick:function(){z.logInteraction($.hitUiNavigate({destination:L})),K(Y)},showSeparator:R},S))})})),kt=n(81594),Rt=n(87198),Ct=n(93195),Tt=function(e){var t=e.renderRow,n=e.searchResults;return(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD]})},St=n(37210),Pt=function(e){var t=e.renderRow,n=e.searchResults,r=n.filter((function(e){return e.type===Z.c.TRACK})),i=n.filter((function(e){return e.type===Z.c.ALBUM}));return(0,h.jsxs)("div",{children:[(0,h.jsx)(u.E,{as:"p",variant:"bodyMediumBold",className:St.A.artistResultListTitle,children:f.Ru.get("playlist.curation.popular_songs")}),(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("playlist.curation.popular_songs"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:r.length,tracks:r,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD]}),(0,h.jsx)(u.E,{as:"p",variant:"bodyMediumBold",className:St.A.artistResultListTitle,children:f.Ru.get("playlist.curation.albums")}),(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("playlist.curation.albums"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD]})]})},Ot=function(e){var t=e.renderRow,n=e.searchResults,r=e.renderSeeAllRow,i=e.seeAllXList;return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD],testID:"playlist-inline-curation-loaded-results"}),(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("search.title.all"),renderRow:r,rowPlaceholder:kt.qq,nrTracks:i.length,tracks:i,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD],testID:"playlist-inline-curation-see-all-options"})]})},wt=function(e){var t=e.renderRow,n=e.searchResults;return(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD]})},Et=function(e){var t=e.renderRow,n=e.searchResults;return(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD]})},It=function(e){var t=e.renderRow,n=e.searchResults;return(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("search.title.top-results"),renderRow:t,rowPlaceholder:kt.qq,nrTracks:n.length,tracks:n,resolveItem:function(e){return{uri:e.uri}},columns:[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADD]})},Nt=n(98220),Lt=n(76126);const Ut="G2t3w2AAeb5OXp0_GeWs",Dt="saVjTFMyWYUz975_tkQm",_t="thi8fNCkEhutRkDC90c0",Mt="pHVlkChuJpEnBQyU3ADv",Bt="ENWs3JxcqtD98_8fbPz2",Ft="L8IUKEJL6JiTyE_qUVCc",zt="XcyjdXgsNX0DBt72tfiD",$t="VhJnuS7UcUPfIlzD8dlU",Vt="He29vQ5anFj_bJ5iEaI2";var qt=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,l=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,h.jsx)(Lt.$,{className:Bt,rowIndex:r,"aria-selected":!1,children:(0,h.jsxs)("div",{"aria-label":"".concat(f.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:Vt,onClick:a,children:[(0,h.jsxs)(Nt.T,{columnIndex:0,className:Ft,children:[void 0!==l?(0,h.jsx)("img",{className:_t,src:l,alt:n.name}):null,(0,h.jsxs)("div",{className:zt,children:[(0,h.jsx)(u.E,{as:"p",className:Mt,variant:"bodyMedium",children:n.name}),(0,h.jsx)(u.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:f.Ru.get("album")})]})]}),(0,h.jsx)(Nt.T,{columnIndex:1}),(0,h.jsx)(Nt.T,{columnIndex:2,children:(0,h.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:$t,onClick:a,children:i?(0,h.jsx)(H.g,{}):(0,h.jsx)(W.V,{})})})]})})},Wt=n(90430),Ht=function(e){var t=e.size;return(0,h.jsx)("div",{className:Dt,children:(0,h.jsx)(Wt.r,{size:t})})},Kt=function(e){var t,n=e.searchResult,r=e.index,i=e.isRTL,a=e.onClick,l=null===(t=n.images.at(0))||void 0===t?void 0:t.url;return(0,h.jsx)(Lt.$,{className:Bt,rowIndex:r,"aria-selected":!1,children:(0,h.jsxs)("div",{"aria-label":"".concat(f.Ru.get("artist-page.tracks.seemore")," ").concat(n.name),className:Vt,onClick:a,"data-testid":"playlist-inline-curation-artist",children:[(0,h.jsxs)(Nt.T,{columnIndex:0,className:Ft,children:[void 0!==l?(0,h.jsx)("img",{className:Ut,src:l,alt:n.name}):(0,h.jsx)(Ht,{size:"small"}),(0,h.jsxs)("div",{className:zt,children:[(0,h.jsx)(u.E,{as:"p",className:Mt,variant:"bodyMedium",children:n.name}),(0,h.jsx)(u.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:f.Ru.get("artist")})]})]}),(0,h.jsx)(Nt.T,{columnIndex:1}),(0,h.jsx)(Nt.T,{columnIndex:2,children:(0,h.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":"See more from ".concat(n.name),className:$t,onClick:a,children:i?(0,h.jsx)(H.g,{}):(0,h.jsx)(W.V,{})})})]})})},Yt=n(53163),Gt=n(15054),Jt=n(76422),Qt=n(74566),Xt=n(79044),Zt=n(45994),en=n(86786),tn=n(15150),nn=n(31772),rn=n(40321),an=n(8574),ln=n(10631),sn=n(64348),on=n(4560),cn=n(46198),un=n(53607),dn=n(97724),mn=n(13584),pn=s.memo((function(e){var t=e.uid,n=e.uri,r=e.isPlayable,i=e.isMOGEFRestricted,a=e.isExplicit,l=e.contextUri,o=e.name,c=e.imgUrl,u=e.index,d=e.podcast,m=e.usePlayContextItem,p=(0,s.useMemo)((function(){return l.replace("internal:recs:","")}),[l]),v=(0,an.W)(),y=(0,ut.x)(p).addItems,x=m({uid:t,uri:n,index:u}),b=x.isActive,g=x.isPlaying,j=x.triggerPlay,A=x.togglePlay,k=(0,s.useCallback)((function(){y([n],{after:"end"}),v({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:p})}),[y,n,v,p]),R=(0,st.T)(n),C=(0,ln.g)(n,{isPlayable:r}),T=C.isPlayable,S=C.isAnyArtistBanned,P=(0,dn.b)({downloadAvailability:R,isExplicit:a,isMOGEFRestricted:i}),O=P.badges,w=P.hasBadges;return(0,h.jsx)(un.pZ,{value:"row",index:u,children:(0,h.jsx)(He.h,{menu:(0,h.jsx)(Yt.b,{uri:n,contextUri:l}),children:(0,h.jsxs)(rn.w,{uri:n,contextUri:n,isPlayable:T,isAnyArtistBanned:S,onTriggerPlay:function(){j()},isActive:b,ageRestricted:i,index:u,ariaRowIndex:u,dragMetadata:{name:o,createdBy:d.name},children:[(0,h.jsxs)(en.U,{ariaColIndex:0,children:[(0,h.jsx)(Qt.u,{uri:n,src:c,onClick:function(){A()},isLocked:!1,isPlaying:g,isActive:b,isEpisode:!0,playAriaLabel:f.Ru.get("tracklist.a11y.play",o,d.name)}),(0,h.jsxs)(Xt.l,{children:[(0,h.jsx)(nn.p,{titleText:o,children:o}),w&&(0,h.jsxs)(Jt.P,{children:[O.download&&(0,h.jsx)(on._,{}),O.explicit&&(0,h.jsx)(sn.U,{}),O.nineteen&&(0,h.jsx)(cn.q,{className:mn.A.nineteen,size:16})]})]})]}),(0,h.jsx)(tn.o,{ariaColIndex:1,children:(0,h.jsx)(Gt.g,{uri:d.uri,name:d.name,children:d.name})}),(0,h.jsx)(Zt.l,{ariaColIndex:2,children:(0,h.jsx)(_e.n,{size:"small",onClick:k,children:f.Ru.get("playlist.extender.button.add")})})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),fn=function(e){var t,n,r=e.episode,i=e.contextUri,a=e.index,l=e.usePlayContextItem;return(0,h.jsx)(pn,{uid:r.id,uri:r.uri,isPlayable:r.isPlayable,isMOGEFRestricted:r.is19PlusOnly,isExplicit:r.isExplicit,contextUri:i,name:r.name,imgUrl:null!==(t=null===(n=r.images.at(0))||void 0===n?void 0:n.url)&&void 0!==t?t:"",index:a,podcast:r.podcast,usePlayContextItem:l})},vn=function(e){var t=e.label,n=e.index,r=e.isRTL,i=e.onClick;return(0,h.jsx)(Lt.$,{className:Bt,rowIndex:n,"aria-selected":!1,children:(0,h.jsxs)("div",{"aria-label":t,className:Vt,onClick:i,children:[(0,h.jsx)(Nt.T,{columnIndex:0,className:Ft,children:(0,h.jsx)(u.E,{as:"p",className:Mt,variant:"bodyMedium",children:t})}),(0,h.jsx)(Nt.T,{columnIndex:1}),(0,h.jsx)(Nt.T,{columnIndex:2,children:(0,h.jsx)("button",{"data-testid":"top-bar-forward-button","aria-label":t,className:$t,onClick:i,children:r?(0,h.jsx)(H.g,{}):(0,h.jsx)(W.V,{})})})]})})},yn=n(75365),hn=n(51725),xn=n(8972),bn=n(26682),gn=n(52382),jn=n(74542),An=n(71646),kn=n(41289),Rn=n(27719),Cn=s.memo((function(e){var t,n=e.uid,r=e.uri,i=e.name,a=e.imgUrl,l=e.artists,o=e.isExplicit,c=e.index,u=e.album,d=e.contextUri,m=e.isPlayable,p=e.isMOGEFRestricted,v=e.usePlayContextItem,y=e.durationMs,x=e.shouldRenderDuration,b=e.internalLink,g=(0,pt.r)(yn.i,{data:{position:c,reason:"",uri:r}}),j=g.spec,A=g.logger,k=(0,s.useMemo)((function(){return d.replace("internal:recs:","")}),[d]),R=(0,an.W)(),C=(0,ut.x)(k).addItems,T=v({uid:n,uri:r,index:c}),S=T.isActive,P=T.isPlaying,O=T.triggerPlay,w=T.togglePlay,E=(0,s.useCallback)((function(){A.logInteraction(j.addButtonFactory().hitAddToPlaylist({playlist:k,itemToBeAdded:r})),C([r],{after:"end"}),R({type:"click",intent:"add-to-playlist",itemIdSuffix:"playlist/add",targetUri:k})}),[A,j,k,r,C,R]),I=(0,st.T)(r),N=(0,ln.g)(r,{isPlayable:m,isLocal:!1,isOutOfMarket:!1,artistUris:null==l?void 0:l.map((function(e){return e.uri}))}),L=N.isPlayable,U=N.isAnyArtistBanned,D=(0,kn.M)(l.map((function(e){return e.uri}))).unBanArtists,_=l.map((function(e){return e.name})).join(f.Ru.getSeparator()),M=(0,dn.b)({downloadAvailability:I,isExplicit:o,isMOGEFRestricted:p}),B=M.badges,F=M.hasBadges,z=x&&y,$=l.map((function(e){return e.name})).join(f.Ru.getSeparator()),V=(0,Rn.c)();return(0,h.jsx)(un.pZ,{value:"row",index:c,children:(0,h.jsx)(He.h,{menu:(0,h.jsx)(hn.P,{uri:r,albumUri:u.uri,artists:l,contextUri:d}),children:(0,h.jsxs)(rn.w,{uri:r,contextUri:d,isPlayable:L,isAnyArtistBanned:U,handleArtistBanUndoClick:D,onTriggerPlay:function(e,t){O({loggingParams:t})},isActive:S,ageRestricted:p,index:c,ariaRowIndex:c,dragMetadata:{name:i,createdBy:_},spec:j,className:mn.A.isRecommendedTrackListRow,children:[(0,h.jsxs)(en.U,{ariaColIndex:0,children:[(0,h.jsx)(Qt.u,{uri:r,src:a,onClick:function(e,t){w({loggingParams:t})},isLocked:!1,isPlaying:P,isActive:S,playAriaLabel:f.Ru.get("tracklist.a11y.play",i,_),spec:j}),(0,h.jsxs)(Xt.l,{children:[b&&V?(0,h.jsx)(rt.N,{to:r,className:mn.A.rowTitle,"data-testid":"internal-track-link",children:(0,h.jsx)(nn.p,{titleText:i,children:i})}):(0,h.jsx)(nn.p,{titleText:i,children:i}),F&&(0,h.jsxs)(Jt.P,{children:[B.explicit&&(0,h.jsx)(sn.U,{}),B.download&&(0,h.jsx)(on._,{}),B.nineteen&&(0,h.jsx)(cn.q,{className:mn.A.nineteen,size:16})]}),(0,h.jsx)(jn.p,{children:(0,h.jsx)(xn.l,{artists:l,spec:j})})]})]}),(0,h.jsx)(tn.o,{ariaColIndex:1,children:(0,h.jsx)(Gt.g,{uri:u.uri,name:u.name,creatorUri:null==l||null===(t=l[0])||void 0===t?void 0:t.uri,spec:j,children:u.name})}),(0,h.jsx)(tn.o,{ariaColIndex:2,children:(0,h.jsx)("span",{})}),(0,h.jsxs)(Zt.l,{ariaColIndex:3,children:[z?(0,h.jsx)(An.d,{uri:r}):null,z?(0,h.jsx)(bn.P,{duration:y,dataTestId:"render-duration"}):(0,h.jsx)(_e.n,{size:"small",onClick:E,"aria-label":f.Ru.get("addToPlaylist-icon.label"),"data-testid":"add-to-playlist-button",children:f.Ru.get("playlist.extender.button.add")}),z?(0,h.jsx)(gn.Y,{menu:(0,h.jsx)(hn.P,{uri:r,albumUri:u.uri,contextUri:d,artists:l}),label:f.Ru.get("more.label.track",i,$)}):null]})]})})})}),(function(e,t){return e.uid===t.uid&&e.uri===t.uri&&e.index===t.index})),Tn=function(e){var t=e.track,n=e.contextUri,r=e.index,i=e.usePlayContextItem;return(0,h.jsx)(Cn,{uid:t.id,uri:t.uri,isPlayable:t.isPlayable,isMOGEFRestricted:t.is19PlusOnly,isExplicit:t.isExplicit,contextUri:n,name:t.name,imgUrl:t.album.imgUrl,index:r,album:t.album,artists:t.artists,usePlayContextItem:i})},Sn=n(8016),Pn=function(e){var t,n=e.resultList,r=e.level,i=e.isRTL,a=e.playlistUri,l=e.navToResults,o=e.navToEntity,c=e.term,d=e.isBooklist,m=n,v=function(e){return e.map((function(e){if(e.type===Z.c.TRACK||e.type===Z.c.EPISODE){var t=e.uri,n=e.id;return{type:(0,p.U_)(t)?Z.c.TRACK:Z.c.EPISODE,uri:t,uid:n,provider:null}}return null})).filter(le.P)}(n),y=(0,Sn.P)(),x=y.draggable,b=y.onDragStart,g=(0,ct.P)({uri:"".concat(a.replace("spotify:","spotify:internal:recs:"),":").concat(encodeURIComponent(c),":").concat(null!==(t=null==r?void 0:r.navType)&&void 0!==t?t:0),pages:[{items:v}]},{featureIdentifier:"search"}).usePlayContextItem,j=(0,s.useCallback)((function(e,t){return(0,h.jsx)(vn,{isRTL:i,index:t,label:e.label,onClick:function(){l({navType:e.type,term:c,title:e.label})}},e.uri)}),[i,l,c]),A=(0,s.useCallback)((function(e,t){return e.type===Z.c.ARTIST?(0,h.jsx)(Kt,{isRTL:i,index:t,searchResult:e,onClick:function(){o({navType:ke.ARTIST,uri:e.uri,title:e.name})}},e.uri):e.type===Z.c.EPISODE?(0,h.jsx)(fn,{index:t,episode:e,contextUri:a.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Z.c.TRACK?(0,h.jsx)(Tn,{index:t,track:e,contextUri:a.replace("spotify:","spotify:internal:recs:"),usePlayContextItem:g},e.uri):e.type===Z.c.ALBUM?(0,h.jsx)(qt,{index:t,isRTL:i,searchResult:e,onClick:function(){o({navType:ke.ALBUM,uri:e.uri,title:e.name})}},e.uri):(0,h.jsx)(At,{book:e,index:t,featureIdentifier:"playlist_recommendations",contextUri:a,isRecommendation:!0,showSeparator:0!==t},e.uri)}),[i,o,a,g]);if(""===c)return(0,h.jsx)("div",{className:St.A.emptySearchTermContainer});if(!n||0===(null==n?void 0:n.length))return(0,h.jsxs)("div",{className:St.A.emptyStateContainer,children:[(0,h.jsx)(u.E,{as:"h1",variant:"titleSmall",children:f.Ru.get("search.empty-results-title",c)}),(0,h.jsx)(u.E,{as:"p",variant:"bodySmall",children:f.Ru.get("search.empty-results-text")})]});if((null==r?void 0:r.navType)===ke.SEARCH){var k=[{type:ke.ARTISTRESULTS,label:f.Ru.get("playlist.curation.see_all_artists"),uri:"spotify:internal:recs:see-all-artists"},{type:ke.ALBUMRESULTS,label:f.Ru.get("playlist.curation.see_all_album"),uri:"spotify:internal:recs:see-all-albums"},{type:ke.TRACKRESULTS,label:f.Ru.get("playlist.curation.see_all_songs"),uri:"spotify:internal:recs:see-all-songs"}];return m=n,d?(0,h.jsx)(h.Fragment,{children:m.map((function(e,t){return e&&e.type===Z.c.AUDIOBOOK?(0,h.jsx)(At,{contextUri:a,index:t,featureIdentifier:"playlist_recommendations",book:e,isRecommendation:!0,draggable:x,onDragStart:function(t){b(t,{itemUris:[e.uri],itemMimeTypes:[R.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==t},t):null}))}):(0,h.jsx)(Ot,{renderRow:A,searchResults:m,renderSeeAllRow:j,seeAllXList:k})}return(null==r?void 0:r.navType)===ke.ALBUM?(0,h.jsx)(Tt,{renderRow:A,searchResults:m}):(null==r?void 0:r.navType)===ke.ARTIST?(0,h.jsx)(Pt,{renderRow:A,searchResults:m}):(null==r?void 0:r.navType)===ke.ALBUMRESULTS?(0,h.jsx)(wt,{renderRow:A,searchResults:m}):(null==r?void 0:r.navType)===ke.TRACKRESULTS?(0,h.jsx)(It,{renderRow:A,searchResults:m}):(null==r?void 0:r.navType)===ke.ARTISTRESULTS?(0,h.jsx)(Et,{renderRow:A,searchResults:m}):null},On=n(69583),wn=n(75355),En=function(e){var t=e.playlistUri,n=e.onCurationModeChange,r=e.isBooklist,i=(0,s.useState)([]),o=(0,l.A)(i,2),c=o[0],d=o[1],m=(0,s.useState)(),p=(0,l.A)(m,2),v=p[0],y=p[1],x=(0,On.W)(),b=function(){var e=(0,s.useReducer)(Re,{term:"",breadcrumbs:[]}),t=(0,l.A)(e,2),n=t[0],r=t[1],i=n.breadcrumbs,a=n.term;return{changeTerm:function(e){r({type:"CHANGE_TERM",term:e})},level:i[i.length-1]||null,goBack:function(){r({type:"GO_BACK"})},navToEntity:function(e){r({type:"NAV_TO_ENTITY",level:e})},navToResults:function(e){r({type:"NAV_TO_RESULTS",level:e})},term:a}}(),g=b.level,j=b.changeTerm,A=b.goBack,k=b.navToEntity,R=b.navToResults,C=b.term,T=(0,s.useContext)(wn.j).request;return(0,s.useEffect)((function(){var e=!0,t=function(){var t=(0,z.A)(V().mark((function t(){var n,i,l;return V().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(g){t.next=2;break}return t.abrupt("return");case 2:t.t0=g.navType,t.next=t.t0===ke.SEARCH?5:t.t0===ke.ARTISTRESULTS?21:t.t0===ke.ALBUMRESULTS?23:t.t0===ke.TRACKRESULTS?25:t.t0===ke.EPISODERESULTS?27:t.t0===ke.ALBUM?29:t.t0===ke.ARTIST?40:51;break;case 5:if(t.prev=5,v&&(v.query===C||""===C)){t.next=13;break}return t.next=9,xe(T,C,r);case 9:n=t.sent,e&&y(n),t.next=14;break;case 13:""===C&&d([]);case 14:t.next=19;break;case 16:t.prev=16,t.t1=t.catch(5),d([]);case 19:return v&&d(v.topResults),t.abrupt("break",52);case 21:return v&&d(null==v?void 0:v.artists),t.abrupt("break",52);case 23:return v&&d(null==v?void 0:v.albums),t.abrupt("break",52);case 25:return v&&d(null==v?void 0:v.tracks),t.abrupt("break",52);case 27:return v&&d(null==v?void 0:v.episodes),t.abrupt("break",52);case 29:return t.prev=29,t.next=32,be(T,g.uri,100,0);case 32:i=t.sent,e&&i&&d(i.tracks),t.next=39;break;case 36:t.prev=36,t.t2=t.catch(29),d([]);case 39:return t.abrupt("break",52);case 40:return t.prev=40,t.next=43,ge(T,g.uri,100,0);case 43:l=t.sent,e&&l&&d([].concat((0,a.A)(l.albums),(0,a.A)(l.tracks))),t.next=50;break;case 47:t.prev=47,t.t3=t.catch(40),d([]);case 50:case 51:return t.abrupt("break",52);case 52:case"end":return t.stop()}}),t,null,[[5,16],[29,36],[40,47]])})));return function(){return t.apply(this,arguments)}}();return t(),function(){e=!1}}),[g,C,v,T,r]),(0,h.jsxs)(h.Fragment,{children:[(0,h.jsxs)("section",{className:St.A.playlistInlineCurationSection,children:[(0,h.jsxs)("div",{className:St.A.playlistInlineCurationWrapper,children:[(0,h.jsx)(u.E,{as:"h1",className:St.A.playlistInlineCurationTitle,variant:"titleSmall",children:f.Ru.get("playlist.curation.title")}),(0,h.jsx)(s.Suspense,{fallback:null,children:(0,h.jsx)(Ue,{placeholder:r?f.Ru.get("playlist.curation.search_placeholder-booklists"):f.Ru.get("playlist.curation.search_placeholder"),onFocus:function(){n(!0)},onChange:function(e){j(e)}})})]}),(0,h.jsx)("button",{className:St.A.playlistInlineCurationCloseButton,onClick:function(){return n(!1)},children:(0,h.jsx)(q.M,{"aria-label":f.Ru.get("close")})})]}),null!==g&&g.navType!==ke.SEARCH?(0,h.jsxs)("button",{className:St.A.playlistInlineCurationBackButton,onClick:function(){return A()},children:[x?(0,h.jsx)(W.V,{"aria-label":f.Ru.get("navbar.go-back"),className:St.A.icon}):(0,h.jsx)(H.g,{"aria-label":f.Ru.get("navbar.go-back"),className:St.A.icon}),(0,h.jsx)(u.E,{as:"p",variant:"bodyMediumBold",children:g.title})]}):null,(0,h.jsx)("div",{className:St.A.searchResultListContainer,"data-testid":"playlist-inline-curation-results",children:(0,h.jsx)(Pn,{playlistUri:t,term:C,level:g,resultList:c,navToEntity:k,navToResults:R,isRTL:x,isBooklist:r})})]})},In=n(16783),Nn=n(48233),Ln=n(60097),Un=(0,s.createContext)({getReference:function(){return null},setReference:function(){}}),Dn=function(e){var t=e.children,n=(0,s.useRef)(null),r=(0,s.useCallback)((function(){return n.current}),[]),i=(0,s.useCallback)((function(e){n.current=e}),[]);return(0,h.jsx)(Un.Provider,{value:{getReference:r,setReference:i},children:t})};var _n=n(45017);function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Bn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fn=function(e,t,n){var i=e.name,a=e.uri,l=e.uid,c=(0,s.useContext)(D.cL).sortState.order!==Ct.H.NONE,u=(0,Sn.P)({itemIds:[l],itemUris:[a],itemMimeTypes:[R.fl.AUDIOBOOKS],dragLabelText:i,contextUri:t}),d=u.draggable,m=u.onDragStart,p=(0,s.useContext)(Un),f=p.setReference,y=p.getReference,h=(0,s.useCallback)((function(e){f({uri:a,uid:l}),m(e)}),[m,f,l,a]),x=(0,o.wA)(),b=(0,_n.m)(),g=(0,s.useCallback)((function(e,n){var r=e[R.fl.AUDIOBOOKS];if(r){var i=y();i?n===C.Nz.BEFORE?b.move(t,[i],{before:{uri:a,uid:l}}):b.move(t,[i],{after:{uri:a,uid:l}}):n===C.Nz.BEFORE?x((0,v.io)(t,r,{before:{uri:a,uid:l}})):x((0,v.io)(t,r,{after:{uri:a,uid:l}})),f(null)}}),[t,x,y,b,f,l,a]),j=n&&!c?[R.fl.AUDIOBOOKS]:[];return Bn(Bn({},(0,T.A)({uri:a,id:l,allowedMimeTypesByDropPosition:(0,r.A)((0,r.A)({},C.Nz.BEFORE,j),C.Nz.AFTER,j),onDrop:g})),{},{onDragStart:h,draggable:d})};const zn="bg5inM_sdkHpYWiFf7Id",$n="DyW2LAm9YDcCkcdM0eeP";var Vn=["className","dropPosition","draggable"];function qn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Wn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qn(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hn=function(){return(0,h.jsx)("div",{className:$n})},Kn=(0,s.memo)((function(e){var t=e.item,n=e.contextUri,r=e.canEdit,a=void 0!==r&&r,l=e.canRemove,s=void 0!==l&&l,o=e.index,c=e.highlightText,u=Fn(t,n,a),d=u.className,m=u.dropPosition,p=u.draggable,f=(0,i.A)(u,Vn);return(0,h.jsxs)(Ln.W,{className:d,"aria-posinset":o,reRunOnDOMUpdate:!0,children:[m===C.Nz.BEFORE&&(0,h.jsx)(Hn,{}),(0,h.jsx)(At,Wn({book:t,contextUri:n,index:o,featureIdentifier:"playlist",sharingInfo:t.sharingInfo,uid:t.uid,rating:t.rating,canRemove:s,className:d,draggable:p,showSeparator:0!==o,highlightText:c},f)),m===C.Nz.AFTER&&(0,h.jsx)(Hn,{})]})})),Yn=n(5432),Gn=n(71666),Jn=n(16454),Qn=n(496),Xn=n(62749),Zn=n(59066);function er(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function tr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?er(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):er(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nr=function(e){var t=e.contextUri,n=e.initialItems,r=e.nrItems,i=e.canEdit,a=e.canRemove,o=e.ariaLabel,u=(0,_n.m)(),d=(0,Qn.v7)(),m=(0,s.useContext)(U.g).filter,p=(0,s.useContext)(D.cL).sortState,f=(0,Yn.$)(p,m).contentsOptions,v=(0,_.z1)(),y=(0,l.A)(v,2)[1],x=(0,s.useCallback)(function(){var e=(0,z.A)(V().mark((function e(n,r){var i,a;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u.getContents(t,tr(tr({},f),{},{offset:n,limit:r}));case 2:return i=e.sent,a=i.items.map((function(e){return null===e?null:(0,Xn.pW)(e)?e:null})),e.abrupt("return",tr(tr({},i),{},{items:a}));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[u,f,t]),b=(0,Jn.E)({nrItems:r,fetch:x,limit:50,initialItems:n}),g=b.getItem,j=b.nrValidItems,A=b.invalidateCache;(0,s.useLayoutEffect)((function(){y(j)}),[j,y]),(0,Zn.H)(t,A);var k=(0,s.useCallback)((function(e){return(0,h.jsx)("div",{style:{height:e}})}),[]),R=(0,s.useCallback)((function(e,t){return t===tt.u.TITLE||t===tt.u.SUBTITLE?(0,h.jsx)(Nn.M,{searchWords:[m],textToHighlight:e}):e}),[m]),C=(0,s.useCallback)((function(e,n){var r=g(e);return r?(0,h.jsx)(Kn,{contextUri:t,item:r,canEdit:i,canRemove:a,index:e,highlightText:R},r.uri):k("".concat(n,"px"))}),[i,a,t,g,R,k]),T="POP"===(0,c.wQ)()?0:10;return(0,h.jsx)("div",{className:zn,children:(0,h.jsx)(In.R,{firstInteractiveIsWrapper:!0,"aria-label":o,"aria-rowcount":j,"aria-colcount":6,children:(0,h.jsx)(Dn,{children:(0,h.jsx)(Gn.M,{totalCount:j,estimatedHeight:200,renderItem:C,renderPlaceholder:k,scrollNodeRef:d,nrRowsOverscan:10,persistanceKey:t,nrInitialInView:T})})})})},rr=n(74600),ir=n(95165),ar=n(53731),lr=n(61616),sr=n(54329),or=function(e){return e.DOWN="DOWN",e.UP="UP",e.EQUAL="EQUAL",e.NEW="NEW",e}({}),cr=(0,r.A)((0,r.A)((0,r.A)((0,r.A)({},or.DOWN,(function(){return(0,h.jsx)(ar.y,{size:"small",className:mn.A.statusChangeDown})})),or.UP,(function(){return(0,h.jsx)(lr.J,{size:"small",className:mn.A.statusChangeUp})})),or.NEW,(function(){return(0,h.jsx)(sr.Z,{className:mn.A.notificationDot})})),or.EQUAL,(function(){return null})),ur=function(e){var t=e.status,n=e.number,r=cr[t];return(0,h.jsxs)("div",{className:Te()(mn.A.rowChartStatus),children:[(0,h.jsx)(u.E,{variant:"bodyMedium",children:n}),(0,h.jsx)(r,{})]})},dr=n(77355),mr=n(50102),pr=n(84466),fr=n(20938),vr=n(51746),yr=n(33270),hr=n(71933),xr=n(77736),br=s.memo((function(e){var t,n=e.uri,r=e.name,i=e.duration_ms,a=e.artists,l=e.album,s=e.isMOGEFRestricted,o=e.isExplicit,c=e.isPlayable,u=e.uid,d=e.index,m=e.contextUri,p=e.imgUrl,v=e.statusChange,y=e.playCount,x=e.usePlayContextItem,b=e.isCompactMode,g=(0,pt.r)(yn.i,{data:{position:d,reason:"",uri:n}}).spec,j=(0,rr.w)(),A=(0,Rn.c)(),k=x({uid:u,uri:n,index:d}),R=k.isActive,C=k.isPlaying,T=k.triggerPlay,S=k.togglePlay,P=(0,st.T)(n),O=(0,ln.g)(n,{isPlayable:c,isLocal:!1,isOutOfMarket:!1,artistUris:null==a?void 0:a.map((function(e){return e.uri}))}),w=O.isPlayable,E=O.isAnyArtistBanned,I=(0,kn.M)(null!==(t=null==a?void 0:a.map((function(e){return e.uri})))&&void 0!==t?t:[]).unBanArtists,N=(0,dn.b)({downloadAvailability:P,isExplicit:o,isMOGEFRestricted:s}),L=N.badges,U=N.hasBadges,D=(null==a?void 0:a.map((function(e){return e.name})).join(f.Ru.getSeparator()))||"";return(0,h.jsx)(un.pZ,{value:"row",index:d,children:(0,h.jsx)(He.h,{menu:(0,h.jsx)(hn.P,{uri:n,albumUri:null==l?void 0:l.uri,artists:a}),children:(0,h.jsx)(rn.w,{uri:n,contextUri:m,index:d,onTriggerPlay:function(e,t){T({loggingParams:t})},isActive:R,ariaRowIndex:d+1,isPlayable:w,isAnyArtistBanned:E,handleArtistBanUndoClick:I,ageRestricted:s,dragMetadata:{name:r,createdBy:D},allowedDropTypes:[],spec:g,isCompactMode:b,children:j.map((function(e,t){var s=e.columnType,o=e.options,c=(0,hr.y)(t,s,j);return(0,h.jsx)(c,{ariaColIndex:t,children:function(){var e;switch(s){case Ct.$.INDEX:return(0,h.jsx)(pr.$,{uri:n,className:mn.A.rowMarkerChartStatus,playAriaLabel:f.Ru.get("tracklist.a11y.play",r,D),onClick:function(e,t){S({loggingParams:t})},isPlaying:C,isActive:R,spec:g,children:v?(0,h.jsx)(ur,{number:d+1,status:v}):(0,h.jsx)(fr.a,{children:d+1})});case Ct.$.TITLE_AND_ARTIST:case Ct.$.TITLE_AND_AUTHOR:return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(dr.e,{src:p}),(0,h.jsxs)(Xt.l,{children:[(0,h.jsx)(nn.p,{titleText:r,children:r}),U&&(0,h.jsxs)(Jt.P,{children:[L.download&&(0,h.jsx)(on._,{}),L.explicit&&(0,h.jsx)(sn.U,{}),L.nineteen&&(0,h.jsx)(cn.q,{className:mn.A.nineteen,size:16})]}),(0,h.jsx)(jn.p,{children:(0,h.jsx)(xn.l,{artists:a,spec:g})})]})]});case Ct.$.TITLE:return(0,h.jsxs)(mr.q,{children:[A?(0,h.jsx)(rt.N,{to:n,className:mn.A.rowTitle,"data-testid":"internal-track-link",children:(0,h.jsx)(nn.p,{titleText:r,children:r})}):(0,h.jsx)(nn.p,{titleText:r,children:r}),U&&(0,h.jsxs)(Jt.P,{children:[L.download&&(0,h.jsx)(on._,{}),L.explicit&&(0,h.jsx)(sn.U,{}),L.nineteen&&(0,h.jsx)(cn.q,{className:mn.A.nineteen,size:16}),L.hasAssociatedVideo&&(0,h.jsx)(xr.l,{})]})]});case Ct.$.ARTIST:case Ct.$.AUTHOR:return(0,h.jsx)(yr.Y,{children:a&&(0,h.jsx)(ir.E,{artists:a,spec:g})});case Ct.$.PLAYS:return(0,h.jsx)(vr.Y,{playcount:y});case Ct.$.ALBUM_OR_PODCAST:case Ct.$.ALBUM:return(0,h.jsx)(Gt.g,{uri:l.uri,name:l.name,creatorUri:null==a||null===(e=a[0])||void 0===e?void 0:e.uri,spec:g,children:l.name});case Ct.$.DURATION:return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(An.d,{uri:n,spec:g}),!(null!=o&&o.hideDuration)&&(0,h.jsx)(bn.P,{duration:i}),(0,h.jsx)(gn.Y,{menu:(0,h.jsx)(hn.P,{uri:n,albumUri:null==l?void 0:l.uri,artists:a}),label:f.Ru.get("more.label.track",r,D),spec:g})]});case Ct.$.ADDED_BY:case Ct.$.ADDED_AT:case Ct.$.RELEASE_DATE:case Ct.$.ACTIONS:case Ct.$.ALBUM_OR_SHOW:case Ct.$.EVENT_DATE:case Ct.$.EVENT_INFO:case Ct.$.CONCERT_DATE:case Ct.$.CONCERT_VENUE:case Ct.$.ADD:case Ct.$.BPM:case Ct.$.KEY:case Ct.$.VIBE:return null;default:(0,se.d)(s)}return null}()},"column-".concat(t))}))})})})}),(function(e,t){return e.uri===t.uri&&e.isCompactMode===t.isCompactMode})),gr=n(18809),jr={column:null,order:Ct.H.NONE},Ar=s.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,r=e.playlistUri,i=e.scrollToUid,a=e.usePlayContextItem,l=e.tracklistDomRef,o=e.sortableColumns,c=e.isCompactMode,u=void 0!==c&&c,d=(0,_n.m)(),m=(0,s.useContext)(U.g),p=m.filter,f=m.setFilter,v=(0,s.useRef)(null),y=(0,s.useCallback)((function(){v.current&&v.current.update()}),[]);(0,Zn.H)(r,y);var x=(0,s.useContext)(D.cL),b=x.sortState,g=x.setSortState,j=(0,s.useCallback)((function(e){g((0,L.So)(e,b))}),[b,g]);(0,s.useEffect)((function(){g(jr),f("")}),[r,f,g]),(0,s.useEffect)((function(){v.current&&i&&v.current.scrollToItem({uid:i})}),[i]);var A=(0,s.useCallback)(function(){var e=(0,z.A)(V().mark((function e(t,n){var i;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.getContents(r,{offset:t,limit:n,sort:(0,L.Xt)(b),filter:p,decorateFormatListData:!0});case 2:return i=e.sent,e.abrupt("return",{items:i.items,totalLength:i.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r,d,b,p]),k=(0,s.useCallback)((function(e,t){var n,i,l,s=(0,gr.g)(null===(n=e.album)||void 0===n?void 0:n.images,{desiredSize:40,desiredLabel:"small"});return(0,h.jsx)(br,{index:t,contextUri:r,uri:e.uri,uid:e.uid||void 0,isPlayable:e.isPlayable,duration_ms:e.duration.milliseconds,name:e.name,artists:e.artists,album:e.album,isExplicit:e.isExplicit,isMOGEFRestricted:e.is19PlusOnly,type:e.type,imgUrl:(null==s?void 0:s.url)||"",statusChange:null===(i=e.formatListAttributes)||void 0===i?void 0:i.status,playCount:parseInt((null===(l=e.formatListAttributes)||void 0===l?void 0:l.rank)||"0",10),usePlayContextItem:a,isCompactMode:u},t+e.uri)}),[r,a,u]),R=(0,rr.w)(),C=(0,s.useCallback)((function(e){return{uri:e.uri,uid:e.uid}}),[]);return(0,h.jsx)(un.pZ,{value:"chart-tracklist",children:(0,h.jsx)(Rt.S4,{ariaLabel:t,hasHeaderRow:!0,columns:R,sortableColumns:o,sortState:b,onSort:j,renderRow:k,resolveItem:C,nrTracks:n,fetchTracks:A,limit:100,canFetchAllTracks:d.getCapabilities().canFetchAllTracks,outerRef:v,outerDomRef:l,columnPersistenceKey:"chart-tracklist",isCompactMode:u,className:mn.A.chartTrackList},r)})})),kr=n(57574),Rr=n(26314),Cr=n(36085),Tr=n(82316),Sr=n(12988);function Pr(e,t){return e.build().withHost(Tr.QU).withPath("/views/recommendations-in-free-tier-playlist-source").withQueryParameters({signal:"playlistURI:".concat(t),limit:"10"}).withEndpointIdentifier("/views/{viewId}").send()}var Or=n(96324),wr=n(34300);const Er="BagEpNps_J8R2QuHRZMa",Ir="bjB8WZd0Ev30ZFbiScDm";var Nr=(0,s.memo)((function(e){var t=e.uri,n=(0,s.useContext)(Qn.bi).scrollNodeRef,r=(0,kr.Wx)({initialInView:!1,rootMargin:"128px 100%",root:n.current}),i=r.ref,a=function(e,t){var n,r=(0,Sr.Z)(Pr,[e],{enabled:t,staleTime:36e5,gcTime:72e5}).data;return null==r||null===(n=r.body.content)||void 0===n?void 0:n.items}(t,r.inView),o=(0,s.useRef)(null),c=function(e){var t=(0,wr.x)("mlt-height",300),n=(0,l.A)(t,2),r=n[0],i=n[1],a=(0,s.useCallback)((function(){var t,n=null===(t=e.current)||void 0===t||null===(t=t.getBoundingClientRect())||void 0===t?void 0:t.height;n&&i(n)}),[e,i]);return(0,Or.w)({refOrElement:e,observeOnly:"height",onResize:a,observeOnMount:!0}),r}(o);return 0===(null==a?void 0:a.length)?null:(0,h.jsx)("div",{className:Er,style:{"--last-height":"".concat(c,"px")},ref:i,children:a&&(0,h.jsx)(Cr.p,{id:"0JQ5DAob0LgAOAm50K90Od",index:0,title:f.Ru.get("web-player.playlist.more-like-this.section-header-title"),total:a.length,elementRef:o,className:Ir,children:a.map((function(e,t){var n,r;return(0,h.jsx)(Rr.B,{index:t,uri:e.uri,name:e.name,authorName:null!==(n=null===(r=e.owner)||void 0===r?void 0:r.display_name)&&void 0!==n?n:null,description:null,images:e.images},e.uri)}))})})})),Lr=n(40927),Ur=n(69045),Dr=n(99217),_r=n(28112),Mr=n(54068),Br=n(91922),Fr=n(51902),zr=n(94823),$r=n(23593),Vr=n(24787),qr=n(2648),Wr=n(75195),Hr=n(17011),Kr=n(53902),Yr=n(32824),Gr=n(7097),Jr={bottomEnd:Gr.dw.topStart,top:Gr.dw.bottom},Qr=function(e){var t=e.visible,n=e.onHide,r=e.placement,i=e.children,a=e.label;return(0,h.jsx)(Kr.W,{placement:r,withPortal:!0,overlay:t&&(0,h.jsx)("div",{children:(0,h.jsx)(Yr.A,{arrow:Jr[r],colorSet:"announcement",onClose:n,children:a})}),children:i})},Xr=n(43678),Zr=n(37184),ei=function(e){return e.xs="small",e.sm="medium",e.md="large",e}(ei||{}),ti=function(e){var t=e.uri,n=e.label,r=e.onClick,i=e.size,a=void 0===i?ei.md:i,l=(0,Zr.J)({uri:t,permissionLevel:"CONTRIBUTOR"}).onCopyLink,s=(0,Xr.R)(),o=s.toggleActivationVisible,c=s.setToggleActivationVisible;return(0,h.jsx)(Qr,{visible:o,onHide:function(){return c(!1)},label:f.Ru.get("web-player.playlist.invite-collaborators.message"),placement:"bottomEnd",children:(0,h.jsx)(Hr.Zp,{label:n,children:(0,h.jsx)(qr.H,{onClick:function(e){null==r||r(e),null==l||l()},iconOnly:Wr.h,size:a,"aria-hidden":"true","aria-label":n,condensed:!0})})})},ni=n(25989),ri=n(33517),ii=n(79851),ai=s.memo((function(e){var t=e.metadata,n=e.tracklistDomRef,r=e.sortableColumns,i=t.hasSpotifyAudiobooks||!1,l=(0,pt.r)(ni.E,{}),o=l.spec,c=l.logger,u=(0,s.useCallback)((function(){c.logInteraction(o.filterFieldFactory().keyStrokeFilter())}),[c,o]),d=(0,s.useCallback)((function(){c.logInteraction(o.filterFieldFactory().hitClearFilter())}),[c,o]);return(0,h.jsxs)("div",{className:St.A.searchBoxContainer,children:[(0,h.jsx)(s.Suspense,{fallback:null,children:(0,h.jsx)(ri.S,{placeholder:f.Ru.get("playlist.search_in_playlist"),onFilter:u,onClear:d,clearOnEscapeInElementRef:n})}),(0,h.jsx)(ii.d,{columns:(0,a.A)(r),isBooklist:i})]})})),li=n(81808),si=n(13459),oi=n(65476),ci=function(){return null},ui=n(39323),di=n(54249),mi=n(89923),pi=n(58114),fi=n(76026),vi=s.memo((function(e){var t=e.playlist,n=e.capabilities,r=e.spec,i=e.isPlaying,a=e.isActive,o=e.togglePlay,c=e.isBooklist,u=e.isConcert,m=void 0!==u&&u,p=e.backgroundColor,v=e.tracklistDomRef,y=e.sortableColumns,x=e.className,b=t.metadata,g=b.uri,j=b.name,A=b.unfilteredTotalLength,k=b.isOwnedBySelf,R=b.isRootlistable,C=b.canPlay,T=b.isPublished,S=b.totalLength,P=(0,mi.n)(),O=(0,mt.s)(),w=(0,s.useMemo)((function(){return r.shuffleButtonContainerFactory()}),[r]),E=n.canFilter&&A>0,I=n.canSort&&A>0,N=A>0,L=(0,d.NC)(pi.McC,{loadingValue:!1}),U=(0,oi.X)(),D=(0,ui.x)(),_=(0,at.A)(g),M=(0,l.A)(_,2),B=M[0],F=M[1],$=(0,an.W)(),q=(0,s.useCallback)((0,z.A)(V().mark((function e(){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return $({targetUri:g,intent:B?"unsave":"save",type:"click"}),e.prev=1,e.next=4,F(!B);case 4:e.next=8;break;case 6:e.prev=6,e.t0=e.catch(1);case 8:case"end":return e.stop()}}),e,null,[[1,6]])}))),[B,$,F,g]),W=(0,s.useCallback)((function(){var e=r.shareButtonFactory().hitShare({entityToBeShared:g,shareId:""});O.logInteraction(e)}),[r,O,g]),H=(0,Vr.d$)(),K=(0,pt.r)(Lr.e,{data:{uri:g}}),Y=K.spec,G=K.logger;(0,s.useEffect)((function(){H&&G.logImpression(Y.impression())}),[H,G,Y]);var J=(0,s.useCallback)((function(){var e,t=r.heartButtonFactory();B?e=t.hitUnfollow({itemToBeUnfollowed:g}):(e=t.hitFollow({itemToBeFollowed:g}),H&&G.logInteraction(Y.hitFollow({itemToBeFollowed:g}))),O.logInteraction(e),q()}),[r,q,B,O,g,H,G,Y]),Q=(0,di.j)(),X=E&&I;return(0,h.jsx)(Ur.E,{backgroundColor:p,className:x,children:(0,h.jsxs)(Dr.S,{children:[C&&!c?(0,h.jsx)(zr.D,{onClick:o,isPlaying:i,size:Q,uri:g,ariaPlayLabel:f.Ru.get("playlist.a11y.play",j),ariaPauseLabel:f.Ru.get("playlist.a11y.pause",j)}):null,U&&S>0&&!c&&(0,h.jsx)(fi.r,{spec:w,children:(0,h.jsx)(li.Y,{shuffleContext:si.b.playlistActionBar,entityName:j,contextUri:g,isActive:a,activationPlacement:"bottomEnd",size:Q})}),!k&&R?(0,h.jsx)(Br.e,{children:(0,h.jsx)(ze.M,{isAdded:B,onClick:J,size:Q,condensed:!0})}):null,!c&&(0,h.jsx)(_r.f,{uri:g,isFollowing:B,canDownload:N,onClick:function(e,t){return(0,it.Qv)(t,r.downloadButtonFactory(),O,g)},onFollow:q,size:Q,condensed:!0}),(0,h.jsx)(Fr.u,{property:pi.G6N,renderNewExperience:function(){var e;return null!==(e=t.metadata.permissions)&&void 0!==e&&e.canAdministratePermissions&&P&&(!c||L)?(0,h.jsx)(ti,{onClick:W,label:f.Ru.get("permissions.invite-collaborators",j),uri:g,size:Q}):null}}),(m||c)&&(0,h.jsx)(qe.w,{uri:g,sharingInfo:null,interactionData:{intent:"share",type:"click",itemIdSuffix:m?"concerts-near-you/share":"booklist/share"},onClick:W,size:Q}),D&&(0,h.jsx)(s.Suspense,{fallback:null,children:(0,h.jsx)(ci,{uri:g,playlistMetadata:t.metadata})}),(0,h.jsx)(We.b,{onShow:function(){return(0,it.R2)(r,O)},menu:(0,h.jsx)(Mr.W,{uri:g,isPublished:T}),children:(0,h.jsx)(Ve.e,{label:f.Ru.get("more.label.context",j),size:Q})}),X?(0,h.jsx)(fi.r,{spec:r,children:(0,h.jsx)(ai,{metadata:t.metadata,tracklistDomRef:v,sortableColumns:y})}):(0,h.jsx)("div",{className:St.A.leadingSlot,children:(0,h.jsx)(Fr.u,{property:pi.mA2,renderNewExperience:function(){return(0,h.jsx)($r.g,{options:[],onSelect:function(){},selected:null,enableViewModeMenu:!0})}})})]})})})),yi=n(89255),hi=n(60256),xi=function(e){var t=(0,mt.s)(),n=(0,s.useMemo)((function(){return e.spec.promoCardFactory()}),[e.spec]),r=(0,hi.t)(n);return(0,h.jsxs)("div",{className:St.A.concertsFooter,children:[(0,h.jsx)(rt.N,{to:"/concerts",className:St.A.ctaLink,onClick:function(){var e=n.hitUiNavigate({destination:"spotify:app:concerts"});t.logInteraction(e)},children:(0,h.jsxs)("div",{className:St.A.promoRow,ref:r,children:[(0,h.jsx)(u.E,{as:"h2",variant:"bodyMediumBold",className:St.A.promoTitle,children:f.Ru.get("concerts.find_more")}),(0,h.jsx)(yi.v,{as:"span",selected:!0,children:f.Ru.get("concerts.find_nearby")}),(0,h.jsx)("img",{className:St.A.promoImage,alt:"",src:"https://i.scdn.co/image/ab676d63000076a0dbdb7dc2499cbb9ef096518d"})]})}),(0,h.jsx)("div",{className:St.A.disclaimerContainer,children:(0,h.jsx)(u.E,{as:"div",variant:"marginal",semanticColor:"textSubdued",children:f.Ru.get("concerts_near_you.playlist_disclaimer")})})]})},bi=n(60890),gi=n(41163),ji=n(84809),Ai=(n(47710),"multiUserAttributionDisplayNamesV2");function ki(e){return(0,Xn.Jy)(e)||(0,Xn.xp)(e)}function Ri(e){return(0,Xn.Jy)(e)||(0,Xn.xp)(e)||(0,Xn.pW)(e)}var Ci=s.memo((function(e){var t=e.ariaLabel,n=e.nrTracks,r=e.playlistUri,i=e.playlistName,c=e.isMixedMedia,u=e.isLive,m=e.isBlend,y=e.isConcert,x=e.isBooklist,b=e.canEdit,g=e.scrollToUid,j=e.feedbackPath,A=e.deleteFeedbackPath,k=e.usePlayContextItem,C=e.tracklistRef,T=e.tracklistDomRef,S=e.canRemove,P=e.spec,O=e.initialItems,w=e.isCompactMode,E=void 0!==w&&w,I=e.sortableColumns,N=e.hasSpotifyAudiobooks,M=(0,mt.s)(),B=(0,d.NC)(pi.LX5),F=(0,_n.m)(),$=(0,s.useContext)(U.g).filter,q=(0,s.useContext)(D.cL),W=q.sortState,H=q.setSortState,K=(0,s.useRef)((function(){})),Y=(0,s.useState)([]),G=(0,l.A)(Y,2),J=G[0],Q=G[1],X=(0,o.wA)(),Z=(0,rr.w)(),ee=(0,s.useCallback)((function(){null!=C&&C.current&&C.current.update()}),[C]);(0,Zn.H)(r,ee);var te=(0,s.useCallback)((function(e,t){H((0,L.So)(e,W)),M.logInteraction(P.columnHeaderFactory({identifier:e,position:t||0}).hitSort())}),[H,W,M,P]),ne=(0,s.useCallback)((function(e){K.current(),F.remove(r,e)}),[F,r]),re=(0,s.useCallback)((function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];S&&(K.current=t,e.length>1&&!n?Q(e):ne(e))}),[S,ne]);(0,s.useEffect)((function(){null!=C&&C.current&&g&&C.current.scrollToItem({uid:g})}),[g,C]);var ie=(0,s.useCallback)(function(){var e=(0,z.A)(V().mark((function e(t,n){var i;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,F.getContents(r,{offset:t,limit:n,sort:(0,L.Xt)(W),filter:$,decorateFormatListData:!!j||u||m});case 2:return i=e.sent,e.abrupt("return",{items:i.items,totalLength:i.totalLength});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[r,F,W,$,j,u,m]),ae=(0,s.useCallback)((function(e,t,n){if(null!=C&&C.current){var i=C.current.getRows()[t];i&&(M.logInteraction(P.dragSort()),n===rn.Y.Before?F.move(r,e,{before:i}):F.move(r,e,{after:i}))}}),[C,M,P,F,r]),le=(0,s.useCallback)((function(e,t,n){if(null!=C&&C.current){var i=C.current.getRows()[t];i&&(M.logInteraction(P.dragAddToPlaylist({playlist:r,itemToBeAdded:e[0]})),n===rn.Y.Before?X((0,v.io)(r,e,{before:{uri:i.uri,uid:i.uid}})):X((0,v.io)(r,e,{after:{uri:i.uri,uid:i.uid}})))}}),[C,M,P,r,X]),se=(0,s.useCallback)((function(e,t){var n,l,s,o,u,d,f,v,g,C,T,P,O,w=null;if((0,Xn.xp)(e))w=e.show,P=e.images.concat((null===(O=e.show)||void 0===O?void 0:O.images)||[]);else if((0,Xn.Jy)(e)){var I;w=e.album,P=null===(I=e.album)||void 0===I?void 0:I.images}else(0,Xn.pW)(e)&&(P=e.images);var L=(0,gr.g)(P,{desiredSize:40,desiredLabel:"small"}),U=[];b&&W.order===Ct.H.NONE&&(U=x?[R.fl.AUDIOBOOKS]:[R.fl.TRACKS,R.fl.LOCAL_TRACKS,R.fl.EPISODES].concat((0,a.A)(N?[R.fl.AUDIOBOOKS]:[])));var D="1"===(null==e||null===(n=e.formatListAttributes)||void 0===n?void 0:n["dislike-feedback-selected"]),_=!!(0,Xn.xp)(e)&&e.podcastSubscription.isUserSubscribed,M=!1;(0,Xn.xp)(e)&&e.podcastSubscription.isPaywalled&&!_?M=!0:ki(e)?M=e.isPlayable&&!D:(0,Xn.pW)(e)&&(M=!0);var z=!1;(0,Xn.xp)(e)&&e.podcastSubscription.isPaywalled?z=!0:(0,Xn.pW)(e)&&(z=e.isLocked&&!e.isOutOfMarket);var $=m&&function(e,t){var n,r,i,a,l=[];if(!t)return l;var s=t[Ai]?Ai:"multiUserAttributionDisplayNames",o=null==t||null===(n=t[s])||void 0===n?void 0:n.split(","),c=null==t||null===(r=t.multiUserAttributionImages)||void 0===r?void 0:r.split(",");if(!o||!c)return l;for(var u,d=(null==t||null===(i=t.multiUserAttributionUsernamesV2)||void 0===i?void 0:i.split(","))||[],m=(null==t||null===(a=t.multiUserAttributionType)||void 0===a?void 0:a.split(","))||[],f=o.length,v=0;v<f;v++){var y=d[v],h=y&&(0,p.Qj)(y).toURI();l.push({username:y,uri:h,displayName:o[v],images:(u=c[v],u.length>1?[{url:u}]:[]),recsplanation:m[v]})}return l.sort((function(t,n){return t.username?t.username===(null==e?void 0:e.username)?-1:n.username===(null==e?void 0:e.username)?1:0:0}))}(e.addedBy,null==e?void 0:e.formatListAttributes)||e.addedBy&&[e.addedBy]||[],V=0;ki(e)?V=e.duration.milliseconds:(0,Xn.pW)(e)&&(V=e.durationMs||0);var q="";return Ri(e)&&(q=e.name),(0,h.jsx)(ji.W,{isCompactMode:E,index:t,playIndex:null!==(l=e.playIndex)&&void 0!==l?l:void 0,contextUri:r,uri:e.uri,uid:e.uid,isPlayable:M,duration_ms:V,isPaywalled:z,isUserSubscribed:_,name:q,artists:(0,Xn.Jy)(e)?e.artists:void 0,albumOrShow:w,isExplicit:null!==(s=Ri(e)&&e.isExplicit)&&void 0!==s&&s,hasAssociatedVideo:null!==(o=(0,Xn.Jy)(e)&&e.hasAssociatedVideo&&B)&&void 0!==o&&o,isMixedMedia:c,isLocal:(0,Xn.Jy)(e)&&e.isLocal,addedBy:$,hasDecoratedAddedBy:F.getCapabilities().canDecorateAddedBy,dateAdded:e.addedAt,release_date:(0,Xn.xp)(e)&&e.release.date||"",isMOGEFRestricted:((0,Xn.Jy)(e)||(0,Xn.xp)(e))&&e.is19PlusOnly,type:e.type,imgUrl:(null==L?void 0:L.url)||"",onMove:ae,onInsert:le,usePlayContextItem:k,allowedDropTypes:U,feedbackPath:j,feedbackUri:null==e||null===(u=e.formatListAttributes)||void 0===u?void 0:u.feedback_uri,deleteFeedbackPath:A,isDisliked:D,isBlend:m,ticketingSiteURL:null==e||null===(d=e.formatListAttributes)||void 0===d?void 0:d.ticketingSite,eventDate:null==e||null===(f=e.formatListAttributes)||void 0===f?void 0:f.eventDate,canRemove:S,playlistName:i,isConcert:y,concertsCount:null===(v=e.formatListAttributes)||void 0===v?void 0:v.concerts_count,concertURI:null===(g=e.formatListAttributes)||void 0===g?void 0:g.target_uri,concertDate:null===(C=e.formatListAttributes)||void 0===C?void 0:C.first_concert_date,concertVenue:null===(T=e.formatListAttributes)||void 0===T?void 0:T.first_concert_venue,authorName:(0,Xn.pW)(e)?e.authorName:"",isOutOfMarket:!!(0,Xn.pW)(e)&&e.isOutOfMarket,consumptionCapExplanation:(0,Xn.pW)(e)?e.consumptionCapExplanation:void 0,isOwnedBySelf:b,bpm:(0,Xn.Jy)(e)?e.bpm:void 0,musicKey:(0,Xn.Jy)(e)?e.key:void 0},t+e.uri)}),[b,x,W.order,m,E,r,B,c,F,ae,le,k,j,A,S,i,y,N]),oe=(0,s.useCallback)((function(e){return{uri:e.uri,uid:e.uid,type:e.type}}),[]),ce=(0,_.z1)(),ue=(0,l.A)(ce,2)[1];return(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(un.pZ,{value:"playlist-tracklist",children:(0,h.jsx)(Rt.S4,{isCompactMode:E,testID:"playlist-tracklist",ariaLabel:t,hasHeaderRow:!0,columns:Z,sortableColumns:I,sortState:W,onSort:te,onRemove:re,renderRow:se,resolveItem:oe,nrTracks:n,fetchTracks:ie,limit:100,canFetchAllTracks:F.getCapabilities().canFetchAllTracks,outerRef:C,outerDomRef:T,tracks:O,isConcertPlaylist:y,onNrValidItemsChange:ue,columnPersistenceKey:"playlist-tracklist"},r)}),(0,h.jsx)(gi.F,{title:f.Ru.get("playlist.remove_from_playlist",i),isOpen:J.length>0,tracks:J,onClose:function(e){e.stopPropagation(),Q([])},onRemove:ne})]})})),Ti=n(29531),Si=n(40143),Pi=n(14267);n(42703),n(463),n(38408);function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var wi={ARTIST:"artist",ALBUM:"album",PLAYLIST:"playlist",TRACK:"track",USER:"user"},Ei=function(e){var t=/^spotify:(.*)$/.exec(e);if(!t)return{type:null,id:null};for(var n,i,a=t[1],l=/([^:]+):([^:]+)/g,s=[],o=[];n=l.exec(a);){var c=n[1],u=n[2];c===wi.USER&&(i=void 0,i=u.replace(/\+/g,"%20"),u=decodeURIComponent(i)),s.push(c),o.push(u)}if(0===s.length)return{type:null,id:null};var d=s.reduce((function(e,t,n){return e[s[n]]=o[n],e}),{});return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:s[s.length-1],id:o[o.length-1]},d)},Ii=n(29745),Ni=n(72001),Li=n(11656),Ui=new K.l("getAudiobooksMetadata","query","e04c61a831b3e1861a5de961c520ddf7834127ef8e4b94724173a4c4a90e38fe",null),Di=3e5;function _i(e,t){return["list-extender",e,t]}var Mi=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,r=arguments.length>3?arguments[3]:void 0,i=2*n,o=3*n,c=(0,Li.jE)(),u=(0,s.useRef)(0),d=(0,s.useState)(e),p=(0,l.A)(d,2),f=p[0],v=p[1],y=(0,s.useState)((function(){var n,r;return null!==(n=null===(r=c.getQueriesData({queryKey:_i(e,t),stale:!1}).at(0))||void 0===r?void 0:r[1])&&void 0!==n?n:[]})),h=(0,l.A)(y,2),x=h[0],b=h[1],g=(0,s.useRef)(x.map((function(e){var t;return null!==(t=e.uri)&&void 0!==t?t:""}))),j=(0,pt.r)(m.K,{data:{uri:e}}),A=j.spec,k=j.logger,R=(0,s.useMemo)((function(){return A.recommendedFactory()}),[A]);(0,Ni.e)(Ii.Lj.OPERATION_COMPLETE,(function(n){var r=n.data;r.uri===e&&(r.operation===Ii.sP.ADD?b((function(e){return e.filter((function(e){return r.uris.every((function(t){return t!==e.uri}))}))})):r.operation===Ii.sP.REMOVE&&b((function(e){return e.filter((function(e){return r.items.every((function(t){return t.uri!==e.uri}))}))})),r.operation!==Ii.sP.ADD&&r.operation!==Ii.sP.REMOVE||c.invalidateQueries({queryKey:_i(e,t)}))}));var C=(0,s.useRef)(!0);(0,s.useEffect)((function(){return C.current||(b([]),v(e),g.current=[],u.current=u.current+1),C.current=!0,function(){u.current=u.current+1}}),[e]),(0,s.useEffect)((function(){if(x.length<i){var e=Math.min(i,o-x.length),n=u.current,l=_i(f,t),s=C.current&&0===g.current.length;(s?c.fetchQuery({queryKey:l,queryFn:function(){return r(f,[],e)},staleTime:Di,gcTime:Di}):r(f,g.current,e)).then((function(t){if(n===u.current&&t){var r=t.map((function(e){return(null==e?void 0:e.uri)&&e.uri})).filter((function(e){return null!==e}));t.length<e&&g.current.length?g.current=[]:g.current=[].concat((0,a.A)(g.current),(0,a.A)(r)),b((function(e){return[].concat((0,a.A)(e),(0,a.A)(t))})),s&&c.setQueryData(l,t)}}))}C.current=!1}),[i,o,f,x.length,c,r,t]);var T=(0,s.useCallback)((function(){if(A){var e=R.refreshButtonFactory().hitRefreshContent();k.logInteraction(e)}b((function(e){return e.slice(n)}))}),[k,R,A,n]);return{recommendations:x.slice(0,n),_bufferedRecommendations:x.slice(n),refresh:T}},Bi=s.memo((function(e){var t=e.uri,n=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,_n.m)(),r=(0,s.useContext)(wn.j).request,i=(0,s.useCallback)(function(){var e=(0,z.A)(V().mark((function e(t,i,a){var l,s,o,c;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,n.getRecommendedBookUris(t,i,a);case 2:return o=e.sent,e.next=5,r(Ui,{uris:o});case 5:return c=e.sent,e.abrupt("return",null!==(l=null==c||null===(s=c.data)||void 0===s?void 0:s.podcasts.map((function(e){return"Audiobook"===e.__typename?ne(e):null})).filter(le.P))&&void 0!==l?l:[]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n,r]);return Mi(e,"book",t,i)}(t),r=n.recommendations,i=n.refresh,a=(0,Sn.P)(),l=a.draggable,o=a.onDragStart,c=(0,Pi.p)();return c?null!=r&&r.length&&r.length>0?(0,h.jsxs)("div",{className:St.A.recommendedTrackList,children:[(0,h.jsx)("div",{className:St.A.top,children:(0,h.jsxs)("div",{className:St.A.header,children:[(0,h.jsx)(u.E,{variant:"titleSmall",children:f.Ru.get("playlist.extender.recommended.title")}),(0,h.jsx)(u.E,{variant:"bodySmall",className:St.A.subtitle,children:f.Ru.get("playlist.extender.songs.in.playlist")})]})}),c&&(0,h.jsxs)(h.Fragment,{children:[r.map((function(e,n){return e?(0,h.jsx)(At,{contextUri:t,index:n,featureIdentifier:"playlist_recommendations",book:e,sharingInfo:e.sharingInfo,isRecommendation:!0,draggable:l,onDragStart:function(t){o(t,{itemUris:[e.uri],itemMimeTypes:[R.fl.AUDIOBOOKS],dragLabelText:e.name})},showSeparator:0!==n},n):null})),(0,h.jsx)(qr.H,{className:St.A.refreshButton,onClick:i,children:f.Ru.get("playlist.extender.refresh")})]})]}):null:(0,h.jsx)("div",{className:St.A.recommendedTrackList,children:(0,h.jsx)("div",{className:St.A.top,children:(0,h.jsxs)("div",{className:St.A.header,children:[(0,h.jsx)(u.E,{variant:"titleSmall",children:f.Ru.get("playlist.extender.recommended.title")}),(0,h.jsx)(u.E,{variant:"bodySmall",className:St.A.subtitle,children:f.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Fi=n(82893);function zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vi=s.memo((function(e){var t=e.playlistUri,n=e.canEdit,r=e.tracks,i="1"===(0,Fi.$)("filter-age-restricted-content"),a=(0,ct.P)({uri:t.replace("spotify:","spotify:internal:recs:"),pages:[{items:r.map((function(e){return $i($i({},e),{},{provider:null,type:Z.c.TRACK,uid:null})}))}]},{featureIdentifier:"playlist_recommendations"}).usePlayContextItem,l=(0,s.useCallback)((function(e,r){var l=e.duration;return(0,h.jsx)(Cn,{index:r,imgUrl:e.album.imageUrl,contextUri:t.replace("spotify","spotify:internal:recs"),uri:e.uri,isPlayable:!(i&&e.isMOGEFRestricted),name:e.name,artists:e.artists,album:$i($i({},e.album),{},{imgUrl:e.album.imageUrl}),isExplicit:e.explicit,isMOGEFRestricted:e.isMOGEFRestricted,usePlayContextItem:a,durationMs:l,shouldRenderDuration:!n,internalLink:!0},"".concat(r,"-").concat(e.uri))}),[t,i,a,n]),o=(0,s.useMemo)((function(){return[Ct.$.TITLE_AND_ARTIST,Ct.$.ALBUM,Ct.$.ADDED_AT,Ct.$.ADD]}),[]),c=(0,s.useCallback)((function(e){return{uri:e.uri,uid:e.id}}),[]),u=(0,s.useMemo)((function(){return r.slice(0,Math.min(r.length,10))}),[r]);return(0,h.jsx)(Rt.S4,{ariaLabel:f.Ru.get("playlist.extender.recommended.header"),nrTracks:Math.min(r.length,10),rowPlaceholder:kt.qq,tracks:u,renderRow:l,resolveItem:c,columns:o},"".concat(t,"-recommended"))})),qi=s.memo((function(e){var t=e.playlistUri,n=e.playlistLength,r=e.canEdit,i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10,n=(0,_n.m)(),r=(0,s.useCallback)(function(){var e=(0,z.A)(V().mark((function e(t,r,i){var a;return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=r.map((function(e){var t;return null!==(t=Ei(e).id)&&void 0!==t?t:""})),e.abrupt("return",n.getRecommendedTracks(t,a,i));case 2:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[n]);return Mi(e,"track",t,r)}(t),a=i.recommendations,l=i.refresh,o=!n||0===n,c=(0,Pi.p)(),d=o?f.Ru.get("playlist.extender.empty.playlist"):f.Ru.get("playlist.extender.songs.in.playlist");return c?a.length>0?(0,h.jsxs)("div",{className:St.A.recommendedTrackList,children:[(0,h.jsx)("div",{className:St.A.top,children:(0,h.jsxs)("div",{className:St.A.header,children:[(0,h.jsx)(u.E,{variant:"titleSmall",children:f.Ru.get("playlist.extender.recommended.title")}),(0,h.jsx)(u.E,{variant:"bodySmall",className:St.A.subtitle,children:d})]})}),c&&(0,h.jsxs)(h.Fragment,{children:[(0,h.jsx)(Vi,{playlistUri:t,canEdit:r,tracks:a}),(0,h.jsx)(qr.H,{className:St.A.refreshButton,onClick:l,children:f.Ru.get("playlist.extender.refresh")})]})]}):null:(0,h.jsx)("div",{className:St.A.recommendedTrackList,children:(0,h.jsx)("div",{className:St.A.top,children:(0,h.jsxs)("div",{className:St.A.header,children:[(0,h.jsx)(u.E,{variant:"titleSmall",children:f.Ru.get("playlist.extender.recommended.title")}),(0,h.jsx)(u.E,{variant:"bodySmall",className:St.A.subtitle,children:f.Ru.get("web-player.playlist.recommender-dsa-message")})]})})})})),Wi=n(96629),Hi=n(56068),Ki=n(2970),Yi=(n(184),n(42486),function(){return(0,Ki.A)((function e(){(0,Hi.A)(this,e)}),[{key:"deleteChanges",value:(a=(0,z.A)(V().mark((function e(t){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(e){return a.apply(this,arguments)})},{key:"getChanges",value:(i=(0,z.A)(V().mark((function e(t){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(e){return i.apply(this,arguments)})},{key:"applyChanges",value:(r=(0,z.A)(V().mark((function e(t,n){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(e,t){return r.apply(this,arguments)})},{key:"applyChangesNewPlaylist",value:(n=(0,z.A)(V().mark((function e(t,n){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(e,t){return n.apply(this,arguments)})},{key:"previewChanges",value:(t=(0,z.A)(V().mark((function e(t,n){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(e,n){return t.apply(this,arguments)})},{key:"getTrackPairTransitionMetadata",value:(e=(0,z.A)(V().mark((function e(t){return V().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw new Error("Method not implemented.");case 1:case"end":return e.stop()}}),e)}))),function(t){return e.apply(this,arguments)})},{key:"maybeApplyAutoTuna",value:function(e){throw new Error("Method not implemented.")}}]);var e,t,n,r,i,a}()),Gi=(0,s.createContext)(null);var Ji=function(e){var t=e.children,n=(0,s.useMemo)((function(){return new Yi}),[]);return(0,h.jsx)(Gi.Provider,{value:n,children:t})},Qi=function(){},Xi=n(44002),Zi=n(72346),ea=n(16299),ta=n(65884),na=n(78527),ra=n(89737),ia=["meta+v"];var aa=n(65249),la=n(78121),sa=n(75142),oa=n(60255),ca=n(98699),ua=n(81515),da=n(79916),ma=["className","dropPosition"];function pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pa(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var va=s.lazy((function(){return n.e(4789).then(n.bind(n,84968))})),ya=s.lazy((function(){return Promise.resolve().then(n.bind(n,45155))})),ha=s.lazy((function(){return Promise.all([n.e(4151),n.e(3632)]).then(n.bind(n,22151))})),xa=s.lazy((function(){return Promise.all([n.e(4151),n.e(9718)]).then(n.bind(n,30971))})),ba=new Set([]),ga=s.memo((function(e){var t,n,y,x,b=e.playlist,g=e.capabilities,j=b.metadata,A=j.uri,P=j.name,N=j.images,z=j.totalLength,$=j.unfilteredTotalLength,V=j.isOwnedBySelf,q=j.hasEpisodes,W=j.canAdd,H=j.canRemove,K=j.formatListData,G=j.hasDateAdded,J=j.collaborators,Q=j.isPublished,X=j.hasSpotifyAudiobooks,Z=j.hasSpotifyTracks,ee=b.contents.items,te=(0,pt.r)(m.K,{data:{uri:A}}),ne=te.spec,re=te.logger,ie=te.UBIFragment;Qi(A,b.metadata);var ae,le,se,oe=(0,mi.n)(),ce=(0,d.NC)(da.Cf,{loadingValue:!1}),ue=(0,d.NC)(da.Mc,{loadingValue:!1}),de=(0,d.NC)(pi.FQE,{loadingValue:!1}),me=(0,Wi.m)(),pe=(0,Xi.a)().isCompactMode,fe=s.useMemo((function(){return ne.headerFactory()}),[ne]),ve=s.useMemo((function(){return ne.tracklistFactory()}),[ne]),ye=s.useMemo((function(){return ne.actionBarFactory()}),[ne]),he="chart"===(null==K?void 0:K.type),xe="concerts-near-you"===(null==K?void 0:K.type)&&ce,be="live-streams"===(null==K?void 0:K.type),ge=["blend","celebrity-blend","friends-mix"].indexOf((null==K?void 0:K.type)||"")>-1,je=[Z,q,X].filter(Boolean).length>1,Ae=!je&&!!X&&(0,Si.R)(ee),ke="artistsets"===(null==K?void 0:K.type)||"this-is"===(null==K?void 0:K.attributes["editorial.series"]),Re=(null==K?void 0:K.attributes)||{},Ce=Re.header_image_url_desktop||Re.image_url||null,Te=W&&H,Pe=function(e,t){var n=(0,s.useState)(e&&0===t),r=(0,l.A)(n,2),i=r[0],a=r[1],o=(0,s.useContext)(Qn.bi).scrollNodeChildRef,c=(0,s.useRef)(i);return(0,s.useEffect)((function(){var e,t=!c.current;o&&t&&i&&(null===(e=o.current)||void 0===e||e.scrollIntoView({block:"end",behavior:"smooth"})),c.current=i}),[o,i]),{inlineCurationModeIsOn:i,handleInlineCurationModeChange:function(e){a(e)}}}(Te&&(!Ae||ue&&de),$),Oe=Pe.inlineCurationModeIsOn,we=Pe.handleInlineCurationModeChange,Ee=(0,o.d4)(aa.Ht).productState,Ie=!(null==Ee||!Ee.ads)&&parseInt(Ee.ads,10)>0,Ne="spotify"===b.metadata.owner.username,Le=(0,o.wA)(),Ue=(0,c.wQ)(),De=(0,c.zy)(),_e=(0,d.NC)(pi.vQ3,{loadingValue:!1}),Me=(0,d.NC)(pi.UPi,{loadingValue:!1}),Be=null===(t=(0,B.useThisisPlaylistExtensionQuery)({uri:A},{gcTime:5*Y.i,enabled:ke}).data)||void 0===t?void 0:t.playlistV2,Fe="Playlist"===(null==Be?void 0:Be.__typename)?null===(n=Be.artistsOnTour)||void 0===n?void 0:n[0]:null,ze=Me&&"Playlist"===(null==Be?void 0:Be.__typename)?null===(y=Be.concerts)||void 0===y?void 0:y.items.map((function(e){return e.data})):null,$e=null==ze?void 0:ze.flatMap((function(e){return"ConcertV2"===e.__typename?[e]:[]})).map((function(e){var t,n=[e.location.name,e.location.city].join(f.Ru.getSeparator()),r=e.artists.items.flatMap((function(e){return"Artist"===e.data.__typename?[e.data]:[]}));return{venue:n,title:e.title,uri:e.uri,startDate:e.startDateIsoString,imageUrl:null===(t=r[0])||void 0===t||null===(t=t.visuals.avatarImage)||void 0===t||null===(t=t.sources[0])||void 0===t?void 0:t.url,saved:e.saved}})),Ve="POP"!==Ue?new URLSearchParams(De.search).get("uid"):null,qe=(0,an.W)(),We=(0,s.useContext)(U.g).filter,He=(0,s.useContext)(D.cL).sortState,Ke=(0,_n.m)(),Ye=(0,s.useRef)(null),Ge=(0,s.useRef)(null),Je=(0,l.A)(N,1)[0],Qe=(0,Zi.H)(null!==Ce?Ce:(null==Je?void 0:Je.url)||null),Xe=(0,Yn.$)(He,We).contentsOptions,Ze=(0,ct.P)((0,oa.A)(A,Xe),{featureIdentifier:"playlist"}),et=Ze.isPlaying,tt=Ze.isActive,nt=Ze.togglePlay,rt=Ze.usePlayContextItem,at=(0,s.useCallback)((function(){var e=(0,it.$I)({isPlaying:et,isActive:tt,spec:ye.playButtonFactory(),logger:re,uri:A});nt({loggingParams:e})}),[et,tt,nt,ye,re,A]),lt=(0,s.useCallback)((function(e){var t=e.split(/[\r\n]+/g).map((function(e){return(0,p.o_)(e)})).filter((function(e){return null!==e&&((0,p.U_)(e)||(0,p.gH)(e)||(0,p.Pk)(e))}));if(t.length>0&&W){var n,r=t.map((function(e){return e.toURI()})),i=null===(n=Ye.current)||void 0===n||null===(n=n.getSelected())||void 0===n||null===(n=n.slice(-1))||void 0===n?void 0:n[0],a={after:null!=i?i:"end"};Le((0,v.io)(A,r,a))}}),[W,Le,A]);ae=lt,le=(0,ea._)(),se=(0,Se.YQ)((function(){le.paste().then((function(e){return ae(e)}))}),500,{leading:!0,trailing:!1}),(0,ra.f)(ia,se),(0,na.x)(ta.W.PASTE,se);var st=(0,s.useCallback)((function(e){var t=[].concat((0,a.A)(e[R.fl.TRACKS]||[]),(0,a.A)(e[R.fl.LOCAL_TRACKS]||[]),(0,a.A)(e[R.fl.EPISODES]||[]),(0,a.A)(e[R.fl.ALBUMS]||[]));t.length>0&&W&&(re.logInteraction(ne.dragAddToPlaylist({playlist:A,itemToBeAdded:t[0]})),Le((0,v.io)(A,t)),qe({targetUri:A,intent:"add",type:"drop"}))}),[W,re,ne,A,Le,qe]),ot=!Ne&&0!==$,ut=!Ae&&oe&&(Te&&!Oe||ot),dt=Ae&&ue&&de&&oe&&(Te&&!Oe||ot),mt=(!Ae||ue&&de)&&V&&oe,ft=!Te&&!Ae&&!ot&&oe,vt=(0,I.e4)(),yt=(0,I.IL)(),ht=(0,I.mn)(),xt=(0,I.wW)(),bt=!(q||X||0===$||Ne||ft),gt=bt&&vt,jt=bt&&yt,At=bt&&ht,kt=bt&&xt,Rt=(0,O.x)(),Ct="".concat(A,"|[]");(0,s.useEffect)((function(){At||kt||gt||jt||Rt(Ct)}),[Ct,Rt,At,kt,gt,jt]);var Tt=b.metadata.owner.displayName!==b.metadata.owner.username&&b.metadata.owner.displayName?f.Ru.get("internal-link-recommender.more-by-name",{name:b.metadata.owner.displayName}):f.Ru.get("internal-link-recommender.more-by-listener"),Pt=null!==(x=null==J?void 0:J.count)&&void 0!==x?x:1,Ot=(0,_.z1)(),wt=(0,l.A)(Ot,1)[0],Et="plays"===Re.rank_type,It=(0,s.useMemo)((function(){return(0,L.Ey)({isMixedMedia:je,hasEpisodes:q,hasSpotifyAudiobooks:X,hasDateAdded:G,isLive:be,isConcert:xe,isBlend:ge,nrCollaborators:Pt,isBooklist:Ae,isCompactMode:pe,isChart:he,showPlayCount:Et,isExtraColumnsEnabled:me})}),[je,q,X,G,be,xe,ge,Pt,Ae,pe,he,Et,me]),Nt=(0,s.useMemo)((function(){return Ke.getCapabilities().canSort?Ae?new Set(D.dh):new Set((0,L.zq)(It)):ba}),[It,Ae,Ke]),Lt=de&&Ae&&!pe,Ut=(0,T.A)({allowedMimeTypesByDropPosition:(0,r.A)({},C.Nz.ON,W&&!Ae?[R.fl.TRACKS,R.fl.LOCAL_TRACKS,R.fl.EPISODES,R.fl.ALBUMS]:[]),onDrop:st}),Dt=Ut.className,_t=(Ut.dropPosition,(0,i.A)(Ut,ma));return(0,h.jsxs)(s.Suspense,{fallback:null,children:[(0,h.jsx)(F.c,{artistOrShow:b.metadata.owner.displayName,title:P,uri:A,entityType:F.p.PLAYLIST}),(0,h.jsx)(S.Q,{children:(0,ua.Q2)({playlistName:P,userName:b.metadata.owner.displayName||"",isSpotifyOwned:Ne})}),(0,h.jsxs)("section",fa(fa({role:"presentation",className:St.A.playlist,"data-testid":"playlist-page","data-test-uri":A},_t),{},{children:[(0,h.jsx)(bi.x,{metadata:b.metadata,isPlaying:et,isPublished:Q,totalItems:wt,togglePlay:at,backgroundColor:Qe,spec:fe,className:Dt}),(0,h.jsxs)("div",{className:St.A.playlistContent,children:[(0,h.jsx)(vi,{playlist:b,capabilities:g,spec:ye,isPlaying:et,isActive:tt,togglePlay:at,isBooklist:Ae,backgroundColor:Qe,tracklistDomRef:Ge,isConcert:xe,sortableColumns:Nt,className:Dt}),(0,h.jsxs)("div",{className:Dt,children:[(0,h.jsx)(s.Suspense,{fallback:null,children:(0,h.jsx)(va,{formatListData:b.metadata.formatListData})}),!Me&&null!=Fe&&Fe.upcomingEventsCount?(0,h.jsx)(ya,{artistConcertsUri:Fe.uri||"",artistImageUrl:Fe.imageUrl||"",artistName:Fe.title||"",spec:ne}):null,Me&&!!Fe&&$e&&$e.length>0&&(0,h.jsx)(s.Suspense,{fallback:null,children:(0,h.jsx)(ha,{liveEvents:$e,artistConcertsUri:Fe.uri||"",artistName:Fe.title||"",spec:ne})}),(0,h.jsxs)("div",{className:"contentSpacing",children:[Ie?(0,h.jsx)(k,{playlistUri:A}):null,Ie&&Ne?(0,h.jsx)(xa,{uri:A,playlistName:P}):null,b.metadata.hasSpotifyAudiobooks&&_e&&(0,h.jsxs)("div",{className:St.A.noBooklistSupportContainer,children:[(0,h.jsx)(u.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:f.Ru.get("web-player.playlist.booklist-not-supported-title")}),(0,h.jsx)(u.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:f.Ru.get("web-player.playlist.booklist-not-supported.message")})]}),z>0&&(0,h.jsx)(s.Suspense,{fallback:null,children:Lt?(0,h.jsx)(nr,{initialItems:ee,contextUri:A,nrItems:z,canEdit:Te,canRemove:H,ariaLabel:P}):(0,h.jsx)(ie,{spec:ve,children:(0,h.jsx)(M.a,{columns:It,children:he?(0,h.jsx)(Ar,{ariaLabel:P,nrTracks:z,playlistUri:A,scrollToUid:Ve,usePlayContextItem:rt,tracklistDomRef:Ge,sortableColumns:Nt,isCompactMode:pe},A):(0,h.jsx)(Ci,{ariaLabel:P,nrTracks:z,playlistUri:A,playlistName:P,isMixedMedia:je,isLive:be,isConcert:xe,isBlend:ge,isBooklist:Ae,canEdit:Te,scrollToUid:Ve,feedbackPath:Re["dislike-endpoint"],deleteFeedbackPath:Re["delete-endpoint"],usePlayContextItem:rt,tracklistRef:Ye,tracklistDomRef:Ge,canRemove:H,spec:ve,initialItems:ee,isCompactMode:pe,sortableColumns:Nt,hasSpotifyAudiobooks:null!=X&&X},A)})})}),mt&&(0,h.jsx)(s.Suspense,{fallback:null,children:Oe?(0,h.jsx)(En,{playlistUri:A,onCurationModeChange:we,isBooklist:Ae}):(0,h.jsx)("button",{className:St.A.seeMore,onClick:function(){we(!0)},children:(0,h.jsx)(u.E,{as:"div",variant:"bodySmallBold",children:f.Ru.get("playlist.curation.find_more")})})}),(gt||At)&&(0,h.jsx)(w.M,{uri:A,title:f.Ru.get("web-player.playlist.more-like-this.section-header-title")}),At&&(0,h.jsx)(E.S,{uri:A,title:Tt}),ut?(0,h.jsx)("div",{"data-testid":"recommended-track",children:(0,h.jsx)(qi,{playlistUri:A,playlistLength:b.metadata.unfilteredTotalLength,canEdit:Te})}):null,dt?(0,h.jsx)(Bi,{uri:A}):null,ft&&(0,h.jsx)(Nr,{uri:A}),(jt||kt)&&(0,h.jsx)(w.M,{uri:A,title:f.Ru.get("web-player.playlist.more-like-this.section-header-title")}),kt&&(0,h.jsx)(E.S,{uri:A,title:Tt})]})]})]}),xe&&(0,h.jsx)(xi,{spec:ne.footerSectionFactory()})]}))]})})),ja=s.memo((function(e){var t=e.uri,n=(0,_n.m)().getCapabilities(),r=(0,s.useContext)(U.g).filter,i=(0,s.useContext)(D.cL).sortState,a=(0,Yn.$)(i,r),l=a.metadataOptions,o=a.contentsOptions,c=(0,ca.W)(t,l,o),u=c.data,d=c.isLoading,m=c.isError;return function(e){var t=(0,Ti.j)(),n=(0,_n.m)(),r=(0,s.useRef)(!1);(0,s.useEffect)((function(){t&&r.current&&n.resync(e,{maybe:!0}),t||(r.current=!0)}),[t,n,e])}(t),!u||d?(0,h.jsx)(N.LoadingPage,{hasError:m,errorMessage:f.Ru.get("error.not_found.title.playlist"),loadOffline:n.canModifyOffline}):u.metadata.permissions&&!u.metadata.permissions.canView?(0,h.jsx)(P.Z,{uri:t}):(0,h.jsx)(ga,{playlist:u,capabilities:n})}));const Aa=function(){var e=(0,c.g)().playlistId,t=(0,p.Ps)((e||"").split("&")[0]).toURI();return(0,h.jsx)(sa.P,{surface:la.u.PLAYLIST,uris:[t],children:(0,h.jsx)(D.sn,{uri:t,children:(0,h.jsx)(U.s,{uri:t,children:(0,h.jsx)(_.S1,{children:(0,h.jsx)(Ji,{children:(0,h.jsx)(ja,{uri:t})})})})})})}},72346:(e,t,n)=>{n.d(t,{H:()=>s});var r=n(30758),i=n(23100),a=n(19424),l=n(55137);function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:i.l0o,n=(0,a.oI)().backgroundColor,s=(0,a.as)(),o=(0,l.z)(e);return(0,r.useEffect)((function(){return s((0,a.Mo)(o)),function(){s((0,a.Hf)())}}),[o,s]),n||t}},55137:(e,t,n)=>{n.d(t,{r:()=>u,z:()=>d});var r=n(12341),i=n(30758),a=n(23100),l=n(54552),s=n(57165),o=n(75355),c=n(28925);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,i.useContext)(o.j).request,n=(0,c.I)({queryKey:["extracted-color",e],queryFn:function(){return e?(0,s.j)(t,e).then((function(e){var t=(0,r.A)(e,1)[0],n=t.colorDark,i=t.colorLight,a=t.colorRaw;return{colorDark:n.toCSS(l.a.HEX),colorLight:i.toCSS(l.a.HEX),colorRaw:a.toCSS(l.a.HEX)}})):null},gcTime:864e5,staleTime:216e5,enabled:!!e}).data;return null!=n?n:void 0}function d(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.l0o,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"colorRaw";return null!==(e=null===(t=u(n))||void 0===t?void 0:t[i])&&void 0!==e?e:r}},63749:(e,t,n)=>{n.d(t,{X:()=>i});n(78551),n(82467);var r=n(87700);function i(e){return[r.kw.YES,r.kw.DOWNLOADING,r.kw.WAITING].includes(e)}},87106:(e,t,n)=>{n.d(t,{A:()=>r});const r={cards:"TGW6mpr34dHAhhFh0pfw",tourCard:"pQmF4tvRpUeLWgPKUcW7",cardImage:"mGY3ER0iIvb1NbJ1d7X4",cardContent:"JHz_5gqDYpq9Lw3pIac_",subtitle:"oTFzEDWGQSLME1nHjJrt",title:"HPCUzqQRn7oae4vJa3y9",venue:"YxZlxyNx0MHxSVO51TVQ",cardLink:"_B5m05rOGq0BKdTa7al5",cardButton:"StPcf0AvSM0c18nwF4hJ",eventCard:"KhaSITGJnz5MH4qDsYkK",interestedIcon:"ERx0RCdRdFFmYdmZR1P5",concertsCarousel:"nX5e9EyU1GmU42OFVHwH",carouselContent:"MIgjuGue6dRaJWwfUX0K",allEventsCard:"C5dyMaEg91RyIp9YajnW",concertsCarouselControls:"himyaJTaj2PpeC7nuAH5",carouselControlPrev:"KfXbOs2l5lLjtz9R4DiW",carouselControlNext:"yy5akXrxTifXTssHWubJ"}}}]);
//# sourceMappingURL=xpui-routes-playlist.js.map