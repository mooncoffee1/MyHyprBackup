"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[7988],{85239:(e,n,t)=>{t.d(n,{D:()=>v});var i=t(52542),r=t(97500),o=t.n(r),a=t(17011);const l="Psc33HXPyazZYAAr1tgz",u="VGJz_GOARJ6j02JICvW6",s="VpNHGG5ZhoxQ8AqW709S",c="P7395UzhjxLUlLZvj5fb";var d=t(86070),v=function(e){var n=e.children,t=e.active,r=void 0!==t&&t,v=e.focus,f=void 0===v||v,p=e.label,m=e.onClick,g=e.noBackground,b=void 0!==g&&g;return(0,d.jsx)(a.Zp,{label:p,children:(0,d.jsx)("button",{className:o()(l,(0,i.A)((0,i.A)((0,i.A)({},c,r),u,b),s,f)),onClick:m,"aria-label":p,children:n})})}},74449:(e,n,t)=>{t.d(n,{C:()=>V});var i=t(30758),r=t(90944),o=t(92107),a=t(85239),l=t(80021),u=t(52542),s=t(12341),c=(t(7651),t(30456),t(26701),t(25550),t(37417),t(11737),t(51691),t(702),t(5672),t(43379),t(9657),t(34192),t(88856),t(51565),t(15342),t(18316),t(93493)),d=t(85673),v=t(33233),f=t(67963),p=t(58114),m=t(53607),g=t(86070);function b(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function h(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?b(Object(t),!0).forEach((function(n){(0,u.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):b(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var y=function(e){var n=e.languages,t=void 0===n?[]:n,i=e.activeLanguage,r=e.onSelectLanguage,a=e.onClose,l=(0,c.NC)(p.bFi);return(0,g.jsx)(m.pZ,{value:"subtitles",children:(0,g.jsxs)(d.W,{onClose:a,getInitialFocusElement:function(e){return null==e?void 0:e.querySelector('[aria-checked="true"]')},children:[(0,g.jsx)(v.y,{divider:"after",children:o.Ru.get("subtitles-picker.heading")}),(0,g.jsx)(f.D,{onClick:function(){r(null)},"aria-checked":!i,role:"menuitemradio",children:o.Ru.get("subtitles-picker.option_off")}),t.map((function(e){return(0,g.jsxs)(f.D,{onClick:function(){r(e)},role:"menuitemradio","aria-checked":"string"==typeof i&&e.toLowerCase()===i.toLowerCase(),children:[k(e)," ",l?"(".concat(o.Ru.get("subtitles-picker.autogenerated"),")"):null]},e)}))]})})};function k(e){var n=e.toLowerCase().split("-"),t="";switch((0,s.A)(n,1)[0]){case"zh":t=o.Ru.get("subtitles-picker.option_zh");break;case"cs":t=o.Ru.get("subtitles-picker.option_cs");break;case"nl":t=o.Ru.get("subtitles-picker.option_nl");break;case"en":t=o.Ru.get("subtitles-picker.option_en");break;case"fi":t=o.Ru.get("subtitles-picker.option_fi");break;case"fr":t=o.Ru.get("subtitles-picker.option_fr");break;case"de":t=o.Ru.get("subtitles-picker.option_de");break;case"el":t=o.Ru.get("subtitles-picker.option_el");break;case"hu":t=o.Ru.get("subtitles-picker.option_hu");break;case"id":t=o.Ru.get("subtitles-picker.option_id");break;case"it":t=o.Ru.get("subtitles-picker.option_it");break;case"ja":t=o.Ru.get("subtitles-picker.option_ja");break;case"ms":t=o.Ru.get("subtitles-picker.option_ms");break;case"pl":t=o.Ru.get("subtitles-picker.option_pl");break;case"pt":t=o.Ru.get("subtitles-picker.option_pt");break;case"es":t=o.Ru.get("subtitles-picker.option_es");break;case"sv":t=o.Ru.get("subtitles-picker.option_sv");break;case"tr":t=o.Ru.get("subtitles-picker.option_tr");break;case"vi":t=o.Ru.get("subtitles-picker.option_vi");break;default:t=e}return e.endsWith("-x-cc")&&(t+=" [CC]"),t}var x=function(e){return(0,g.jsx)(i.Suspense,{fallback:null,children:(0,g.jsx)(y,h({},e))})},C=t(62822),j=t(93091),w=t.n(j),P=t(18591),E=t(36906),R=t(55437),A=t(76157),O=t(91417),L=t(12574),N=A.S.SUBTITLE_LANGUAGES_CHANGED;var V=i.memo((function(e){var n=e.renderInline,t=void 0!==n&&n,u=e.noBackground,c=e.iconSize,d=void 0===c?"small":c,v=function(){var e=(0,R.$)(),n=e.getCapabilities(),t=(0,E.d)().videoPlayerMode,r=(0,O.f)().uri,o=(0,L.r)(P.E,{data:{uri:null!=r?r:"",identifier:t}}),a=o.spec,l=o.logger,u=(0,i.useState)([]),c=(0,s.A)(u,2),d=c[0],v=c[1],f=(0,i.useState)(null),p=(0,s.A)(f,2),m=p[0],g=p[1];(0,i.useEffect)((function(){var n=function(){var n=(0,C.A)(w().mark((function n(){return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=v,n.next=3,e.getSubtitleLanguages();case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n(),e.getEvents().addListener(N,(function(e){var n=e.data;v(n)}))}),[e,v]),(0,i.useEffect)((function(){var n=function(){var n=(0,C.A)(w().mark((function n(){return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=g,n.next=3,e.getPreferredSubtitleLanguage();case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();n()}),[e,g]);var b=function(){var n=(0,C.A)(w().mark((function n(t){return w().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.setPreferredSubtitleLanguage(t),g(t),t?l.logInteraction(a.subtitlesButtonFactory().hitUiReveal()):l.logInteraction(a.subtitlesButtonFactory().hitUiHide());case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}();return{isSupported:n.hasSubtitleSupport,availableLanguages:d,preferredLanguage:m,setPreferredLanguage:b}}(),f=v.isSupported,p=v.availableLanguages,m=v.preferredLanguage,b=v.setPreferredLanguage;return f&&0!==p.length?(0,g.jsx)(l.b,{renderInline:t,menu:(0,g.jsx)(x,{onSelectLanguage:b,languages:p,activeLanguage:m}),children:(0,g.jsx)(a.D,{noBackground:u,active:null!==m,label:o.Ru.get("subtitles-picker.heading"),children:(0,g.jsx)(r.j,{size:d})})}):null}))},14770:(e,n,t)=>{t.r(n),t.d(n,{VideoPlayer:()=>mn});var i=t(12341),r=t(30758),o=t(88677),a=(t(60287),t(44286)),l=t(13534),u=t(64399),s=t(93493),c=t(92107),d=t(52542),v=t(97500),f=t.n(v),p=t(11854),m=t(25159);const g="L30NtFiBvBcyDh05qn_u";var b=t(86070),h=function(e){var n=e.onMinimizeButtonClick;return(0,b.jsx)("div",{className:f()(g),children:(0,b.jsx)(p.$,{"aria-label":c.Ru.get("ad-formats.dismissAd"),colorSet:"overMedia",iconOnly:m.b,onClick:n,size:"small"})})},y=t(47540),k=t(58114);const x="aR68x7OIyGWzTgdtxZ6f",C="anoG0BFHzWPx97SA0qBF",j="CjNrWN36pkl9Lp6zxCxZ",w="Rn_VjXFoM0opnpQWlSw6",P="syutothNTJp78DxfFA5B",E="WAhXnEZZBOdLN1GhjuFs";var R=function(e){var n=e.advertiser,t=e.isMinimized,i=e.onMinimizeButtonClick,r=e.onVideoTakeoverClick,o=e.refCallback,a=e.href,l=e.isVerticalVideo,u=void 0!==l&&l,v=(0,s.NC)(k.okt,{loadingValue:!1})?".VTO__modal-slot":".Root__modal-slot",p=f()(x,(0,d.A)({},C,u));return(0,b.jsx)(y.A,{className:j,animation:{overlay:{base:w,beforeClose:E,afterOpen:P},closeTimeoutMs:300},isOpen:!t,parentSelector:function(){return document.querySelector(v)},shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:c.Ru.get("ad-formats.advertisement"),children:(0,b.jsxs)("div",{className:p,children:[(0,b.jsx)("a",{"aria-label":c.Ru.get("ad-formats.video-ad-overlay.cta-button",{advertiser:n}),className:p,"data-testid":"new-ads-npv-video-takeover-link",href:a,onClick:r,ref:o,target:"_blank"}),(0,b.jsx)(h,{onMinimizeButtonClick:i})]})})},A=t(59440),O=t(39994),L=t(19276),N=t(40329),V=t(5248),I=t(77970);const M="fFoN1cMJLIJo0k_vgNyw",_="Lk23rM5uSl5mgEXroOPH",S="yJ2Sz652eyijqIrRrwpJ",F="ZPVxrOnQOQc_5KDCNgcI",B="f14LfcDx_wvogzdXzoq9",D="QMMTQfEw3AIHFf4dTRp3",z="Hj1B5D7WgG4aZkU8meAp",K="nPKDEvIoCzySBR24pZiN",T="dqP_KBPyAygbxKtY3k3w";var U=function(e){var n,t=e.setOuterContainer,d=e.npbVideoAdRef,v=(0,o.wA)(),f=(0,V.o)((function(e){var n;return null!==(n=null==e?void 0:e.item)&&void 0!==n?n:void 0}),(function(e,n){return(null==e?void 0:e.uri)===(null==n?void 0:n.uri)})),p=(0,I.N)(f)&&null!==(n=f.url)&&void 0!==n?n:void 0,m=((0,I.N)(f)?f.advertiser:void 0)||"Advertiser",g=(0,o.d4)((function(e){var n;return null==e||null===(n=e.ads)||void 0===n||null===(n=n.vto)||void 0===n?void 0:n.isMinimized})),h=(0,I.N)(f)&&"portrait"===f.videoOrientation,x=(0,r.useRef)(),C=(0,a.zy)(),j=(0,O.w)(f),w=(0,s.NC)(k.GEz);(0,r.useEffect)((function(){x.current?v((0,A.iB)()):x.current=!0}),[v,C.pathname]);var P=(0,r.useState)(null),E=(0,i.A)(P,2),U=E[0],W=E[1];return(0,r.useEffect)((function(){return v((0,A.MW)()),function(){v((0,A.Oc)())}}),[v]),(0,r.useEffect)((function(){g?setTimeout((function(){null!==U&&t(d.current)}),200):null!==U&&t(U)}),[t,d,g,U]),j&&w?(0,b.jsx)(R,{advertiser:m,href:p?(0,L.H)(p):void 0,isMinimized:g,isVerticalVideo:h,onVideoTakeoverClick:function(){v((0,A.i2)(N.ee.CLICKED,N.Wh.VIDEO_TAKEOVER,N.Lv.VIDEO_PLAYER))},onMinimizeButtonClick:function(){v((0,A.Oc)()),v((0,A.i2)(N.ee.COLLAPSED,N.Wh.MINIMIZE_BUTTON,N.Lv.VIDEO_PLAYER))},refCallback:function(e){return W(e)}}):(0,b.jsx)(y.A,{className:z,animation:{overlay:{base:D,beforeClose:T,afterOpen:K},closeTimeoutMs:300},isOpen:!g,parentSelector:function(){return document.querySelector(".Root__modal-slot")},shouldCloseOnEsc:!1,shouldCloseOnOverlayClick:!1,contentLabel:c.Ru.get("ad-formats.advertisement"),children:(0,b.jsxs)("div",{className:M,children:[(0,b.jsxs)("div",{className:S,children:[(0,b.jsx)(l.E,{semanticColor:"textBase",variant:"bodySmallBold",className:F,children:c.Ru.get("ad-formats.advertisement")}),(0,b.jsx)("button",{"aria-label":c.Ru.get("ad-formats.dismissAd"),className:B,onClick:function(){v((0,A.Oc)()),v((0,A.i2)(N.ee.COLLAPSED,N.Wh.MINIMIZE_BUTTON,N.Lv.VIDEO_PLAYER))},children:(0,b.jsx)(u.M,{semanticColor:"textBase",size:"small"})})]}),(0,b.jsx)("a",{"data-testid":"video-takeover-link",href:p?(0,L.H)(p):void 0,onClick:function(){v((0,A.i2)(N.ee.CLICKED,N.Wh.VIDEO_TAKEOVER,N.Lv.VIDEO_PLAYER))},ref:function(e){return W(e)},className:_})]})})},W=function(e){var n=e.setOuterContainer,t=e.npbVideoAdRef;return(0,o.d4)((function(e){var n;return null==e||null===(n=e.ads)||void 0===n||null===(n=n.vto)||void 0===n?void 0:n.isHidden}))?null:(0,b.jsx)(U,{setOuterContainer:n,npbVideoAdRef:t})},H=t(54769),Z=t(8143),q=t(42936),G=t(15057);function Y(){var e=(0,r.useState)(!1),n=(0,i.A)(e,2),t=n[0],o=n[1],a=(0,r.useRef)(null),l=(0,G.YQ)((function(){a.current&&clearTimeout(a.current),a.current=setTimeout((function(){o(!1)}),1500),o(!0)}),100,{maxWait:100,leading:!0}),u=(0,r.useCallback)((function(e){o(e),l.cancel()}),[l]);return(0,r.useEffect)((function(){return function(){a.current&&clearTimeout(a.current)}}),[]),{isControlsVisible:t,setIsControlsVisible:u,handleKeepViewVisible:l}}var Q=t(26500),X=t(74308),J=t(4350),$=t(6894),ee=t(18591),ne=t(61548),te=t(85239),ie=t(96036),re=t(42444),oe=t(88560),ae=t(30235),le=t(11931),ue=t(59523),se=t(36906),ce=t(54294),de=t(91417),ve=t(12574);const fe="MBzbwWcyfbqSftBtnn3g";var pe=function(e){var n=e.noBackground,t=e.iconSize,i=void 0===t?"small":t,r=(0,se.d)(),o=r.setVideoPlayerUIFlag,a=r.videoPlayerUIFlags,l=r.videoPlayerMode,u=l===ce.K.cinema,v=(0,de.f)().uri,p=(0,ue.A)({referrer:"cinema-mode-toggle"}).hideLyrics,m=(0,s.NC)(k.Au4),g=(0,ve.r)(ee.E,{data:{uri:null!=v?v:"",identifier:ce.K.cinema}}),h=g.spec,y=g.logger;if(!m||l===ce.K.fullscreen)return null;return(0,b.jsx)("div",{className:f()((0,d.A)({},fe,u)),children:(0,b.jsx)(te.D,{noBackground:n,active:u,label:u?c.Ru.get("video-player.default-view"):c.Ru.get("video-player.cinema-mode"),onClick:function(){u?y.logInteraction(h.cinemaModeButtonFactory().hitUiHide()):y.logInteraction(h.cinemaModeButtonFactory().hitUiReveal()),p(),o(ce.n.cinema,!a.cinema)},children:u?(0,b.jsx)(ae.Q,{size:i}):(0,b.jsx)(le.C,{size:i})})})},me=t(48612),ge=t(8080),be=t(36955),he=t(21167),ye=t(72637),ke=t(27634);function xe(){var e=(0,o.wA)(),n=(0,he.XB)();return{enterPipVideoMode:(0,r.useCallback)((function(){e((0,ke.R)(ce.K.pip))}),[e]),leavePipVideoMode:(0,r.useCallback)((function(){n===ye.Z.NowPlayingView&&e((0,ke.R)(ce.K.npv))}),[e,n])}}var Ce=t(33350),je=t(80344);const we="fuONPgUcYO2bf15HunlX";var Pe=function(e){var n,t=e.noBackground,i=e.iconSize,r=void 0===i?"small":i,a=e.uri,l=(0,o.d4)(ge.c),u=l===ce.K.pip,s=xe(),v=s.enterPipVideoMode,p=s.leavePipVideoMode,m=(null!==(n=(0,oe.L)())&&void 0!==n?n:{}).item,g=(0,be.D)({item:m}).isActive,h=(0,V.o)(je.A3),y=(0,ve.r)(ee.E,{data:{uri:a,identifier:l}}),k=y.spec,x=y.logger,C=(0,me.u)({parentAbsoluteLocation:k.pipButtonContainerFactory().getAbsoluteLocation()});if(!h)return null;var j=c.Ru.get("video-player.default-view");return u||(j=g?c.Ru.get("miniplayer.close"):c.Ru.get("miniplayer.open-in")),(0,b.jsx)("div",{className:f()((0,d.A)({},we,u)),children:(0,b.jsx)(te.D,{noBackground:t,active:u,label:j,onClick:function(){(0,Ce.ge)()&&(0,Ce.SP)(),u?(p(),x.logInteraction(C.pipButtonFactory({uri:a}).hitUiHide())):(v(),C.pipButtonFactory({uri:a}).hitUiReveal())},children:(0,b.jsx)(Q.F,{size:r})})})},Ee=t(74449),Re=t(55437),Ae=t(53209),Oe=t(64869),Le=t(75397);const Ne="aHe1QDDI5hmYWAKf4MoR",Ve="DtWKCk0YYDlZT11U1niL",Ie="RTSxo7zS2ozOeg4gnC2c",Me="ZcIaDrsIojjWZ_Xf_6iN",_e="pLL2Ok4QckLG8GAWriCB";var Se=[{transform:"scale(1)",opacity:0},{transform:"scale(1.3)",opacity:1},{transform:"scale(1.6)",opacity:0}],Fe=[{transform:"scale(1)",opacity:1},{transform:"scale(1)",opacity:1}],Be={duration:500,easing:"ease-out"},De=function(e){var n,t,i=e.visible,a=e.className,l=e.darkOverlayOnHover,u=void 0!==l&&l,s=e.animatePlayPauseButtonOnClick,v=void 0===s||s,p=(0,se.d)().videoPlayerMode,m=(0,o.wA)(),g=(0,re.lZ)(),h=(0,Re.$)(),y=(0,r.useContext)(ie.s),k=p===ce.K.cinema,x=(0,Ae.j)(),C=(0,o.d4)((function(e){return e.platform.isDesktop})),j=(null!==(n=(0,oe.L)())&&void 0!==n?n:{}).item,w=null!==(t=null==j?void 0:j.uri)&&void 0!==t?t:"",P=(0,be.D)({item:j}),E=P.isActive,R=P.onClick,A=P.showButton,O=h.getCapabilities().hasPipSupport,L=(0,Oe.z)(),N=(0,V.o)((function(e){return e}),(function(e,n){var t,i;return(0,Le.a)(null==e?void 0:e.restrictions,null==n?void 0:n.restrictions)&&(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===(null==n||null===(i=n.item)||void 0===i?void 0:i.uri)&&(null==e?void 0:e.isPaused)===(null==n?void 0:n.isPaused)})),I=(0,re.Nh)(N),M=I.isPaused,_=I.canResume,S=I.canPause,F=(0,ve.r)(ee.E,{data:{uri:w,identifier:ce.K.npv}}),B=F.spec,D=F.logger,z=F.UBIFragment,K=(0,r.useRef)(null),T=(0,r.useRef)(null),U=(0,r.useCallback)((function(){var e,n=null;M&&_?(L.resume(),D.logInteraction(B.playButtonFactory().hitPlay({itemToBePlayed:w})),n=K):!M&&S&&(L.pause(),D.logInteraction(B.playButtonFactory().hitPause({itemToBePaused:w})),n=T),v&&null!==(e=n)&&void 0!==e&&null!==(e=e.current)&&void 0!==e&&e.animate&&n.current.animate(x?Fe:Se,Be)}),[S,_,M,D,L,B,w,v,x]),W=(0,r.useMemo)((function(){return k?null:A?(0,b.jsx)(te.D,{label:E?c.Ru.get("miniplayer.close"):c.Ru.get("miniplayer.open-in"),onClick:R,active:E,children:(0,b.jsx)(Q.F,{size:"small"})}):C&&O?(0,b.jsx)(Pe,{uri:w}):null}),[E,k,C,O,R,A,w]);return(0,b.jsxs)(z,{spec:B,children:[(0,b.jsxs)("div",{className:f()(Ne,a,(0,d.A)({},_e,i)),children:[(0,b.jsx)(Ee.C,{renderInline:!0}),(0,b.jsx)(pe,{}),W,g&&(0,b.jsx)(te.D,{label:c.Ru.get("npv.full-screen"),onClick:function(){null!=y&&y.current&&((0,Ce.X8)(y.current),m((0,ne.f)()))},children:(0,b.jsx)(X.L,{size:"small"})})]}),u&&(0,b.jsx)("div",{tabIndex:-1,className:f()(Ve,(0,d.A)({},_e,i))}),(0,b.jsxs)("div",{className:Ie,tabIndex:-1,onClick:U,onKeyDown:function(){},"aria-label":M?c.Ru.get("play"):c.Ru.get("pause"),role:"button",children:[(0,b.jsx)("div",{className:Me,ref:K,children:(0,b.jsx)(J.x,{size:"xlarge",width:48})}),(0,b.jsx)("div",{className:Me,ref:T,children:(0,b.jsx)($.B,{size:"xlarge",width:48})})]})]})};function ze(e,n){(0,r.useLayoutEffect)((function(){n.current&&e(n.current)}),[n,e])}var Ke=t(36605),Te=t(25314);const Ue="kJKEEG391Pf_PLzwG2Vm",We="gVnOoWHXwLnTNK2RRIKg";var He=function(e){var n=e.cinemaModeRef,t=e.setVideoContainer,i=(0,r.useRef)(null),o=(0,q.JT)().nowPlayingBarRef,a=(0,Ke.d)(),l=a.videoPlayerUIFlags,u=a.setVideoPlayerUIFlag;ze(t,i);var s=Y(),c=s.isControlsVisible,d=s.handleKeepViewVisible;return(0,r.useEffect)((function(){var e=function(e){"Escape"===e.key&&u(ce.n.cinema,!1)};return window.addEventListener("keydown",e),function(){window.removeEventListener("keydown",e)}}),[u,l.cinema]),n.current?o.current?(0,Z.createPortal)((0,b.jsxs)("div",{ref:i,className:Ue,onMouseMove:d,onFocus:d,"data-testid":"video-player-cinema",children:[(0,b.jsx)(Te.s,{containerElements:[n.current,o.current],active:!0,focusTrapOptions:{allowOutsideClick:!0}}),(0,b.jsx)(De,{visible:c,className:We})]}),n.current):(console.error("No ref found for nowPlayingBar!"),null):(console.error("No container found for cinema video!"),null)},Ze=t(58103),qe=function(e){var n,t=e.setVideoContainer,i=(0,r.useRef)(null);ze(t,i);var o=null===(n=window.documentPictureInPicture)||void 0===n?void 0:n.window,a=null==o?void 0:o.document.getElementById("document-pip-main-container"),l=(0,Re.$)();return(0,r.useEffect)((function(){return o&&l.setWindow(o),function(){l.setWindow(window)}}),[o,l]),a?(0,Z.createPortal)((0,b.jsx)("div",{ref:i,"data-testid":"video-player-document-pip",className:Ze.A.videoPlayerContainer}),a):(0,b.jsx)(b.Fragment,{})},Ge=r.memo((function(e){var n=e.setVideoContainer,t=e.fullscreenModeRef,i=(0,r.useRef)(null);return ze(n,i),t.current?(0,Z.createPortal)((0,b.jsx)("div",{"data-testid":"video-player-fullscreen",className:f()("VideoFullscreenMode"),children:(0,b.jsx)("div",{className:"VideoFullscreenMode__video-container",ref:i})}),t.current):(console.error("No container found for fullscreen video!"),null)})),Ye=t(496);const Qe="_2r290M0vbnbQGfhLbvq";var Xe=function(e){var n=e.setVideoContainer,t=(0,r.useRef)(null),i=(0,Ye.v7)();ze(n,t);var o=(0,r.useRef)(!0);(0,r.useEffect)((function(){return o.current=!0,function(){o.current=!1}}));var a=document.getElementById("VideoPlayerNpb_ReactPortal");return null===a?null:(0,Z.createPortal)((0,b.jsx)("div",{ref:t,hidden:!1,className:Qe,style:{position:"relative"},onMouseDown:function(e){t.current&&i.current&&(e.stopPropagation(),e.preventDefault())},"data-testid":"video-player-npb"}),a)},Je=t(95873),$e=t(70236);const en="H2mo30Z5kNiGZbZ9U2Nu",nn="TbZ7pNOfpFK2FmnFuQcW",tn="BRt_JFU0qTnWIGCaWWJY";var rn=function(e){var n=e.visible,t=(0,o.wA)(),i=f()(nn,(0,d.A)({},tn,n));return(0,b.jsx)("div",{className:en,children:(0,b.jsx)("div",{className:i,children:(0,b.jsx)(p.$,{"aria-label":c.Ru.get("npv.full-screen"),colorSet:"overMedia",iconOnly:X.L,onClick:function(e){e.stopPropagation(),e.preventDefault(),t((0,A.MW)()),t((0,A.i2)(N.ee.EXPANDED))},size:"small"})})})};const on="Qhq7SHNg9UlhtkK9I6Km",an="ZWx9Xu8F_WoC4M_KEbtW";var ln=function(e){var n,t=e.element,i=e.handleKeepViewVisible,r=e.isControlsVisible,a=e.item,l=e.scrollNodeRef,u=e.setIsControlsVisible,s=e.setVideoContainer,c=e.videoContainerRef;ze(s,c);var v=(0,o.wA)(),p="portrait"===a.videoOrientation,m=null!==(n=a.url)&&void 0!==n?n:void 0,g=f()(on,(0,d.A)({},an,p));return(0,Z.createPortal)((0,b.jsx)("div",{ref:c,hidden:!1,className:g,onMouseLeave:function(){u(!1)},onMouseDown:function(e){c.current&&l.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:i,onFocus:i,"data-testid":"ads-video-player-npv",children:m?(0,b.jsx)("a",{style:{zIndex:2},href:m,onClick:function(){v((0,$e.q5)(Je.c.VIDEO_PLAYER,Je.V.AD_NPV))},"data-testid":"video-player-ad-wrapper",children:(0,b.jsx)(rn,{visible:r})}):(0,b.jsx)(rn,{visible:r})}),t)};const un="ouiL5cH1WduxtprQ0Iig";var sn=function(e){var n=e.setVideoContainer,t=(0,r.useRef)(null),i=(0,Ye.v7)(),o=(0,V.o)((function(e){var n;return null!==(n=null==e?void 0:e.item)&&void 0!==n?n:void 0}),(function(e,n){return(null==e?void 0:e.uri)===(null==n?void 0:n.uri)}));ze(n,t);var a=(0,r.useRef)(!0);(0,r.useEffect)((function(){return a.current=!0,function(){a.current=!1}}));var l=Y(),u=l.isControlsVisible,s=l.setIsControlsVisible,c=l.handleKeepViewVisible,d=document.getElementById("VideoPlayerNpv_ReactPortal");return null===d?null:(0,I.N)(o)?(0,b.jsx)(ln,{element:d,handleKeepViewVisible:c,isControlsVisible:u,item:o,scrollNodeRef:i,setIsControlsVisible:s,setVideoContainer:n,videoContainerRef:t}):(0,Z.createPortal)((0,b.jsx)("div",{ref:t,hidden:!1,className:un,style:{position:"relative"},onMouseLeave:function(){s(!1)},onMouseDown:function(e){t.current&&i.current&&(e.stopPropagation(),e.preventDefault())},onMouseMove:c,onFocus:c,"data-testid":"video-player-npv",children:(0,b.jsx)(De,{visible:u,darkOverlayOnHover:!0})}),d)};t(83234);var cn=function(e){var n,t=(n=(0,r.useState)((function(){var e=document.createElement("div");return e.classList.add("VideoPlayer__container"),e})),(0,i.A)(n,1)[0]);if((0,r.useLayoutEffect)((function(){null!==e&&null!==t&&e.insertBefore(t,e.firstChild)}),[e,t]),t&&t.firstChild instanceof HTMLVideoElement){var o=t.firstChild;return"".concat(o.videoWidth,"/").concat(o.videoHeight)}return"16/9"},dn=t(3424),vn=t(61325),fn=t(76157).S.PICTURE_IN_PICTURE_CHANGED;var pn=function(e){var n=e.setVideoContainer,t=e.videoContainerRef;return ze(n,t),(0,b.jsx)("div",{ref:t,style:{display:"none"}})},mn=function(e){var n=e.npbVideoAdRef,t=e.cinemaModeRef,a=e.fullscreenModeRef,l=(0,o.wA)(),u=(0,Ke.d)().videoPlayerMode,s=(0,r.useRef)(null),c=(0,r.useRef)(),d=(0,r.useState)(null),v=(0,i.A)(d,2),f=v[0],p=v[1],m=(0,o.d4)((function(e){return e.platform.isDesktop})),g=(0,V.o)((function(e){var n,t=null!==(n=null==e?void 0:e.item)&&void 0!==n?n:void 0;return{isPlayingVideo:(0,je.A3)(e),isPlayingAd:(0,I.N)(t),playbackId:null==e?void 0:e.playbackId}})),h=g.isPlayingVideo,y=g.isPlayingAd,k=g.playbackId,x=(0,o.d4)((function(e){var n;return null==e||null===(n=e.ads)||void 0===n||null===(n=n.vto)||void 0===n?void 0:n.isMinimized}));if(cn(f),function(){var e=(0,V.o)((function(e){return{isPlayingVideo:(0,je.A3)(e),contextUri:null==e?void 0:e.context.uri}})),n=e.isPlayingVideo,t=e.contextUri,i=(0,se.d)().setVideoPlayerUIFlag,o=(0,dn.v)((function(e){var n=e.connectionStatus;return n===vn.zP.CONNECTED||n===vn.zP.CONNECTING}));(0,r.useEffect)((function(){var e=n&&!o;i(ce.n.videoAvailable,e)}),[n,o,i,t])}(),function(){var e=(0,V.o)(je.A3),n=(0,se.d)().setVideoPlayerUIFlag;(0,r.useEffect)((function(){var e=function(){n(ce.n.fullscreen,(0,Ce.ge)())};return window.addEventListener("fullscreenchange",e),document.addEventListener("fullscreenchange",e),window.addEventListener("fullscreenChange",e),document.addEventListener("fullscreenChange",e),window.addEventListener("webkitfullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),window.addEventListener("mozfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),function(){window.removeEventListener("fullscreenchange",e),document.removeEventListener("fullscreenchange",e),window.removeEventListener("fullscreenChange",e),document.removeEventListener("fullscreenChange",e),window.removeEventListener("mozfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),window.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e)}}),[e,n])}(),function(){var e=(0,Re.$)(),n=(0,Ke.d)().videoPlayerMode,t=xe().leavePipVideoMode,i=n===ce.K.pip;(0,r.useEffect)((function(){return e.getEvents().addListener(fn,(function(e){!e.data&&i&&t()}))}),[e,i,t]),(0,r.useEffect)((function(){var n,t,r=document.pictureInPictureElement;i&&!r&&(null===(n=e.setPip)||void 0===n||n.call(e,!0)),!i&&r&&(null===(t=e.setPip)||void 0===t||t.call(e,!1))}),[e,i])}(),function(){var e=(0,Re.$)(),n=(0,se.d)().videoPlayerMode,t=(0,r.useState)(!document.hidden),o=(0,i.A)(t,2),a=o[0],l=o[1],u=(0,r.useState)(!1),s=(0,i.A)(u,2),c=s[0],d=s[1];(0,r.useEffect)((function(){var e="visibilitychange",n=function(){l(!document.hidden)};return document.addEventListener(e,n),function(){document.removeEventListener(e,n)}}),[e,l]),(0,r.useEffect)((function(){var t=!(n===ce.K.pip||n===ce.K.documentPip||n!==ce.K.none&&a),i=e.getCapabilities().hasMinimizeBitrateSupport&&t;c!==i&&(e.setMinimizeBitrate(i),d(i))}),[e,n,a,c,d])}(),h&&y&&c.current!==k&&(l((0,A.MW)()),c.current=k),m&&h&&y&&u!==ce.K.pip&&!x)return(0,b.jsx)(W,{npbVideoAdRef:n,setOuterContainer:p});switch(u){case ce.K.fullscreen:return(0,b.jsx)(H.s,{children:(0,b.jsx)("div",{ref:s,children:(0,b.jsx)(Ge,{fullscreenModeRef:a,setVideoContainer:p})})});case ce.K.cinema:return(0,b.jsx)(H.s,{children:(0,b.jsx)("div",{ref:s,children:(0,b.jsx)(He,{cinemaModeRef:t,setVideoContainer:p})})});case ce.K.npv:return(0,b.jsx)(H.s,{children:(0,b.jsx)("div",{ref:s,children:(0,b.jsx)(sn,{setVideoContainer:p})})});case ce.K.documentPip:return(0,b.jsx)(H.s,{children:(0,b.jsx)("div",{ref:s,children:(0,b.jsx)(qe,{setVideoContainer:p})})});case ce.K.nowPlayingBar:return(0,b.jsx)(H.s,{children:(0,b.jsx)("div",{ref:s,children:(0,b.jsx)(Xe,{setVideoContainer:p})})});case ce.K.none:default:return(0,b.jsx)("div",{ref:s,children:(0,b.jsx)(pn,{videoContainerRef:s,setVideoContainer:p})})}}},42444:(e,n,t)=>{t.d(n,{sY:()=>P,Nh:()=>w,bo:()=>R,r3:()=>j,EX:()=>C,lZ:()=>x});var i=t(62822),r=t(52542),o=t(93091),a=t.n(o),l=(t(7651),t(30456),t(26701),t(25550),t(47994),t(76588),t(37417),t(11737),t(51691),t(702),t(5672),t(43379),t(34192),t(88856),t(51565),t(15342),t(18316),t(93493)),u=t(86295),s=(t(87718),new u.l("queryFullscreenMode","query","5aa77fcd9a5b65f829d8dee4000703ff1a7ff68e813c60999c0b2dce754240e2",null)),c=t(58114),d=t(5248),v=t(77970),f=t(51126),p=t(39850),m=t(93892),g=t(64044),b=t(80344),h=t(82704);function y(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function k(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?y(Object(t),!0).forEach((function(n){(0,r.A)(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):y(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}var x=function(){var e=(0,l.NC)(c.WYm,{loadingValue:!1});return(0,d.o)(b.A3)||e};function C(e){var n,t,i,r,o,a,l;return(0,m.v)(e)?{uri:e.uri,name:e.name,creatorName:null===(n=e.artists[0])||void 0===n?void 0:n.name,coverArtImageUrl:null===(t=e.images)||void 0===t||null===(t=t[0])||void 0===t?void 0:t.url,duration:e.duration.milliseconds}:(0,p.p)(e)?{uri:e.uri,name:e.name,creatorName:e.show.name,coverArtImageUrl:null===(i=e.images)||void 0===i||null===(i=i[0])||void 0===i?void 0:i.url,duration:e.duration.milliseconds}:(0,f.d)(e)?{uri:e.uri,name:e.name,creatorName:e.book.name,coverArtImageUrl:null===(r=e.images)||void 0===r||null===(r=r[0])||void 0===r?void 0:r.url,duration:e.duration.milliseconds}:(0,v.N)(e)?{uri:e.uri,name:null!==(o=e.title)&&void 0!==o?o:"",creatorName:null!==(a=e.advertiser)&&void 0!==a?a:"",coverArtImageUrl:null===(l=e.images)||void 0===l||null===(l=l[0])||void 0===l?void 0:l.url,duration:e.duration.milliseconds}:(0,g.v)(e)||void 0===e?void 0:(0,h.d)(e)}function j(e){var n,t=C(e);return(0,m.v)(e)||(0,p.p)(e)||(0,f.d)(e)||(0,v.N)(e)?k(k({},t),{},{duration:e.duration.milliseconds,mediaType:(n=e.mediaType,"video"===n||"mixed"===n?"video":"audio")}):(0,g.v)(e)||void 0===e?void 0:(0,h.d)(e)}function w(e){var n,t;return{contextName:null==e||null===(n=e.context.metadata)||void 0===n?void 0:n.context_description,contextUri:(null==e?void 0:e.context.uri)||void 0,position:null!==(t=null==e?void 0:e.positionAsOfTimestamp)&&void 0!==t?t:void 0,timestamp:null==e?void 0:e.timestamp,isPaused:null==e?void 0:e.isPaused,canPause:null==e?void 0:e.restrictions.canPause,canResume:null==e?void 0:e.restrictions.canResume}}function P(e,n){return E.apply(this,arguments)}function E(){return(E=(0,i.A)(a().mark((function e(n,t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",n(s,{artistUri:t}).then((function(e){var n,t;if("Artist"===(null==e||null===(n=e.data)||void 0===n?void 0:n.artistUnion.__typename))return null===(t=e.data.artistUnion.visuals.headerImage)||void 0===t||null===(t=t.sources[0])||void 0===t?void 0:t.url})).catch((function(){})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function R(e,n,t){if(e&&t&&t.hasLyrics)return{status:n?"loading":"success",content:{provider:t.provider,syncType:t.syncType,lines:t.lyrics.map((function(e){return{timestamp:Number(e.start),text:e.text}}))}}}},59523:(e,n,t)=>{t.d(n,{A:()=>l});var i=t(44286),r=t(51295),o=t(36906),a=t(54294);function l(e){var n=e.referrer,t=e.onChange,l=(0,i.Zp)(),u=(0,r.$)(),s=u.isActive,c=u.routeDestination,d=(0,o.d)().setVideoPlayerUIFlag,v=function(){s||(d(a.n.cinema,!1),l(c,{state:{referrer:n}}),null==t||t(c))},f=function(){s&&(l(-1),null==t||t(null))};return{isActive:s,showLyrics:v,hideLyrics:f,toggleLyrics:function(){s?f():v()}}}},36955:(e,n,t)=>{t.d(n,{D:()=>c});var i=t(30758),r=t(49213),o=(t(60287),t(36906)),a=t(54294),l=t(8574),u=t(70643),s=t(12574),c=function(e){var n=e.item,t=e.onClick,c=(0,l.W)(),d=(0,u.H)(),v=d.capabilities.isEnabled,f=d.isOpen,p=d.close,m=d.open,g=d.canOpen,b=(0,o.d)().videoPlayerMode,h=(0,s.r)(r.h9,{data:{identifier:b===a.K.cinema?r.gw.CINEMA:r.gw.DESKTOP}}),y=h.spec,k=h.logger,x=(0,i.useCallback)((function(){var e;v&&(f?(p(),null!=n&&n.uri&&k.logInteraction(y.pipButtonFactory({uri:n.uri}).hitUiHide()),e="close-picture-in-picture"):(m(),null!=n&&n.uri&&function(e){var n=e.spec,t=e.logger,i=e.uri,r=window.documentPictureInPicture;if(r){var o=function(e){setTimeout((function(){var r,o,a=null===(r=e.window)||void 0===r?void 0:r.innerWidth,l=null===(o=e.window)||void 0===o?void 0:o.innerHeight;if(a&&l){var u=n.pipButtonFactory({uri:i}).hitUiOpenWindow({widthPx:a,heightPx:l});t.logInteraction(u)}}),100),r.removeEventListener("enter",o)};r.addEventListener("enter",o)}}({spec:y,logger:k,uri:n.uri}),e="show-picture-in-picture"),null==t||t(!f,null==n?void 0:n.uri),c({type:"click",intent:e,targetUri:null==n?void 0:n.uri,itemIdSuffix:"picture-in-picture-toggle"}))}),[p,v,f,null==n?void 0:n.uri,k,t,c,m,y]);return{showButton:g,isActive:f,onClick:x}}},55437:(e,n,t)=>{t.d(n,{$:()=>o});var i=t(53286),r=t(3376);function o(){return(0,r.N)(i.n)}},33350:(e,n,t)=>{t.d(n,{SP:()=>r,X8:()=>i,ge:()=>o});var i=function(e){e.requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen&&e.webkitRequestFullscreen()},r=function(){document.fullscreenElement&&document.exitFullscreen?document.exitFullscreen():document.mozFullScreen&&document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitIsFullScreen&&document.webkitExitFullscreen&&document.webkitExitFullscreen()},o=function(){return!!(document.fullscreenElement||document.webkitIsFullScreen||document.mozFullScreen)}},58103:(e,n,t)=>{t.d(n,{A:()=>i});const i={videoPlayerContainer:"ngkFeIGFyNUaxRspbs5H"}}}]);
//# sourceMappingURL=dwp-video-player.js.map