"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9129,5817,9383],{38945:(e,t,n)=>{n.d(t,{U:()=>s});var i=n(99),r=n(72365),o=n(10806),a=n(86070),s=function(e){var t=e.menu,n=e.onClick,s=e["aria-label"];return(0,a.jsx)(o.b,{menu:t,children:(0,a.jsx)(r.e,{size:r.M.xs,label:i.Ru.get("more"),ariaLabel:s,onClick:n})})}},61095:(e,t,n)=>{n.d(t,{n:()=>l});var i=n(51488),r=n(48),o=(n(7651),n(83234),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316),n(84701)),a=n(98538),s=n(86070),d=["icon","activeIcon","label","isActive"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var l=function(e){var t=e.icon,n=e.activeIcon,i=e.label,c=e.isActive,l=(0,r.A)(e,d);return(0,s.jsx)(a.Zp,{label:i,children:(0,s.jsx)(o.H,u({"aria-label":"".concat(i,", ").concat(c?"selected":"unselected",", button"),"aria-pressed":c,semanticColor:c?"textBrightAccent":"textSubdued",iconOnly:c?n:t,"aria-haspopup":"menu",size:"small"},l))})}},53969:(e,t,n)=>{n.d(t,{I:()=>u});var i=n(30758),r=n(92600),o=n(7852),a=n(2860),s=n(63130),d=n(28085),c=n(86070),u=function(e){var t,n=e.uri,u=e.title,l=e.clickUrl,v=e.onClick,f=e.variant,m=e.semanticColor,p=e.testid,x=void 0===p?"ad-link":p,y=(0,i.useMemo)((function(){var e;return null===(e=(0,a.o_h)(l))||void 0===e?void 0:e.toURLPath(!0)}),[l]);return y?t=(0,c.jsx)(s.N,{to:y,dir:"auto","data-testid":x,children:u}):l&&(t=(0,c.jsx)(r.Y,{href:l,"data-testid":x,onClick:v,semanticColor:m,standalone:!0,dir:"auto",children:u})),(0,c.jsx)(d.r,{title:u,children:(0,c.jsx)(o.E,{as:"p",variant:f,semanticColor:m,dir:"auto",children:t||u})},n)}},39129:(e,t,n)=>{n.r(t),n.d(t,{AdsNpv:()=>Ut,default:()=>Ft});n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316);var i=n(51488),r=n(97500),o=n.n(r),a=n(65277),s=n(8312),d=n(55815),c=n(7852),u=n(99),l=n(28085);const v={standardHeader:"OnnbOInFe49hYMQmhwUC",fixedHeader:"XZaBo7y3JfnBbjVV9TZo",verticalVideoHeader:"UP1rH6cQZiAZCdkPnDOg"};var f=n(86070),m=function(e){var t=e.item,n=e.variant,i=void 0===n?"bodyMediumBold":n,r=e.semanticColor,o=void 0===r?"textBase":r,a=e.experience,s=v["".concat(void 0===a?"standard":a,"Header")],d=t.isPodcastAd?u.Ru.get("ad-formats.npv.header.podcast-context"):u.Ru.get("ad-formats.npv.header.music-context");return(0,f.jsx)("div",{className:s,children:(0,f.jsx)(l.r,{children:(0,f.jsx)(c.E,{variant:i,semanticColor:o,children:d})},d)})},p=n(96463);const x="UhO5sUnZ2AoTQjzRdVvw";var y=function(e){var t=e.url;return(0,f.jsx)("div",{className:x,children:(0,f.jsx)(p._,{testid:"cover-art-image",loading:"lazy",src:t})})},j=function(e){var t=e.item,n=e.visualEnhancementUrl;return(0,f.jsx)(y,{item:t,url:n})},b=function(e){return(0,f.jsx)(f.Fragment,{})};const h="pvAyLo3KN8QP7KxQtiub",g="r4EqB8Z5_aywMW_8I84P";function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function k(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _=function(e){var t,n=e.item;return"video"===(null==n||null===(t=n.metadata)||void 0===t?void 0:t["ad.canvas.type"])?(0,f.jsx)(b,k({},e)):(0,f.jsx)(j,k({},e))},I=function(e){return(0,f.jsxs)("div",{className:h,children:[(0,f.jsx)("div",{className:g}),(0,f.jsx)(_,k({},e))]})},A=(n(83234),n(38945)),E=n(16150),w=n(12046);const P="iDW7b6oChePRpgfDFY3U";var C=function(e){var t=e.item;return(0,f.jsxs)("div",{className:P,children:[(0,f.jsx)(w.T,{item:t}),(0,f.jsx)(E.t,{item:t})]})},T=n(85817),N=n(89383);const S="JiMklw0itqYJ1aE76Vi8";var M=function(e){var t=e.item;return(0,f.jsxs)("div",{className:S,children:[(0,f.jsx)(N.ContextAdTitle,{item:t,surface:"AD_NPV"}),(0,f.jsx)(T.ContextAdSubtitle,{item:t,surface:"AD_NPV"})]})},D=n(19224),V=n(81752),q=n(96229),R=n(1131);function U(){var e=(0,R.vh)();return{linkUbiEvent:function(t){var n=t.adId,i=t.ubiEventId,r=t.product,o=t.format,a=t.requestId;e.send((0,q.A)({ad_id:n,ad_request_id:a,ad_format:o,content_type:r,ubi_event_id:i}))}}}var F=n(30758),Q=n(56818),z=n(46400),Z=n(94822),B=n(57826),L=n(65941),W=n(78378),H=n(14816),Y=n(68113);function G(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function J(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?G(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var K=function(e){var t=e.item,n=e.spec,i=e.contextTrack,r=(0,Z.wA)(),o=(0,Y.s)(),a=U().linkUbiEvent,s="".concat((0,D.Mj)(i),"_").concat((0,D.q5)(i));return(0,f.jsx)(z.D,{role:"menuitem",testid:"about-this-ad-context-menu-item",leadingIcon:(0,f.jsx)(B.p,{size:"small"}),"aria-label":u.Ru.get("ad-formats.dsa.aboutThisAd"),onClick:function(){var e;r((0,W.Oc)()),r((0,L.b0)(t));var d=n.contextMenuFactory({identifier:null===(e=t.metadata)||void 0===e?void 0:e.lineitem_id,reason:s}).triggerDsaFactory().hitUiNavigate({destination:"/context_menu"}),c=o.logInteraction(d).interactionId;a({adId:t.adId,requestId:t.requestId,ubiEventId:c,format:(0,D.Mj)(i),product:(0,D.q5)(i)})},divider:"before",children:u.Ru.get("ad-formats.dsa.aboutThisAd")})},X=(0,F.memo)((function(e){return(0,f.jsx)(H.pZ,{value:"about-this-ad",children:(0,f.jsx)(K,J({},e))})})),$=(0,F.memo)((function(e){var t=e.item,n=e.spec,i=e.contextTrack,r=(0,Y.s)(),o=U().linkUbiEvent,a="".concat((0,D.Mj)(i),"_").concat((0,D.q5)(i));return(0,F.useEffect)((function(){var e,s;s=r.logImpression(n.contextMenuFactory({identifier:null===(e=t.metadata)||void 0===e?void 0:e.lineitem_id,reason:a}).impression()),o({adId:t.adId,requestId:t.requestId,format:(0,D.Mj)(i),product:(0,D.q5)(i),ubiEventId:s})}),[]),(0,f.jsx)(H.pZ,{value:"ad",children:(0,f.jsxs)(Q.W,{children:[(0,f.jsx)(H.pZ,{value:"ad-title",children:(0,f.jsx)(z.D,{role:"menuitem",testid:"ad-title-context-menu-item",divider:"after",disabled:!0,children:t.metadata.advertiser})}),(0,f.jsx)(X,{item:t,spec:n,contextTrack:i})]})})})),ee=n(49093);const te="NYcvpWpgvQYZploOD6rI",ne="OpXrpghZvv_w9ygosJFP";var ie=function(e){var t=e.item,n=e.spec,i=(0,a.NC)(ee.SeK,{loadingValue:!1}),r=(0,V.mr)(),o=(0,Y.s)(),s=U().linkUbiEvent,d="".concat((0,D.Mj)(t),"_").concat((0,D.q5)(t));return(0,f.jsxs)("div",{className:te,children:[(0,f.jsx)(M,{item:t}),(0,f.jsxs)("div",{className:ne,children:[(0,f.jsx)(C,{item:t}),i&&(null==r?void 0:r.isDsaEligible)&&(0,f.jsx)("div",{"data-testid":"PanelHeader_AdContextMenuButton",children:(0,f.jsx)(A.U,{menu:(0,f.jsx)($,{item:r,contextTrack:t,spec:n}),onClick:function(){if(r){var e,i=n.infoContainerFactory().contextMenuButtonFactory({identifier:null===(e=r.metadata)||void 0===e?void 0:e.lineitem_id,reason:d}).hitUiNavigate({destination:"/context_menu"}),a=o.logInteraction(i).interactionId;s({adId:r.adId,requestId:r.requestId,format:(0,D.Mj)(t),product:(0,D.q5)(t),ubiEventId:a})}}})})]})]})},re=n(25786),oe=function(e){var t=e.item,n=e.context,i=e.index;return n?(0,f.jsx)(re.h,{context:n,item:t,index:i}):null};const ae="tD84X2SD0IicMx3osK8a";function se(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function de(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?se(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):se(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ce=function(e){var t=e.item,n=e.spec,i=e.currentPanel,r=e.canvasVisualEnhancementUrl;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(I,{item:t,visualEnhancementUrl:r,currentPanel:i,spec:n}),(0,f.jsx)("div",{className:ae,children:(0,f.jsx)(ie,{item:t,currentPanel:i,spec:n})})]})},ue=function(e){var t=e.item,n=e.spec,i=e.context,r=e.index,o=e.currentPanel;return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(oe,{item:t,context:i,index:r}),(0,f.jsx)(ie,{item:t,currentPanel:o,spec:n})]})},le=function(e){var t,n,i=e.item,r=(0,a.NC)(ee.Qdk,{loadingValue:!1}),o=null==i||null===(t=i.metadata)||void 0===t?void 0:t["ad.canvas.type"],s="image"===o||"video"===o,d=null===(n=i.metadata)||void 0===n?void 0:n["ad.canvas.url"];return!!(r&&s&&"image"===o&&d)?(0,f.jsx)(ce,de(de({},e),{},{canvasVisualEnhancementUrl:d})):(0,f.jsx)(ue,de({},e))},ve=(n(79024),n(51234),n(97460),n(93577),n(80080)),fe=n(72300),me=n(10659),pe=n(4640),xe=n(95707),ye=n(90044),je=n(77935),be=n(63130);const he="mJucukPuB6OTWgaD4MZk",ge="i3o8ABclZov7rz8zzKYP";var Oe=(0,F.lazy)((function(){return n.e(6381).then(n.bind(n,86381))})),ke=function(e){var t=e.item,n=e.backgroundColor,i=e.className,r=(0,Z.wA)(),a=(0,D.iz)(t),s=a.url,d=a.buttonMessage,c=a.tagline,l=d||u.Ru.get("ad-formats.learnMore");if(!s)return null;var v=o()(he,i),m=(0,xe.H)(s);return(0,f.jsx)(be.N,{to:m,"data-testid":"ad-companion-card",className:v,onClick:function(){r((0,je.q5)(ye.c.COMPANION_CARD,ye.V.AD_NPV))},children:(0,f.jsx)(ve.v,{style:{backgroundColor:n},className:ge,onClickHint:u.Ru.get("ad-formats.learnMore"),variant:"tinted",horizontalGap:(0,fe.po)("looser"),id:t.uri,title:(0,f.jsx)(me.d,{variant:"mestoBold","data-testid":"ad-companion-card-tagline",children:c||l}),trailing:(0,f.jsx)(F.Suspense,{fallback:(0,f.jsx)(pe.V,{}),children:c?(0,f.jsx)(Oe,{text:l,clickUrl:m,onClick:function(){r((0,je.q5)(ye.c.CTA_BUTTON,ye.V.AD_NPV))}}):(0,f.jsx)(pe.V,{semanticColor:"textBase"})})})})},_e=(n(40065),n(4865),n(95334)),Ie=function(){return(0,V.yU)().logger};const Ae="_9mvd0bTv9vUHyKGzvBNV",Ee="hQjIgVttFxVwEZ52g6Rg";var we=function(e){var t=e.isPodcastAd,n=e.validationResult,i=Ie();(0,F.useEffect)((function(){n.isValid?i.logSurveyAdEventWithoutAd({event:"survey_on_connect",eventReason:"secondary_device"}):(i.logAdEvent({event:"errored",reason:"survey_malformed"}),i.logSurveyAdEventWithoutAd({event:"survey_malformed",eventReason:n.errorMessage?n.errorMessage:"unknown validation error"}))}),[]),(0,F.useEffect)((function(){var e=document.getElementById("connected-box");if(e){var t=e.offsetWidth;e.style.height="".concat(t,"px")}}),[]);var r=t?u.Ru.get("ad-formats.survey-podcast-content"):u.Ru.get("ad-formats.survey-music-content");return(0,f.jsx)("div",{className:Ee,id:"connected-box",children:(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)(_e.b,{size:"xxlarge",spacing:"small",semanticColor:"textBase"}),(0,f.jsx)(c.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:Ae,semanticColor:"textBase",children:n.isValid?u.Ru.get("ad-formats.survey-connected-note"):u.Ru.get("error.generic")}),(0,f.jsx)(c.E,{children:r})]})})},Pe=(n(60287),n(69093)),Ce=(n(25550),n(15342),n(4435)),Te=n(96692),Ne=n(52937),Se=n(20529);const Me="zr0dLusU4AgiRoEVZVx_",De="FQKI6EvRALxogOFyociA";function Ve(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function qe(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ve(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ve(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Re=function(e){var t=e.data,n=e.selected,i=e.handleOptionClick,r=e.className,a=e.ad,s=Ie(),d=function(e,r){var o={id:e.id,"aria-label":"Select ".concat(e.primaryText)};return t.surveyQuestionType===Ce.xV.MULTI_SELECT?(0,f.jsx)(Te.c,qe(qe({},o),{},{checked:n.has(e.id),onChange:function(){i({optionId:e.id,isExclusive:e.isExclusive,questionType:t.surveyQuestionType,position:r}),s.logSurveyAdEventWithAd({optionId:e.id,questionId:t.id,event:n.has(e.id)?"event_option_deselected":"event_option_selected",position:r,ad:a})}})):(0,f.jsx)(Ne.M,qe(qe({},o),{},{checked:n.has(e.id),onChange:function(){i({optionId:e.id,isExclusive:e.isExclusive,questionType:t.surveyQuestionType,position:r}),s.logSurveyAdEventWithAd({optionId:e.id,questionId:t.id,event:"event_option_selected",position:r,ad:a})}}))};return(0,f.jsx)(Se.g,{labelFor:t.id,withFieldset:!0,className:o()(Me,r),children:(0,f.jsx)("div",{children:t.surveyQuestionOptions.map((function(e,r){return(0,f.jsx)(ve.v,{className:De,id:e.id,variant:"elevated",title:e.primaryText,leading:d(e,r),isSelected:n.has(e.id),onClick:function(){i({optionId:e.id,isExclusive:e.isExclusive,questionType:t.surveyQuestionType,position:r}),s.logSurveyAdEventWithAd({optionId:e.id,questionId:t.id,event:n.has(e.id)?"event_option_deselected":"event_option_selected",position:r,ad:a})}},e.id)}))})})},Ue=n(36734);const Fe="o1cH6TNkpq2sTkq1EAZU",Qe="urYkLZy00wWdQH24F1Ja",ze="GneD3mdmK5FDZVz6bzhB",Ze="MTSvglGhr7gd3paX4exJ";var Be=function(e){var t=e.selected,n=e.submitted,r=e.handleClick;return(0,f.jsx)("div",{className:o()(Fe,Qe,(0,i.A)({},ze,n)),children:(0,f.jsx)(Ue.$,{disabled:0===t.size,size:"medium",fullWidth:!0,colorSet:"invertedLight",label:"Submit","data-testid":"survey-submit-button",onClick:r,id:Ze,children:u.Ru.get("ad-formats.survey-submit-button")})})},Le=n(1628);const We="HgfSrPwFpIvBDXNMx0NO",He="FjDNaretUQGhB3YYHUaZ",Ye="MDmTCQhrCnUXjUhyWx_A";var Ge=function(e){var t=e.showThankYou,n=e.ad,r=e.questionId,a=Ie();return(0,F.useEffect)((function(){t&&a.logSurveyAdEventWithAd({questionId:r,event:"event_thank_you_displayed",ad:n})}),[r,t]),(0,f.jsxs)("div",{className:o()(He,(0,i.A)({},Ye,t)),children:[(0,f.jsx)(Le.T,{size:"xxlarge",spacing:"small"}),(0,f.jsx)(c.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",className:We,children:u.Ru.get("ad-formats.survey-thankyou")})]})},Je=n(71523);n(71425);function Ke(){var e=(0,F.useState)(new Map),t=(0,Je.A)(e,2),n=t[0],i=t[1],r=(0,F.useState)(!1),o=(0,Je.A)(r,2),a=o[0],s=o[1];return{selected:n,handleOptionClick:function(e){var t=e.optionId,r=e.isExclusive,o=e.questionType,a=e.position,s=new Map(n);o===Ce.xV.MULTI_SELECT?s=function(e){var t,n=e.optionId,i=e.selected,r=e.isExclusive,o=e.position;i.has(n)?(t=new Map(i)).delete(n):t=function(e){var t=e.optionId,n=e.selected,i=e.isExclusive,r=e.position,o=new Map(n);i&&o.clear();return n.forEach((function(e,t){e.isExclusive&&o.delete(t)})),o.set(t,{isExclusive:i,position:r}),o}({optionId:n,isExclusive:r,selected:i,position:o});return t}({optionId:t,isExclusive:r,selected:n,position:a}):o===Ce.xV.SINGLE_SELECT&&(s=function(e){var t=e.optionId,n=e.selected,i=e.position,r=new Map(n);n.has(t)||(r=function(e){var t=e.optionId,n=e.selected,i=e.position,r=new Map(n);return r.clear(),r.set(t,{isExclusive:!0,position:i}),r}({optionId:t,selected:n,position:i}));return r}({optionId:t,selected:n,position:a})),i(s)},setSurveyIsSubmitted:s,submitted:a}}var Xe=n(65968),$e=n(63318),et=(0,Xe.A)((function e(t){(0,$e.A)(this,e),this.isValid=t.isValid,this.errorMessage=t.errorMessage})),tt=(n(42486),n(26851),n(68216),n(9750),n(78397),n(18563)),nt=n(94934),it=function(e){var t,n=e.ad,i=e.eventSender,r=e.logger,o=e.questionId,a=e.selected,s=[];a.forEach((function(e,t){var n=function(e){var t=e.id,n=e.selectedOption;return nt.$y.create({selectedSurveyQuestionOptionId:t,optionPositionIndex:n.position.toString()})}({id:t,selectedOption:e});s.push(n)}));var d=nt.Tl.create({surveyQuestionId:o,selectedSurveyOptions:s}),c=nt.BN.create({surveyQuestionAnswers:[d]}),u=nt.A7.create({survey:c});r.logAdEvent({event:"survey_submitted",payload:u}),r.logAdEvent({event:"ended"}),i.send((0,tt.i)({ad_id:n.adId,event:"event_survey_submitted",format:(0,Ce.gh)(n.format).toLowerCase(),in_focus:!0,lineitem_id:null===(t=n.metadata)||void 0===t?void 0:t.lineitem_id,product_name:"brand_survey",question_id:o,request_id:n.requestId,response:JSON.stringify(u),slot:n.slot}))};const rt="QcjxDZqAGwQOqerAjHdc",ot="GZDC018jhUZA8opoHkpM",at="xNk9rFVlHRml2zumyfQI",st="rA7_f0w9lodVUT7ad3RC",dt="FfcoZWtdfcG0Ihbesrub",ct="q1uiO23dnmvrVxxEOq9l",ut="KRI6OoYy611XXayRUTyE";var lt=function(e){var t=e.question,n=e.ad,r=Ie(),a=(0,R.vh)(),s=(0,V.dY)();(0,F.useEffect)((function(){r.logSurveyAdEventWithAd({questionId:t.id,event:"event_creative_viewed",ad:n})}),[t.id]);var d=Ke(),u=d.selected,l=d.handleOptionClick,v=d.submitted,m=d.setSurveyIsSubmitted;(0,F.useEffect)((function(){t.surveyQuestionType in Ce.xV||(r.logAdEvent({event:"errored",reason:"survey_malformed"}),s.skipToNext())}));return(0,f.jsxs)(Pe.a,{className:o()(rt,st),padding:"looser",children:[(0,f.jsxs)("div",{className:o()(ot,(0,i.A)({},ct,v)),children:[(0,f.jsxs)("div",{className:ut,children:[(0,f.jsx)(c.E,{as:"h1",variant:"titleSmall",paddingBottom:"tighter-2",children:t.primaryText}),(0,f.jsx)(c.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:t.secondaryText})]}),(0,f.jsx)(Re,{className:o()(at,dt),ad:n,selected:u,handleOptionClick:l,data:t})]}),(0,f.jsx)(Be,{handleClick:function(){m(!0),it({eventSender:a,ad:n,selected:u,logger:r,questionId:t.id}),setTimeout((function(){s.skipToNext()}),2e3)},submitted:v,selected:u}),(0,f.jsx)(Ge,{showThankYou:v,ad:n,questionId:t.id})]})},vt=function(e){var t=e.survey,n=e.ad;return t?(0,f.jsx)(lt,{question:null==t?void 0:t.surveyQuestions[0],ad:n}):null},ft=function(e){if(!e)return new et({isValid:!1,errorMessage:"no ad"});var t,n,i,r=function(e){return null==e?void 0:e.companions.find((function(e){return e.survey}))}(e);return r?!r||null!==(n=(t=r).survey)&&void 0!==n&&n.surveyQuestions&&(null===(i=t.survey)||void 0===i?void 0:i.surveyQuestions.length)>0?r&&!function(e){var t,n=null===(t=e.survey)||void 0===t?void 0:t.surveyQuestions.filter((function(e){return e.surveyQuestionOptions.length>0}));return!!n&&(null==n?void 0:n.length)>0}(r)?new et({isValid:!1,errorMessage:"survey question missing options"}):r&&!function(e){var t,n,i=null===(t=e.survey)||void 0===t?void 0:t.surveyQuestions.filter((function(e){return(0,Ce.BM)(e.surveyQuestionType)===Ce.xV.MULTI_SELECT||(0,Ce.BM)(e.surveyQuestionType)===Ce.xV.SINGLE_SELECT}));return(null==i?void 0:i.length)===(null===(n=e.survey)||void 0===n?void 0:n.surveyQuestions.length)}(r)?new et({isValid:!1,errorMessage:"one or more questions have invalid survey type"}):r&&!function(e){var t,n,i=null===(t=e.survey)||void 0===t?void 0:t.surveyQuestions.filter((function(e){return e.primaryText&&e.primaryText.length>0}));return(null==i?void 0:i.length)===(null===(n=e.survey)||void 0===n?void 0:n.surveyQuestions.length)}(r)?new et({isValid:!1,errorMessage:"one or more questions are missing the primary text"}):r&&!function(e){var t,n,i,r=null===(t=e.survey)||void 0===t?void 0:t.surveyTransparencyContent;return!(null==r||null===(n=r.transparencyLabel)||void 0===n||!n.length||null==r||null===(i=r.transparencyUrl)||void 0===i||!i.length)}(r)?new et({isValid:!1,errorMessage:"survey missing transparency information"}):new et({isValid:!0,errorMessage:void 0}):new et({isValid:!1,errorMessage:"survey missing question"}):new et({isValid:!1,errorMessage:"ad missing survey companion"})},mt=(0,F.memo)((function(e){var t=e.displayText,n=e.url,i=e.ad,r=e.questionId,o=Ie();return(0,F.useEffect)((function(){o.logSurveyAdEventWithAd({questionId:r,event:"event_context_menu",ad:i})}),[r]),(0,f.jsx)(Q.W,{children:(0,f.jsx)(z.D,{role:"menuitem",leadingIcon:(0,f.jsx)(B.p,{size:"small"}),"aria-label":"".concat(t,", link"),to:n,children:t})})})),pt=n(7585);const xt="iFWtvDR8p3PNwLx46nWu",yt="wj4kWjE4PuHVGqEf0ohK";var jt=function(e){var t,n,i=e.item,r=(0,V.mr)(),o=ft(r),a=(0,F.useMemo)((function(){var e;return null==r||null===(e=r.companions.find((function(e){return e.survey})))||void 0===e?void 0:e.survey}),[r]),s=null==a?void 0:a.surveyTransparencyContent,d=null===(t=(0,pt.l)().devices.find((function(e){return"local_device"===e.id})))||void 0===t?void 0:t.isActive;return(0,f.jsxs)("div",{className:yt,children:[r&&d&&o.isValid?(0,f.jsx)(vt,{survey:a,ad:r}):(0,f.jsx)(we,{isPodcastAd:null==i?void 0:i.isPodcastAd,validationResult:o}),(0,f.jsxs)("div",{className:xt,children:[(0,f.jsx)(M,{item:i}),s&&r&&(0,f.jsx)(A.U,{"aria-label":"More options, button",menu:(0,f.jsx)(mt,{questionId:null==a||null===(n=a.surveyQuestions[0])||void 0===n?void 0:n.id,ad:r,displayText:s.transparencyLabel,url:s.transparencyUrl})})]})]})},bt=function(e){var t=(0,Z.d4)((function(e){var t;return null===(t=e.ads)||void 0===t?void 0:t.vto}));return"audio"===(null==e?void 0:e.mediaType)||!(null!=t&&t.isMinimized)},ht=n(86115);const gt="M7UVXKPsARIM71fmtSUG",Ot="HKhLNVB5OsH5osqax9lk",kt="i_7T75rV7Rj7AyykwrCf",_t="na5oNvZD9KtuYIUiIUZg",It="_7QFCuyjgT6BwUe1JJVL",At="g1fyNwi0G98CTbv9v4We";var Et=function(e){var t=e.item,n=e.context,r=e.index,a=e.currentPanel,s=e.spec,d=bt(t),c="portrait"===t.videoOrientation,u=c&&!d?gt:"",l=o()(It,(0,i.A)({},At,c)),v=o()((0,i.A)({},_t,c));return(0,f.jsxs)("div",{className:l,children:[d?(0,f.jsx)(oe,{item:t,context:n,index:r}):(0,f.jsxs)("div",{className:kt,children:[c&&(0,f.jsx)("div",{className:Ot}),(0,f.jsx)("div",{className:v,children:(0,f.jsx)(ht.F,{})})]}),(0,f.jsx)("div",{className:u,children:(0,f.jsx)(ie,{item:t,currentPanel:a,spec:s})})]})},wt=n(51646),Pt=n(70076),Ct=n(41957),Tt=n(57965);const Nt="nONhpa6k5EMxHTR1RXhM",St="SDP4__0ksgTwERvZfjE8",Mt="cp7_8T7Q27pZ5zYXUFOW",Dt="IVGg8Hz4Py4BaPEyJz0T",Vt="tUurYuAJ2ZftcyLRFJ9z";function qt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Rt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qt(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ut=function(e){var t,n,r=e.item,c=e.context,u=e.index,l=e.currentPanel,v=(0,D.iz)(r).logoImage,p=bt(r),x=null==r||null===(t=r.metadata)||void 0===t?void 0:t["ad.canvas.type"],y="image"===x||"video"===x,j="portrait"===r.videoOrientation&&!p,b=(0,Tt.r)(s.m,{}),h=b.spec,g=b.UBIFragment,O=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:wt.CpN,i=(0,F.useState)(n),r=(0,Je.A)(i,2),o=r[0],a=r[1],s=(0,Pt.z)(e,n,"colorDark");return(0,F.useEffect)((function(){setTimeout((function(){a(s)}),t)}),[t,s]),o}((0,d.Df)(r)?v:(null==r||null===(n=r.images[0])||void 0===n?void 0:n.url)||v,600),k=(0,a.NC)(ee.gLA,{loadingValue:!1}),_=j?"verticalVideo":y?"fixed":"standard",I=function(e){var t=(0,R.vh)(),n=(0,V.mr)(),i=null==n?void 0:n.requestId,r=(0,a.NC)(ee.o4S,{loadingValue:!1});return(0,F.useEffect)((function(){if(i&&(0,d.o0)(e)&&!r){var o=null==n?void 0:n.metadata,a=n.slot,s=n.format;t.send((0,Ct.A)({event:"event_errored",event_reason:"survey-ad-feature-disabled",ad_id:e.id,request_id:i,creative_id:null==o?void 0:o.creative_id,lineitem_id:null==o?void 0:o.lineitem_id,slot:a,format:(0,Ce.gh)(s).toLowerCase(),product_name:null==o?void 0:o.product_name}))}}),[]),(0,d.o0)(e)&&r?"survey":(0,d.Df)(e)?"video":"audio"}(r),A="survey"===I;return(0,f.jsx)("div",{className:o()(Nt,(0,i.A)({},St,A)),children:(0,f.jsx)(g,{spec:h,children:(0,f.jsxs)("div",{className:Mt,children:[(0,f.jsxs)("div",{className:o()(Dt,(0,i.A)({},St,A)),children:[(0,f.jsx)(m,{item:r,experience:_}),function(){switch(I){case"video":return(0,f.jsx)(Et,{item:r,spec:h,index:u,currentPanel:l,context:c});case"survey":return(0,f.jsx)(jt,{item:r});default:return(0,f.jsx)(le,{item:r,context:c,index:u,currentPanel:l,spec:h})}}()]}),"survey"!==I?(0,f.jsx)(ke,Rt({item:r,className:Vt},k&&{backgroundColor:O})):null]})})})};const Ft=Ut},16150:(e,t,n)=>{n.d(t,{t:()=>b});var i=n(94822),r=n(26346),o=n(11900),a=n(99),s=n(61095),d=n(94980),c=n(70850),u=n(97787),l=n(10806),v=n(71523),f=(n(86746),n(79024),n(25550),n(71425),n(43379),n(97460),n(15342),n(93577),n(30758)),m=n(56818),p=n(46400),x=n(14816),y=n(86070),j=(0,f.memo)((function(e){var t=e.onFeedbackReasonSelect,n=new Map([["not_relevant",a.Ru.get("ad-formats.ad-feedback.dislike.not-relevant")],["too_often",a.Ru.get("ad-formats.ad-feedback.dislike.too-often")],["unpleasant",a.Ru.get("ad-formats.ad-feedback.dislike.unpleasant-content")],["offensive",a.Ru.get("ad-formats.ad-feedback.dislike.offensive-content")],["do_not_like",a.Ru.get("ad-formats.ad-feedback.dislike.do-not-like")]]);return(0,y.jsx)(x.pZ,{value:"dislike-ad",children:(0,y.jsx)(m.W,{children:Array.from(n).map((function(e){var n=(0,v.A)(e,2),i=n[0],r=n[1];return(0,y.jsx)(x.pZ,{value:r,children:(0,y.jsx)(p.D,{role:"menuitem","aria-label":r,onClick:function(){return t(i,r)},children:r})},i)}))})})})),b=function(e){var t=e.item,n=(0,i.wA)(),v=(0,d.L)(t).logAdFeedback,f=(0,i.d4)((function(e){return(0,u.N2)(e,t.id)}));return(0,y.jsx)(l.b,{menu:(0,y.jsx)(j,{onFeedbackReasonSelect:function(e,i){t.id&&(n((0,c.NI)({adId:t.id,reason:i})),v("dislike_".concat(e)))}}),children:(0,y.jsx)(s.n,{item:t,icon:r.P,activeIcon:o.X,label:a.Ru.get("ad-formats.ad-feedback.dislike"),isActive:f,"data-testid":"button-dislike-ad",onClick:function(){if(t.id){if(f)return n((0,c.vA)({adId:t.id})),void v("cancel_dislike");n((0,c.NI)({adId:t.id})),v("dislike_menu")}}})})}},12046:(e,t,n)=>{n.d(t,{T:()=>b});var i=n(94822),r=n(52605),o=n(6159),a=n(99),s=n(61095),d=n(94980),c=n(70850),u=n(97787),l=n(10806),v=n(71523),f=(n(86746),n(79024),n(25550),n(71425),n(43379),n(97460),n(15342),n(93577),n(30758)),m=n(56818),p=n(46400),x=n(14816),y=n(86070),j=(0,f.memo)((function(e){var t=e.onFeedbackReasonSelect,n=new Map([["relevant",a.Ru.get("ad-formats.ad-feedback.like.relevant")],["interested_in_brand",a.Ru.get("ad-formats.ad-feedback.like.interested-in-brand")],["interested_in_product",a.Ru.get("ad-formats.ad-feedback.like.interested-in-product")],["enjoyable",a.Ru.get("ad-formats.ad-feedback.like.enjoyable-content")],["discovered_new",a.Ru.get("ad-formats.ad-feedback.like.discovered-new")]]);return(0,y.jsx)(x.pZ,{value:"like-ad",children:(0,y.jsx)(m.W,{children:Array.from(n).map((function(e){var n=(0,v.A)(e,2),i=n[0],r=n[1];return(0,y.jsx)(x.pZ,{value:r,children:(0,y.jsx)(p.D,{role:"menuitem","aria-label":r,onClick:function(){return t(i,r)},children:r})},i)}))})})})),b=function(e){var t=e.item,n=(0,i.wA)(),v=(0,d.L)(t).logAdFeedback,f=(0,i.d4)((function(e){return(0,u.Tt)(e,t.id)}));return(0,y.jsx)(l.b,{menu:(0,y.jsx)(j,{onFeedbackReasonSelect:function(e,i){t.id&&(n((0,c.F$)({adId:t.id,reason:i})),v("like_".concat(e)))}}),children:(0,y.jsx)(s.n,{item:t,icon:r.G,activeIcon:o.q,label:a.Ru.get("ad-formats.ad-feedback.like"),isActive:f,"data-testid":"button-like-ad",onClick:function(){if(t.id){if(f)return n((0,c.D$)({adId:t.id})),void v("cancel_like");n((0,c.F$)({adId:t.id})),v("like_menu")}}})})}},85817:(e,t,n)=>{n.r(t),n.d(t,{ContextAdSubtitle:()=>c,default:()=>u});var i=n(94822),r=n(53969),o=n(19224),a=n(90044),s=n(77935),d=n(86070),c=function(e){var t=e.item,n=e.variant,c=void 0===n?"bodyMedium":n,u=e.semanticColor,l=void 0===u?"textSubdued":u,v=e.surface,f=(0,o.iz)(t),m=f.subtitle,p=f.url,x=(0,i.wA)();return(0,d.jsx)(r.I,{testid:"context-item-info-ad-subtitle",title:m,variant:c,semanticColor:l,uri:t.uri,clickUrl:p,onClick:function(){x((0,s.q5)(a.c.ADVERTISER_SUBTITLE,a.V[v]))}})};const u=c},89383:(e,t,n)=>{n.r(t),n.d(t,{ContextAdTitle:()=>c,default:()=>u});var i=n(94822),r=n(53969),o=n(19224),a=n(90044),s=n(77935),d=n(86070),c=function(e){var t=e.item,n=e.surface,c=e.variant,u=void 0===c?"titleSmall":c,l=e.semanticColor,v=void 0===l?"textBase":l,f=(0,i.wA)(),m=(0,o.iz)(t),p=m.title,x=m.url;return p?(0,d.jsx)(r.I,{title:p,variant:u,semanticColor:v,uri:t.uri,clickUrl:x,onClick:function(){f((0,s.q5)(a.c.ADVERTISER_TITLE,a.V[n]))}}):null};const u=c},94980:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(43332),r=n(81752),o=n(1131),a=function(e){var t=(0,r.dY)(),n=(0,o.vh)(),a=t.getInStreamAd();return{logAdFeedback:function(t){var r,o;n.send((0,i.F)({ad_id:e.id,advertiser:e.advertiser,creative_id:(null==a?void 0:a.adId)===e.id?null==a||null===(r=a.metadata)||void 0===r?void 0:r.creative_id:void 0,format:e.mediaType,line_item_id:(null==a?void 0:a.adId)===e.id?null==a||null===(o=a.metadata)||void 0===o?void 0:o.lineitem_id:void 0,event:t}))}}}},97787:(e,t,n)=>{n.d(t,{N2:()=>a,Tt:()=>o});var i=n(42551),r=function(e){return e.ads.adFeedback},o=(0,i.Mz)([function(e){return r(e)},function(e,t){return t}],(function(e,t){return!(!t||e.adId!==t)&&e.liked})),a=(0,i.Mz)([function(e){return r(e)},function(e,t){return t}],(function(e,t){return!(!t||e.adId!==t)&&e.disliked}));(0,i.Mz)([function(e){return r(e)},function(e,t){return t}],(function(e,t){return t&&e.adId===t?e.feedback:null}))}}]);
//# sourceMappingURL=9129.js.map