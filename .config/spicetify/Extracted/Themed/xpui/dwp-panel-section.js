"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[319],{41888:(e,t,n)=>{n.d(t,{k:()=>u});var i=n(30758),r=n(99),a=n(74230),o=n(33786),l=n(52857),s=n(34300),c=n(86070),u=function(e){var t=e.id,n=e.children,u=e.targetURI,d=e.fadeOut,p=void 0!==d&&d,v=(0,i.useCallback)((function(){window.open((0,l.rw)(u).href)}),[u]),f={getTitle:function(){return r.Ru.get("action-trigger.available-in-app-only")},getDescription:function(){return r.Ru.get("action-trigger.listen-mixed-media-episode")},primaryButtonText:function(){return r.Ru.get("action-trigger.button.get-app")},secondaryButtonText:function(){return r.Ru.get("action-trigger.button.not-now")},isCTA:!0,intentPrimaryButton:"download-app",onLogInteraction:(0,o.W)(),shouldHideOnScroll:!0,fadeOut:p};return(0,c.jsx)(a.U,{className:s.A.container,id:t,onPrimaryButtonClick:v,options:f,children:n})}},78803:(e,t,n)=>{n.d(t,{D:()=>p});var i=n(51488),r=n(97500),a=n.n(r),o=n(98538);const l="Psc33HXPyazZYAAr1tgz",s="VGJz_GOARJ6j02JICvW6",c="VpNHGG5ZhoxQ8AqW709S",u="P7395UzhjxLUlLZvj5fb";var d=n(86070),p=function(e){var t=e.children,n=e.active,r=void 0!==n&&n,p=e.focus,v=void 0===p||p,f=e.label,g=e.onClick,m=e.noBackground,b=void 0!==m&&m;return(0,d.jsx)(o.Zp,{label:f,children:(0,d.jsx)("button",{className:a()(l,(0,i.A)((0,i.A)((0,i.A)({},u,r),s,b),c,v)),onClick:g,"aria-label":f,children:t})})}},8712:(e,t,n)=>{n.d(t,{N:()=>f});n(83234),n(30456),n(25550),n(43379),n(34192),n(88856),n(15342);var i=n(97500),r=n.n(i),a=n(30758),o=n(20087),l=n(63130);const s="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",u="w4ZoklZWkrsyrVA34vI8";var d=n(86070),p=function(e){var t=e.title,n=e.uri,i=e.className,s=e.onClick,p=e.position,v=(0,a.useCallback)((function(e){null==s||s(e,{uri:n,position:p})}),[s,p,n]);return(0,d.jsx)(l.N,{"aria-label":t,className:r()(c,u,i),to:n,onClick:v,children:(0,d.jsx)(o.v,{as:"span",children:t})})};function v(e){return!!e.uri&&!!e.title}var f=function(e){var t=e.topics,n=e.className,i=e.onClick;return(0,d.jsx)("div",{className:r()(s,n),children:t.filter(v).map((function(e,t){var n="".concat(e.uri,"-").concat(t);return(0,d.jsx)(p,{title:e.title,uri:e.uri,position:t,onClick:i},n)}))})}},15824:(e,t,n)=>{n.d(t,{$:()=>m});n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316);var i=n(51488),r=n(48),a=n(30758),o=(n(86746),n(53276),n(97460),n(49937)),l=n(90597);function s(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(e){if((0,l.fk)(e)){var r=e.querySelector('[tabindex="0"]');t===o.O.UP&&(0,l.MS)(r,c(e,r,o.O.UP,n,i)),t===o.O.DOWN&&(0,l.MS)(r,c(e,r,o.O.DOWN,n,i))}}else console.error("No list element found. Canceling moving focus")}function c(e,t,n,i,r){var a=t.closest('li[role="listitem"]');if(!a)return t;var s,c=a,u=t,d=Array.from(e.querySelectorAll('li[role="listitem"]')),p=d.indexOf(a);if(p<0)return t;if(n===o.O.UP){if(document.activeElement===e){var v;if(c=d[d.length-1],r){var f,g=null===(f=c)||void 0===f?void 0:f.querySelectorAll(l.nu);u=g[g.length-1]}else{var m;u=null===(m=c)||void 0===m?void 0:m.querySelector(l.nu)}return null!==(v=u)&&void 0!==v?v:t}if(r){var b=Array.from(a.querySelectorAll(l.nu)),y=b.indexOf(t)-1;if(y>=0)return b[y]}var h=p-1;do{if(c=d[h],i&&!c&&(h=d.length-1,c=d[h]),r){var x,j=null===(x=c)||void 0===x?void 0:x.querySelectorAll(l.nu);u=j?j[j.length-1]:null}else{var w;u=null===(w=c)||void 0===w?void 0:w.querySelector(l.nu)}h-=1}while(!u&&(!i&&h>=0||i&&p!==h))}else if(n===o.O.DOWN){var O,S;if(document.activeElement===e)return c=d[0],null!==(S=u=null===(O=c)||void 0===O?void 0:O.querySelector(l.nu))&&void 0!==S?S:t;if(r){var C=Array.from(a.querySelectorAll(l.nu)),A=C.indexOf(t)+1;if(A<C.length)return C[A]}var N=p+1;do{var k;c=d[N],i&&!c&&(c=d[N=0]),u=null===(k=c)||void 0===k?void 0:k.querySelector(l.nu),N+=1}while(s=void 0,s=!i&&N<=d.length,!u&&(s||i&&p!==N))}return u||t}var u=n(28540),d=n(9550),p=n(86070),v=["onKeyDown","children","circular","allowsMultipleInteractiveChildrenInItem"];function f(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?f(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):f(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=(0,a.forwardRef)((function(e,t){var n=e.onKeyDown,i=e.children,c=e.circular,f=void 0===c||c,m=e.allowsMultipleInteractiveChildrenInItem,b=void 0!==m&&m,y=(0,r.A)(e,v),h=(0,d.N)(t);(0,u.R)(h);var x=(0,a.useCallback)((function(e){var t;null!==(t=h.current)&&void 0!==t&&t.contains(e.target)&&("ArrowUp"!==e.key&&"ArrowDown"!==e.key||(e.preventDefault(),document.documentElement.classList.remove("no-focus-outline")),"ArrowUp"===e.key&&s(h.current,o.O.UP,f,b),"ArrowDown"===e.key&&s(h.current,o.O.DOWN,f,b),null==n||n(e))}),[f,b,h,n]),j=(0,a.useCallback)((function(e){if(h.current){var t=e.target,n=h.current.querySelector('[tabindex="0"]');t.closest('li[role="listitem"]')&&t!==n&&(0,l.MS)(n,t,{preventScroll:!0})}}),[h]);return(0,p.jsx)("ul",g(g({role:"list",ref:h,onKeyDown:x,onFocus:j,tabIndex:0},y),{},{children:i}))}))},25786:(e,t,n)=>{n.d(t,{h:()=>y});var i=n(87154),r=n(90044),a=n(59414),o=n(40685),l=n(25227),s=n(31091),c=n(43543),u=n(90495),d=n(35605),p=n(30843),v=n(19533),f=n(57965),g=n(97579);const m="main-nowPlayingView-coverArt";var b=n(86070),y=function(e){var t,n=e.context,y=e.item,h=e.index,x=e.canSwitchVisuals,j=void 0!==x&&x,w=(0,f.r)(i.J,{}),O=w.spec,S=w.logger,C=(0,d.P)(),A=C.draggable,N=C.onDragStart;return(0,b.jsx)(b.Fragment,{children:(0,b.jsx)(a.h,{menu:(0,b.jsx)(l.W,{context:n,item:y,canSwitchVisuals:j}),children:(0,b.jsx)("div",{draggable:A&&((0,v.v)(y)||(0,p.p)(y)),onDragStart:function(e){N(e,{itemUris:[y.uri],dragLabelText:(0,u.r)(y)})},children:(0,b.jsx)(c.R,{uri:n.uri,owner:null===(t=n.metadata)||void 0===t?void 0:t.context_owner,children:(0,b.jsx)(s.e,{context:y.type===g.c.TRACK?y.album:n,item:y,index:h,isVisible:!0,onClick:function(){S.logInteraction(O.coverArtFactory({uri:y.uri}).hitUiNavigate({destination:y.type===g.c.TRACK?y.album.uri:y.uri}))},adEventReason:r.c.COVER_ART,children:(0,b.jsx)(o.b,{className:m,item:y,maxSize:384,desiredLabel:"xlarge"})})})})})})}},86633:(e,t,n)=>{n.d(t,{w:()=>m,X:()=>g});n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316);var i=n(51488),r=n(30758),a=n(97500),o=n.n(a),l=n(7852),s=n(98538);const c="main-nowPlayingView-section",u="main-nowPlayingView-sectionHeader",d="main-nowPlayingView-sectionHeaderText";var p=n(86070);function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=function(e){var t=e.action,n=e.children,i=e.className,r=e.icon,a=e.tooltipLabel;return(0,p.jsxs)(l.E,{as:"div",variant:"bodyMediumBold",semanticColor:"textBase",className:o()(u,i),children:[r,a?(0,p.jsx)(s.Zp,{label:a,children:(0,p.jsx)("div",{className:d,children:n})}):(0,p.jsx)("div",{className:d,children:n}),t]})},m=(0,r.forwardRef)((function(e,t){var n=e.children,i=e.className,r=e.style,a=e.testId,l={};return a&&(l["data-testid"]=a),(0,p.jsx)("div",f(f({ref:t,className:o()(c,i),style:r},l),{},{children:n}))}))},86115:(e,t,n)=>{n.d(t,{F:()=>u});var i=n(30758),r=n(93591),a=n(79655),o=n(11001),l=n(32813);const s="KrBYgWLGb5aRHjoD_prX";var c=n(86070),u=(0,r.mc)((function(){var e=(0,o.d)().setVideoPlayerUIFlag,t=(0,a.XB)();return(0,i.useEffect)((function(){return e(l.n.npv,!0),function(){e(l.n.npv,!1)}}),[t,e]),(0,c.jsx)("div",{id:"VideoPlayerNpv_ReactPortal",className:s})}),{name:"NPVVideoContainer"})},37483:(e,t,n)=>{n.r(t),n.d(t,{PanelSection:()=>Ym});var i=n(30758),r=n(94079),a=n(65277),o=n(18367),l=n(51488),s=n(71523),c=(n(78551),n(25550),n(28430),n(8674),n(43379),n(82467),n(34192),n(15342),n(9582),n(97500)),u=n.n(c),d=n(7852),p=(n(20087),n(95334)),v=n(36734),f=(n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(88856),n(51565),n(18316),n(48)),g=n(47942),m=n(73996);const b="Xq5xnpTOsoPxFR95BkTU",y="N7OMJte9T4Lv7DDX16ky",h="NJATxQbY2o4sl0BHxU3T";var x=n(86070),j=["children","className"];function w(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function O(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?w(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):w(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var S,C=function(e){var t=e.children,n=e.className,i=(0,f.A)(e,j);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(g.a,O({panel:m.Z.Puffin,className:u()(y,n)},i)),t]})},A=function(e){return e.Overview="overview",e.ActivationIntro="activationIntro",e.ActivationDetection="activationDetection",e.ActivationSignifiers="activationSignifiers",e.Error="error",e.ManualSelection="manualSelection",e.AirpodsSelection="airpodsSelection",e.AudioQualitySettings="audioQualitySettings",e.AudioQualityDetails="audioQualityDetails",e.DiscoverLossless="discoverLossless",e.IncompatibleHeadphones="incompatibleHeadphones",e}({}),N=function(e){return e.GetStarted="getStarted",e.OnError="onError",e.SelectManually="selectManually",e.Continue="continue",e.Close="close",e.Activate="activate",e.SetupNewDevice="setupNewDevice",e.NotFound="notFound",e.Settings="settings",e.OnboardLossless="onboardLossless",e.Details="details",e.Airpods="airpods",e}({}),k=n(22507),E=(n(184),n(42486),n(16347),n(83234),n(70750),n(18653),n(79655)),P=n(64654),I=[A.ActivationIntro,A.ActivationDetection,A.ActivationSignifiers,A.ManualSelection,A.AirpodsSelection],R=function(e){var t=(0,i.useRef)(!1),n=(0,P.z)(),r=(0,E.XB)();(0,i.useEffect)((function(){var i,a,o,l=null===(i=n.getState())||void 0===i?void 0:i.isPaused,s=(a=e,o=r,I.includes(a)&&(o===m.Z.PuffinActivation||o===m.Z.PuffinActivationOverlay));!s||l||t.current?!s&&l&&t.current&&(n.resume(),t.current=!1):(n.pause(),t.current=!0)}),[r,e,n])},L=(S={},(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)(S,A.Overview,(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)({},N.GetStarted,A.ActivationIntro),N.OnError,A.Error),N.SelectManually,A.ManualSelection),N.Settings,A.AudioQualitySettings),N.OnboardLossless,A.DiscoverLossless),N.Details,A.AudioQualityDetails)),A.ActivationIntro,(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)({},N.Close,A.Overview),N.OnError,A.Error),N.Continue,A.ActivationDetection),N.SelectManually,A.ManualSelection),N.Activate,A.Overview)),A.ActivationDetection,(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)({},N.SelectManually,A.ManualSelection),N.Airpods,A.AirpodsSelection),N.Close,A.Overview),N.OnError,A.Error),N.Continue,A.ActivationSignifiers)),A.ActivationSignifiers,(0,l.A)((0,l.A)((0,l.A)({},N.Close,A.Overview),N.OnError,A.Error),N.Activate,A.Overview)),A.ManualSelection,(0,l.A)((0,l.A)((0,l.A)((0,l.A)({},N.Continue,A.ActivationSignifiers),N.Close,A.Overview),N.OnError,A.Error),N.NotFound,A.IncompatibleHeadphones)),A.AirpodsSelection,(0,l.A)((0,l.A)((0,l.A)((0,l.A)({},N.Continue,A.ActivationSignifiers),N.Close,A.Overview),N.OnError,A.Error),N.NotFound,A.Error)),A.DiscoverLossless,(0,l.A)({},N.Continue,A.Overview)),A.AudioQualitySettings,{}),A.AudioQualityDetails,{}),A.Error,{}),(0,l.A)(S,A.IncompatibleHeadphones,(0,l.A)((0,l.A)((0,l.A)({},N.Close,A.Overview),N.OnError,A.Error),N.Continue,A.Overview))),T=(0,i.createContext)({currentView:A.Overview,viewTransitions:L,setCurrentView:function(){},toPreviousView:function(){},viewOptions:null}),D=function(e){var t=e.children,n=(0,E.XB)(),r=(0,i.useState)((function(){return function(e){return[{view:e===m.Z.PuffinActivation||e===m.Z.PuffinActivationOverlay?A.ActivationDetection:A.Overview,options:{}}]}(n)})),a=(0,s.A)(r,2),o=a[0],l=a[1],c=(0,i.useCallback)((function(e,t){e===A.Overview?l([{view:e,options:null!=t?t:{}}]):l((function(n){return[].concat((0,k.A)(n),[{view:e,options:null!=t?t:{}}])}))}),[]),u=(0,i.useCallback)((function(){l((function(e){return e.slice(0,-1)}))}),[]);if(0===o.length)throw new Error("Puffin view state stack should never be empty");var d=o.at(-1),p=d.view,v=d.options;return R(p),(0,x.jsx)(T.Provider,{value:{currentView:p,viewOptions:v,setCurrentView:c,toPreviousView:u,viewTransitions:L},children:t})};const _="EqLKhgGIINyN_LINFjl1",U="OyIY0v1_h3UWgLlxyPHL";var B=function(e){var t=e.resetError,n=(0,i.useContext)(T),r=n.toPreviousView,a=n.setCurrentView;return(0,x.jsx)(C,{onBack:function(){r()},children:(0,x.jsxs)("div",{className:_,children:[(0,x.jsx)(p.b,{size:"xlarge",semanticColor:"textBase"}),(0,x.jsxs)("div",{className:U,children:[(0,x.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",children:"Something went wrong"}),(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:"We couldn’t turn on your headphone tools."})]}),(0,x.jsx)(v.$,{colorSet:"invertedLight",size:"medium",onClick:function(){null==t||t(),a(A.Overview)},children:"Retry"})]})})},F=function(e){var t=e.resetError;return(0,x.jsx)(B,{resetError:t})},M=n(17638),H=(n(47994),n(94822)),V=n(99),q=n(76027),Q=n(27681),z=n(93061),Y=n(76293),G=n(38618),K=function(){var e=(0,H.d4)((function(e){return e.platform.isDesktop})),t=(0,Q.b)(),n=(0,q.lS)(t),r=(0,Y.v)((function(e){var t,n=(0,z.V)(e);return{isPlayingRemotely:n.isPlayingRemotely,remoteDeviceName:null===(t=n.remoteDevice)||void 0===t?void 0:t.name,isConnected:"connected"===n.connectionStatus}}),G.a),a=r.isPlayingRemotely,o=r.remoteDeviceName,l=r.isConnected,s=(0,i.useMemo)((function(){return e?V.Ru.get("web-player.connect.device-picker.this-computer"):V.Ru.get("web-player.connect.device-picker.this-web-browser")}),[e]),c=(0,i.useMemo)((function(){if(t)return e?V.Ru.get("web-player.connect.device-picker.from-this-computer",{device_name:t.name}):V.Ru.get("web-player.connect.device-picker.from-this-web-browser",{device_name:t.name})}),[e,t]);return o&&a&&l?{deviceName:o,playingFrom:o}:n?(null==t?void 0:t.transportType)===q.Yg.BLUETOOTH?{deviceName:t.name,playingFrom:s,formattedDeviceName:c}:{deviceName:V.Ru.get("web-player.puffin.wired-connection"),playingFrom:s}:{deviceName:s,playingFrom:s}},W=function(){var e=K().deviceName;return(0,x.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",children:e})},Z=n(80080),X=n(75561),J=n(91617),$=n(6914),ee=function(e){var t=e.onClick,n=K().playingFrom,i=(0,J.t)(),r=(0,$.K)(i.quality.streamingQuality);return void 0===(0,s.A)(r,1)[0].data?null:(0,x.jsx)(Z.v,{id:"qualitySetting",variant:"naked",title:V.Ru.get("desktop.settings.streamingQuality"),leading:(0,x.jsx)(X.s,{size:"small"}),subtitle:n,onClick:t,padding:"0px 12px"})},te=n(69872),ne=n(73364),ie=(n(14551),n(87026)),re=n(36560),ae=function(e){var t=e.title,n=e.description,r=e.confirmButtonText,a=void 0===r?"OK":r,o=e.cancelButtonText,l=void 0===o?"Cancel":o,c=e.onConfirm,u=e.onClose,d=(0,i.useContext)(T).setCurrentView,p=(0,E._Y)(),v=(0,i.useState)(!1),f=(0,s.A)(v,2),g=f[0],m=f[1],b=(0,i.useRef)(!1);return{dialog:g?(0,x.jsx)(ie.T,{onClose:function(){m(!1),null==u||u()},onConfirm:function(){c(),b.current?p(re.$S.PUFFIN_BUTTON_CLICK):d(A.Overview)},titleText:t,"aria-label":t,descriptionText:n,cancelText:l,confirmText:a}):null,triggerDialog:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];b.current=e,m(!0)}}},oe=n(90820),le=n(67837),se=function(){var e=(0,le.N)();return{setCurrentDevice:(0,i.useCallback)((function(t,n){e.setCurrentDevice(t,n)}),[e]),removeCurrentDevice:(0,i.useCallback)((function(t){e.removeCurrentDevice(t)}),[e])}},ce=n(68113),ue=function(e){var t=e.spec,n=(0,ce.s)(),r=(0,i.useRef)(null),a=se().removeCurrentDevice,o=(0,oe.j)().deviceFilterState;(0,ne.X)("RESET_HEADPHONES_BUTTON",r);var l=ae({title:V.Ru.get("web-player.puffin.reset-headphones.dialog.title"),description:V.Ru.get("web-player.puffin.reset-headphones.dialog.subtitle"),confirmButtonText:V.Ru.get("web-player.puffin.reset-headphones.dialog.confirm"),onConfirm:function(){a(!0),(0,ne.I)("SETUP_HEADPHONES_BUTTON")},onClose:function(){(0,ne.I)("RESET_HEADPHONES_BUTTON")}}),s=l.triggerDialog,c=l.dialog;return o.isOnboarded?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Z.v,{id:"resetHeadphonesButton",ref:r,variant:"naked",title:V.Ru.get("web-player.puffin.reset-headphones.menu-item"),leading:(0,x.jsx)(te.x,{size:"small"}),onClick:function(e){n.logInteraction(t.resetHeadphonesButtonFactory().hitUiReveal()),e.preventDefault(),s(!1)},padding:"0px 12px"}),c]}):null},de=n(75908),pe=function(e){var t=e.isPlayingRemotely,n=e.spec,r=(0,ce.s)(),a=(0,i.useContext)(T),o=a.setCurrentView,l=a.viewTransitions[A.Overview],s=(0,de.j)();return(0,x.jsxs)("div",{children:[s&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(ee,{onClick:function(){r.logInteraction(n.qualitySettingsButtonFactory().hitUiReveal()),o(l.settings)}})}),!t&&(0,x.jsx)(ue,{spec:n})]})},ve=n(86173);const fe="k4f1o0jOMnxv6OS8dC7p";var ge=function(e){var t=e.title,n=e.subtitle,r=e.buttonLabel,a=e.onClick,o=e.focusTransferKey,l=void 0===o?null:o,s=(0,i.useRef)(null);return(0,ne.X)(l,s),(0,x.jsx)(Z.v,{variant:"naked",size:"lg",id:"getStarted",className:fe,title:t,subtitle:n,paddingBlockStart:"16px",paddingBlockEnd:"16px",footer:(0,x.jsx)(ve.n,{size:"small",onClick:a,ref:s,children:(0,x.jsx)(d.E,{variant:"bodySmallBold",children:r})})})},me=n(69093),be=n(6029),ye=n(57123),he=function(e){switch(e){case ye.Yn.LOSSLESS_24:return{title:V.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:V.Ru.get("web-player.pigeon.audio-quality.lossless-24.label"),bitrateLabel:V.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate"),bitrateDetails:[V.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),V.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case ye.Yn.LOSSLESS:return{title:V.Ru.get("web-player.pigeon.audio-quality.lossless"),titleFull:V.Ru.get("web-player.pigeon.audio-quality.lossless-16.label"),bitrateLabel:V.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate"),bitrateDetails:[V.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-1"),V.Ru.get("web-player.pigeon.audio-quality.lossless-16.bitrate-details-2")]};case ye.Yn.VERY_HIGH:return{title:V.Ru.get("web-player.pigeon.audio-quality.very-high.label"),bitrateLabel:V.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate"),bitrateDetails:[V.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details")]};case ye.Yn.HIGH:return{title:V.Ru.get("web-player.pigeon.audio-quality.high.label"),bitrateLabel:V.Ru.get("web-player.pigeon.audio-quality.high.bitrate"),bitrateDetails:[V.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details")]};case ye.Yn.NORMAL:return{title:V.Ru.get("web-player.pigeon.audio-quality.normal.label"),bitrateLabel:V.Ru.get("web-player.pigeon.audio-quality.normal.bitrate"),bitrateDetails:[V.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details")]};case ye.Yn.LOW:return{title:V.Ru.get("web-player.pigeon.audio-quality.low.label"),bitrateLabel:V.Ru.get("web-player.pigeon.audio-quality.low.bitrate"),bitrateDetails:[V.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details")]};case ye.Yn.UNKNOWN:default:return{title:V.Ru.get("web-player.pigeon.audio-quality.unknown.label"),bitrateLabel:null}}};const xe="SsVVyvM7DIniTIOjJFuM",je="dHDe0DUG4UkEeM8p5PEa",we="T49oF8shvnsadykMrogA";var Oe=function(e){var t=e.quality,n=e.onClick,i=he(t),r=[ye.Yn.VERY_HIGH,ye.Yn.HIGH,ye.Yn.NORMAL,ye.Yn.LOW];t===ye.Yn.LOSSLESS_24?r.unshift(ye.Yn.LOSSLESS_24):r.unshift(ye.Yn.LOSSLESS);var a=t===ye.Yn.UNKNOWN?"textBase":"textBrightAccent";return(0,x.jsxs)(me.a,{as:"button",variant:"tinted",className:xe,onClick:n,children:[(0,x.jsx)(Z.v,{id:"quality",size:"lg",pretitle:V.Ru.get("web-player.pigeon.overview-card.title"),titleGap:be.v4,title:(0,x.jsx)(d.E,{variant:"titleSmall",semanticColor:a,children:i.titleFull||i.title}),paddingInlineStart:"0px",paddingInlineEnd:"0px",variant:"naked"}),(0,x.jsx)("div",{children:r.map((function(e,n){var i=he(e),r=e===t,a=r?"textBrightAccent":"textSubdued";return(0,x.jsx)(Z.v,{id:i.title,size:"sm",paddingInlineStart:"0px",paddingInlineEnd:"0px",media:(0,x.jsx)("div",{className:u()(je,(0,l.A)({},we,r))}),title:(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:a,children:i.title}),trailing:(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:a,children:i.bitrateLabel}),variant:"naked"},n)}))})]})},Se=n(73413),Ce=function(){return(0,Se.x)("onboarding-dismissed:lossless",!1)},Ae=n(77041),Ne=function(e){var t=e.spec,n=(0,ce.s)(),r=(0,i.useContext)(T),a=r.setCurrentView,o=r.viewTransitions[A.Overview],l=(0,de.j)(),c=(0,Ae.A)(),u=Ce(),d=(0,s.A)(u,1)[0];return l?(0,x.jsxs)(x.Fragment,{children:[!d&&(0,x.jsx)(ge,{title:V.Ru.get("web-player.pigeon.get-started.title"),subtitle:V.Ru.get("web-player.pigeon.get-started.subtitle"),buttonLabel:V.Ru.get("web-player.pigeon.get-started.button"),onClick:function(){n.logInteraction(t.losslessOnboardingButtonFactory().hitUiReveal()),a(o.onboardLossless)}}),(0,x.jsx)(Oe,{quality:c,onClick:function(){n.logInteraction(t.audioQualityCardFactory().hitUiReveal()),a(o.details)}})]}):null},ke=function(e){return e.isError?(0,x.jsx)(Z.v,{id:"filterError",variant:"tinted",paddingBlockStart:"12px",paddingBlockEnd:"12px",paddingInlineStart:"16px",paddingInlineEnd:"16px",leading:(0,x.jsx)(p.b,{semanticColor:"textSubdued",size:"small"}),title:V.Ru.get("web-player.puffin.error-troubleshooting")}):null},Ee=n(10659),Pe=n(63258);const Ie="jvVll3Ia4Nrq9Fsd78Fo",Re="d_HhOkLKxYpYKpP2gQy7",Le="fLp9X9keK84drMHcmOFW";var Te=function(e){var t=e.currentDeviceState,n=e.spec,r=(0,ce.s)(),a=(0,i.useCallback)((function(){var e;r.logInteraction(n.optimizeToggleFactory().hitUiElementToggle()),null===(e=t.toggleTuneHeadphones)||void 0===e||e.call(t)}),[t,r,n]),o=null!==t.toggleTuneHeadphones,l=t.contentRestrictions,s=l.specificRestricted,c=l.processingCapabilitiesRestricted;return(0,x.jsx)("div",{className:Ie,children:(0,x.jsx)(Z.v,{variant:"naked",size:"md",id:"headphones",className:Re,disabled:s||c||!o,title:(0,x.jsx)(Ee.d,{className:Le,children:V.Ru.get("web-player.puffin.listening-with.filters.specific-title")}),subtitle:o?V.Ru.get("web-player.puffin.listening-with.filters.specific-subtitle"):V.Ru.get("web-player.puffin.listening-with.filters.specific-subtitle-unavailable"),trailing:(0,x.jsx)(Pe.l,{id:"headphoneTunes",onSelected:a,disabled:s||c,value:t.currentState.specificEnabled,condensed:!0})})})};const De="bLEXMWOER6nmfeLfBRIN";var _e=function(e){var t,n,r=e.spec,a=(0,ce.s)(),o=(0,i.useContext)(T),l=o.setCurrentView,s=o.viewTransitions[A.Overview],c=(0,oe.j)().deviceFilterState,u=c.isOnboarded;return(0,x.jsx)(Z.v,{id:"listeningWith",variant:"tinted",pretitle:V.Ru.get("web-player.puffin.listening-with.model"),horizontalGap:"0px",paddingBlockStart:"12px",paddingBlockEnd:"12px",paddingInlineStart:"16px",paddingInlineEnd:"16px",className:De,trailing:(0,x.jsx)(ve.n,{size:"small",onClick:function(){a.logInteraction(r.changeModelButtonFactory().hitUiReveal()),l(s.selectManually)},children:(0,x.jsx)(d.E,{variant:"bodySmallBold",children:V.Ru.get("web-player.puffin.listening-with.change-model")})}),footer:u&&(0,x.jsx)(Te,{currentDeviceState:c,spec:r}),title:(0,x.jsx)(Ee.d,{lineClamp:2,children:null!==(t=null===(n=c.headphoneDevice)||void 0===n?void 0:n.deviceName)&&void 0!==t?t:V.Ru.get("web-player.puffin.listening-with.placeholder-model")})})},Ue=function(e){var t=e.spec,n=(0,i.useContext)(T),r=n.setCurrentView,a=n.viewTransitions[A.Overview],o=(0,oe.j)(),l=o.deviceFilterState,s=o.isMaybeHeadphoneDevice,c=o.isError,u=o.isLoading,d=(0,ce.s)(),p=l.isOnboarded,v=s&&!p,f=(0,i.useCallback)((function(){d.logInteraction(t.setupHeadphonesButtonFactory().hitUiReveal()),l.audioDevice?r(a.getStarted):r(a.selectManually,{showDialogOnBack:!0})}),[d,t,l.audioDevice,r,a.getStarted,a.selectManually]);return s?c||u?(0,x.jsx)(ke,{isError:c}):(0,x.jsxs)(x.Fragment,{children:[p&&(0,x.jsx)(_e,{spec:t}),v&&(0,x.jsx)(ge,{title:V.Ru.get("web-player.puffin.get-started.title"),subtitle:V.Ru.get("web-player.puffin.get-started.subtitle"),buttonLabel:V.Ru.get("web-player.puffin.get-started.button"),onClick:f,focusTransferKey:"SETUP_HEADPHONES_BUTTON"})]}):null},Be=n(86772),Fe=n(57965);const Me="TJAbLKl8aSWZqWk4EFkk";var He=re.$S.DEVICE_PICKER_BUTTON_CLICK,Ve=function(){var e=(0,z.l)(),t=(0,E.AI)(m.Z.DevicePicker,m.Z.DevicePickerOverlay).panelSend,n=(0,de.j)(),r=(0,Be.v)(),a=(0,Fe.r)(M.R,{}),o=a.spec,l=a.logger,s=!e&&r,c=(0,i.useCallback)((function(){l.logInteraction(o.backButtonFactory().hitUiReveal()),t(He)}),[l,t,o]);return(0,x.jsx)(C,{onBack:c,onClose:function(){l.logInteraction(o.closeButtonFactory().hitUiHide())},children:(0,x.jsxs)("div",{className:Me,children:[(0,x.jsx)(W,{}),s&&(0,x.jsx)(Ue,{spec:o}),n&&(0,x.jsx)(Ne,{spec:o}),(0,x.jsx)(pe,{isPlayingRemotely:e,spec:o})]})})},qe=n(7617),Qe=n(72449),ze=n(70912),Ye=n(63130),Ge=function(e){return e.INFO="INFO",e.ERROR="ERROR",e}({});function Ke(e){return e.type===Ge.ERROR}function We(e){return e.type===Ge.INFO}var Ze=n(81418);const Xe="UPAv6TbmqM79jDLYgiad";var Je=function(e){var t=e.card,n=t.type,i=t.id,r=t.title,a=t.text;return(0,x.jsx)(Z.v,{id:i,className:Xe,variant:"tinted",leading:n===Ge.ERROR?(0,x.jsx)(ze.Z,{size:"small",semanticColor:"textWarning"}):null,title:(0,x.jsx)(Ee.d,{variant:"bodyMedium",children:r}),body:"string"==typeof a?(0,x.jsx)(Ze.y,{LinkComponent:Ye.N,source:a,splitter:/\|/g,semanticColor:"textSubdued",variant:"mesto"}):a})},$e=n(55347),et=n(30324);const tt="GdqxZ88oz8MtwHaBnwgb",nt="Q4TWj1C8EEkH_beo9jI8",it="slKZiyNh_zlnTSEo8VG7",rt="ichtbB4QY2SKusRio97a",at="xTMuOBwhiZlpUZtnm0M6";var ot=function(e){return e[e.PASSING=0]="PASSING",e[e.NEEDS_ATTENTION=1]="NEEDS_ATTENTION",e[e.UNKNOWN=2]="UNKNOWN",e}({}),lt=function(e){var t=e.metric,n=e.label,i=e.severity;return(0,x.jsxs)("div",{className:u()(tt,(0,l.A)({},rt,i===ot.UNKNOWN)),children:[function(){switch(i){case ot.PASSING:return(0,x.jsx)($e.k,{size:"large",className:nt,semanticColor:"textBase"});case ot.NEEDS_ATTENTION:return(0,x.jsx)(ze.Z,{size:"large",className:it,semanticColor:"textWarning"});case ot.UNKNOWN:return(0,x.jsx)(et.N,{size:"large",className:it,semanticColor:"textBase"});default:return null}}(),(0,x.jsxs)("div",{className:at,children:[(0,x.jsx)(d.E,{as:"p",variant:"bodyMedium",semanticColor:"textBase",children:t}),(0,x.jsx)(d.E,{as:"p",semanticColor:"textSubdued",variant:"bodySmall",children:n})]})]})},st=function(e){return e.bitrateLevel="bitrateLevel",e.targetBitrateLevel="targetBitrateLevel",e.targetBitrateAvailable="targetBitrateAvailable",e.strategy="strategy",e.isLocal="isLocal",e.autoAdjust="autoAdjust",e.deviceSupported="deviceSupported",e}({}),ct=function(e){return e.Bluetooth_Degrades_Lossless="Bluetooth_Degrades_Lossless",e.Connect_Explanation="Connect_Explanation",e.Default_To_Very_High="Default_To_Very_High",e.Need_To_Redownload="Need_To_Redownload",e.Opt_Out_Of_Downgrade="Opt_Out_Of_Downgrade",e.Poor_Bandwidth_Interferes="Poor_Bandwidth_Interferes",e.Lossless_Unavailable="Lossless_Unavailable",e.Listen_Offline="Listen_Offline",e.Update_Setting="Update_Setting",e}({}),ut=function(e){return e[e.Internet=0]="Internet",e[e.Spotify_Connect=1]="Spotify_Connect",e[e.Downloads=2]="Downloads",e}({}),dt=function(e){return e.Good="good",e.Poor="poor",e.Unknown="unknown",e.Unavailable="unavailable",e}({});n(79024),n(93577),n(9267),n(86746),n(45434),n(68216),n(2823),n(65594),n(78397),n(97460);function pt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return vt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?vt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function vt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var ft=[{criteria:{online:!0,autoAdjust:!1,trackLosslessAvailable:!0},result:ct.Opt_Out_Of_Downgrade},{criteria:{online:!0,streamingLossless:!1,targetingLossless:!0,deviceCompatible:!0,internetBandwidth:dt.Poor,trackLosslessAvailable:!0},result:ct.Poor_Bandwidth_Interferes},{criteria:{online:!0,autoAdjust:!0,streamingLossless:!1,targetingLossless:!1,deviceCompatible:!0,internetBandwidth:dt.Poor,trackLosslessAvailable:!0},result:ct.Default_To_Very_High},{criteria:{online:!0,streamingLossless:!1,bitrateStrategy:[ye.ZT.OFFLINED_FILE],trackLosslessAvailable:!0},result:ct.Need_To_Redownload},{criteria:{online:!0,targetingLossless:!0,trackLosslessAvailable:!1},result:ct.Lossless_Unavailable},{criteria:{online:!0,isSetStreamingQualityLessThanLossless:!0},result:ct.Update_Setting}];var gt=[{criteria:{bitrateLevel:[ye.Yn.LOSSLESS],strategy:[ye.ZT.BEST_MATCHING,ye.ZT.BACKEND_ADVISED,ye.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:dt.Good},{criteria:{bitrateLevel:[ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],targetBitrateLevel:[ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],strategy:[ye.ZT.BEST_MATCHING,ye.ZT.CACHED_FILE],deviceSupported:!0,autoAdjust:!0},result:dt.Good},{criteria:{bitrateLevel:[ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],targetBitrateLevel:[ye.Yn.LOSSLESS],strategy:[ye.ZT.BEST_MATCHING,ye.ZT.BACKEND_ADVISED,ye.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0,autoAdjust:!0},result:dt.Poor},{criteria:{bitrateLevel:[ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],targetBitrateLevel:[ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],strategy:[ye.ZT.BACKEND_ADVISED],deviceSupported:!0,autoAdjust:!0},result:dt.Poor},{criteria:{bitrateLevel:[ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],targetBitrateLevel:[ye.Yn.LOSSLESS],targetBitrateAvailable:!1,deviceSupported:!0,autoAdjust:!0},result:dt.Unavailable},{criteria:{autoAdjust:!1},result:dt.Unknown},{criteria:{deviceSupported:!1},result:dt.Unknown}],mt=[{criteria:{bitrateLevel:[ye.Yn.LOSSLESS,ye.Yn.LOSSLESS_24],deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[ye.Yn.UNKNOWN,ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],strategy:[ye.ZT.BEST_MATCHING,ye.ZT.BACKEND_ADVISED,ye.ZT.CACHED_FILE],targetBitrateLevel:[ye.Yn.LOSSLESS,ye.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!0},{criteria:{bitrateLevel:[ye.Yn.UNKNOWN,ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],strategy:[ye.ZT.OFFLINED_FILE],targetBitrateLevel:[ye.Yn.LOSSLESS,ye.Yn.LOSSLESS_24],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{strategy:[ye.ZT.BEST_MATCHING,ye.ZT.BACKEND_ADVISED,ye.ZT.CACHED_FILE],targetBitrateAvailable:!0,deviceSupported:!0},result:!1},{criteria:{deviceSupported:!1},result:!0},{criteria:{bitrateLevel:[ye.Yn.UNKNOWN,ye.Yn.LOW,ye.Yn.NORMAL,ye.Yn.HIGH,ye.Yn.VERY_HIGH],targetBitrateLevel:[ye.Yn.LOSSLESS,ye.Yn.LOSSLESS_24],targetBitrateAvailable:!1,deviceSupported:!0},result:!0},{criteria:{targetBitrateLevel:[ye.Yn.LOSSLESS,ye.Yn.LOSSLESS_24]},result:!0}];function bt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return yt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?yt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function yt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}var ht=function(e,t){for(var n=0,i=Object.entries(t.criteria);n<i.length;n++){var r=(0,s.A)(i[n],2),a=r[0],o=r[1];if(a===st.bitrateLevel){if(!o.includes(e[st.bitrateLevel]))return!1}else if(a===st.targetBitrateLevel){if(!o.includes(e[st.targetBitrateLevel]))return!1}else if(a===st.strategy){if(!o.includes(e[st.strategy]))return!1}else{if(!o===e[a])return!1}}return!0},xt=function(e){return[ye.Yn.LOSSLESS,ye.Yn.LOSSLESS_24].includes(e)},jt=n(70538),wt=n(13950),Ot=n(40494),St=n(18621);function Ct(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function At(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ct(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ct(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nt={losslessStatus:ye.p4.NONE,bitrateLevel:ye.Yn.UNKNOWN,targetBitrateLevel:ye.Yn.UNKNOWN,targetBitrateAvailable:!1,strategy:ye.ZT.UNKNOWN};function kt(){var e,t=(0,St.o)((function(e){var t;return At(At({},Nt),null!==(t=null==e?void 0:e.playbackQuality)&&void 0!==t?t:null)}),G.a),n=t.losslessStatus,r=t.bitrateLevel,a=t.targetBitrateLevel,o=t.targetBitrateAvailable,l=t.strategy,c=(0,z.l)(),u=(0,J.t)(),d=(0,$.K)(u.quality.streamingQuality),p=(0,s.A)(d,1)[0].data,v=(0,$.K)(u.quality.remoteQuality),f=(0,s.A)(v,1)[0].data,g=(0,Y.v)((function(e){return e.activeDevice})),m=(0,i.useMemo)((function(){return null!==g&&g.losslessSupport?g.losslessSupport:{fullySupported:!1,deviceSupported:!1,userEligible:!1}}),[g]).deviceSupported,b=(0,wt.t0)().settings.values["audio.allow_downgrade"],y=(null==g?void 0:g.isLocal)||!1;e=y?l===ye.ZT.CACHED_FILE||l===ye.ZT.OFFLINED_FILE?ut.Downloads:ut.Internet:ut.Spotify_Connect;var h={bitrateLevel:r,targetBitrateLevel:a,targetBitrateAvailable:o,strategy:l,isLocal:y,deviceSupported:m,autoAdjust:b},x=function(e){var t,n=bt(mt);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(ht(e,i))return i.result}}catch(e){n.e(e)}finally{n.f()}return!(!xt(e[st.bitrateLevel])&&!xt(e[st.targetBitrateLevel]))}(h),j=function(e){var t,n=bt(gt);try{for(n.s();!(t=n.n()).done;){var i=t.value;if(ht(e,i))return i.result}}catch(e){n.e(e)}finally{n.f()}return e[st.strategy]===ye.ZT.BACKEND_ADVISED?dt.Poor:dt.Good}(h),w=(0,Ot.n)(),O=xt(a)&&o,S=xt(r),C=xt(a),A=c?null==f?void 0:f.streamingQuality:p,N=function(e){var t,n=e.online,i=e.streamingLossless,r=e.targetingLossless,a=e.strategy,o=e.trackLosslessAvailable,l=e.autoAdjust,s=e.internetBandwidth,c=e.losslessCompatibleDevice,u=e.isLocal,d=e.isSetStreamingQualityLessThanLossless,p=[ct.Listen_Offline,ct.Connect_Explanation,ct.Bluetooth_Degrades_Lossless],v=pt(ft);try{for(v.s();!(t=v.n()).done;){var f=t.value,g=f.criteria,m=f.result;g.online===n&&(void 0!==g.autoAdjust&&g.autoAdjust!==l||void 0!==g.streamingLossless&&g.streamingLossless!==i||void 0!==g.targetingLossless&&g.targetingLossless!==r||void 0!==g.deviceCompatible&&g.deviceCompatible!==c||void 0!==g.bitrateStrategy&&!1===u||(void 0===g.bitrateStrategy||void 0!==a&&g.bitrateStrategy.includes(a))&&(void 0!==g.internetBandwidth&&g.internetBandwidth!==s||void 0!==g.trackLosslessAvailable&&g.trackLosslessAvailable!==o||void 0!==g.isSetStreamingQualityLessThanLossless&&g.isSetStreamingQualityLessThanLossless!==d||p.push(m)))}}catch(e){v.e(e)}finally{v.f()}return p}({online:w,streamingLossless:S,targetingLossless:C,strategy:l,trackLosslessAvailable:O,autoAdjust:b,internetBandwidth:j,losslessCompatibleDevice:m,isLocal:y,isSetStreamingQualityLessThanLossless:!!A&&A<jt.a1.LOSSLESS&&A>jt.a1.AUTOMATIC});return{losslessStatus:n,bitrateLevel:r,flags:N,internetBandwidth:j,playingVia:{channelIsLossless:x,channel:e},losslessCompatibleDevice:m}}var Et=function(){var e=kt(),t=e.losslessCompatibleDevice,n=e.playingVia,i=e.internetBandwidth;return(0,x.jsxs)("div",{children:[(0,x.jsx)(lt,{metric:V.Ru.get("web-player.pigeon.audio-quality.lossless-compatible-device"),label:t?V.Ru.get("hifi.yes"):V.Ru.get("hifi.no"),severity:t?ot.PASSING:ot.NEEDS_ATTENTION}),(0,x.jsx)(lt,{metric:V.Ru.get("hifi.playingVia"),label:function(){switch(n.channel){case ut.Downloads:return V.Ru.get("local-files.source.downloads");case ut.Internet:return V.Ru.get("hifi.networkConnection");case ut.Spotify_Connect:return V.Ru.get("spotify-connect");default:return""}}(),severity:n.channelIsLossless?ot.PASSING:ot.NEEDS_ATTENTION}),(0,x.jsx)(lt,{metric:V.Ru.get("hifi.internetBandwidth"),label:function(){switch(i){case dt.Good:return V.Ru.get("hifi.good");case dt.Poor:return V.Ru.get("hifi.poor");case dt.Unknown:default:return V.Ru.get("hifi.unknown")}}(),severity:function(){switch(i){case dt.Good:return ot.PASSING;case dt.Poor:return ot.NEEDS_ATTENTION;case dt.Unknown:default:return ot.UNKNOWN}}()})]})},Pt=(n(87879),n(59715)),It=(0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)((0,l.A)({},ct.Listen_Offline,(function(){return{type:"info",title:V.Ru.get("web-player.pigeon.help-cards.listen-offline.title"),message:V.Ru.get("web-player.pigeon.help-cards.listen-offline.body")}})),ct.Connect_Explanation,(function(){return{type:"info",title:V.Ru.get("web-player.pigeon.help-cards.connect-explanation.title"),message:(0,x.jsx)(d.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:V.Ru.get("web-player.pigeon.help-cards.connect-explanation.body",(0,x.jsx)(Pt.g,{size:"xsmall",alignmentBaseline:"baseline"}))})}})),ct.Bluetooth_Degrades_Lossless,(function(){return{type:"info",title:V.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.title"),message:V.Ru.get("web-player.pigeon.help-cards.bluetooth-degrades-lossless.body")}})),ct.Opt_Out_Of_Downgrade,(function(){return{type:"error",title:V.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.title"),message:V.Ru.get("web-player.pigeon.help-cards.opt-out-of-downgrade.body")}})),ct.Poor_Bandwidth_Interferes,(function(){return{type:"error",title:V.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.title"),message:V.Ru.get("web-player.pigeon.help-cards.poor-bandwidth-interferes.body")}})),ct.Default_To_Very_High,(function(){return{type:"error",title:V.Ru.get("web-player.pigeon.help-cards.default-to-very-high.title"),message:V.Ru.get("web-player.pigeon.help-cards.default-to-very-high.body")}})),ct.Need_To_Redownload,(function(){return{type:"error",title:V.Ru.get("web-player.pigeon.help-cards.need-to-redownload.title"),message:V.Ru.get("web-player.pigeon.help-cards.need-to-redownload.body")}})),ct.Lossless_Unavailable,(function(){return{type:"error",title:V.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.title"),message:V.Ru.get("web-player.pigeon.help-cards.lossless-unavailable.body")}})),ct.Update_Setting,(function(){return{type:"error",title:V.Ru.get("web-player.pigeon.help-cards.update-settings.title"),message:V.Ru.get("web-player.pigeon.help-cards.update-settings.body")}}));const Rt="BFsg6KnXzCo_ZKKekrFC",Lt="OIOUgecXCtVCX_DzOsR4",Tt="qcU9Wt2Ly1y44H_lC327";var Dt=function(){var e,t,n,r=(0,i.useContext)(T).toPreviousView,a=(0,Ae.A)(),o=he(a),l=(t=kt().flags,n=[],t.forEach((function(e){if(It[e]){var t=It[e](),i=t.type,r=t.message,a=t.title;"info"===i?n.push({id:e,text:r,title:a,type:Ge.INFO}):n.push({id:e,text:r,title:null!=a?a:"",type:Ge.ERROR})}})),n),s=l.some(Ke),c=l.filter(s?Ke:We);return(0,x.jsx)(C,{onBack:r,children:(0,x.jsxs)("div",{className:Rt,children:[(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:V.Ru.get("web-player.pigeon.overview-card.title")}),(0,x.jsx)(d.E,{variant:"titleMedium",semanticColor:"textBrightAccent",children:o.titleFull||o.title}),(0,x.jsx)("div",{className:Lt,children:null===(e=o.bitrateDetails)||void 0===e?void 0:e.map((function(e,t){return(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:e},"bitrate-details-".concat(t))}))}),(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBrightAccent"}),(0,x.jsx)("div",{className:Tt,children:(0,x.jsx)(Et,{})}),c.map((function(e){return(0,x.jsx)(Je,{card:e},e.id)}))]})})},_t=(n(47710),n(8609)),Ut=function(e){var t=e.subtitles;return(0,x.jsx)(x.Fragment,{children:t.map((function(e,t){return(0,x.jsx)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",children:e},"subtitle-".concat(t))}))})};const Bt="ZExuZhVAKsqOBfFdR6Js",Ft="G5KBejq8q3GSZxhHs9be",Mt="WG0sT27gl2zSvisQcgHS",Ht="iUbPCgoUSkOoOVEo5wnr",Vt="NCUCNjFgGqpox8ttJKch";var qt=function(e){var t=e.title,n=e.isLossless;return(0,x.jsxs)("div",{className:Ft,children:[(0,x.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:t}),n&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:"•"}),(0,x.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBrightAccent",children:V.Ru.get("web-player.pigeon.audio-quality.lossless.highest")})]})]})},Qt=n(17873);function zt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zt(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gt=function(e){var t=e.onClick,n=e.quality,i=e.playQuality,r=e.maxQuality,a=function(e){switch(e){case jt.a1.LOSSLESS:return{title:V.Ru.get("web-player.pigeon.audio-quality.lossless"),subtitles:[V.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-1"),V.Ru.get("web-player.pigeon.audio-quality.lossless-24.bitrate-details-2")]};case jt.a1.VERY_HIGH:return{title:V.Ru.get("web-player.pigeon.audio-quality.very-high.label"),subtitles:[V.Ru.get("web-player.pigeon.audio-quality.very-high.bitrate-details.subtitle")]};case jt.a1.HIGH:return{title:V.Ru.get("web-player.pigeon.audio-quality.high.label"),subtitles:[V.Ru.get("web-player.pigeon.audio-quality.high.bitrate-details.subtitle")]};case jt.a1.MEDIUM:return{title:V.Ru.get("web-player.pigeon.audio-quality.normal.label"),subtitles:[V.Ru.get("web-player.pigeon.audio-quality.normal.bitrate-details.subtitle")]};case jt.a1.LOW:return{title:V.Ru.get("web-player.pigeon.audio-quality.low.label"),subtitles:[V.Ru.get("web-player.pigeon.audio-quality.low.bitrate-details.subtitle")]};default:return{title:V.Ru.get("web-player.pigeon.audio-quality.unknown.label"),subtitles:null}}}(n),o=a.title,l=a.subtitles;if(null===o||null===l)return null;var s=i===n,c=n===jt.a1.LOSSLESS,u=null===r||n<=r;return(0,x.jsx)(Z.v,{id:"title",variant:"naked",verticalGap:"2px","aria-disabled":!u,onClick:t,onClickHint:V.Ru.get("web-player.pigeon.quality-settings.option-hint",o),title:(0,x.jsx)(qt,{title:o,isLossless:c}),subtitle:(0,x.jsx)(Ut,{subtitles:l}),trailing:s?(0,x.jsx)(_t.i,{semanticColor:"textBrightAccent"}):void 0})},Kt=function(){var e=(0,i.useContext)(T).toPreviousView,t=(0,z.l)(),n=K().playingFrom,r=(0,J.t)(),a=(0,$.K)(r.quality.streamingQuality),o=(0,s.A)(a,2),l=o[0].data,c=o[1].mutate,u=(0,$.K)(r.quality.autoAdjustQuality),p=(0,s.A)(u,2),v=p[0].data,f=p[1].mutate,g=(0,$.K)(r.quality.remoteQuality),m=(0,s.A)(g,2),b=m[0].data,y=m[1].mutate,h=(0,Qt.x)();if(void 0===h||void 0===v||void 0===l)return null;var j=l,w=c,O=null;return t&&b&&(j=b.streamingQuality,O=b.maxSupportedQuality,w=function(e){return y(Yt(Yt({},b),{},{streamingQuality:e}))}),(0,x.jsxs)(C,{onBack:e,children:[(0,x.jsxs)("div",{className:Vt,children:[(0,x.jsx)(d.E,{as:"h2",variant:"titleSmall",semanticColor:"textBase",children:V.Ru.get("web-player.pigeon.quality-settings.title")}),(0,x.jsx)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",children:n})]}),(0,x.jsx)("div",{className:Bt,children:h.sort((function(e,t){return e.quality-t.quality})).map((function(e,t){return(0,x.jsx)(Gt,{quality:e.quality,playQuality:j,maxQuality:O,onClick:function(){return w(e.quality)}},t)}))}),(0,x.jsx)(d.E,{children:V.Ru.get("web-player.pigeon.quality-settings.disclaimer")}),(0,x.jsxs)("div",{className:Mt,children:[(0,x.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:V.Ru.get("web-player.pigeon.quality-settings.listening-preferences")}),(0,x.jsx)(Z.v,{className:Ht,variant:"naked",size:"sm",id:"auto-adjust-quality",horizontalGap:"0px",title:(0,x.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:V.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality")}),trailing:(0,x.jsx)(Pe.l,{id:"desktop.settings.automatic-downgrade",value:v,onSelected:f,condensed:!0})}),(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:V.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality.subtitle-1")}),(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:V.Ru.get("web-player.pigeon.quality-settings.auto-adjust-quality.subtitle-2")})]})]})},Wt=n(9663),Zt=n(59864);const Xt="GYa976HrK40QHF7ZZvwM",Jt="MHROZzo24FoePahYMEFJ",$t="qQ5CfbxUDYyLgy_O6Gah";var en=function(e){var t=e.nrSteps,n=e.currentStep,i=e.onClick;return(0,x.jsx)("div",{className:Xt,children:Array.from({length:t}).map((function(e,t){return(0,x.jsx)("button",{"aria-label":"Go to Step ".concat(t+1),className:u()(Jt,(0,l.A)({},$t,n===t)),onClick:function(){return i(t)}},t)}))})},tn=n(24818),nn=n(84701),rn=n(73253),an=n(96463),on=n(28583);const ln="Vpnd2l8y0SgEYWxGIRzB",sn="cUTxS9VrHd466oEAGs7_",cn="JvZLieWRZZQjIU2ElJ2Y",un="ub90kjJH_P8M2r1QL_jL",dn="U3xgLhEWHrv2mb_ZSesP",pn="ZiS7XuaKSNH6O814jzTW",vn="W8RJgFmuCgvRsxpnXMWG",fn="pAYPkrJQFNaLczxADAGc",gn="nBOyGCpnbwg691MCewBj",mn="hr6LueujvRuzxi6lBlVZ",bn="zwfOn0Sx4qfhn2imHyQ9",yn="UcHPiDY6dLRbaeY65j16",hn="KsS00iz9PKUXYN0PHhno",xn="h66wSXbM4f8lkj4EppJQ";var jn=function(e){var t=e.imageUrl,n=e.max,i=e.alt,r=void 0===i?"":i,a=(0,on.dZ)();return(0,x.jsx)(an._,{className:dn,src:a(t,n),loading:"eager",alt:r})},wn=n(65465),On=function(e){var t=e.path,n=e.loop,r=void 0===n||n;return(0,x.jsx)(i.Suspense,{fallback:null,children:(0,x.jsx)(wn.o,{loop:r,autoplay:!0,path:t,className:un,style:{width:"auto",height:"100%"}})})},Sn=n(54551);function Cn(e){var t=e.children,n=e.variant,r=(0,i.useRef)(null);return(0,Sn.i)({ref:r}),(0,x.jsx)(d.E,{variant:n,semanticColor:"textBase",className:gn,tabIndex:-1,ref:r,children:t})}var An=n(47832),Nn=(0,l.A)((0,l.A)((0,l.A)({},An.E.SMALL,{titleVariant:"bodyMediumBold",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:0,headerGap:0,assetGap:8,subtitleGap:4,titleGap:4,buttonGap:12,assetMaxHeight:165}),An.E.MEDIUM,{titleVariant:"titleSmall",subtitleVariant:"marginalBold",bodyVariant:"bodySmall",containerGap:16,headerGap:24,assetGap:24,subtitleGap:12,titleGap:8,buttonGap:24,assetMaxHeight:240}),An.E.LARGE,{titleVariant:"titleMedium",subtitleVariant:"bodySmall",bodyVariant:"bodyMedium",containerGap:32,headerGap:32,assetGap:48,subtitleGap:16,titleGap:8,buttonGap:32,assetMaxHeight:320});const kn="AOGvMtDLQNbo94n8r8mu",En="gf6sr0Z5UAyf7ULRfSFA";var Pn=function(e){var t=e.icon,n=e.text,i=e.highlighted,r=e.condensed,a=void 0!==r&&r,o=e.className;return(0,x.jsxs)("div",{className:u()(kn,o),children:[(0,x.jsx)(t,{size:a?"xsmall":"small",semanticColor:"textBase",className:u()((0,l.A)({},En,i))}),(0,x.jsx)(d.E,{variant:a?"marginalBold":"bodySmallBold",semanticColor:"textBase",className:u()((0,l.A)({},En,i)),children:n})]})},In=n(56122),Rn=n(64142),Ln=function(e){var t=e.onboardingContent,n=e.onNext,a=e.onTertiaryClick,o=e.layout,s=void 0===o?"vertical":o,c=e.showLoader,p=void 0!==c&&c,f=t.bodyTitle,g=t.bodySubtitle,m=t.bodyText,b=t.imageUrl,y=t.lottiePath,h=t.loopAnimation,j=void 0===h||h,w=t.subtitleIcon,O=t.buttonText,S=t.tertiaryButtonText,C=(0,In.y)(),A=(0,i.useMemo)((function(){var e=An.E.MEDIUM;switch(C){case An.E.SMALL:e=An.E.SMALL;break;case An.E.MEDIUM:e=An.E.MEDIUM;break;case An.E.LARGE:e=An.E.LARGE}return Nn[e]}),[C]),N=A.titleVariant,k=A.subtitleVariant,E=A.bodyVariant,P=A.containerGap,I=A.headerGap,R=A.assetGap,L=A.subtitleGap,T=A.titleGap,D=A.buttonGap,_=A.assetMaxHeight,U=(0,i.useRef)(null),B=(0,Rn.j)();return(0,x.jsx)(tn.A,{mode:"out-in",children:(0,x.jsx)(r.A,{timeout:B?0:800,classNames:{enter:bn,enterActive:yn,exit:hn,exitActive:xn},nodeRef:U,children:(0,x.jsx)("div",{className:ln,style:{"--onboarding-container-gap":"".concat(P,"px"),"--onboarding-asset-gap":"".concat(R,"px"),"--onboarding-subtitle-gap":"".concat(L,"px"),"--onboarding-title-gap":"".concat(T,"px"),"--onboarding-button-gap":"".concat(D,"px"),"--onboarding-asset-max-height":"".concat(_,"px"),"--onboarding-header-gap":"".concat(I,"px")},ref:U,children:(0,x.jsxs)("div",{className:u()(sn,(0,l.A)({},pn,"horizontal"===s)),children:[(0,x.jsxs)("div",{className:cn,children:[b?(0,x.jsx)(jn,{imageUrl:b,max:_}):null,y?(0,x.jsx)(On,{path:y,loop:j}):null]}),(0,x.jsxs)("div",{className:vn,children:[(0,x.jsx)(Pn,{icon:w,text:g,condensed:C!==An.E.LARGE,highlighted:!0,className:fn,variant:k}),(0,x.jsx)(Cn,{variant:N,children:f}),(0,x.jsx)(d.E,{variant:E,children:m}),(0,x.jsx)("div",{className:mn,children:p?(0,x.jsx)(rn.m,{}):(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(v.$,{colorSet:"invertedLight",size:C===An.E.LARGE?"medium":"small",onClick:n,children:O}),a&&S?(0,x.jsx)(nn.H,{size:C===An.E.LARGE?"medium":"small",onClick:a,condensed:!0,children:t.tertiaryButtonText}):null]})})]})]})})},f)})};var Tn=n(93224),Dn=function(){return[{bodyTitle:V.Ru.get("web-player.pigeon.introduction.step-1.title"),bodySubtitle:"Lossless",bodyText:V.Ru.get("web-player.pigeon.introduction.step-1.subtitle"),subtitleIcon:Wt.Q,buttonText:V.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00009256c4d947fba90f6244343446ee"},{bodyTitle:V.Ru.get("web-player.pigeon.introduction.step-2.title"),bodySubtitle:"Lossless",bodyText:V.Ru.get("web-player.pigeon.introduction.step-2.subtitle"),subtitleIcon:Wt.Q,buttonText:V.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc00005e4e6fd833f6f5c2cf4f81c1da66"},{bodyTitle:V.Ru.get("web-player.pigeon.introduction.step-3.title"),bodySubtitle:"Lossless",bodyText:V.Ru.get("web-player.pigeon.introduction.step-3.subtitle"),subtitleIcon:Wt.Q,buttonText:V.Ru.get("web-player.pigeon.introduction.button.next"),imageUrl:"spotify:image:ab671fcc000092564a451c0c1fba3acf8fed995f"},{bodyTitle:V.Ru.get("web-player.pigeon.introduction.step-4.title"),bodySubtitle:"Lossless",bodyText:V.Ru.get("web-player.pigeon.introduction.step-4.subtitle"),subtitleIcon:Wt.Q,buttonText:V.Ru.get("web-player.pigeon.introduction.button.done"),imageUrl:"spotify:image:ab671fcc000092562f3465b95599cdb50e47604e"}]},_n=function(){var e=Ce(),t=(0,s.A)(e,2),n=(t[0],t[1]),r=(0,i.useContext)(T),a=r.setCurrentView,o=r.toPreviousView,l=r.viewTransitions,c=(0,Fe.r)(Zt.m,{}),u=c.spec,d=c.logger,p=l[A.DiscoverLossless],v=function(e){var t=(0,i.useState)(0),n=(0,s.A)(t,2),r=n[0],a=n[1],o=(0,i.useState)(!1),l=(0,s.A)(o,2),c=l[0],u=l[1],d=(0,i.useCallback)((function(){r!==e-1?a(r+1):u(!0)}),[r,e]),p=(0,i.useCallback)((function(){0!==r&&a(r-1),c&&u(!1)}),[r,c]),v=(0,i.useCallback)((function(t){t>=0&&t<e&&a(t),t===e?u(!0):c&&u(!1)}),[e,c]);return{currentStep:r,onNext:d,onBack:p,reachedEnd:c,goTo:v}}(Dn().length),f=v.onNext,g=v.onBack,m=v.currentStep,b=v.goTo,y=(0,i.useCallback)((function(){d.logInteraction(u.closeButtonFactory().hitUiHide()),a(p.continue)}),[d,a,u,p.continue]);return(0,x.jsxs)(C,{titleSlot:(0,x.jsx)(Tn.s,{variant:"bodySmallBold"}),onBack:function(){d.logInteraction(u.backButtonFactory().hitUiHide()),m>0?g():o()},onClose:y,preventDefaultClose:!0,children:[(0,x.jsx)(Ln,{onboardingContent:Dn()[m],onNext:function(){3===m?(d.logInteraction(u.doneButtonFactory().hitUiHide()),n(!0),a(p.continue)):f()}}),(0,x.jsx)(en,{nrSteps:Dn().length,currentStep:m,onClick:b})]})},Un=n(63502),Bn=n(17561),Fn=n(4630),Mn=function(e){var t;return{bodyTitle:V.Ru.get("web-player.puffin.activation-2.title",null===(t=e.headphoneDevice)||void 0===t?void 0:t.deviceName),bodySubtitle:V.Ru.get("web-player.puffin.signifier-text"),lottiePath:(0,Fn.b)("animations/puffin-onboarding-tour-2.json"),subtitleIcon:Bn.C,buttonText:V.Ru.get("web-player.puffin.activation-2.button-confirm"),tertiaryButtonText:V.Ru.get("web-player.puffin.activation-2.button-cancel"),loopAnimation:!1}},Hn=function(){var e=(0,i.useContext)(T),t=e.setCurrentView,n=e.viewTransitions,r=(0,oe.j)(),a=r.deviceFilterState,o=r.isMaybeHeadphoneDevice,l=r.isLoading,s=n[A.ActivationDetection];(0,i.useLayoutEffect)((function(){a.headphoneDevice||l||!o||t(A.ManualSelection,{showDialogOnBack:!0})}),[a.headphoneDevice,l,o,t]);var c=(0,i.useMemo)((function(){return null==a?void 0:a.wasAmbiguous}),[a]);return(0,x.jsx)(Ln,{onboardingContent:Mn(a),onNext:function(){t(c?s.airpods:s.continue)},onTertiaryClick:function(){t(s.selectManually)},showLoader:l||!a.headphoneDevice})},Vn=function(){var e=(0,oe.j)(),t=e.deviceFilterState,n=e.isLoading,r=(0,i.useContext)(T),a=r.setCurrentView,o=r.viewTransitions[A.ActivationIntro],l=(0,i.useCallback)((function(){t.toggleTuneHeadphones?a(o.continue):a(o.selectManually,{showDialogOnBack:!0})}),[t,a,o.continue,o.selectManually]),s={bodyTitle:V.Ru.get("web-player.puffin.activation-1.title"),bodySubtitle:V.Ru.get("web-player.puffin.signifier-text"),lottiePath:(0,Fn.b)("animations/puffin-onboarding-tour-1.json"),subtitleIcon:Bn.C,buttonText:V.Ru.get("web-player.puffin.activation-1.button")};return(0,x.jsx)(Ln,{onboardingContent:s,onNext:l,showLoader:n||!t.audioDevice})},qn=n(5904),Qn=n(64501),zn=n.n(Qn),Yn=n(1131),Gn=n(2390),Kn=function(e,t){var n,i,r,a,o,l,s,c,u,d,p,v,f,g,m,b,y;e.send((0,Gn.d)({has_tuner:!!t.toggleTuneHeadphones,filter_brand:null!==(n=null===(i=t.headphoneDevice)||void 0===i?void 0:i.brand)&&void 0!==n?n:null,filter_model:null!==(r=null===(a=t.headphoneDevice)||void 0===a?void 0:a.model)&&void 0!==r?r:null,was_predicted:!!t.predictedState,headphone_name_over_bluetooth:(null===(o=t.audioDevice)||void 0===o?void 0:o.transportType)===q.Yg.BLUETOOTH?t.audioDevice.name:null,external_accessory_mapping_predicted_brand:null!==(l=null===(s=t.predictedState)||void 0===s?void 0:s.predictedBrand)&&void 0!==l?l:null,external_accessory_mapping_predicted_model:null!==(c=null===(u=t.predictedState)||void 0===u?void 0:u.predictedModel)&&void 0!==c?c:null,was_matched:null!==(d=(null===(p=t.predictedState)||void 0===p?void 0:p.wasMatched)&&!(null!==(v=t.headphoneDevice)&&void 0!==v&&v.isAmbiguous))&&void 0!==d&&d,was_ambiguous:null!==(f=null===(g=t.headphoneDevice)||void 0===g?void 0:g.isAmbiguous)&&void 0!==f&&f,was_manually_selected:null!==(m=(null===(b=t.headphoneDevice)||void 0===b?void 0:b.isAmbiguous)||(null===(y=t.headphoneDevice)||void 0===y?void 0:y.wasSelectedManually))&&void 0!==m&&m}))},Wn=function(e){var t=(0,oe.j)().deviceFilterState,n=se().setCurrentDevice,r=(0,Yn.vh)(),a=(0,i.useContext)(T).setCurrentView;return{handleClick:(0,i.useCallback)((0,qn.A)(zn().mark((function i(){return zn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return n(t.headphoneDevice,!0),i.prev=1,i.next=4,t.setFilterState({specificEnabled:!!t.toggleTuneHeadphones,externalizationEnabled:!!t.toggleTuneStudio});case 4:i.next=10;break;case 6:return i.prev=6,i.t0=i.catch(1),a(A.Error),i.abrupt("return");case 10:Kn(r,t),e();case 12:case"end":return i.stop()}}),i,null,[[1,6]])}))),[t,r,e,n,a])}},Zn=function(){var e=(0,i.useContext)(T),t=e.setCurrentView,n=e.viewTransitions,r=(0,Fe.r)(Un.i,{}),a=r.spec,o=r.logger,l=n[A.ActivationSignifiers],s=Wn((function(){o.logInteraction(a.doneButtonFactory().hitUiHide()),t(l.activate)})).handleClick;return(0,x.jsx)(Ln,{onboardingContent:{bodyTitle:V.Ru.get("web-player.puffin.activation-3.title"),bodySubtitle:V.Ru.get("web-player.puffin.signifier-text"),bodyText:V.Ru.get("web-player.puffin.activation-3.subtitle"),imageUrl:"spotify:image:ab671fcc00005e4ed89275c5e4eef1d432ac3fe2",subtitleIcon:Bn.C,buttonText:V.Ru.get("web-player.puffin.button.done"),loopAnimation:!0},onNext:s})};const Xn="FcycLYpZEbmuEClARSPP",Jn="NSoA0u_DehEmTu_M20Qn",$n="fGnSEIwIPGid9ALC9ANP",ei="ZknipG1So_RdKeJ911k3";var ti=function(e){var t=e.number,n=e.message;return(0,x.jsxs)("div",{className:$n,children:[(0,x.jsx)("div",{className:ei,children:(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBase",children:t})}),(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:n})]})},ni=function(){var e=(0,i.useContext)(T).setCurrentView;return(0,x.jsxs)("div",{className:Xn,children:[(0,x.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",children:V.Ru.get("web-player.puffin.device-connection-lost.title")}),(0,x.jsxs)("div",{className:Jn,children:[(0,x.jsx)(ti,{number:1,message:V.Ru.get("web-player.puffin.device-connection-lost.tip-1")}),(0,x.jsx)(ti,{number:2,message:V.Ru.get("web-player.puffin.device-connection-lost.tip-2")}),(0,x.jsx)(ti,{number:3,message:V.Ru.get("web-player.puffin.device-connection-lost.tip-3")}),(0,x.jsx)(ti,{number:4,message:V.Ru.get("web-player.puffin.device-connection-lost.tip-4")})]}),(0,x.jsx)(nn.H,{semanticColor:"textSubdued",onClick:function(){e(A.Overview)},children:"Still not working"})]})},ii=function(){var e=se().removeCurrentDevice;return ae({title:V.Ru.get("web-player.puffin.activation-dialog.title"),description:V.Ru.get("web-player.puffin.activation-dialog.subtitle"),confirmButtonText:V.Ru.get("web-player.puffin.activation-dialog.button-cancel"),cancelButtonText:V.Ru.get("web-player.puffin.activation-dialog.button-confirm"),onConfirm:function(){e(!0),(0,ne.I)("SETUP_HEADPHONES_BUTTON")}})},ri=function(e){var t=e.type,n=(0,oe.j)().isMaybeHeadphoneDevice,r=(0,Fe.r)(Un.i,{}),a=r.spec,o=r.logger,l=ii(),s=l.triggerDialog,c=l.dialog,u=(0,i.useCallback)((function(){o.logInteraction(a.closeButtonFactory().hitUiHide()),s(!0)}),[o,a,s]),d=(0,i.useCallback)((function(){o.logInteraction(a.backButtonFactory().hitUiReveal()),s(!1)}),[o,a,s]);return(0,x.jsx)(C,{titleSlot:(0,x.jsx)(Tn.s,{variant:"bodySmallBold"}),onClose:u,onBack:d,preventDefaultClose:!0,children:n?(0,x.jsxs)(x.Fragment,{children:[c,"intro"===t&&(0,x.jsx)(Vn,{}),"detection"===t&&(0,x.jsx)(Hn,{}),"signifiers"===t&&(0,x.jsx)(Zn,{})]}):(0,x.jsx)(ni,{})})},ai=n(90785),oi=n(83635),li=n(15824),si=(n(34518),n(4640)),ci=n(20568),ui=function(e){var t=e.device,n=e.onClick,i=e.isAirpodDevice,r=i?"".concat(t.model," (").concat(t.releaseYear,")"):t.model,a=i?V.Ru.get("web-player.puffin.manual-selection.models-list",t.modelNumbers.join(V.Ru.getSeparator())):t.brand;return(0,x.jsx)(ci.c,{children:(0,x.jsx)(Z.v,{variant:"naked",size:"md",isInteractive:!0,id:t.id,title:(0,x.jsx)(Ee.d,{onClick:function(){n(t)},children:r}),subtitle:a,trailing:(0,x.jsx)(si.V,{size:"small",semanticColor:"textSubdued"}),onClick:function(){n(t)},hoverAnimationDuration:"0s"},t.id)})};n(29426);const di="fjltNoIqUMIY7LfgtvCH",pi="WNi2uq00PuqJnOvv6b6a",vi="W3HfPxIGTvmPJNItOM5A",fi="T3zyYZ33nGeJfw6NgwwV",gi="fr_QT3qQxce_KdFUhktQ",mi="wMsnDxvKohBJOUguxi8p",bi="O842FkxrdjAlid2byB9c",yi="E6yKOmbA9ekxMnRhJDnA",hi="sm96uN6u5WGLjNfbT6kF",xi="bWJ8TFqqyCV4TqeScz7D",ji="SRl_K6g2YOd8qrpIFij7";var wi=function(e){var t=e.search;return(0,x.jsxs)("div",{className:yi,children:[(0,x.jsx)(d.E,{semanticColor:"textBase",variant:"titleSmall",className:hi,children:V.Ru.get("web-player.puffin.manual-selection.empty.title",(0,x.jsx)("span",{className:xi,children:(0,x.jsx)("span",{className:ji,children:t})}))}),(0,x.jsx)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",children:V.Ru.get("web-player.puffin.manual-selection.empty.subtitle")})]})};function Oi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Si(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oi(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ci={id:"unknown_device",brand:"",model:"",deviceName:"Generic",modelNumbers:[],releaseYear:""},Ai=function(e){var t=e.devices,n=e.isAirpodsList,r=void 0!==n&&n,a=(0,i.useContext)(T),o=a.setCurrentView,l=a.viewTransitions,s=r?l[A.AirpodsSelection]:l[A.ManualSelection],c=(0,i.useContext)(oi.g),u=c.filter,d=c.setFilter,p=se().setCurrentDevice,v=(0,i.useCallback)((function(e){var t=e?Si(Si({},e),{},{wasSelectedManually:!0,isAmbiguous:r}):null;p(t,!0),o((null==e?void 0:e.id)===Ci.id?s.notFound:s.continue),d("")}),[r,p,o,s.notFound,s.continue,d]),f=t.filter((function(e){var t=e.deviceName,n=e.brand,i=e.model,r=e.modelNumbers;return[t,n,i].concat((0,k.A)(r)).some((function(e){return e.toLowerCase().includes(u.toLowerCase())}))}));return(0,x.jsxs)("div",{className:mi,children:[(0,x.jsx)(li.$,{children:f.map((function(e){return(0,x.jsx)(ui,{device:e,onClick:v,isAirpodDevice:r},e.id)}))}),0===f.length&&(0,x.jsx)(wi,{search:u}),(0,x.jsx)("div",{className:gi,children:(0,x.jsx)(ve.n,{size:"small",onClick:function(){v(Ci)},children:V.Ru.get("web-player.puffin.manual-selection.not-found-button")})})]})},Ni=n(44671),ki=function(){var e,t=(0,le.N)(),n=(0,Ni.I)({queryKey:["puffin-devices"],queryFn:(e=(0,qn.A)(zn().mark((function e(){return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.getDevices();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)}),gcTime:18e5,staleTime:6e5}),i=n.data;return{data:null!=i?i:null,loading:n.isLoading,error:n.isError}},Ei=function(){var e=(0,i.useContext)(T).toPreviousView,t=ki().data,n=(0,i.useMemo)((function(){return null==t?void 0:t.filter((function(e){return"apple"===e.brand.toLowerCase()&&e.model.toLowerCase().includes("airpods")}))}),[t]);return(0,x.jsx)(C,{onBack:function(){e()},children:(0,x.jsxs)(oi.s,{uri:"spotify:internal:bettersound",children:[(0,x.jsxs)("div",{className:pi,children:[(0,x.jsx)("div",{className:vi}),(0,x.jsxs)("div",{className:fi,children:[(0,x.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:V.Ru.get("web-player.puffin.manual-selection.airpods.title")}),(0,x.jsx)(d.E,{variant:"bodySmall",children:V.Ru.get("web-player.puffin.manual-selection.airpods.subtitle")})]}),(0,x.jsx)(ai.S,{placeholder:V.Ru.get("web-player.puffin.manual-selection.airpods.search-placeholder"),alwaysExpanded:!0,fullWidth:!0,debounceFilterChangeTimeout:0})]}),n?(0,x.jsx)("div",{className:di,children:(0,x.jsx)(Ai,{devices:n,isAirpodsList:!0})}):(0,x.jsx)("div",{className:bi,children:(0,x.jsx)(rn.m,{})})]})})},Pi=function(){var e=(0,i.useContext)(T),t=e.setCurrentView,n=e.viewTransitions[A.IncompatibleHeadphones],r=Wn((function(){return t(n.continue)})).handleClick,a=(0,i.useContext)(T).toPreviousView;return(0,x.jsx)(C,{onBack:function(){a()},titleSlot:(0,x.jsx)(Tn.s,{variant:"bodySmallBold"}),children:(0,x.jsx)(Ln,{onboardingContent:{bodyTitle:"These headphones are not compatible with Optimize yet.",bodySubtitle:"Optimize",bodyText:"Only some devices work with Optimize. We're expanding our compatible devices to support a wider range of headphones.",imageUrl:"spotify:image:ab671fcc000092562c122d1cc442ac4f3c8dbab4",subtitleIcon:Bn.C,buttonText:"Close"},onNext:r})})},Ii=function(){var e=(0,i.useContext)(T),t=e.toPreviousView,n=e.viewOptions,r=ki().data,a=ii(),o=a.triggerDialog,l=a.dialog;return(0,x.jsxs)(C,{onBack:function(){null!=n&&n.showDialogOnBack?o():t()},titleSlot:(0,x.jsx)(Tn.s,{variant:"bodySmallBold"}),children:[l,(0,x.jsxs)(oi.s,{uri:"spotify:internal:bettersound",children:[(0,x.jsxs)("div",{className:pi,children:[(0,x.jsx)("div",{className:vi}),(0,x.jsxs)("div",{className:fi,children:[(0,x.jsx)(d.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:V.Ru.get("web-player.puffin.manual-selection.title")}),(0,x.jsx)(d.E,{variant:"bodySmall",children:V.Ru.get("web-player.puffin.manual-selection.subtitle")})]}),(0,x.jsx)(ai.S,{placeholder:V.Ru.get("web-player.puffin.manual-selection.search-placeholder"),alwaysExpanded:!0,fullWidth:!0,debounceFilterChangeTimeout:0})]}),r?(0,x.jsx)("div",{className:di,children:(0,x.jsx)(Ai,{devices:r})}):(0,x.jsx)("div",{className:bi,children:(0,x.jsx)(rn.m,{})})]})]})},Ri=n(45335),Li=n(89907),Ti=function(){var e=(0,i.useContext)(T).currentView;switch(e){case A.ActivationIntro:return(0,x.jsx)(ri,{type:"intro"});case A.ActivationDetection:return(0,x.jsx)(ri,{type:"detection"});case A.ActivationSignifiers:return(0,x.jsx)(ri,{type:"signifiers"});case A.Error:return(0,x.jsx)(B,{});case A.ManualSelection:return(0,x.jsx)(Ii,{});case A.AirpodsSelection:return(0,x.jsx)(Ei,{});case A.Overview:return(0,x.jsx)(Ve,{});case A.AudioQualitySettings:return(0,x.jsx)(Kt,{});case A.AudioQualityDetails:return(0,x.jsx)(Dt,{});case A.DiscoverLossless:return(0,x.jsx)(_n,{});case A.IncompatibleHeadphones:return(0,x.jsx)(Pi,{});default:return(0,Li.k)(e),null}},Di=function(){var e=(0,i.useContext)(T).currentView,t=(0,E._Y)(),n=(0,E.XB)(),r=[m.Z.Puffin,m.Z.PuffinActivation,m.Z.PuffinOverlay,m.Z.PuffinActivationOverlay].some((function(e){return e===n})),a=[A.ActivationIntro,A.ActivationDetection,A.ActivationSignifiers,A.DiscoverLossless,A.ManualSelection,A.AirpodsSelection,A.IncompatibleHeadphones].includes(e),o=[A.ActivationIntro,A.ActivationDetection,A.ActivationSignifiers,A.ManualSelection,A.IncompatibleHeadphones].includes(e);(0,i.useEffect)((function(){r&&t(o?re.$S.PUFFIN_START_ACTIVATION:re.$S.PUFFIN_FINISH_ACTIVATION)}),[t,o,r]);var s=(0,i.useRef)(null),c=(0,Ri.c)((0,l.A)((0,l.A)((0,l.A)({},An.E.SMALL,0),An.E.MEDIUM,448),An.E.LARGE,780),s).breakpoint;return(0,x.jsx)(Qe.w,{className:u()((0,l.A)({},h,a)),ref:s,children:(0,x.jsx)(In.o.Provider,{value:c,children:(0,x.jsxs)("div",{className:b,children:[(0,x.jsx)(Ti,{}),false]})})})},_i=function(){return(0,x.jsx)(qe._,{label:"Puffin",focusTransferId:"PUFFIN",children:(0,x.jsx)(o.s,{fallback:F,children:(0,x.jsx)(D,{children:(0,x.jsx)(Di,{})})})})},Ui=(n(51234),n(88610)),Bi=n(65746);function Fi(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))}function Mi(e,t){return t.some((function(t){return t.user.uri===e.user.uri}))?t:Fi([].concat((0,k.A)(t),[e]))}function Hi(e,t){return t.filter((function(t){return t.user.uri!==e}))}n(60482);var Vi=n(2860);var qi=n(80772),Qi=n(84290);function zi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Yi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Yi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Yi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function Gi(){var e=(0,Bi.C)(),t=(0,Ui.jE)(),n=["friend-activity"],r=function(e){t.setQueryData(n,(function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return function(e,t){return Fi(t.map((function(t){return t.user.uri===e.user.uri?e:t})))}(Array.isArray(e)?e[0]:e,t)}))},a=function(e){var t=(0,Bi.C)(),n=(0,i.useRef)({}),r=(0,i.useRef)(e);r.current=e;var a=(0,i.useCallback)((function(e){var i,a=null===(i=(0,Vi.o_h)(e))||void 0===i?void 0:i.username,o=t.subscribeToBuddyActivity(a,(function(e){e&&r.current(e)}));return n.current[e]=o,o}),[t]),o=(0,i.useCallback)((function(e){var t;null===(t=n.current[e])||void 0===t||t.cancel(),delete n.current[e]}),[]),l=(0,i.useCallback)((function(e,n,i){return t.fetchFriendActivityWithSubscriptions(e,n,i)}),[t]);return(0,i.useEffect)((function(){var e=n.current;return function(){Object.values(e).forEach((function(e){e.cancel()}))}}),[t]),{subscribeToFriend:a,unSubscribeFromFriend:o,subscribeAndFetchFeed:l}}(r),o=a.subscribeToFriend,l=a.unSubscribeFromFriend,s=a.subscribeAndFetchFeed,c=(0,i.useRef)();(0,i.useEffect)((function(){return function(){var e;return null===(e=c.current)||void 0===e?void 0:e.cancel()}}),[]);var u=(0,Ni.I)({queryKey:n,queryFn:function(){return new Promise((function(e,t){c.current=s(r,e,t)})).then((function(e){return Fi(e)}))},staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,Qi.N)(qi.mc.OPERATION_COMPLETE,function(){var i=(0,qn.A)(zn().mark((function i(r){var a,s,c,u,d,p,v;return zn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(a=r.data.uris,r.data.operation!==qi.JK.FOLLOW_USER){i.next=19;break}s=zi(a),i.prev=3,u=zn().mark((function i(){var r,a,l;return zn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=c.value,i.next=3,e.fetchFriendActivity([r]);case 3:a=i.sent,l=a[0],t.setQueryData(n,(function(){return Mi(l,arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])})),o(r);case 7:case"end":return i.stop()}}),i)})),s.s();case 6:if((c=s.n()).done){i.next=10;break}return i.delegateYield(u(),"t0",8);case 8:i.next=6;break;case 10:i.next=15;break;case 12:i.prev=12,i.t1=i.catch(3),s.e(i.t1);case 15:return i.prev=15,s.f(),i.finish(15);case 18:return i.abrupt("return");case 19:if(r.data.operation!==qi.JK.UNFOLLOW_USER){i.next=36;break}d=zi(a),i.prev=21,v=zn().mark((function e(){var i;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=p.value,l(i),t.setQueryData(n,(function(){return Hi(i,arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}));case 3:case"end":return e.stop()}}),e)})),d.s();case 24:if((p=d.n()).done){i.next=28;break}return i.delegateYield(v(),"t2",26);case 26:i.next=24;break;case 28:i.next=33;break;case 30:i.prev=30,i.t3=i.catch(21),d.e(i.t3);case 33:return i.prev=33,d.f(),i.finish(33);case 36:case"end":return i.stop()}}),i,null,[[3,12,15,18],[21,30,33,36]])})));return function(e){return i.apply(this,arguments)}}()),u}var Ki=(0,i.lazy)((function(){return Promise.all([n.e(4151),n.e(7564)]).then(n.bind(n,21842))}));function Wi(){var e=Gi(),t=e.data,n=e.error,i=e.isLoading;return!(0,Ot.n)()||i||n?null:(0,x.jsx)(Ki,{friends:null!=t?t:[]})}var Zi=n(99362);function Xi(e){return e.sort((function(e,t){return t.timestamp-e.timestamp}))}function Ji(e,t){return t.some((function(t){return t.user.uri===e.user.uri}))?t:Xi([].concat((0,k.A)(t),[e]))}function $i(e,t){return t.filter((function(t){return t.user.uri!==e}))}var er=n(46908),tr=n(10563);function nr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return ir(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?ir(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function ir(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function rr(){var e=(0,Zi.C)(),t=(0,Ui.jE)(),n=["friend-activity"],r=function(e){var t=(0,Zi.C)(),n=(0,i.useRef)({}),r=(0,i.useRef)(e);r.current=e;var a=(0,i.useCallback)((function(e){var i,a=null===(i=(0,Vi.o_h)(e))||void 0===i?void 0:i.username,o=t.subscribeToBuddyActivity(a,(function(e){e&&r.current(e)}));return n.current[e]=o,o}),[t]),o=(0,i.useCallback)((function(e){var t;null===(t=n.current[e])||void 0===t||t.cancel(),delete n.current[e]}),[]);return(0,i.useEffect)((function(){var e=n.current;return function(){Object.values(e).forEach((function(e){e.cancel()}))}}),[]),{subscribeToFriend:a,unSubscribeFromFriend:o}}((function(e){t.setQueryData(n,(function(){return function(e,t){return Xi(t.map((function(t){return t.user.uri===e.user.uri?e:t})))}(e,arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}))})),a=r.subscribeToFriend,o=r.unSubscribeFromFriend,l=(0,Ni.I)({queryKey:n,queryFn:function(){return tr.xA(er.n.getInstance()).then((function(e){return e.body.friends.forEach((function(e){return a(e.user.uri)})),Xi(e.body.friends)}))},staleTime:6e5,gcTime:36e5,refetchInterval:864e5,refetchOnWindowFocus:!1,refetchOnMount:"always",refetchOnReconnect:!0});return(0,Qi.N)(qi.mc.OPERATION_COMPLETE,function(){var i=(0,qn.A)(zn().mark((function i(r){var l,s,c,u,d,p,v;return zn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(l=r.data.uris,r.data.operation!==qi.JK.FOLLOW_USER){i.next=19;break}s=nr(l),i.prev=3,u=zn().mark((function i(){var r,o,l;return zn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return r=c.value,i.next=3,e.fetchFriendActivity([r]);case 3:o=i.sent,l=o[0],t.setQueryData(n,(function(){return Ji(l,arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])})),a(r);case 7:case"end":return i.stop()}}),i)})),s.s();case 6:if((c=s.n()).done){i.next=10;break}return i.delegateYield(u(),"t0",8);case 8:i.next=6;break;case 10:i.next=15;break;case 12:i.prev=12,i.t1=i.catch(3),s.e(i.t1);case 15:return i.prev=15,s.f(),i.finish(15);case 18:return i.abrupt("return");case 19:if(r.data.operation!==qi.JK.UNFOLLOW_USER){i.next=36;break}d=nr(l),i.prev=21,v=zn().mark((function e(){var i;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:i=p.value,o(i),t.setQueryData(n,(function(){return $i(i,arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}));case 3:case"end":return e.stop()}}),e)})),d.s();case 24:if((p=d.n()).done){i.next=28;break}return i.delegateYield(v(),"t2",26);case 26:i.next=24;break;case 28:i.next=33;break;case 30:i.prev=30,i.t3=i.catch(21),d.e(i.t3);case 33:return i.prev=33,d.f(),i.finish(33);case 36:case"end":return i.stop()}}),i,null,[[3,12,15,18],[21,30,33,36]])})));return function(e){return i.apply(this,arguments)}}()),l}var ar=(0,i.lazy)((function(){return Promise.all([n.e(4151),n.e(6548)]).then(n.bind(n,60002))}));function or(){var e=rr(),t=e.data,n=e.error,i=e.isLoading;return!(0,Ot.n)()||i||n?null:(0,x.jsx)(ar,{friends:null!=t?t:[]})}n(40065),n(4865);var lr="device-picker-section-heading",sr="device-picker-troubleshooting-list";const cr="uqXaqvqZq1oSLhXLYRo9",ur="YuPZ1nUe5BAH7HJworb6",dr="wWalUsrOkGgHa0u8o86Q",pr="yNttGX9uUxTih93MKEWB",vr="kD25df_SN_uDB8lhZgQB",fr="szp7gPJjKd4T69SzCEpF",gr="E912cqRfb05FrRPFKDZ_",mr="D7sZlTAybIM02cRvh4sV",br="xdAVCtEIoo_8z_Ubj7tU";var yr=function(e){var t=e.foundDevices?V.Ru.get("web-player.connect.device-picker.select-another-device"):V.Ru.get("web-player.connect.device-picker.no-devices-found");return(0,x.jsx)("span",{className:pr,id:lr,"data-testid":lr,children:(0,x.jsx)(d.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",children:t})})},hr=n(43925),xr=n(15057),jr=n(4057),wr=n(47973),Or=n(65941),Sr=n(59414),Cr=n(98538),Ar=n(78531),Nr=n(10806),kr=n(17403),Er=n(60251),Pr=n(99599),Ir=n(56818),Rr=n(36178),Lr=n(46400),Tr=n(49093),Dr=n(59766),_r=n(2746),Ur=n(93833);var Br=n(36783);const Fr="mFr6W9mwg0p_c7eJlhc_",Mr="lpPBKkIGJcyWu59iOpsS";var Hr=function(e){var t=e.deviceId,n=e.connectStateDeviceId,i=e.allowForgetDevice,r=e.incarnation,o=(0,Dr.e)(),l=(0,Ur.N)(_r.r),s=(0,ce.s)(),c=(0,Fe.r)(Pr.d,{}).spec,u=(0,Br.t)(c),d=c.forgetDeviceButtonFactory(),p=(0,Br.t)(d),v=c.deviceIncarnationContainerFactory(),f=(0,Br.t)(v),g=(0,a.NC)(Tr.NPo);return i||r?(0,x.jsx)("span",{ref:u,className:Mr,children:(0,x.jsxs)(Ir.W,{children:[i&&(0,x.jsx)(Lr.D,{role:"menuitem",leadingIcon:(0,x.jsx)(Er.V,{size:"small"}),onClick:function(){s.logInteraction(d.hitLogoutFromRemoteDevice({remoteDeviceId:n})),g?l.logout(t):o.logout(t)},elementRef:p,children:V.Ru.get("web-player.connect.context-menu.forget-device")}),r&&(0,x.jsxs)("div",{ref:f,children:[(0,x.jsx)(Rr.y,{children:V.Ru.get("web-player.connect.context-menu.incarnation-title")}),r.available.map((function(e){var i=function(e){switch(e){case"connect":return{icon:(0,x.jsx)(jr.E,{size:"small"}),text:V.Ru.get("web-player.connect.context-menu.incarnation-connect")};case"cast":return{icon:(0,x.jsx)(kr.m,{size:"small"}),text:V.Ru.get("web-player.connect.context-menu.incarnation-cast")};default:return{}}}(e),a=i.icon,c=i.text;return(0,x.jsx)(Lr.D,{role:"menuitemradio",leadingIcon:a,onClick:function(){var i;switch(e){case"cast":i=v.googleCastButtonFactory();break;case"connect":i=v.spotifyConnectButtonFactory()}r.preferred!==e?(i&&s.logInteraction(i.hitChangeRemoteDeviceIncarnation({remoteDeviceId:n})),g?l.setPreferredIncarnation(t,e):o.setPreferredIncarnation(t,e)):i&&s.logInteraction(i.hitNoAction())},"aria-checked":r.preferred===e,CheckedIcon:_t.i,children:c},e)}))]})]})}):null},Vr=n(84959),qr=function(e){var t=e.title,n=e.deviceId,r=e.connectStateDeviceId,a=e.allowForgetDevice,o=e.incarnation,l=e.className,c=e.onHide,d=e.onShow,p=e.spec,v=(0,i.useState)(!1),f=(0,s.A)(v,2),g=f[0],m=f[1],b=p.contextMenuButtonFactory({identifier:r}),y=(0,ce.s)(),h=(0,Br.t)(b);return(0,x.jsx)(Nr.b,{renderInline:!0,menu:(0,x.jsx)(Vr.r,{spec:b,children:(0,x.jsx)(Hr,{deviceId:n,connectStateDeviceId:r,allowForgetDevice:a,incarnation:o})}),onShow:function(){m(!0),null==d||d()},onHide:function(){m(!1),null==c||c()},offset:[0,-8],children:(0,x.jsx)(Ar.e,{ref:h,size:Ar.M.xs,label:V.Ru.get("more.label.context",t),className:u()(Fr,l),onClick:function(e){e.stopPropagation(),y.logInteraction(g?b.hitUiHide():b.hitUiReveal())}})})},Qr=(0,i.createContext)({rowWithMenuOpenIdentifier:null,setRowWithMenuOpenIdentifier:function(){}}),zr=function(e){var t=e.children,n=(0,i.useState)(null),r=(0,s.A)(n,2),a=r[0],o=r[1];return(0,x.jsx)(Qr.Provider,{value:{rowWithMenuOpenIdentifier:a,setRowWithMenuOpenIdentifier:o},children:t})},Yr=function(e){return e instanceof hr.B.ContainerViewEventFactory.DeviceListEventFactory.RemoteDeviceEventFactory||e instanceof hr.B.ContainerViewEventFactory.DeviceListEventFactory.DisabledDeviceEventFactory||e instanceof hr.B.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.RemoteDeviceEventFactory||e instanceof hr.B.ContainerViewEventFactory.OffNetworkDeviceListEventFactory.DisabledDeviceEventFactory||e instanceof hr.B.ContainerViewEventFactory.OnNetworkDeviceListEventFactory.RemoteDeviceEventFactory},Gr=n(28678),Kr=n(7084),Wr=n(66606),Zr=n(65258),Xr=n(37221),Jr=n(97506),$r=n(35489);const ea="AWblt0YATqa_XQaPUDMc",ta="sX7AwqoSzMeT9qhlEViU",na="jIlVu16bmijzUKG6u5VW",ia="ZkuPLR9bss2N7f7thixx",ra="QSZFk1XCj76mVplNmiV1",aa="O0wmxPM0kfA59paiHqR9";var oa=(0,i.forwardRef)((function(e,t){var n,r=e.deviceId,o=e.connectStateDeviceId,s=e.Icon,c=e.TechIcon,d=e.title,p=e.subtitle,v=e.canLogout,f=e.isDisabled,g=e.incarnation,m=e.onClick,b=e.spec,y=(0,E._Y)(),h=(0,H.wA)(),j=(0,Gr.HJ)(g),w=v||j,O=(0,i.useContext)(Qr),S=O.rowWithMenuOpenIdentifier,C=O.setRowWithMenuOpenIdentifier,A=function(e){var t=(0,Xr.d)(),n=(0,Ui.jE)(),i=(0,a.NC)($r.PE,{loadingValue:!1}),r=(0,Ni.I)({queryKey:["useResolveJamFromConnectDevice",e],queryFn:function(){return t.getJoinTokenFromConnectDeviceId(e)},enabled:i}).data,o=(0,Ni.I)({queryKey:["useResolveJamFromConnectDevice",r],queryFn:r?function(){return t.getSessionInfo(r)}:Wr.hT,enabled:!!r}).data;return(0,Jr.c)(Zr.P.SCAN_UPDATE,(function(){n.invalidateQueries({queryKey:["useResolveJamFromConnectDevice",e]})})),null!=o?o:null}(o),N=(0,xr.YQ)((function(){f||(null!=A&&A.joinSessionToken?h((0,Or.A9)(Kr.EL.JOIN_LISTENING_SESSION,A.joinSessionToken,void 0,o)):(null==m||m(),y(re.$S.PANEL_CLOSE_CLICK)))}),1e3,{leading:!0,trailing:!1}),k=(0,i.useCallback)((function(e){"Enter"===e.key&&N()}),[N]),P=(0,x.jsx)(Hr,{deviceId:r,connectStateDeviceId:o,allowForgetDevice:v,incarnation:j?g:void 0}),I=null==A||null===(n=A.sessionMembers.find((function(e){return e.id===A.sessionOwnerId})))||void 0===n?void 0:n.displayName,R=I&&!A.isSessionOwner?(0,x.jsxs)("div",{className:ta,children:[(0,x.jsx)(jr.E,{semanticColor:"textBrightAccent",size:"small"}),(0,x.jsx)(wr.j,{semanticColor:"textBrightAccent",lineClamp:1,children:V.Ru.get("web-player.social-connect.broadcasting.bradcasting-device-subtitle",{host:I})})]}):(0,x.jsxs)("div",{className:ta,children:[c&&(0,x.jsx)(c,{className:na,semanticColor:"textSubdued","data-testid":"sub-icon",role:"presentation",size:"small"}),p&&(0,x.jsx)(wr.j,{semanticColor:"textSubdued",lineClamp:1,children:p})]});return(0,x.jsx)(Sr.h,{menu:P,children:(0,x.jsx)(ci.c,{onKeyDown:k,onClick:N,className:u()(ia,(0,l.A)({},aa,S===r)),children:(0,x.jsx)(Z.v,{id:r,ref:t,"data-testid":"device-picker-row-sidepanel",media:(0,x.jsx)(s,{semanticColor:f?"textSubdued":"textBase","data-testid":"main-icon",role:"presentation"}),onClick:function(){},onClickHint:V.Ru.get("web-player.connect.device-picker.connect-to-device"),title:(0,x.jsx)("span",{className:ea,children:(0,x.jsx)(Cr.Zp,{label:d,renderInline:!0,children:(0,x.jsx)(Ee.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:f?"textSubdued":"textBase",dir:"auto",children:d})})}),subtitle:R,trailing:w&&Yr(b)&&(0,x.jsx)(qr,{title:d,deviceId:r,connectStateDeviceId:o,allowForgetDevice:v,incarnation:j?g:void 0,spec:b,className:u()(ra),onShow:function(){C(r)},onHide:function(){C(null)}})})})})})),la=function(e){var t=e.position,n=e.deviceId,i=e.connectStateDeviceId,r=e.deviceName,a=e.deviceType,o=e.deviceModelName,l=e.isGroup,s=e.disabledReason,c=e.canLogout,u=e.spec,d=(0,Gr.tf)(a,l),p=(0,Gr.uY)(s,(0,Gr.p2)(a,o)).helpText,v=u.disabledDeviceFactory({identifier:i,position:t,reason:null!=s?s:"null"}),f=(0,Br.t)(v);return(0,x.jsx)(oa,{deviceId:n,connectStateDeviceId:i,ref:f,isDisabled:!0,Icon:d,title:r,subtitle:p,canLogout:c,spec:v})},sa=n(59305),ca=n(41349),ua=function(e){var t=e.isDisabled,n=void 0!==t&&t,i=e.spec,r=(0,H.wA)(),a=i.containerViewFactory().deviceListFactory().castPlaceholderFactory(),o=(0,Br.t)(a),l=(0,Gr.$A)(ca.bq.CAST_AUDIO,"disconnected"),s=(0,ce.s)();return(0,x.jsx)(oa,{deviceId:"cast-placeholder",connectStateDeviceId:"cast-placeholder",ref:o,Icon:l,title:V.Ru.get("web-player.connect.device-picker.google-cast-devices"),supportsHiFi:!1,onClick:function(){s.logInteraction(a.hitUiReveal()),r((0,sa.Ym)())},isDisabled:n,spec:a})},da=n(86723),pa=function(e){var t=e.deviceId,n=e.connectStateDeviceId,i=e.deviceName,r=e.supportsHiFi,o=e.spec,l=(0,ce.s)(),s=o.localDeviceFactory(),c=(0,Gr.tf)(ca.bq.COMPUTER,!1),u=(0,Dr.e)(),d=(0,da.D)(),p=(0,a.NC)(Tr.p41);return(0,x.jsx)(oa,{deviceId:t,connectStateDeviceId:n,Icon:c,title:i,supportsHiFi:r,onClick:function(){var e=l.logInteraction(s.hitPullPlaybackToLocalDevice()),n=e.interactionId,i=e.pageInstanceId;(p?d:u).transferPlayback(t,{interactionId:n,pageInstanceId:i})},spec:s})};function va(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fa(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?va(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):va(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ga=function(){var e=(0,Se.x)("connect-picker-recent-transfers",{}),t=(0,s.A)(e,2),n=t[0],r=t[1];return{registerTransferAttempt:(0,i.useCallback)((function(e){r(fa(fa({},n),{},(0,l.A)({},e,(new Date).getTime())))}),[n,r]),recentTransfersMap:n}},ma=function(e){var t,n=e.position,i=e.deviceId,r=e.connectStateDeviceId,o=e.deviceName,l=e.deviceType,s=e.isGroup,c=e.supportsHiFi,u=e.canLogout,d=e.incarnation,p=e.spec,v=(0,ce.s)(),f=p.remoteDeviceFactory({identifier:r,position:n}),g=(0,Gr.tf)(l,s),m=void 0;(0,Gr.Mp)(l)&&(t=(0,Gr.$A)(l,"disconnected"),m=V.Ru.get("web-player.connect.device-picker.google-cast"));var b=ga().registerTransferAttempt,y=(0,Dr.e)(),h=(0,da.D)(),j=(0,a.NC)(Tr.p41),w=(0,Br.t)(f);return(0,x.jsx)(oa,{deviceId:i,connectStateDeviceId:r,ref:w,Icon:g,TechIcon:t,title:o,subtitle:m,supportsHiFi:c,canLogout:u,incarnation:d,onClick:function(){var e=v.logInteraction(f.hitConnectToRemoteDevice({remoteDeviceId:r})),t=e.interactionId,n=e.pageInstanceId;(j?h:y).transferPlayback(i,{interactionId:t,pageInstanceId:n}),b(r)},spec:f})},ba=function(){return(0,St.o)((function(e){var t,n;return(null!==(t=null==e||null===(n=e.restrictions)||void 0===n||null===(n=n.disallowTransferringPlaybackReasons)||void 0===n?void 0:n.length)&&void 0!==t?t:0)>0}))},ya=n(63034),ha=function(e){var t=e.devices,n=e.areWebPlayerCastDevicesAvailable,i=void 0!==n&&n,r=e.networkHeadingID,a=void 0===r?"":r,o=e.spec,l=(0,ya.Ek)(),s=ba(),c=o.containerViewFactory().deviceListFactory(),u=(0,Br.t)(c),d=function(e,t){var n=l?V.Ru.get("web-player.connect.device-picker.this-computer"):V.Ru.get("web-player.connect.device-picker.this-web-browser");return e.isDisabled?(0,x.jsx)(la,{position:e.isLocal?0:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.isLocal?n:e.name,deviceType:e.isLocal?ca.bq.COMPUTER:e.type,deviceModelName:e.modelDisplayName,isGroup:e.isGroup,disabledReason:e.disabledReason,canLogout:!e.isLocalNetwork&&e.supportsLogout,spec:c},e.id):e.isLocal&&function(e){return e instanceof hr.B.ContainerViewEventFactory.DeviceListEventFactory||e instanceof hr.B.ContainerViewEventFactory.OnNetworkDeviceListEventFactory}(c)?(0,x.jsx)(pa,{deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:n,supportsHiFi:e.losslessSupport.fullySupported,spec:c},e.id):(0,x.jsx)(ma,{position:t+1,deviceId:e.id,connectStateDeviceId:e.connectStateId,deviceName:e.name,deviceType:e.type,isGroup:e.isGroup,supportsHiFi:e.losslessSupport.fullySupported,canLogout:!e.isLocalNetwork&&e.supportsLogout,incarnation:e.incarnation,spec:c},e.id)};return(0,x.jsxs)(li.$,{circular:!1,ref:u,"aria-labelledby":"".concat(lr," ").concat(a),"data-testid":"devices-list-".concat(a),allowsMultipleInteractiveChildrenInItem:!0,children:[t.map((function(e,t){return d(e,t)})),i&&(0,x.jsx)(ua,{isDisabled:s,spec:o})]})},xa="local-network-heading",ja="other-networks-heading",wa=function(e){var t=e.localNetworkDevices,n=e.otherNetworksDevices,i=e.spec;return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.E,{as:"h3",variant:"bodySmall",semanticColor:"textSubdued",className:vr,id:xa,children:t.length>0?V.Ru.get("web-player.connect.device-picker.on-this-network"):V.Ru.get("web-player.connect.device-picker.no-devices-local-network")}),t.length>0&&(0,x.jsx)(ha,{devices:t,networkHeadingID:xa,spec:i}),n.length>0&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(d.E,{as:"h3",variant:"bodySmall",semanticColor:"textSubdued",className:u()(vr,fr),id:ja,children:V.Ru.get("web-player.connect.device-picker.on-other-networks")}),(0,x.jsx)(ha,{devices:n,networkHeadingID:ja,spec:i})]})]})},Oa=n(18896),Sa=function(e){var t=e.url,n=e.linkText,i=e.handleClick,r=e.elementRef;return(0,x.jsx)("a",{className:u()(ia),href:t,target:"_blank",ref:r,onClick:i,children:(0,x.jsx)(Z.v,{title:n,id:n,isRedundantOnClick:!0,onClick:function(){},"data-testid":"list-row-external-link",trailing:(0,x.jsx)(Oa.H,{size:"small","data-testid":"icon-external-link",semanticColor:"textSubdued",role:"presentation",autoMirror:!0,"aria-hidden":"true"})})})},Ca=function(e){var t=e.spec,n=(0,ya.Ek)(),i="?utm_campaign=connect&utm_medium=".concat(n?"app":"web","&utm_source=desktop"),r="".concat("https://www.spotify.com/connect").concat(i),a=t.containerViewFactory().externalConnectHubLinkFactory(),o=(0,Br.t)(a),l=(0,ce.s)();return(0,x.jsx)(Sa,{url:r,linkText:V.Ru.get("web-player.connect.device-picker.connect-hub-external-link"),elementRef:o,handleClick:function(){l.logInteraction(a.hitNavigateToExternalUri({destination:r}))}})},Aa="https://support.spotify.com/article/spotify-connect/",Na=function(e){var t=e.spec.containerViewFactory().externalHelpLinkFactory(),n=(0,Br.t)(t),i=(0,ce.s)();return(0,x.jsx)(Sa,{url:Aa,linkText:V.Ru.get("web-player.connect.device-picker.help-external-link"),elementRef:n,handleClick:function(){i.logInteraction(t.hitNavigateToExternalUri({destination:Aa}))}})},ka=n(8082),Ea=[ka.h.en,ka.h.enGB],Pa=function(){var e=V.Ru.getLocaleForTranslation();return Ea.includes(e)};function Ia(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ra(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ra(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var i=0,r=function(){};return{s:r,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:r}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,o=!0,l=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return o=e.done,e},e:function(e){l=!0,a=e},f:function(){try{o||null==n.return||n.return()}finally{if(l)throw a}}}}function Ra(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=Array(t);n<t;n++)i[n]=e[n];return i}function La(e,t){var n=[],i=e.find((function(e){return e.isLocal}));i&&n.push(i);var r=function(e,t){var n,i=[],r=[],a=Ia(e);try{for(a.s();!(n=a.n()).done;){var o=n.value;t[o.connectStateId]?i.push({device:o,timestamp:t[o.connectStateId]}):r.push(o)}}catch(e){a.e(e)}finally{a.f()}return{usedDevices:i,unusedDevices:r}}(e.filter((function(e){return!e.isLocal})),t),a=r.usedDevices,o=r.unusedDevices;a.sort((function(e,t){return t.timestamp-e.timestamp}));var l,s=Ia(a);try{for(s.s();!(l=s.n()).done;){var c=l.value;n.push(c.device)}}catch(e){s.e(e)}finally{s.f()}var u=n.concat(function(e){return e.sort((function(e,t){return e.isLocal?-1:t.isLocal?1:e.name.toLowerCase().localeCompare(t.name.toLowerCase())}))}(o));return u}function Ta(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Da(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ta(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ta(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var _a=function(e){var t=e.devices,n=e.areWebPlayerCastDevicesAvailable,i=(0,ya.Ek)(),r=ba(),a=Pa(),o=La(!i&&r?t.map((function(e){return Da(Da({},e),{},{isDisabled:!0})})):t,ga().recentTransfersMap),l=(0,Fe.r)(hr.p,{}).spec,s=o.filter((function(e){return e.isLocalNetwork})),c=o.filter((function(e){return!e.isLocalNetwork}));return(0,x.jsxs)("div",{className:u()(cr,ur),children:[(0,x.jsx)("div",{children:i&&c.length>0?(0,x.jsx)(wa,{localNetworkDevices:s,otherNetworksDevices:c,spec:l}):(0,x.jsx)(ha,{devices:o,areWebPlayerCastDevicesAvailable:n,spec:l})}),(0,x.jsxs)("div",{className:u()(gr),children:[(0,x.jsx)(Na,{spec:l}),a&&(0,x.jsx)(Ca,{spec:l})]})]})},Ua=n(11514),Ba=n(92950),Fa=n(35617),Ma=(0,i.forwardRef)((function(e,t){var n=e.Icon,i=e.title,r=e.subtitle;return(0,x.jsx)(ci.c,{className:ia,children:(0,x.jsx)(Z.v,{id:i,ref:t,"data-testid":"device-picker-row-sidepanel",media:(0,x.jsx)(n,{semanticColor:"textSubdued"}),title:(0,x.jsx)("span",{className:ea,children:(0,x.jsx)(Cr.Zp,{label:i,renderInline:!0,children:(0,x.jsx)(Ee.d,{"data-testid":"list-row-title",lineClamp:1,semanticColor:"textBase",dir:"auto",children:i})})}),subtitle:(0,x.jsx)("div",{className:ta,children:(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:r})})})})})),Ha=n(51132);const Va="Bjx5Gw7p3JoiF4qI6eMQ";var qa=function(){var e=(0,oe.j)(),t=e.deviceFilterState,n=e.isMaybeHeadphoneDevice,i=(0,de.j)(),r=(0,Be.v)(),a=(0,Ae.A)(),o=t.currentState.externalizationEnabled||t.currentState.specificEnabled,l=a===ye.Yn.LOSSLESS||a===ye.Yn.LOSSLESS_24;return(0,x.jsxs)("div",{className:Va,children:[r&&o&&n&&(0,x.jsx)(Bn.C,{size:"small",semanticColor:"textBrightAccent"}),(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBrightAccent",children:i&&l&&"Lossless"})]})};const Qa="G1CP8Uu3Gf2cihYJI6Da",za="nNGIZKkKfoCorRv2f452",Ya="IoeexgnqTLHXvE5pct_0",Ga="XFbGPr_IwzKGEhcDpxkS",Ka="KYkSwfV1FCtD15TMChbH",Wa="v7CrgRsPeGhw_wa_21pQ",Za="v_d7zRnXAkuJt1lE8tzS";var Xa=function(e){var t=e.onClick,n=K(),i=n.deviceName,r=n.formattedDeviceName;return(0,x.jsx)("div",{className:Za,children:(0,x.jsx)(Cr.Zp,{label:null!=r?r:i,children:(0,x.jsx)(wr.j,{lineClamp:1,onClick:t,children:(0,x.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:null!=r?r:i})})})})},Ja=n(14227),$a=n(15196),eo=function(e){var t=e.size,n=void 0===t?"medium":t,i=e.className,r=(0,Rn.j)(),a=(0,$a.k)(n);return(0,x.jsx)(x.Fragment,{children:r?(0,x.jsx)(Ja.A,{size:n,semanticColor:"textBrightAccent",className:i,"data-testid":"now-playing-active"}):(0,x.jsx)("img",{className:i,width:a,height:a,alt:"","aria-hidden":"true",src:(0,Fn.b)("images/device-picker-equaliser-animation.webp"),"data-testid":"animated-now-playing"})})},to=n(87281),no=function(e){var t,n=e.deviceType,i=e.isGroup,r=e.isLocalDevice,a=e.isPlaying,o=(0,to.g)();if(a)t=(0,x.jsx)(eo,{});else{var l=(0,Gr.tf)(n,i,r?o:null);t=(0,x.jsx)(l,{semanticColor:"textBrightAccent","data-testid":"device-icon",role:"presentation"})}return(0,x.jsxs)("div",{className:Ga,children:[(0,x.jsx)("div",{className:Ka,children:t}),(0,x.jsx)(Ee.d,{variant:"titleSmall",semanticColor:"textBase",lineClamp:1,children:V.Ru.get("web-player.connect.device-picker.current-device")})]})},io=n(71591),ro=n(7585),ao=n(1626),oo=function(){var e=(0,ro.l)().currentDevice,t=e.id,n=e.connectStateId,i=e.isLocalNetwork,r=e.supportsLogout,a=(0,ao.W)(),o=!i&&r,l=o,s=(0,Fe.r)(hr.p,{}).spec,c=(0,Be.v)(),u=(0,de.j)(),d=K(),p=d.deviceName,v=d.formattedDeviceName,f=a?io.g:si.V;return(0,x.jsx)("div",{className:Wa,children:c||u?(0,x.jsx)(f,{"aria-label":null!=v?v:p,size:"small",autoMirror:!1}):l&&(0,x.jsx)(qr,{title:null!=v?v:p,deviceId:t,connectStateDeviceId:n,allowForgetDevice:o,spec:s.containerViewFactory().headerFactory().activeDeviceFactory()})})},lo=n(63564),so=n(70102),co=n(78253),uo=n(68042);const po="k5CAXCZwazRLdTWi5mpN",vo="f2Wgf5OqTaBlTRRKZe9X";var fo=function(){var e=function(){var e=(0,Xr.d)(),t=(0,co.d)().enqueueSnackbar,n=(0,Fe.r)(Ha.g,{}),r=n.spec,a=n.logger,o=(0,i.useState)(uo.ez.BROADCAST_STATUS_UNKNOWN),l=(0,s.A)(o,2),c=l[0],u=l[1],d=c===uo.ez.BROADCAST_STATUS_UNKNOWN||c===uo.ez.BROADCAST_UNAVAILABLE,p=c===uo.ez.BROADCAST_ON;(0,Jr.c)(Zr.P.BROADCAST_STATUS_UPDATE,(function(e){var t=e.data;u(null!=t?t:uo.ez.BROADCAST_STATUS_UNKNOWN)}));var v,f=(0,i.useCallback)((function(t){return e.setBroadcastStatus(t?uo.ez.BROADCAST_ON:uo.ez.BROADCAST_OFF)}),[e]),g=(0,so.n)({mutationFn:f,onMutate:(v=(0,qn.A)(zn().mark((function e(t){var n;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=c,u(t?uo.ez.BROADCAST_ON:uo.ez.BROADCAST_OFF),e.abrupt("return",{prevBroadcastingState:n,allowBroadcasting:t});case 3:case"end":return e.stop()}}),e)}))),function(e){return v.apply(this,arguments)}),onError:function(e,n,i){var r;u(null!==(r=null==i?void 0:i.prevBroadcastingState)&&void 0!==r?r:uo.ez.BROADCAST_STATUS_UNKNOWN),t(V.Ru.get("error.generic"))}});return{isHidden:d,toggleIsSwitchedOn:p,setToggleState:(0,i.useCallback)((function(e){var t=e?"device_discoverable_off":"device_discoverable_on",n=e?"device_discoverable_on":"device_discoverable_off";a.logInteraction(r.deviceDiscoverableToggleFactory().hitToggleState({stateBeforeToggle:t,stateAfterToggle:n})),g.mutate(e)}),[a,g,r])}}(),t=e.isHidden,n=e.toggleIsSwitchedOn,r=e.setToggleState;return t?null:(0,x.jsxs)("div",{className:po,children:[(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",as:"label",htmlFor:"jam.broadcasting",className:vo,children:V.Ru.get("web-player.social-connect.broadcasting.toggle-label")}),(0,x.jsx)(Pe.l,{id:"jam.broadcasting",value:n,onSelected:r,condensed:!0})]})},go=n(34365),mo=n(24672),bo=n(83892),yo=n(17472),ho=n(68221),xo="device-picker-header",jo=function(e){var t=e.isPlaying,n=(0,ro.l)().currentDevice,r=n.id,o=n.connectStateId,s=n.type,c=n.isLocal,d=n.isLocalNetwork,p=n.isGroup,v=n.incarnation,f=n.supportsLogout,g=(0,Be.v)(),m=(0,de.j)(),b=(0,lo.c)().togglePuffin,y=(0,ho.D)().currentSession,h=(0,bo.y)(),j=(0,a.NC)($r.PE),w=Boolean(null==y?void 0:y.active),O=!w&&h,S=(0,Gr.HJ)(v),C=!d&&f,A=C||S,N=(0,Fe.r)(Ha.g,{}),k=N.spec,E=N.logger,P=(0,yo.f)().uri,I=(0,i.useCallback)((function(){E.logInteraction(k.createJamButtonFactory().hitUiNavigate({destination:null!=P?P:""}))}),[E,k,P]),R=(0,x.jsx)(Hr,{deviceId:r,connectStateDeviceId:o,allowForgetDevice:C,incarnation:S?v:void 0}),L=g||m,T=(0,x.jsx)(Z.v,{className:u()(za,(0,l.A)({},Ya,L)),id:xo,variant:"naked",title:(0,x.jsx)(no,{deviceType:s,isGroup:p,isLocalDevice:c,isPlaying:t}),subtitle:(0,x.jsxs)("div",{className:Za,children:[(0,x.jsx)(Xa,{onClick:L?b:void 0}),L&&(0,x.jsx)(qa,{})]}),trailing:(0,x.jsx)(oo,{}),"aria-labelledby":xo,onClick:L?b:void 0,onClickHint:V.Ru.get("web-player.connect.device-picker.current-device"),body:h&&(0,x.jsxs)(x.Fragment,{children:[j&&(0,x.jsx)(fo,{}),(0,x.jsx)("hr",{className:Qa})]}),footer:(0,x.jsxs)(x.Fragment,{children:[O&&(0,x.jsx)(mo.$,{onClick:I}),w&&j&&(0,x.jsx)(go.K,{})]})});return A?(0,x.jsx)(Sr.h,{menu:R,children:T}):T},wo=function(e){var t=e.isDesktop,n=Pa(),i=(0,Fe.r)(hr.p,{}).spec,r=i.containerViewFactory().noDevicesViewFactory(),a=(0,Br.t)(r);return(0,x.jsxs)("div",{ref:a,className:u()(mr,ur,cr),"data-testid":sr,children:[(0,x.jsxs)("ul",{"aria-labelledby":"".concat(xo," ").concat(lr),className:br,children:[(0,x.jsx)(Ma,{Icon:Ua.T,title:V.Ru.get("web-player.connect.device-picker.check-wifi"),subtitle:V.Ru.get("web-player.connect.device-picker.check-wifi-subtitle")}),(0,x.jsx)(Ma,{Icon:Pt.g,title:V.Ru.get("web-player.connect.device-picker.play-from-another"),subtitle:V.Ru.get("web-player.connect.device-picker.play-from-another-subtitle")}),t?(0,x.jsx)(Ma,{Icon:Ba.H,title:V.Ru.get("web-player.connect.device-picker.restart-speaker"),subtitle:V.Ru.get("web-player.connect.device-picker.restart-speaker-subtitle")}):(0,x.jsx)(Ma,{Icon:Fa.i,title:V.Ru.get("web-player.connect.device-picker.switch-to-app"),subtitle:V.Ru.get("web-player.connect.device-picker.switch-to-app-subtitle")})]}),(0,x.jsxs)("div",{"aria-describedby":sr,children:[(0,x.jsx)(Na,{spec:i}),n&&(0,x.jsx)(Ca,{spec:i})]})]})},Oo=function(e){var t=e.devices,n=e.areWebPlayerCastDevicesAvailable,i=Boolean(t.find((function(e){return!e.isLocal}))),r=t.filter((function(e){return!e.isActive&&e.name.length>0})),a=i||n,o=(0,ya.Ek)();return(0,x.jsxs)("div",{className:u()(dr,ur),children:[(0,x.jsx)(yr,{foundDevices:a}),a?(0,x.jsx)(zr,{children:(0,x.jsx)(_a,{devices:r,areWebPlayerCastDevicesAvailable:n})}):(0,x.jsx)(wo,{isDesktop:o})]})},So=n(39209),Co=n(16729),Ao=n(61382),No=n(34871);const ko="h0XG5HZ9x0lYV7JNwhoA";var Eo=function(){var e,t,n=(0,Dr.e)(),r=(0,Ao.O)(),o=(0,So.C)(),l=(0,ro.l)().devices,c=(0,No.GK)().isPlaying,u=(0,E.sV)(),d=(0,s.A)(u,1)[0],p=(0,i.useRef)(o),v=(0,i.useRef)(null===(e=d.context.devicePicker)||void 0===e?void 0:e.interactionId);p.current=o,v.current=null===(t=d.context.devicePicker)||void 0===t?void 0:t.interactionId;var f=(0,H.d4)((function(e){var t,n,i;return null!==(t=null===(n=e.playback)||void 0===n?void 0:n.castState)&&void 0!==t?t:null===(i=window.cast)||void 0===i?void 0:i.framework.CastState.NO_DEVICES_AVAILABLE})),b=(0,Co.Or)(f);(0,i.useEffect)((function(){return function(){p.current(v.current)}}),[v]);var y=(0,a.NC)(Tr.q5y);return(0,i.useEffect)((function(){y?r.startActiveDiscovery():n.getCapabilities().supportsLocalDiscovery&&n.updateListOfDevices()}),[n,r,y]),(0,x.jsx)(qe._,{label:V.Ru.get("playback-control.connect-picker"),focusTransferId:"DEVICE-PICKER",children:(0,x.jsxs)(Qe.w,{className:ko,fixedHeader:(0,x.jsx)(g.a,{title:V.Ru.get("playback-control.connect-picker"),panel:m.Z.DevicePicker}),children:[(0,x.jsx)(jo,{isPlaying:c}),(0,x.jsx)(Oo,{devices:l,areWebPlayerCastDevicesAvailable:b})]})})},Po=(n(56922),n(93591)),Io=n(97611),Ro=n(87154),Lo=n(9811),To=n(72365),Do=n(25227),_o=n(87449),Uo=function(){return(0,x.jsx)(x.Fragment,{})},Bo=function(){return(0,x.jsx)(x.Fragment,{})},Fo=n(74230),Mo=n(33630),Ho=n(24775);const Vo="Xh1TBgSrJAYVdjRM8zFV",qo="XtrKVBpPjO52Dsuh7Sl3",Qo="Ebrqn7sM1CfWaEig2gQW",zo="cA09n1bnWHC5ii99Gjpq";var Yo=function(){return(0,x.jsx)("div",{className:(0,Ho.Ju)("invertedDark",zo),children:(0,x.jsx)(d.E,{variant:"bodySmall",children:V.Ru.get("web-player.now-playing-view.chapters.disclaimer")})})},Go=n(49884),Ko=n(41527),Wo=function(e){var t=e.title,n=e.isActive,r=e.isPlaying,a=e.timestamp,o=e.onClick,l=(0,i.useCallback)((function(){o(a)}),[o,a]);return(0,x.jsx)(Z.v,{variant:"naked",id:t,hoverBackgroundColor:"backgroundTintedHighlight",activeBackgroundColor:"backgroundTintedBase",title:(0,x.jsxs)(d.E,{variant:"bodyMedium",semanticColor:n?"textBrightAccent":"textBase",className:"standalone-ellipsis-one-line",children:[r&&n&&(0,x.jsx)(Go.J,{animated:n})," ",t]}),subtitle:(0,Ko.f)(a),onClick:l})},Zo=(n(75380),n(286)),Xo=n(41772);function Jo(e,t){if(!e)return null;var n=(0,Xo.s)(e);return null===n?null:t.findIndex((function(e){var t,i,r,a;return(null!==(t=null===(i=e.seekStart)||void 0===i?void 0:i.milliseconds)&&void 0!==t?t:0)<=n&&(null!==(r=null===(a=e.seekStop)||void 0===a?void 0:a.milliseconds)&&void 0!==r?r:1/0)>=n}))}n(24302),n(57149),n(49166);var $o=n(54075),el=n(33872),tl=n(93611),nl=new el.l("queryNpvEpisodeChapters","query","367f0e93a0d219ae6f5874bcc460201db0a43467ae94f16298931a704ac62ea6",null),il=12e5,rl=6e5,al=n(47370),ol=n(4443);var ll=n(86633),sl=n(19813),cl=(0,i.memo)((function(e){var t=e.chapters,n=e.episodeUri,r=e.nextOffset,a=e.limit,o=e.isPlaying,l=e.isMLGeneratedChapters,c=(0,P.z)(),u=(0,Fe.r)(Mo.U,{}),d=u.logger,p=u.spec,v=function(e){var t=e.uri,n=e.startOffset,r=void 0===n?0:n,a=e.pageSize,o=e.autoFetchOnMount,l=void 0===o||o,s=(0,i.useContext)(al.j).request,c=(0,$o.q)({queryKey:["npv","episode-chapters",t,{startOffset:r,limit:a}],queryFn:function(e){var n=e.pageParam;return(0,ol.c)(s,nl,function(e,t,n){return{offset:t,limit:n,uri:e}}(t,n,a))},staleTime:rl,gcTime:il,enabled:l,initialPageParam:r,getNextPageParam:function(e){var t;if("Episode"===(null==e||null===(t=e.data)||void 0===t?void 0:t.episodeUnionV2.__typename)){var n=e.data.episodeUnionV2.displaySegments;return null!=n&&n.displaySegments.pagingInfo.nextOffset&&n.displaySegments.pagingInfo.nextOffset>0?n.displaySegments.pagingInfo.nextOffset:void 0}}}),u=c.data,d=c.isLoading,p=c.error,v=c.fetchNextPage,f=(0,i.useCallback)((0,qn.A)(zn().mark((function e(){return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v();case 2:case"end":return e.stop()}}),e)}))),[v]);return{chapters:(0,i.useMemo)((function(){var e;return null!==(e=null==u?void 0:u.pages.flatMap((function(e){var t,n;return"Episode"===(null==e||null===(t=e.data)||void 0===t?void 0:t.episodeUnionV2.__typename)&&null!==(n=e.data.episodeUnionV2.displaySegments)&&void 0!==n&&n.displaySegments.items?e.data.episodeUnionV2.displaySegments.displaySegments.items:[]})))&&void 0!==e?e:[]}),[null==u?void 0:u.pages]),error:p,loading:d,fetchNextPage:f}}({uri:n,pageSize:null!=a?a:10,startOffset:null!=r?r:t.length,autoFetchOnMount:!1}),f=v.chapters,g=v.fetchNextPage,m=(0,i.useMemo)((function(){return(f.length>0?[].concat((0,k.A)(t),(0,k.A)(f)):t).filter(ul)}),[t,f]),b=function(e){var t=(0,P.z)(),n=(0,i.useState)((function(){return Jo(t.getState(),e)})),r=(0,s.A)(n,2),a=r[0],o=r[1];return(0,Zo.$)((function(){var n=Jo(t.getState(),e);n!==a&&o(n)}),500),a}(m),y=(0,i.useCallback)((function(e){var t;c.seekTo(e),d.logInteraction(p.chapterRowFactory().hitSeekToTime({msToSeekTo:e})),null!==(t=c.getState())&&void 0!==t&&t.isPaused&&(c.resume(),d.logInteraction(p.chapterRowFactory().hitResume({itemToBeResumed:n})))}),[n,d,c,p]);return m.length?(0,x.jsxs)(ll.w,{className:Vo,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.chapters")}),l&&(0,x.jsx)(Yo,{}),(0,x.jsx)(sl._,{onReachBottom:g,triggerOnInitialLoad:!1,className:qo,children:(0,x.jsx)(li.$,{"aria-label":V.Ru.get("web-player.now-playing-view.chapters"),className:Qo,children:m.map((function(e,t){var n;if(!e.title||"number"!=typeof(null===(n=e.seekStart)||void 0===n?void 0:n.milliseconds))return null;var i=t===b;return(0,x.jsx)(ci.c,{children:(0,x.jsx)(Wo,{onClick:y,timestamp:e.seekStart.milliseconds,title:e.title,isActive:i,isPlaying:o})},e.seekStart.milliseconds)}))})})]}):null}));function ul(e){return"TalkDisplaySegment"===e.__typename}var dl=function(e){return"Episode"===(null==e?void 0:e.__typename)},pl=function(e){return"__typename"in e&&"Podcast"===e.__typename},vl=function(e){return!!e&&"__typename"in e&&"Episode"===e.__typename},fl=n(7024),gl=n(78256),ml=n(54363),bl=n(90543),yl=n(90286),hl=n(89120),xl=n(35605),jl=n(22433),wl=n(75599),Ol=n(22872),Sl=n(67515),Cl=n(97579),Al=n(4254);const Nl="YdLiRQVNwEQzUNR44QuY",kl="VVxt7MTKoKdOCVIWYfHn",El="c21KEAgelRvfiGswmHy9";var Pl=function(e){var t,n,r=e.images,a=e.contentRating,o=e.contextTitle,l=e.contextUri,s=e.menu,c=e.position,u=void 0===c?0:c,p=e.title,v=e.type,f=e.uri,g=e.usePlayContextItem,m=(0,bl.Zp)(),b=(0,xl.P)(),y=b.draggable,h=b.onDragStart,j=null===(t=(0,Vi.o_h)(f))||void 0===t?void 0:t.toURLPath(!0),w=l&&(null===(n=(0,Vi.o_h)(l))||void 0===n?void 0:n.toURLPath(!0)),O=(0,In.y)(),S=(0,Al.b)({contentRating:a}).badges,C=g({uri:f}),A=C.isPlaying,N=C.togglePlay,k=(0,Fe.r)(yl.G,{data:{uri:f,position:u}}),E=k.spec,P=k.logger,I=(0,i.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),j){var t=E.hitUiNavigate({destination:j});P.logInteraction(t),m(j)}}),[P,m,E,j]),R=(0,i.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),j){var t=E.trackContainerFactory().trackInformationFactory().nameLinkFactory().hitUiNavigate({destination:j});P.logInteraction(t),m(j)}}),[P,m,E,j]),L=(0,i.useCallback)((function(e){if(e.stopPropagation(),e.preventDefault(),w){var t=E.trackContainerFactory().trackInformationFactory().contextLinkFactory({uri:l}).hitUiNavigate({destination:w});P.logInteraction(t),m(w)}}),[l,w,P,m,E]),T=(0,i.useCallback)((function(e){e.stopPropagation();var t=E.trackContainerFactory().coverArtFactory().hitPlay({itemToBePlayed:f});P.logInteraction(t),N()}),[P,E,N,f]),D=(0,i.useMemo)((function(){return(0,x.jsx)(Cr.Zp,{label:p,children:(0,x.jsx)(Ee.d,{lineClamp:O===An.E.MEDIUM?1:2,children:j?(0,x.jsx)(Ye.N,{to:j,onClick:R,children:p}):p})})}),[O,R,p,j]),_=(0,i.useMemo)((function(){return(0,x.jsxs)(wr.j,{lineClamp:1,children:[S.explicit&&(0,x.jsx)(jl.U,{}),S.nineteen&&(0,x.jsx)(Sl.q,{}),v,w&&o&&(0,x.jsxs)(x.Fragment,{children:[" • ",(0,x.jsx)(Cr.Zp,{label:o,children:(0,x.jsx)(Ye.N,{to:w,onClick:L,children:(0,x.jsx)(d.E,{semanticColor:"textSubdued",children:o})})})]})]})}),[S.explicit,S.nineteen,o,w,L,v]);return(0,x.jsx)(Sr.h,{menu:s,children:(0,x.jsx)(Z.v,{activeBackgroundColor:"backgroundTintedPress",className:El,draggable:y,hoverBackgroundColor:"backgroundTintedHighlight",id:f,layout:"regular",onClick:I,onDragStart:function(e){if(e.target===e.currentTarget){var t="".concat(p).concat(o?" • ".concat(o):"");h(e,{itemUris:[f],dragLabelText:t,contextUri:l})}},variant:"naked",title:D,subtitle:O===An.E.MEDIUM&&_,body:O!==An.E.MEDIUM&&_,paddingInlineStart:be.v4,paddingInlineEnd:be.v4,media:(0,x.jsxs)("div",{className:Nl,children:[(0,x.jsx)(hl.x,{className:kl,isPlaying:A,isLocked:!1,onClick:T,playAriaLabel:V.Ru.get("tracklist.a11y.play",p,o)}),(0,x.jsx)(wl.b,{type:Cl.c.EPISODE,title:p,shape:wl.u.ROUNDED_CORNERS,size:Ol.Qe.SIZE_48,images:r})]})})})},Il=n(74484),Rl=function(e){var t,n,i=e.episode,r=e.position,a=i.podcastV2.data,o=pl(a)?a.uri:void 0,l=pl(a)?a.name:void 0,s=(0,Il.P)({uri:null!=o?o:i.uri},{featureIdentifier:"episode_ai_dubbing"}).usePlayContextItem;return(0,x.jsx)(Pl,{contentRating:null===(t=i.contentRating)||void 0===t?void 0:t.label,contextTitle:l,contextUri:o,images:null===(n=i.coverArt)||void 0===n?void 0:n.sources,menu:(0,x.jsx)(ml.b,{uri:i.uri}),position:r,title:i.name,type:V.Ru.get("card.tag.episode"),uri:i.uri,usePlayContextItem:s},i.uri)};function Ll(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Tl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ll(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ll(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Dl=function(e){return(0,x.jsx)(d.E,Tl(Tl({},e),{},{as:"div",variant:"bodySmall"}))},_l=n(32484);const Ul="KJEbbXyTy0gbIalPPwjP";function Bl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Fl=function(e){return(0,x.jsx)(_l.B,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Bl(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Bl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({className:Ul},e))};const Ml="dmEFRgvLS6M2o8rmoX6v";var Hl=["description","episodes","title"];function Vl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ql(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vl(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ql=function(e){var t=e.description,n=e.episodes,i=e.title,r=(0,f.A)(e,Hl);return(0,x.jsxs)(ll.w,ql(ql({},r),{},{className:Ml,children:[(0,x.jsx)(ll.X,{icon:(0,x.jsx)(gl.H,{size:"small"}),tooltipLabel:i,children:i}),(0,x.jsx)(Dl,{children:t}),(0,x.jsx)(Fl,{children:n.map((function(e,t){return(0,x.jsx)(Rl,{episode:e,position:t},e.uri)}))})]}))},zl=n(62269);function Yl(e){var t,n=function(e){var t;return null!==(t=e.aiDubbedEpisodes)&&void 0!==t&&t.items?e.aiDubbedEpisodes.items.map((function(e){return e.data})).filter((function(t){return vl(t)&&t.uri!==e.uri})):[]}(e.episode),i=(0,Fe.r)(fl.y,{}).spec;if(n.length<=0)return null;var r=(0,V.wB)(null===(t=n[0])||void 0===t||null===(t=t.language)||void 0===t?void 0:t.code),a=n.length>1&&V.Ru.get("web-player.now-playing-view.dubbed-episodes.title-multiple")||r&&V.Ru.get("web-player.now-playing-view.dubbed-episodes.title-single-with-language",{language:(0,zl.kX)(r)})||V.Ru.get("web-player.now-playing-view.dubbed-episodes.title-single"),o=n.length>1?V.Ru.get("web-player.now-playing-view.dubbed-episodes.description-multiple"):V.Ru.get("web-player.now-playing-view.dubbed-episodes.description-single");return(0,x.jsx)(Vr.r,{spec:i.episodeListFactory(),children:(0,x.jsx)(Ql,{description:o,episodes:n,title:a})})}var Gl=n(44684);function Kl(e){var t,n=function(e){var t;return dl(e)&&e.originalEpisode&&vl(null===(t=e.originalEpisode)||void 0===t?void 0:t.data)?e.originalEpisode.data:void 0}(e.episode),i=(0,Fe.r)(Gl.I,{}).spec;if(!n)return null;var r=(0,V.wB)(null===(t=n.language)||void 0===t?void 0:t.code),a=r?V.Ru.get("web-player.now-playing-view.original-episode.title-with-language",{language:(0,zl.kX)(r)}):V.Ru.get("web-player.now-playing-view.original-episode.title"),o=r?V.Ru.get("web-player.now-playing-view.original-episode.description-with-language",{language:(0,zl.kX)(r)}):V.Ru.get("web-player.now-playing-view.original-episode.description");return(0,x.jsx)(Vr.r,{spec:i,children:(0,x.jsx)(Ql,{description:o,episodes:[n],title:a})})}var Wl=n(52699),Zl=n(41888);const Xl="YC6K2bFUeJkdE4cCvbD3",Jl="vHQbygDcvOQ4Ls0W6vb1",$l="Ku9l84_lLCFE3crS1Y8B",es="TortsxZeDfI28luc5Dac",ts="XHpZHlxCiVHe8qTVVskT",ns="lu9_R5Kw07YEWlq8eKs9",is="RypbYIkqqlUkhxg_RwYm";var rs=(0,i.memo)((function(e){var t=e.transcriptSections,n=e.onTimeStampClick,i=e.episodeUri,r=(0,Fe.r)(Wl.c,{data:{uri:i}}),a=r.spec,o=r.logger,l=(0,Il.P)({uri:i},{featureIdentifier:"episode"}).isPlaying,s=a.timestampLinkFactory();return(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)("div",{className:Jl,children:[(0,x.jsx)("div",{className:es,children:(0,x.jsx)(d.E,{as:"p",variant:"marginal",semanticColor:"textSubdued",children:V.Ru.get("web-player.episode.transcript.disclaimer")})}),t.map((function(e,t){var r="transcript-section-".concat(t);return(0,x.jsxs)("div",{className:$l,children:[(0,x.jsx)("button",{className:ts,onClick:function(){n(e.startMs,r),o.logInteraction(l?s.hitSeekToTime({msToSeekTo:e.startMs}):s.hitPlay({itemToBePlayed:i}))},children:(0,x.jsx)(Zl.k,{id:r,targetURI:(0,Vi.o_h)(i),fadeOut:!0,children:(0,x.jsx)(d.E,{variant:"marginalBold",semanticColor:"textSubdued",className:ns,children:(0,Ko.f)(e.startMs)})})}),e.content.map((function(e,t){return(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textBase",className:is,dir:"auto",children:e},"transcript-text-".concat(t))}))]},r)}))]})})})),as=n(39342);const os="Ki3a1Wxv0XrjWwuoFy1w",ls="Zk6EWCEL86hT3S6Xy6mA",ss="cReiUDEvwfvjdiCCF8g9";var cs=function(e){var t,n=e.episode,i=function(e){return"Podcast"===e.podcastV2.data.__typename&&e.podcastV2.data}(n),r=function(e){var t;return"accessInfo"in e.podcastV2.data&&"Podcast"===e.podcastV2.data.__typename&&"UpsellAccessExplanation"===(null===(t=e.podcastV2.data)||void 0===t||null===(t=t.accessInfo)||void 0===t||null===(t=t.accessExplanation)||void 0===t?void 0:t.__typename)&&e.podcastV2.data.accessInfo.accessExplanation}(n);return i&&r?(0,x.jsxs)(ll.w,{className:os,children:[(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(as.H,{uri:i.uri}),children:(0,x.jsx)(Ye.N,{to:i.uri,children:(0,x.jsx)(wl.b,{type:Cl.c.SHOW,title:i.name,images:null===(t=i.coverArt)||void 0===t?void 0:t.sources,size:Ol.Qe.SIZE_48})})}),(0,x.jsx)(d.E,{variant:"bodySmall",className:ls,children:r.body}),(0,x.jsx)(nn.H,{size:"small",className:ss,condensed:!0,semanticColor:"textBrightAccent",iconTrailing:Oa.H,href:r.url?r.url:void 0,children:r.actionText})]}):null},us=n(88762),ds=n(31740),ps=n(27790),vs=n(28085),fs=n(45371);var gs=n(33786),ms=n(70359),bs=n(75739);const ys="_QEMUk5U16U3CQn0wvbD",hs="mbkl2P60JUhDqc9qGvp9",xs="Xh6dG3pzi2SS7v4cvZzG",js="sOdoW26RUwggLToa7xDt",ws="B_TcBcc1BM2yLgvXbh66",Os="tRnhyUQiKOxA3z8mUD_U",Ss="_shxqlkLuB52H1iCh_OQ",Cs="hAwePVlxumRNpdOSpwyV";var As=i.forwardRef((function(e,t){var n=e.className,r=void 0===n?"":n,a=e.segment,o=e.onClickPlay,l=e.isPlaying,s=(0,i.useMemo)((function(){return function(e){var t;if("TALK"===e.type)return{Icon:us.L,label:V.Ru.get("playlist.a11y.play",e.title)};var n=(null===(t=e.track.artists)||void 0===t?void 0:t.map((function(e){return e.name})).join(V.Ru.getSeparator()))||"";return{Icon:ds.v,label:V.Ru.get("tracklist.a11y.play",e.track.name,n)}}(a)}),[a]),c=s.label,d=s.Icon,p=(0,i.useCallback)((function(){o()}),[o]);return(0,x.jsxs)("div",{className:u()(Ss,r),children:[l?(0,x.jsx)(Go.J,{className:Os,animated:!0}):(0,x.jsx)("span",{className:Os,children:(0,x.jsx)(d,{iconSize:16,"aria-hidden":"true"})}),(0,x.jsx)(hl.x,{className:ws,iconClassName:Cs,onClick:p,isPlaying:l,isLocked:!1,playAriaLabel:c,ref:t})]})})),Ns=function(e){var t=e.children,n=e.onTriggerPlay,i=e.episodeUri,r=e.index,a=(0,Fe.r)(ps.f,{}),o=a.spec,l=a.logger,s=(0,gs.W)(),c=(0,xr.YQ)((function(){s({intent:"play",type:"double-click"});var e=l.logInteraction(o.segmentItemFactory({uri:i,position:r||0}).doubleHitPlay({itemToBePlayed:i}));n(e)}),bs.d,{leading:!0,trailing:!1});return(0,x.jsx)("div",{className:js,onDoubleClick:c,children:t})},ks=function(e){var t=e.segment,n=e.episodeUri,r=e.index,a=(0,Fe.r)(ps.f,{}),o=a.spec,l=a.logger,s=(0,ms.L)({episodeUri:n,start:t.start,stop:t.stop}),c=s.isActive,u=s.isPlaying,d=s.onClick,p={uri:n},v=function(e){var t=[{url:e.track.album.image}];return{type:Cl.c.TRACK,uri:e.uri,uid:null,provider:null,images:t,name:e.track.name,mediaType:"audio",duration:{milliseconds:0},album:{type:Cl.c.ALBUM,uri:e.track.album.uri,name:e.track.album.name,images:t},artists:e.track.artists.map((function(e){return{type:Cl.c.ARTIST,name:e.name,uri:e.uri}}))}}(t),f=o.segmentItemFactory({uri:n,position:r||0}).playbackButtonFactory(),g=(0,i.useCallback)((function(){d({}),c&&u?l.logInteraction(f.hitPause({itemToBePaused:n})):c&&!u?l.logInteraction(f.hitResume({itemToBeResumed:n})):l.logInteraction(f.hitPlay({itemToBePlayed:n}))}),[n,c,u,l,d,f]);return(0,x.jsxs)(Ns,{onTriggerPlay:d,episodeUri:n,children:[(0,x.jsx)(As,{segment:t,isActive:c,isPlaying:u,onClickPlay:function(){g()}}),(0,x.jsx)(fs.d,{context:p,item:v,titleTypeVariant:"bodyMedium",subtitleTypeVariant:"bodySmall",onTitleClick:function(e){l.logInteraction(o.segmentItemFactory({uri:n,position:r||0}).albumLinkFactory({uri:p.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:function(e){l.logInteraction(o.segmentItemFactory({uri:n,position:r||0}).artistLinkFactory({uri:e||"",position:0}).hitUiNavigate({destination:e||""}))}})]})},Es=function(e){var t=e.segment,n=e.episodeUri,r=e.index,a=(0,Fe.r)(ps.f,{}),o=a.spec,l=a.logger,s=(0,ms.L)({episodeUri:n,start:t.start,stop:t.stop}),c=s.isActive,u=s.isPlaying,p=s.onClick,v=function(e){var t=[];return{type:Cl.c.UNKNOWN,uri:e.uri,uid:null,provider:null,images:t,name:e.title,mediaType:"audio",duration:{milliseconds:0},album:{type:Cl.c.ALBUM,uri:e.show.uri,name:e.show.name,images:t},artists:[]}}(t),f=o.segmentItemFactory({uri:n,position:r||0}).playbackButtonFactory(),g=(0,i.useCallback)((function(){p({}),c&&u?l.logInteraction(f.hitPause({itemToBePaused:n})):c&&!u?l.logInteraction(f.hitResume({itemToBeResumed:n})):l.logInteraction(f.hitPlay({itemToBePlayed:n}))}),[n,c,u,l,p,f]);return(0,x.jsxs)(Ns,{onTriggerPlay:p,episodeUri:n,children:[(0,x.jsx)(As,{segment:t,isActive:c,isPlaying:u,onClickPlay:function(){g()}}),(0,x.jsx)(vs.r,{children:(0,x.jsx)(d.E,{variant:"bodyMedium",semanticColor:"textBase",children:v.name})},v.name)]})},Ps=n(28002);function Is(e){return!!(0,Ps.o)().getCapabilities().isSupported&&function(e){var t,n=null===(t=e.metadata)||void 0===t?void 0:t["parent_episode.uri"];return!!n&&(0,Vi.gHQ)(n)}(e)}var Rs=(0,Po.mc)((function(e){var t,n=e.item,r=null===(t=n.metadata)||void 0===t?void 0:t["parent_episode.uri"],a=function(e){var t=(0,Ps.o)(),n=(0,i.useCallback)(function(){var n=(0,qn.A)(zn().mark((function n(i,r){var a;return zn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(e){n.next=2;break}return n.abrupt("return",[]);case 2:return n.prev=2,n.next=5,t.getSegments(e,i,r);case 5:return a=n.sent,n.abrupt("return",a);case 9:return n.prev=9,n.t0=n.catch(2),n.abrupt("return",[]);case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e,t){return n.apply(this,arguments)}}(),[e,t]);return n}(r),o=(0,i.useState)([]),l=(0,s.A)(o,2),c=l[0],u=l[1],d=(0,i.useRef)(!1),p=(0,i.useRef)(0),v=(0,i.useCallback)((function(){var e=p.current;null!==e&&(d.current||(d.current=!0,a(e,10).then((function(e){u((function(t){var n=t.concat(e);return p.current=n.length+1,n})),d.current=!1}))))}),[a]);return(0,i.useEffect)((function(){u([])}),[n.uri]),r?(0,x.jsxs)(ll.w,{className:ys,children:[(0,x.jsx)(ll.X,{className:hs,children:V.Ru.get("music_and_talk.in_this_episode")}),(0,x.jsx)("div",{className:xs,children:(0,x.jsx)(sl._,{onReachBottom:v,triggerOnInitialLoad:!0,children:c.map((function(e,t){return"MUSIC"===e.type?(0,x.jsx)(ks,{segment:e,episodeUri:r},"".concat(e.uri,"-").concat(t)):(0,x.jsx)(Es,{segment:e,episodeUri:r},"".concat(e.uri,"-").concat(t))}))})})]}):null}),{name:"NPVInThisEpisode"}),Ls=n(75795),Ts=n(71963),Ds=n(51646),_s=["children"];function Us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Bs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Us(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fs=function(e){var t=e.children,n=(0,f.A)(e,_s);return(0,x.jsx)(Ms,Bs(Bs({size:"small"},n),{},{$_css:Ds.ZSH,children:t}))},Ms=(0,Ts.Ay)(ve.n).withConfig({displayName:"ButtonSecondary___StyledEncoreButtonSecondary",componentId:"sc-13xoveo-0"})((function(e){return{borderColor:e.$_css}}));function Hs(e,t){var n;return null!==(n=e.uid)&&void 0!==n?n:"".concat(e.uri,":").concat(t)}var Vs=n(84850),qs=n(95304),Qs=n(98039),zs=n(28810),Ys=n(76070),Gs=n(50230),Ks=n(42761);const Ws="VXFYm2GnsH4zc3EPikNi",Zs="yvjS3DPkDIHgMUZxL972",Xs="Os6nTuXambdCB8H81QRT",Js="RDIVOZoeGMohQ8MeJjUH",$s="Cj0QJuDauCo39643t0Q8",ec="evQ_5Znk6OXYHBzLCSoN",tc="nCwi6jOC9FEKO5tKAQKW",nc="DP0qcvnv6ToERKYhb9Xk",ic="m1ZL7TCf7Ge2VxQjgGgv",rc="yIYdkVZJzDlj1lqOmV1M",ac="kh6wYYPvgRPBhA2wj3AS",oc="qp7Sys7hJSZHLzw4K_yF",lc="fIabFr0bD1PUqwipmTjQ";var sc=function(e){var t=e.title,n=e.type,i=e.images,r=e.onTogglePlay,a=e.isPlaying,o=e.ariaPauseLabel,l=e.ariaPlayLabel,s=e.isPlayable,c=(0,on._)(),d=n===Cl.c.ARTIST||n===Cl.c.USER?wl.u.CIRCLE:wl.u.ROUNDED_CORNERS;return(0,x.jsxs)("div",{className:ac,children:[(0,x.jsx)(wl.b,{fadeIn:!0,images:c(null!=i?i:[],48),shape:d,size:Ol.Qe.SIZE_48,iconSize:"medium",type:n,title:t,loadingMode:"eager"}),!s&&(0,x.jsx)("span",{className:u()(oc,$s),children:(0,x.jsx)(Ks.R,{onClick:r,version:Ks.H.transparent,isPlaying:a,ariaPauseLabel:o,ariaPlayLabel:l,condensedAll:!0})})]})},cc=function(e){var t=e.title,n=e.isActive;return(0,x.jsx)(Cr.Zp,{showDelay:Cr.uF,label:t,children:(0,x.jsx)(Ee.d,{lineClamp:1,semanticColor:n?"textBrightAccent":"textBase",dir:"auto",children:t})})},uc=function(e){var t=e.menu,n=e.labelName;return(0,x.jsx)(Nr.b,{menu:t,children:(0,x.jsx)(Ar.e,{className:$s,label:V.Ru.get("more.label.context",n),size:"small"})})},dc=n(35680),pc=n(64396),vc=n(98424),fc=function(e){var t=e.queuedBy;if(!t)return null;var n=(0,vc.g)(t.images,{desiredSize:24});return(0,x.jsx)(Cr.Zp,{label:V.Ru.get("queue.queued-by",t.name),children:(0,x.jsx)("div",{children:(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(pc.B,{uri:t.uri}),children:(0,x.jsx)(Ye.N,{to:t.uri,children:(0,x.jsx)(dc.e,{images:n?[n]:[],userIconSize:"small",width:24,displayName:t.name,username:t.username,label:""})})})})})},gc=function(e){var t=e.queuedBy,n=e.menu,i=e.moreButtonLabelName;return(0,x.jsxs)("div",{className:Js,children:[n&&i&&(0,x.jsx)(uc,{menu:n,labelName:i}),(0,x.jsx)(fc,{queuedBy:t})]})},mc=n(63190),bc=n(95909),yc="spotify:app:queue";function hc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function xc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?hc(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var jc=n(58237),wc=["className","dropPosition","draggable"];function Oc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sc(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oc(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cc=function(){return(0,x.jsx)("div",{className:Ws})},Ac=function(e){var t=e.id,n=e.uid,r=e.uri,a=e.contextUri,o=e.index,s=e.dragLabel,c=e.type,d=e.title,p=e.subtitle,v=e.images,g=e.onDrop,m=e.allowedDropMimeTypes,b=e.menu,y=e.moreButtonLabelName,h=e.usePlayContextItem,j=e.section,w=e.queuedBy,O=e.ariaPauseLabel,S=e.ariaPlayLabel,C=e.onContextMenu,A=e.isPlayable,N=e.isAnyArtistBanned,k=e.handleArtistBanUndoClick,E=e.isNpv,P=function(e){var t=e.uid,n=e.uri,r=e.index,a=e.dragLabel,o=e.allowedMimeTypes,s=void 0===o?[]:o,c=e.onDrop,u=e.sectionId,d=(0,bc.R)({index:r,contextUri:yc,sectionId:u,label:null!=a?a:"",isEnabled:!!a}),p=d.draggable,v=d.onDragStart,f=(0,mc.A)({id:null!=t?t:void 0,uri:n,allowedMimeTypesByDropPosition:(0,l.A)((0,l.A)({},Qs.Nz.BEFORE,s),Qs.Nz.AFTER,s),onDrop:c});return(0,i.useMemo)((function(){return xc(xc({},f),{},{draggable:p,onDragStart:v})}),[p,f,v])}({uid:n,uri:r,index:o,dragLabel:s,onDrop:g,allowedMimeTypes:m,sectionId:j}),I=P.className,R=P.dropPosition,L=P.draggable,T=(0,f.A)(P,wc),D=(0,i.useContext)(Ys.m).isSelected,_=(0,zs.q)({index:o,contextUri:a,onContextMenu:C,canRemovePlaylistItems:!1,removePlaylistItems:void 0,isTreeGrid:!0}),U=_.onClick,B=_.onContextMenu,F=_.onKeyDown,M=(0,ce.s)(),H=(0,Fe.r)(Vs.i,{data:{position:o,reason:"",uri:r}}).spec,V=h({uri:r,uid:null!=n?n:void 0}),q=V.isActive,Q=V.isPlaying,z=V.togglePlay,Y=V.triggerPlay,G=(0,i.useCallback)((function(){var e=(0,jc.$I)({spec:H.playbackButtonFactory(),logger:M,uri:r,isActive:q,isPlaying:Q});z({loggingParams:e})}),[q,Q,M,H,z,r]),K=(0,Gs.W)(k),W=(0,i.useCallback)((function(){if(N)K();else{var e=M.logInteraction(H.doubleHitPlay({itemToBePlayed:r}));Y({loggingParams:e})}}),[K,N,M,H,Y,r]),X=(0,i.useCallback)((function(e){if("Enter"===e.key&&e.target instanceof Element&&e.currentTarget.querySelector(':scope > [role="button"]')===e.target){var t=M.logInteraction(H.playbackButtonFactory().hitPlay({itemToBePlayed:r}));Y({loggingParams:t})}F(e)}),[M,F,H,Y,r]),J=(0,i.useCallback)((function(e){var t=e.currentTarget.querySelector('[role="button"]');t instanceof HTMLElement&&t.focus(),U(e)}),[U]),$=(0,x.jsx)(sc,{type:c,onTogglePlay:G,isPlaying:Q,title:d,images:v,ariaPauseLabel:O,ariaPlayLabel:S,isPlayable:A}),ee=(0,x.jsx)(gc,{queuedBy:w,menu:b,moreButtonLabelName:y}),te=D(o),ne=te&&D(o-1),ie=te&&D(o+1),re=(0,x.jsx)(Z.v,{id:t,media:$,title:(0,x.jsx)(cc,{isActive:q,title:d}),subtitle:p,className:u()(Xs,I,(0,l.A)((0,l.A)((0,l.A)({},ec,ne),tc,ie),ic,E)),variant:D(o)?"tinted":void 0,hoverBackgroundColor:E?"backgroundTintedHighlight":"backgroundHighlight",trailing:ee,onDoubleClick:W,hoverAnimationDuration:"0ms",padding:be.v4,onClick:function(){},onContextMenu:B,"aria-disabled":A,tabIndex:0}),ae=(0,x.jsx)(qs.W,Sc(Sc({className:u()(I),draggable:L&&!!s,"aria-posinset":o,onKeyDown:X},T),{},{onClick:J,children:re}));return(0,x.jsxs)(x.Fragment,{children:[R===Qs.Nz.BEFORE&&(0,x.jsx)(Cc,{}),ae,R===Qs.Nz.AFTER&&(0,x.jsx)(Cc,{})]})},Nc=function(e){var t=(0,x.jsx)(Ac,Sc({},e));return e.menu?(0,x.jsx)(Sr.h,{menu:e.menu,children:t}):t},kc=["ad","index"];function Ec(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Pc=function(e){var t,n=e.ad,i=e.index,r=(0,f.A)(e,kc),a=n.uid,o=n.uri,s=n.type,c=n.title,u=n.advertiser,d=n.images,p=Hs(n,i),v=null!==(t=null!=u?u:c)&&void 0!==t?t:V.Ru.get("ad-formats.advertisement");return(0,x.jsx)(Nc,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ec(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ec(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uid:a,uri:o,id:p,index:i,type:s,title:v,images:d,subtitle:null},r))},Ic=function(e){var t=function(e){switch(e){case Cl.c.TRACK:return V.Ru.get("web-player.queue-history.item-type.track");case Cl.c.EPISODE:return V.Ru.get("web-player.queue-history.item-type.episode");case Cl.c.CHAPTER:return V.Ru.get("web-player.queue-history.item-type.chapter");case Cl.c.AD:case Cl.c.UNKNOWN:return null;default:return(0,Li.k)(e),null}}(e.type);return t&&(0,x.jsx)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",children:t})};n(17987);var Rc=n(89594),Lc=n(72393),Tc=n(80377),Dc=n(56805),_c=n(22453),Uc=n(30683),Bc=n(23483),Fc=n(30843),Mc=n(19533);const Hc="iFEXaIHbvw1bGP0fFu9g";var Vc=function(e){var t=e.item,n=e.subtitle,r=e.tooltipText,a=e.showTypeLabel,o=function(e){var t=(0,_c.T)(e.uri),n=(0,Mc.v)(e)||(0,Fc.p)(e)||(0,Bc.d)(e),r=i.Children.toArray([(0,Tc.N)(e)&&(0,x.jsx)(Rc.R,{title:V.Ru.get("web-player.smart-shuffle.icon-hover-label"),"aria-label":V.Ru.get("web-player.smart-shuffle.icon-hover-label"),semanticColor:"textBrightAccent",size:"small"}),t===Uc.kw.YES&&(0,x.jsx)(Dc._,{}),n&&e.isExplicit&&!e.is19PlusOnly&&(0,x.jsx)(jl.U,{}),n&&e.is19PlusOnly&&(0,x.jsx)(Sl.q,{size:16}),(0,Mc.v)(e)&&(e.hasAssociatedVideo||"video"===e.mediaType)&&(0,x.jsx)(Lc.l,{})]);return r.length?(0,x.jsx)("span",{className:Hc,children:r}):null}(t);return(0,x.jsx)(wr.j,{dir:"auto",children:(0,x.jsxs)(d.E,{semanticColor:"textSubdued",variant:"bodySmall",className:nc,children:[o?(0,x.jsx)("span",{className:lc,children:o}):null,(0,x.jsx)(Cr.Zp,{label:r,showDelay:Cr.uF,children:(0,x.jsxs)("span",{className:rc,children:[a&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Ic,{type:t.type})," •"," "]}),n]})})]})})},qc=n(14611);function Qc(e){var t,n=(0,yo.f)().uri;return e===qc.$.NextInQueue?n="spotify:app:queue:NextInQueue":e===qc.$.NextUp&&(n="spotify:app:queue:NextUp"),null!==(t=n)&&void 0!==t?t:""}var zc=["episode","index","showTypeLabel"];function Yc(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var Gc=function(e){var t=e.episode,n=e.index,i=e.showTypeLabel,r=(0,f.A)(e,zc),a=t.uid,o=t.uri,s=t.type,c=t.name,u=t.images,d=t.show,p=Hs(t,n),v=Qc(r.section),g=(0,x.jsx)(ml.b,{uri:o,uid:null!=a?a:void 0,showUri:t.show.uri,contextUri:v,provider:t.provider}),m=(0,x.jsx)(Vc,{item:t,tooltipText:d.name,showTypeLabel:i,subtitle:(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(as.H,{uri:d.uri}),children:(0,x.jsx)(Ye.N,{to:d.uri,stopPropagation:!0,children:d.name})})});return(0,x.jsx)(Nc,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yc(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yc(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uid:a,uri:o,contextUri:v,id:p,index:n,type:s,title:c,subtitle:m,images:u,dragLabel:c,menu:g,moreButtonLabelName:c,ariaPauseLabel:V.Ru.get("tracklist.a11y.pause",c,d.name),ariaPlayLabel:V.Ru.get("tracklist.a11y.play",c,d.name)},r))},Kc=n(52733),Wc=n(17616),Zc=n(80553),Xc=n(43596),Jc=n(87923),$c=["track","index","showTypeLabel"];function eu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var tu=function(e){var t=e.track,n=e.index,r=e.showTypeLabel,a=(0,f.A)(e,$c),o=t.uid,s=t.uri,c=t.type,u=t.name,d=t.album,p=Hs(t,n),v=Qc(a.section),g=(0,yo.f)().uri,m=t.isLocal?(0,x.jsx)(Wc.A,{uri:s,uid:null!=o?o:void 0,contextUri:v}):(0,x.jsx)(Zc.P,{uri:s,uid:null!=o?o:void 0,albumUri:d.uri,artists:t.artists,contextUri:v,entityContextUri:null!=g?g:void 0,isSmartRecommendation:(0,Tc.N)(t),provider:t.provider}),b=t.artists.map((function(e){return e.name})).join(V.Ru.getSeparator()),y=t.artists?(0,x.jsx)(Vc,{item:t,tooltipText:b,showTypeLabel:r,subtitle:(0,x.jsx)(x.Fragment,{children:t.artists.map((function(e,t){return(0,x.jsxs)(i.Fragment,{children:[t>0&&V.Ru.getSeparator(),(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(Kc.t,{uri:e.uri}),children:(0,x.jsx)(Ye.N,{to:e.uri,stopPropagation:!0,children:e.name})})]},t)}))})}):null,h=(0,Jc.g)(s,{isPlayable:!0,isLocal:(0,Vi.PkR)(s),isOutOfMarket:!1,artistUris:t.artists.map((function(e){return e.uri}))}),j=h.isPlayable,w=h.isAnyArtistBanned,O=(0,Xc.M)(t.artists.map((function(e){return e.uri}))).unBanArtists;return(0,x.jsx)(Nc,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?eu(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uid:o,uri:s,contextUri:v,id:p,index:n,type:c,title:u,images:d.images,dragLabel:u,menu:m,moreButtonLabelName:u,subtitle:y,ariaPauseLabel:V.Ru.get("tracklist.a11y.pause",u,b),ariaPlayLabel:V.Ru.get("tracklist.a11y.play",u,b),isPlayable:!j,isAnyArtistBanned:w,handleArtistBanUndoClick:O},a))},nu=n(48747),iu=n(2949);function ru(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function au(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ru(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ru(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ou=function(e,t){var n=(0,Il.P)({uri:null!=e?e:""},{featureIdentifier:"queue"}),r=(0,i.useMemo)((function(){return function(e,t){return function(n){var r=(0,P.z)(),a=t===qc.$.NowPlaying,o=(0,No.gC)((function(e){return a&&n.uri?(0,iu.Ok)(e,n.uri):nu.i.NOT_ACTIVE})),l=o.playbackStatus,s=o.isActive,c=o.isPlaying,u=e(n),d=(0,i.useCallback)((function(e){var t=n.uri,i=n.uid;u.triggerPlay(e,t?(0,qn.A)(zn().mark((function e(){return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",r.skipToNext({uri:t,uid:null!=i?i:null}));case 1:case"end":return e.stop()}}),e)}))):void 0)}),[u,r,n]),p=(0,i.useCallback)((function(e){u.togglePlay(e,(function(){if(s)return c?r.pause():r.resume();var e=n.uri,t=n.uid;return r.skipToNext(e?{uri:e,uid:null!=t?t:null}:void 0)}))}),[u,s,n,r,c]);return{playbackStatus:l,isActive:s,isPlaying:c,triggerPlay:d,togglePlay:p}}}(n.usePlayContextItem,t)}),[n.usePlayContextItem,t]);return au(au({},n),{},{usePlayContextItem:r})};var lu=n(98782),su=n(67124),cu=n(86137);const uu="main-nowPlayingView-queue",du="SQF5NXZsecXwP7qjjQ70",pu="main-nowPlayingView-openQueue";function vu(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var fu="/search",gu="/queue",mu=i.memo((function(e){var t=e.spec,n=(0,Br.t)(t);return(0,x.jsxs)(ll.w,{className:uu,ref:n,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.your-dj.npv.queue.title")}),(0,x.jsx)(d.E,{as:"div",semanticColor:"textSubdued",children:V.Ru.get("web-player.your-dj.npv.queue.description")})]})})),bu=i.memo((function(e){var t=e.spec,n=e.logger,i=(0,Br.t)(t);return(0,x.jsxs)(ll.w,{className:uu,ref:i,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.empty-queue")}),(0,x.jsx)(Ye.N,{to:fu,children:(0,x.jsx)(Fs,{onClick:function(){var e=t.searchButtonFactory().hitUiNavigate({destination:fu});n.logInteraction(e)},children:V.Ru.get("web-player.now-playing-view.empty-queue-cta")})})]})})),yu=(0,Po.mc)((function(e){var t,n=e.isContextAd,r=(0,cu.w)(),o=r.nextUp,l=r.queued,s=(0,bl.Zp)(),c=(0,E._Y)(),u=(0,a.NC)(Tr.eWj),d=(0,_o.L)(),p=(0,Fe.r)(Ls._,{}),v=p.spec,f=p.logger,g=l[0]||o[0],m=ou((null==g?void 0:g.uri)||null,qc.$.NextUp).usePlayContextItem,b=(0,Br.t)(v),y=(0,i.useCallback)((function(){var e=v.openQueueButtonFactory().hitUiNavigate({destination:gu});f.logInteraction(e),u?c(re.$S.QUEUE_BUTTON_CLICK):s(gu)}),[s,c,u,v,f]);return null!=d&&null!==(t=d.context)&&void 0!==t&&t.uri&&(0,lu.HS)(d.context)?(0,x.jsx)(mu,{spec:v}):d&&g?(0,x.jsxs)(ll.w,{className:uu,ref:b,children:[(0,x.jsx)(ll.X,{action:(0,x.jsx)(nn.H,{size:"small",condensed:!0,onClick:y,className:pu,semanticColor:"textSubdued",children:V.Ru.get("web-player.now-playing-view.open-queue")}),children:V.Ru.get("queue.next-in-queue")}),(0,x.jsxs)("ul",{className:du,children:[g.type===Cl.c.TRACK&&(0,x.jsx)(tu,{track:g,index:0,usePlayContextItem:m,isNpv:!0}),g.type===Cl.c.EPISODE&&(0,x.jsx)(Gc,{episode:g,index:0,usePlayContextItem:m,isNpv:!0}),n&&g.type===Cl.c.AD&&(0,x.jsx)(Pc,{ad:g,index:0,usePlayContextItem:m,isNpv:!0})]})]}):(0,x.jsx)(bu,{spec:v,logger:f})}),{name:"NPVNextInQueue"}),hu=function(e){return(0,su.V)()?null:(0,x.jsx)(yu,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vu(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vu(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))},xu=n(17852),ju=n(31196),wu=n(69146);const Ou="_mPIDSVjofNyCLhlaXuL",Su="WbtcAaLN1SQCr16tuZXv",Cu="mqlmYaGITrdEQC40rEOI",Au="KEb8GSQPHsSmLCes_O07",Nu="Lkuf447h9WU9AaYHTsu7",ku="VU8VpmUxiLG5anxsH03k",Eu="JO8KMTdQoJAPhSpBlaqE",Pu="oKZq5I1c9_xWl3NWP1SU";var Iu=(0,Po.mc)((function(e){var t=e.coverArt,n=e.description,r=e.name,a=e.publisher,o=e.uri,c=(0,In.y)(),p=(0,xl.P)({itemUris:[o],dragLabelText:r}),v=p.draggable,f=p.onDragStart,g=(0,wu.A)(o),m=(0,s.A)(g,2),b=m[0],y=m[1],h=!(0,Ot.n)(),j=(0,bl.Zp)(),w=(0,Fe.r)(xu.M,{}),O=w.spec,S=w.logger,C=w.UBIFragment,A=(0,i.useRef)(null),N=(0,i.useCallback)((function(){var e=O.artworkFactory().hitUiNavigate({destination:o});S.logInteraction(e)}),[S,O,o]),k=(0,i.useCallback)((function(){var e=O.titleFactory().hitUiNavigate({destination:o});S.logInteraction(e)}),[S,O,o]),E=(0,i.useCallback)((function(){var e=O.podcastDescriptionFactory().hitUiNavigate({destination:o});S.logInteraction(e),j((0,Vi.o_h)(o).toURLPath(!0))}),[S,j,O,o]),P=(0,i.useCallback)((function(){var e=O.followButtonFactory().hitFollow({itemToBeFollowed:o}),t=O.followButtonFactory().hitUnfollow({itemToBeUnfollowed:o});S.logInteraction(b?t:e),y(!b)}),[b,S,y,O,o]);return(0,x.jsxs)(ll.w,{className:Ou,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.podcast-about.title")}),(0,x.jsx)("div",{children:(0,x.jsx)("button",{type:"button","data-testid":"description-button",className:Su,onClick:E,children:(0,x.jsx)(d.E,{as:"div",ref:A,variant:"bodySmall",className:Cu,children:(0,x.jsx)(Ze.N,{source:n})})})}),(0,x.jsxs)("div",{className:u()(Au,(0,l.A)({},Nu,c!==An.E.MEDIUM)),children:[(0,x.jsx)(C,{spec:O,children:(0,x.jsx)(Z.v,{contentAlign:!0,id:"aboutPodcastNPV",className:Eu,media:(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(as.H,{uri:o}),children:(0,x.jsx)(Ye.N,{draggable:v,onDragStart:f,to:o,onClick:N,children:(0,x.jsx)(wl.b,{className:Pu,type:Cl.c.SHOW,title:r,images:null==t?void 0:t.sources,size:Ol.Qe.SIZE_48})})}),title:(0,x.jsx)(Ee.d,{lineClamp:1,children:(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(as.H,{uri:o}),children:(0,x.jsx)(Ye.N,{draggable:v,onDragStart:f,to:o,onClick:k,children:r})})}),subtitle:(0,x.jsx)(wr.j,{lineClamp:1,variant:"bodySmall",children:a})})}),(0,x.jsx)(ju.W,{isFollowing:b,onClick:P,disabled:h,className:ku})]})]})}),{name:"NPVPodcastAbout"}),Ru=n(78543);const Lu="f6_Fu_ei4TIJWR0wzvTk",Tu="TLmzadNIdvV8sYzTuXRg",Du="MT9De6UrCVQ8Qo6o3ikA";var _u=i.memo((function(){return(0,x.jsx)("div",{className:Lu,"aria-hidden":!0,children:(0,x.jsxs)("div",{className:Tu,children:[(0,x.jsx)(Ru.Y,{as:"div",variant:"bodyMediumBold",className:Du,charCount:8,isLoading:!0}),[20,50,25].map((function(e,t){return(0,x.jsx)(Ru.Y,{as:"div",variant:"bodySmall",className:Du,charCount:e,isLoading:!0},t)}))]})})})),Uu=n(8712);const Bu="m3pzWNRu8xGY36YIaCY1";var Fu=(0,Po.mc)((function(e){var t=e.topics,n=e.logTopicNavigation;return!t||t.length<1?null:(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.discover-more")}),(0,x.jsx)(Uu.N,{topics:t,onClick:n,className:Bu})]})}),{name:"NPVTopicsListWrapper"}),Mu=new el.l("queryNpvEpisode","query","2df2707ecefb6115410bcd2fa608bf553f8ea37b344f8e6e5b220289b4a840ed",null),Hu=new el.l("queryNpvEpisodeWithAccessInfo","query","2df2707ecefb6115410bcd2fa608bf553f8ea37b344f8e6e5b220289b4a840ed",null),Vu=(n(60287),n(81454));const qu="wYBEXo9heVZe_zkteOJ6",Qu="EjaYcQIBa_uJkc86qrpQ",zu="QER3MDmhErzCc5bKcklD",Yu="fAKKlaCbuHm_cDfnO3UW",Gu="AHOmz0JPJhoOloFpM8s2",Ku="d8y50Fa8LDK2Fuc92EaA",Wu="XBYrBviGypqaAfM1BWxM",Zu="G4fVEUX2caQTFPB7mA89",Xu="ATHbG3rw7VRat_Knu9EO",Ju="LsAbtB5dQLMOgNkK6uNl",$u="nng8b1skt_Yh69A8uReL";var ed=function(e){switch(e){case An.E.SMALL:return"titleSmall";case An.E.LARGE:return"titleMedium";case An.E.XLARGE:return"titleLarge";default:return"titleSmall"}},td=function(e){var t,n=e.readAlongSection,r=e.readAlongIndex,a=e.index,o=e.activeIndex,s=e.onActiveSectionChange,c=e.breakpoint,p=(0,i.useRef)(!0),v=(0,i.useRef)(null);return(0,i.useEffect)((function(){a===o&&s?(p.current&&s({sectionRef:v}),p.current=!1):p.current=!0}),[o,a,s]),void 0===(null===(t=n.text)||void 0===t||null===(t=t.sentence)||void 0===t?void 0:t.text)?null:(0,x.jsx)("div",{ref:v,className:u()(Yu,(0,l.A)({},Gu,a<o),null==c?void 0:c.toLowerCase()),children:(0,x.jsx)(d.E,{as:"p",className:Qu,variant:c?ed(c):"titleSmall",children:r>0?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)("span",{className:Zu,children:n.text.sentence.text.substring(0,r)}),(0,x.jsx)("span",{children:n.text.sentence.text.substring(r)})]}):n.text.sentence.text})})},nd=n(38547),id=function(e,t){var n=0;if(0===e.length)return 0;for(var i=0;i<e.length&&!(t<e[i].startMs);i++)n+=e[i].numChars;return n},rd=n(71007),ad=function(){var e=(0,qn.A)(zn().mark((function e(t){var n,i,r,a;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(0,Vi.o_h)(t),i=n.id,r=er.n.getInstance(),e.next=5,r.build().withHost(rd.ao).withPath("/episode/".concat(encodeURIComponent(i))).withEndpointIdentifier("/episode/{episodeId}").withoutMarket().withoutGlobalHeaders().withQueryParameters({format:"json"}).send();case 5:if(200===(a=e.sent).status){e.next=8;break}throw new Error("failed to get read-along transcript");case 8:return e.abrupt("return",a.body);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),od=function(e){var t,n=["transcript",{uri:e}],i=(0,Ni.I)({queryKey:n,queryFn:(t=(0,qn.A)(zn().mark((function t(){return zn().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e&&(0,Vi.gHQ)(e)){t.next=2;break}return t.abrupt("return",void 0);case 2:return t.abrupt("return",ad(e));case 3:case"end":return t.stop()}}),t)}))),function(){return t.apply(this,arguments)}),gcTime:18e5,staleTime:6e5});return{data:i.data,loading:i.isLoading,error:i.isError}},ld=n(15984),sd=(0,l.A)((0,l.A)((0,l.A)({},An.E.SMALL,0),An.E.LARGE,792),An.E.XLARGE,1448),cd=function(e){var t=e.startMs,n=e.onTimestampClick;return(0,x.jsx)("button",{className:Ku,onClick:function(){n(t)},children:(0,x.jsx)(d.E,{className:Wu,variant:"bodyMedium",children:(0,Ko.f)(t)})})},ud=function(e){var t=e.hidden,n=e.onClick;return(0,x.jsx)("div",{className:u()(Xu,(0,l.A)({},Ju,t)),children:(0,x.jsx)(v.$,{colorSet:"invertedLight",size:"small",onClick:n,iconLeading:Wt.Q,"aria-label":V.Ru.get("web-player.read-along-transcript.sync.button"),children:V.Ru.get("web-player.read-along-transcript.sync.button")})})},dd=function(e){var t,n=e.episodeURI,r=e.mode,a=od(n),o=a.data,c=a.loading,d=a.error,p=(0,Fe.r)(Vu.c,{data:{uri:n}}),v=p.spec,f=p.logger,g=null!==(t=null==o?void 0:o.section)&&void 0!==t?t:[],m=v.timestampLinkFactory(),b=(0,i.useState)(!0),y=(0,s.A)(b,2),h=y[0],j=y[1],w=(0,i.useState)(!1),O=(0,s.A)(w,2),S=O[0],C=O[1],A=(0,P.z)(),N=(0,St.o)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),k=(0,i.useRef)(null),E=(0,i.useRef)(!1),I=(0,i.useRef)(null),R=(0,i.useRef)(null),L=(0,i.useRef)(null);(0,ld.p)(L);var T=(0,Ri.x)(sd,R).breakpoint,D=function(e,t){for(var n,r,a=(0,i.useRef)(0),o=(0,nd.f)(100,(function(t){var n;return(null==t||null===(n=t.item)||void 0===n?void 0:n.uri)===e})),l=(0,s.A)(o,1)[0],c=t.findIndex((function(e){var t;return null===(t=e.text)||void 0===t||null===(t=t.sentence)||void 0===t?void 0:t.text})),u=0,d=0;d<t.length;d++){var p=t[d];if(l>=p.startMs&&(d===t.length-1||l<t[d+1].startMs)){var v;c=d,null!==(v=p.text)&&void 0!==v&&v.sentence&&(u=id(p.text.sentence.highlight,l));break}}var f=Math.abs(a.current-(null!==(n=c)&&void 0!==n?n:0))<=3;return a.current=null!==(r=c)&&void 0!==r?r:0,{shouldAnimateScroll:f,highlightedSentenceIndex:c,readAlongIndex:u}}(n,g),_=D.highlightedSentenceIndex,U=D.shouldAnimateScroll,B=D.readAlongIndex,F=(0,i.useCallback)((function(){var e,t,n;if(R.current&&k.current){var i=(null===(e=k.current)||void 0===e?void 0:e.offsetTop)-(null===(t=R.current)||void 0===t?void 0:t.offsetTop)-24;void 0!==i&&(null===(n=R.current)||void 0===n||n.scrollTo({top:i,behavior:U?"smooth":"auto"}),C(!1))}}),[U]),M=(0,i.useCallback)((function(){var e,t,n;if(R.current&&k.current){var i=(null===(e=k.current)||void 0===e?void 0:e.offsetTop)-(null===(t=R.current)||void 0===t?void 0:t.offsetTop)-24,r=null===(n=k.current)||void 0===n?void 0:n.clientHeight;if(void 0!==i){var a=i>=R.current.scrollTop&&i+r<=R.current.scrollTop+R.current.clientHeight;C(!a),j(a)}}}),[]),H=(0,i.useCallback)((function(e){A.seekTo(e).then((function(){return setTimeout((function(){return j(!0)}),300)})),N?(A.resume(),f.logInteraction(m.hitPlay({itemToBePlayed:n}))):f.logInteraction(m.hitSeekToTime({msToSeekTo:e}))}),[A,f,m,n,N]),V=(0,i.useCallback)((function(){E.current=!0,I.current&&clearTimeout(I.current),I.current=setTimeout((function(){E.current=!1}),500),M()}),[M]),q=(0,i.useCallback)((function(){M(),E.current||h&&F()}),[h,M,F]);return c||d||0===g.length?null:(0,x.jsx)(x.Fragment,{children:(0,x.jsxs)(In.o.Provider,{value:T,children:[(0,x.jsx)("div",{className:u()(qu,(0,l.A)({},zu,r===Kr.aY.npv)),ref:R,onWheel:V,children:(0,x.jsx)("div",{className:$u,ref:L,children:(0,x.jsx)("div",{children:g.map((function(e,t){return e.title?(0,x.jsx)(cd,{onTimestampClick:H,startMs:e.startMs},t):(0,x.jsx)(td,{index:t,activeIndex:_,readAlongSection:e,readAlongIndex:_===t?B:0,onActiveSectionChange:function(e){var t=e.sectionRef;k.current=t.current,q()},breakpoint:T},t)}))})})}),(0,x.jsx)(ud,{hidden:!!N||!S,onClick:function(){f.logInteraction(v.syncButtonFactory().hitQuickScroll()),j(!0),F()}})]})})},pd=function(e){var t=e.mode,n=(0,St.o)((function(e){return null==e?void 0:e.item}),(function(e,t){return(null==e?void 0:e.uri)===(null==t?void 0:t.uri)}));return null!=n&&n.uri&&(0,Vi.gHQ)(n.uri)?(0,x.jsx)(dd,{mode:t,episodeURI:n.uri}):null},vd=function(e){return e.SET_TRANSCRIPT_UI_FLAG="SET_TRANSCRIPT_UI_FLAG",e}({}),fd=n(18155),gd=function(e){var t,n;return null!==(t=null===(n=e.ui)||void 0===n||null===(n=n.transcript)||void 0===n?void 0:n.mode)&&void 0!==t?t:Kr.aY.none},md=function(e){var t,n;return null!==(t=null===(n=e.ui)||void 0===n||null===(n=n.transcript)||void 0===n?void 0:n.uiFlags)&&void 0!==t?t:fd.aj},bd=n(86710),yd=n(6843);const hd="_nDkCIVgkWayq3tqiIuW";var xd=function(e){var t,n,r,a,o=e.episode,l=(r=(0,H.wA)(),a=(0,H.d4)(md),{transcriptMode:(0,H.d4)(gd),setTranscriptUIFlag:(0,i.useCallback)((function(e,t){r({type:vd.SET_TRANSCRIPT_UI_FLAG,key:e,value:t})}),[r]),transcriptUIFlags:a}).transcriptMode,s=od(o.uri).data,c=null==s?void 0:s.colourData,u={"--transcript-color-background":c?bd.Q.fromInt(c.background).toCSS(yd.a.HEX):Ds.PQ2,"--transcript-color-text":bd.Q.fromInt(null!==(t=null==c?void 0:c.text)&&void 0!==t?t:0).toCSS(yd.a.HEX),"--transcript-color-highlightText":bd.Q.fromInt(null!==(n=null==c?void 0:c.highlightText)&&void 0!==n?n:-1).toCSS(yd.a.HEX)},d=(0,Fe.r)(Vu.c,{data:{uri:o.uri}}).spec,p=(0,Br.t)(d);return(0,x.jsxs)(ll.w,{className:hd,style:u,ref:p,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.read-along-transcript.now-playing-view.read-along")}),l===Kr.aY.npv&&(0,x.jsx)(x.Fragment,{children:(0,x.jsx)(pd,{mode:Kr.aY.npv})})]})},jd=n(15190),wd=n(11776),Od=n(10134),Sd=n(41511),Cd=function(e){var t,n,r,o,l=e.item,c=e.spec,u=(0,i.useCallback)((function(){}),[]),d=(0,St.o)((function(e){var t;return null!==(t=null==e?void 0:e.isPaused)&&void 0!==t?t:void 0})),p=(0,P.z)(),v=(0,No.te)(l.uri),f=v.isPlaying,g=v.isActive,m=(0,a.NC)(Tr.cgF),b=(0,a.NC)(Tr.xEc),y=(0,a.NC)(Tr.h0Y),h=(0,a.NC)(Tr.MCN,{loadingValue:!1}),j=(0,a.NC)(Tr.r1q),w=(0,gs.W)(),O=(0,jd.c)(),S=null===(t=(0,wd.d)(l.uri))||void 0===t?void 0:t.episodeOrChapter,C=Is(l),A=(0,i.useCallback)((function(e,t,n,i){var r="play";!f||0!==e&&t||(r="pause"),w({intent:r,targetUri:l.uri,type:"click",itemIdSuffix:e>0?"podcast-description-timestamp":"button"}),S&&O?Fo.h.set((function(){return{triggerId:n||"activation-trigger-mme",triggerAction:null}})):g&&!t?d?(null==i||i("resume"),p.resume()):(null==i||i("pause"),p.pause()):p.seekTo(e)}),[f,w,l.uri,S,O,g,d,p]),N=(0,i.useCallback)((function(e,t){A(e,!0,t)}),[A]),k={uri:l.uri,includeChapters:y,includeAIDubbedEpisodes:j,numberOfChapters:10},E=function(e){var t=e.queryKey,n=e.staleTime,r=e.gcTime,a=e.withAccessInfo,o=e.variables,l=(0,i.useContext)(al.j).request;return(0,Ni.I)({queryKey:t,staleTime:n,gcTime:r,queryFn:function(){return a?(0,ol.c)(l,Hu,o).then((function(e){return null==e?void 0:e.data})):(0,ol.c)(l,Mu,o).then((function(e){return null==e?void 0:e.data}))}})}({queryKey:["queryNpvEpisode",h,k],staleTime:rl,gcTime:il,withAccessInfo:h,variables:k}),I=E.data,R=E.isLoading,L=E.error,T=(0,i.useState)(null),D=(0,s.A)(T,2),_=D[0],U=D[1],B=(0,i.useCallback)(function(){var e=(0,qn.A)(zn().mark((function e(t){var n;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,(0,Od.Q)(t);case 2:n=e.sent,U(n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),[]);if((0,i.useEffect)((function(){S&&!(0,Sd.Gr)(S)&&S.transcript&&S.transcript.length>0&&B(S.transcript[0].cdnUrl)}),[B,S]),R&&l.uri&&!L)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(_u,{}),(0,x.jsx)(_u,{})]});var F,M=(F=null==I?void 0:I.episodeUnionV2,dl(F)?F:void 0),H=function(e){return dl(e)&&"Podcast"===(null==(t=e.podcastV2.data)?void 0:t.__typename)?e.podcastV2.data:void 0;var t}(null==I?void 0:I.episodeUnionV2);if(!l.uri||!M||R||L)return null;var q=function(e){var t;if("DisplaySegments"===(null===(t=e.displaySegments)||void 0===t?void 0:t.__typename))return{chapters:e.displaySegments.displaySegments.items,nextOffset:e.displaySegments.displaySegments.pagingInfo.nextOffset,limit:e.displaySegments.displaySegments.pagingInfo.limit};return{chapters:[],nextOffset:0,limit:0}}(M),Q=q.chapters,z=q.nextOffset,Y=q.limit,G=Q.length>0,K=(null===(n=M.displaySegments)||void 0===n||null===(n=n.chapterTags)||void 0===n?void 0:n.includes("automatically-generated"))||!1;return(0,x.jsxs)(Vr.r,{spec:c,children:[h&&(0,x.jsx)(cs,{episode:M}),j&&!M.originalEpisode&&(0,x.jsx)(Yl,{episode:M}),j&&(0,x.jsx)(Kl,{episode:M}),G&&!C&&(0,x.jsx)(cl,{chapters:Q,episodeUri:l.uri,nextOffset:z,limit:Y,isPlaying:f,isMLGeneratedChapters:K}),b&&H&&(0,x.jsx)(Iu,{coverArt:H.coverArt||void 0,description:H.htmlDescription||"",name:H.name,publisher:null===(r=H.publisher)||void 0===r?void 0:r.name,uri:H.uri}),S&&S.type===Cl.c.EPISODE&&S.transcript&&S.transcript.length>0&&(m?(0,x.jsx)(xd,{episode:l}):(0,x.jsxs)(ll.w,{className:Xl,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.transcript")}),_&&(0,x.jsx)(rs,{transcriptSections:_||[],onTimeStampClick:N,episodeUri:l.uri})]})),C&&(0,x.jsx)(Rs,{item:l}),(0,x.jsx)(Fu,{topics:null!==(o=null==H?void 0:H.topics.items)&&void 0!==o?o:[],logTopicNavigation:u}),(0,x.jsx)(hu,{})]})},Ad=function(e){var t=e.item,n=e.spec;return(0,Ot.n)()?(0,x.jsx)(Cd,{item:t,spec:n}):(0,x.jsx)(x.Fragment,{})};var Nd=function(){return(0,x.jsx)(x.Fragment,{})},kd=new el.l("queryNpvArtist","query","32f0d2428fef557a26a9ccf18fec418dcc2fd5de6b79c5fe33bf7f73539cc15d",null),Ed=(n(59255),n(85130),n(55636),n(28509),n(97332),n(46555),n(13296),n(24594),n(87080)),Pd=n(12031),Id=n(95478),Rd=n(54466),Ld=n(26928),Td=n(42035);const Dd="main-nowPlayingView-aboutArtist",_d="main-nowPlayingView-aboutArtistContent",Ud="main-nowPlayingView-aboutArtistButton",Bd="main-nowPlayingView-aboutArtistHasImage",Fd="main-nowPlayingView-aboutArtistBio",Md="main-nowPlayingView-aboutArtistTextContent",Hd="main-nowPlayingView-aboutArtistPlaceholderWrapper";var Vd=new Set(["spotify:artist:5UUG83KSlqPhrBssrducWV"]),qd=(0,Po.mc)((function(e){var t,n=e.artistUri,r=e.artist,o=e.visuals,s=e.stats,c=e.externalLinks,p=void 0===c?[]:c,v=(0,H.wA)(),f=o.gallery,g=o.avatarImage,m=s.monthlyListeners,b=(0,Vi.o_h)(n).toURLPath(!0),y=(0,Rd.W)({uri:n,type:"locale"})?(0,Td.hF)(b):b,h=(0,Fe.r)(Pd.p,{}),j=h.spec,w=h.logger,O=(0,a.NC)(Tr.lVm,{loadingValue:!1}),S=(0,Br.t)(j,O),C=(0,bl.Zp)(),A=(0,i.useCallback)((function(){if(r&&n){var e=j.hitUiReveal();w.logInteraction(e),v((0,Or.p5)({artistUri:n,artist:r,stats:s,visuals:o,externalLinks:p})),C(y)}}),[j,w,y,v,C,n,r,s,o,p]);if(Vd.has(n)||null===(t=r.biography)||void 0===t||!t.text)return null;var N=[];f.items.forEach((function(e){var t=e.sources.map(Ld.m),n=(0,vc.g)(t,{desiredLabel:"large",desiredSize:600});n&&N.push(n)}));var k=N.find((function(e){return(e.width||0)>=(e.height||0)})),E=[];null==g||g.sources.forEach((function(e){var t=(0,Ld.m)(e);t&&E.push(t)}));var P=k&&{backgroundImage:"linear-gradient(".concat(Ds.PUl," 0%, ").concat(Ds.MYb," 100%), url(").concat(k.url,")")},I=r.verified&&!k&&E.length>0||!r.verified&&!k;return(0,x.jsx)(ll.w,{className:Dd,ref:S,children:(0,x.jsx)("button",{type:"button","aria-label":r.name,className:u()(Ud,(0,l.A)({},Bd,!!P)),onClick:A,style:P,"data-testid":"npv-artist-bio-button",children:(0,x.jsxs)("div",{className:u()(_d),children:[r.verified&&(0,x.jsx)(Id.M,{text:V.Ru.get("artist.verified")}),I&&(0,x.jsx)(dc.e,{images:E,label:r.name,width:80,userIconSize:"large",testID:"npv-artist-bio-avatar",customPlaceholder:(0,x.jsx)("div",{className:Hd,"data-testid":"npv-artist-bio-placeholder-wrapper",children:(0,x.jsx)(Ed.r,{size:"large"})})}),(0,x.jsxs)("div",{className:Md,children:[(0,x.jsx)(d.E,{as:"div",variant:"bodyMedium",children:!!m&&V.Ru.get("artist.monthly-listeners-count",m)}),(0,x.jsx)("div",{children:(0,x.jsx)(d.E,{as:"span",variant:"bodySmall",className:Fd,children:(0,x.jsx)(Ze.N,{source:r.biography.text})})})]})]})})})}),{name:"NPVArtistAbout"}),Qd=n(1201);const zd="main-nowPlayingView-aboutArtistV2",Yd="main-nowPlayingView-aboutArtistV2Button",Gd="main-nowPlayingView-aboutArtistV2Title",Kd="main-nowPlayingView-aboutArtistV2HasImage",Wd="main-nowPlayingView-aboutArtistV2ImageContainer",Zd="main-nowPlayingView-aboutArtistV2Image",Xd="main-nowPlayingView-aboutArtistV2TextContent",Jd="main-nowPlayingView-aboutArtistV2Name",$d="main-nowPlayingView-aboutArtistV2Listeners",ep="main-nowPlayingView-aboutArtistV2ListenersCount",tp="main-nowPlayingView-aboutArtistV2FollowButton",np="main-nowPlayingView-aboutArtistV2Bio",ip="main-nowPlayingView-aboutArtistV2PlaceholderWrapper",rp="main-nowPlayingView-aboutArtistV2Avatar";var ap=new Set(["spotify:artist:5UUG83KSlqPhrBssrducWV"]),op=(0,Po.mc)((function(e){var t,n=e.artistUri,r=e.artist,o=e.visuals,c=e.stats,p=e.externalLinks,v=void 0===p?[]:p,f=(0,H.wA)(),g=o.gallery,m=o.avatarImage,b=c.monthlyListeners,y=(0,Vi.o_h)(n).toURLPath(!0),h=(0,Rd.W)({uri:n,type:"locale"})?(0,Td.hF)(y):y,j=(0,wu.A)(n),w=(0,s.A)(j,2),O=w[0],S=w[1],C=(0,Fe.r)(Pd.p,{}),A=C.spec,N=C.logger,k=(0,a.NC)(Tr.lVm,{loadingValue:!1}),E=(0,Br.t)(A,k),P=(0,i.useCallback)((function(){if(r&&n){var e=A.hitUiReveal();N.logInteraction(e),f((0,Or.p5)({artistUri:n,artist:r,stats:c,visuals:o,externalLinks:v}))}}),[A,N,f,n,r,c,o,v]),I=(0,i.useCallback)((function(e){e.stopPropagation();var t=A.artistNameFactory().hitUiNavigate({destination:n});N.logInteraction(t)}),[A,n,N]),R=(0,i.useCallback)(function(){var e=(0,qn.A)(zn().mark((function e(t){var i,r;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),t.stopPropagation(),i=A.followButtonFactory().hitFollow({itemToBeFollowed:n}),r=A.followButtonFactory().hitUnfollow({itemToBeUnfollowed:n}),N.logInteraction(O?r:i),e.prev=5,e.next=8,S(!O);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:case"end":return e.stop()}}),e,null,[[5,10]])})));return function(t){return e.apply(this,arguments)}}(),[n,O,N,S,A]),L=(0,i.useCallback)((function(e){if("Enter"===e.key)return R(e)}),[R]);if(ap.has(n)||null===(t=r.biography)||void 0===t||!t.text)return null;var T=[];g.items.forEach((function(e){var t=e.sources.map(Ld.m),n=(0,vc.g)(t,{desiredLabel:"large",desiredSize:600});n&&T.push(n)}));var D=T.find((function(e){return(e.width||0)>=(e.height||0)})),_=[];null==m||m.sources.forEach((function(e){var t=(0,Ld.m)(e);t&&_.push(t)}));var U=D&&{backgroundImage:"linear-gradient(".concat(Ds.i_N," 0%, ").concat(Ds.Par," 50%), url(").concat(D.url,")")},B=!D&&_.length>0,F=!D&&0===_.length;return(0,x.jsx)(ll.w,{className:zd,ref:E,children:(0,x.jsxs)("button",{type:"button","aria-label":r.name,className:u()(Yd),onClick:P,tabIndex:0,"data-testid":"npv-artist-bio-button",children:[(0,x.jsxs)("div",{className:u()(Wd,(0,l.A)({},Zd,D)),style:U,children:[(0,x.jsx)("div",{className:u()(Gd,(0,l.A)({},Kd,D)),children:(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.artist-about.title")})}),F&&(0,x.jsx)("div",{className:u()(ip),"data-testid":"npv-artist-bio-placeholder-wrapper",children:(0,x.jsx)(Ed.r,{size:"xxlarge"})}),B&&(0,x.jsx)(dc.e,{images:_,label:r.name,width:80,userIconSize:"large",testID:"npv-artist-bio-avatar",className:rp})]}),(0,x.jsxs)("div",{className:Xd,children:[(0,x.jsx)("div",{className:Jd,children:(0,x.jsx)(Qd.N_,{to:h,onClick:I,"data-testid":"npv-artist-link",children:(0,x.jsx)(d.E,{as:"span",variant:"bodyMediumBold",dir:"auto",children:r.name})})}),(0,x.jsxs)("div",{className:$d,children:[(0,x.jsx)(d.E,{as:"div",variant:"bodyMedium",className:ep,children:!!b&&V.Ru.get("artist.monthly-listeners-count",b)}),(0,x.jsx)(ve.n,{as:"div",size:"small",className:tp,onClick:R,onKeyDown:L,tabIndex:0,children:O?V.Ru.get("unfollow"):V.Ru.get("follow")})]}),(0,x.jsx)(d.E,{as:"span",variant:"bodySmall",className:np,children:(0,x.jsx)(Ze.N,{LinkComponent:Qd.N_,source:r.biography.text,onLinkClick:function(e){e.stopPropagation()}})})]})]})})}),{name:"NPVArtistAboutV2"}),lp=n(308),sp=(n(38408),n(71425),n(80456),function(e){var t=e.artistUri,n=e.spec,r=e.logger,a=(0,wu.A)(t),o=(0,s.A)(a,2),l=o[0],c=o[1],u=(0,i.useCallback)((0,qn.A)(zn().mark((function e(){var i,a;return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n&&r){e.next=2;break}return e.abrupt("return");case 2:return i=n.hitFollow({itemToBeFollowed:t}),a=n.hitUnfollow({itemToBeUnfollowed:t}),r.logInteraction(l?a:i),e.prev=5,e.next=8,c(!l);case 8:e.next=12;break;case 10:e.prev=10,e.t0=e.catch(5);case 12:case"end":return e.stop()}}),e,null,[[5,10]])}))),[t,l,r,c,n]),d=l?V.Ru.get("unfollow"):V.Ru.get("follow");return(0,x.jsx)(ju.W,{isFollowing:l,onClick:u,buttonText:d})}),cp=function(e){var t=e.artistName,n=e.roles,r=e.spec,a=e.logger,o=e.linkable,l=void 0!==o&&o,s=n[0].artistUri,c=n.map((function(e){return e.role})).join(V.Ru.getSeparator()),u=(0,Vi.o_h)(s).toURLPath(!0),p=(0,Rd.W)({uri:s,type:"locale"})?(0,Td.hF)(u):u,v=(0,i.useCallback)((function(e){if(e.stopPropagation(),r&&a){var t=r.artistNameFactory().hitUiNavigate({destination:s});a.logInteraction(t)}}),[r,s,a]);return(0,x.jsx)(Z.v,{title:l?(0,x.jsx)(Ye.N,{to:p,onClick:v,"data-testid":"artist-row-credits-link",children:(0,x.jsx)(d.E,{variant:"bodyMedium",children:t})}):(0,x.jsx)(d.E,{variant:"bodyMedium",children:t}),size:"sm",paddingInlineStart:"0",paddingInlineEnd:"0",subtitle:(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",style:{textTransform:"capitalize"},"data-testid":"artist-row-role",children:c}),"data-testid":"credits-artist-row",variant:"naked",id:s,trailing:l&&(0,x.jsx)(sp,{artistUri:s,spec:null==r?void 0:r.followToggleButtonFactory(),logger:a})},t)},up=function(e){return e.MainArtist="main artist",e.FeaturedArtist="featured artist",e.Remixer="remixer",e.Actor="actor",e.Composer="composer",e.Orchestra="orchestra",e.Writer="writer",e.Producer="producer",e.Performer="performer",e.Lyricist="lyricist",e.Conductor="conductor",e.Author="author",e.Editor="editor",e.Arranger="arranger",e.EnsembleOrchestra="ensemble orchestra",e}({}),dp=(0,i.memo)((function(e){var t=e.data,n=e.limit,i=(0,Fe.r)(lp.D,{}),r=i.spec,a=i.logger,o=t.reduce((function(e,t){var n,i=t.artistName,r=null!==(n=e.get(i))&&void 0!==n?n:[];return r.push(t),e.set(i,r),e}),new Map),l=Array.from(o,(function(e,t){var n=(0,s.A)(e,2),i=n[0],o=n[1];return(0,x.jsx)(cp,{artistName:i,roles:o.sort((function(e,t){return e.role.toLowerCase()===up.MainArtist?-1:t.role.toLowerCase()===up.MainArtist?1:0})),spec:r.creditsRowFactory({position:t}),logger:a,linkable:o.filter((function(e){return e.isArtistUriLinkable})).length>0},i)})).slice(0,n);return(0,x.jsx)(x.Fragment,{children:l})}));const pp="main-nowPlayingView-credits",vp="main-nowPlayingView-creditsShowAll";var fp=(0,Po.mc)((function(e){var t=e.data,n=e.trackUri,r=(0,H.wA)(),o=(0,a.NC)(Tr.QIZ),l=(0,Fe.r)(lp.D,{}),s=l.spec,c=l.logger,u=(0,i.useCallback)((function(){c.logInteraction(s.showAllButtonFactory().hitUiReveal()),r((0,Or.P0)(!0,n))}),[r,c,s,n]),d=(0,Br.t)(s,o);return 0===t.length?null:(0,x.jsxs)(ll.w,{className:pp,ref:d,children:[(0,x.jsx)(ll.X,{action:(0,x.jsx)(nn.H,{size:"small",condensed:!0,onClick:u,className:vp,semanticColor:"textSubdued",children:V.Ru.get("web-player.now-playing-view.show-all")}),children:V.Ru.get("web-player.now-playing-view.credits")}),(0,x.jsx)(dp,{data:t,limit:3})]})}),{name:"NPVCredits"}),gp=(n(77905),n(90305)),mp=n(13742),bp=n(89648),yp=n(88416),hp=n(19726),xp=n(51469),jp=n(68757),wp=n(78803);const Op="main-nowPlayingView-sectionHeaderSpacing",Sp="main-nowPlayingView-lyricsTitle",Cp="main-nowPlayingView-lyricsControls",Ap="main-nowPlayingView-lyricsGradient",Np="main-nowPlayingView-lyricsContent";var kp=function(){var e=(0,Fe.r)(gp.X,{}),t=e.spec,n=e.logger,i=(0,hp.r)().setMode;return(0,x.jsxs)("div",{className:Cp,children:[(0,x.jsx)(wp.D,{label:V.Ru.get("web-player.now-playing-view.lyrics.cinema-mode"),onClick:function(){i(Kr.YU.cinema),n.logInteraction(t.cinemaModeButtonFactory().hitUiReveal()),n.logImpression(t.cinemaModeButtonFactory().impression())},children:(0,x.jsx)(xp.C,{size:"small"})}),(0,x.jsx)(wp.D,{label:V.Ru.get("web-player.now-playing-view.close.lyrics"),onClick:function(){i(Kr.YU.none),n.logInteraction(t.closeLyricsButtonFactory().hitUiHide())},children:(0,x.jsx)(jp.M,{size:"small"})})]})},Ep=(0,Po.mc)((function(e){var t=e.item,n=(0,Fe.r)(gp.X,{}),r=n.spec,a=n.logger,o=(0,i.useRef)(null),l=(0,hp.r)(),s=l.mode,c=l.setMode,p=(0,i.useRef)(null),v=(0,i.useRef)(0),f=(0,yp.J)().data,g=(0,St.o)((function(e){var t;return null==e||null===(t=e.nextItems)||void 0===t?void 0:t[0]}),(function(e,t){return(null==e?void 0:e.uri)===(null==t?void 0:t.uri)}));(0,bp.I)(null==g?void 0:g.uri,null==g?void 0:g.images);var m=(0,i.useCallback)((function(){v.current=Date.now()}),[]),b=(0,i.useCallback)((function(e){var t,n,i=e.lineRef,r=e.isActiveLine,a=e.shouldAnimateScroll,l=e.activeLineIndex,s=e.isFirstLine;if(o.current&&p.current){var c,u,d=void 0;if(i.current&&r)d=(null===(c=i.current)||void 0===c?void 0:c.offsetTop)-(null===(u=p.current)||void 0===u?void 0:u.offsetTop)-16;else s&&l<0&&(d=0);if(void 0!==d){var f=null===(t=p.current)||void 0===t?void 0:t.scrollTop,g=Math.abs(f-d),m=o.current.clientHeight,b=Date.now()-v.current<2e3,y=v.current>0&&g>1*m;if(!(b||y)){v.current=0;var h="visible"===document.visibilityState&&a?"smooth":"auto";null===(n=p.current)||void 0===n||n.scrollTo({top:d,behavior:h})}}}}),[]);if((0,i.useLayoutEffect)((function(){var e;v.current=0,null===(e=p.current)||void 0===e||e.scrollTo({top:0,behavior:"auto"})}),[t.uri]),null==f||!f.hasLyrics)return null;if(s===Kr.YU.npv){var y=(null==f?void 0:f.hasLyrics)&&!f.isTimeSynced,h={"--lyrics-color-active":y?Ds.ONy:f.colors.activeText,"--lyrics-color-inactive":f.colors.text,"--lyrics-color-passed":bd.Q.fromCSS(f.colors.activeText,.7).toCSS(yd.a.RGBA),"--lyrics-color-background":f.colors.background};return(0,x.jsxs)(ll.w,{className:u()(Op,Ap),style:h,ref:o,children:[(0,x.jsx)(ll.X,{action:(0,x.jsx)(kp,{}),className:Sp,children:V.Ru.get("web-player.lyrics.title")}),(0,x.jsxs)("div",{className:Np,ref:p,onWheel:m,onScroll:m,children:[y&&(0,x.jsx)(d.E,{as:"p",variant:"bodySmall",dir:"auto",style:{color:f.colors.text},children:V.Ru.get("web-player.lyrics.unsynced")}),(0,x.jsx)(mp.x,{trackUri:t.uri,data:f,format:"card",onActiveLineChange:b})]})]})}return(0,x.jsx)(ll.w,{className:Op,children:(0,x.jsx)(ll.X,{action:(0,x.jsx)(Fs,{onClick:function(){c(Kr.YU.npv),a.logInteraction(r.showLyricsButtonFactory().hitUiReveal()),a.logImpression(r.showLyricsButtonFactory().impression())},children:V.Ru.get("web-player.now-playing-view.show.lyrics")}),className:Sp,children:V.Ru.get("web-player.lyrics.title")})})}),{name:"NPVLyrics"}),Pp=n(78973);const Ip="main-nowPlayingView-merch";var Rp=(0,Po.mc)((function(e){var t=e.artistId,n=e.merch;return!n||n.length<1?null:(0,x.jsxs)(ll.w,{className:Ip,children:[(0,x.jsx)(ll.X,{children:V.Ru.get("web-player.now-playing-view.npv-merch")}),(0,x.jsx)(Pp.ArtistOffers,{items:n,artistId:t,merchVariant:$r.Ol.VARIANTA,variant:"bodyMedium"})]})}),{name:"NPVMerchOffers"}),Lp=n(55899),Tp=n(14909),Dp=n(13111);const _p="main-nowPlayingView-artistOnTour",Up="main-nowPlayingView-artistOnTourItem",Bp="main-nowPlayingView-artistOnTourShowAll";function Fp(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Mp(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Fp(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Fp(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Hp=(0,Po.mc)((function(e){var t=e.artistId,n=e.data,i=e.variant,r=void 0===i?"bodyMedium":i,a=(0,Dp.Dh)(t),o=(0,bl.Zp)(),l=(0,Fe.r)(Lp.N,{data:{identifier:t,uri:a,position:0,reason:"NPV - On Tour"}}),s=l.spec,c=l.logger,u=(0,Br.t)(s),d={items:n.items.map((function(e){return Mp(Mp({},e),{},{artists:{items:e.artistsV2.items.flatMap((function(e){return"Artist"===e.data.__typename?e.data:[]}))}})})),totalCount:n.totalCount};return d.items.length?(0,x.jsxs)(ll.w,{className:_p,ref:u,children:[(0,x.jsx)(ll.X,{action:d.items.length!==d.totalCount&&(0,x.jsx)(nn.H,{size:"small",condensed:!0,className:Bp,onClick:function(){!function(){var e=s.seeAllButtonFactory({uri:a}).hitUiNavigate({destination:"".concat(a,":concerts")});c.logInteraction(e);var t=(0,Vi.o_h)("".concat(a,":concerts")).toURLPath(!0);o(t)}()},semanticColor:"textSubdued",children:V.Ru.get("web-player.now-playing-view.show-all")}),children:V.Ru.get("web-player.now-playing-view.on-tour")}),d.items.map((function(e,t){return(0,x.jsx)("div",{className:Up,children:(0,x.jsx)(Tp.I,{concert:e,index:t,spec:s,condensed:!0,elevatedDate:!0,titleVariant:r})},e.uri)}))]}):null}),{name:"NPVOnTour"}),Vp=n(11786),qp=n(58066),Qp=n(55323),zp=n(32813),Yp=n(46131);const Gp="TIoJv8dV373UyvBWRDav",Kp="xn9l3L0D_ZzL886N4J_5",Wp="P8bNOGKtEtIZXnWEw61V",Zp="PpQWFsG9yJRfPFiERSti",Xp="chgeyo_c9jfrfuEJg5sk",Jp="MLbUPrgOa58_qsGikfRG",$p="l7B1SCkbYm9oU2tO9mOW",ev="kT3XHoiG64bhNORLJv09";var tv=16,nv=(0,Po.mc)((function(e){var t=e.relatedVideos,n=e.contextUri,r=V.Ru.get("npv.related-videos.title"),a=V.Ru.get("npv.related-videos.prev"),o=V.Ru.get("npv.related-videos.next"),l=(0,Fe.r)(qp.E,{data:{uri:n,identifier:zp.K.npv}}),c=l.spec,d=l.logger,p=(0,Vp.f)({data:{identifier:"related-videos",position:0,uri:n},parentAbsoluteLocation:c.getAbsoluteLocation()}),v=(0,i.useRef)(null),f=(0,i.useState)(0),g=(0,s.A)(f,2),m=g[0],b=g[1],y=(0,i.useState)(0),h=(0,s.A)(y,2),j=h[0],w=h[1],O=(0,i.useState)("auto"),S=(0,s.A)(O,2),C=S[0],A=S[1],N=(0,In.y)(),k=(0,ao.W)();(0,i.useLayoutEffect)((function(){var e=v.current;e&&w(e.clientWidth)}),[]),(0,Yp.w)({onResize:function(e){w(e.width),N===An.E.MEDIUM&&b(0)},refOrElement:v});var E=N===An.E.MEDIUM?2:1,P=Math.ceil(t.length/E)-1,I=N===An.E.MEDIUM?(j-tv*E)/E:85*j/100,R=E*I+tv*E,L=(0,i.useCallback)((function(){var e=m*R;return m===P&&e>0&&2===E?t.length%2==0?e+tv*E:e-I+tv:e}),[m,I,R,P,t.length,E]),T=(0,i.useMemo)((function(){var e=2===t.length&&2===E?I+8:I,n=L();return{pointerEvents:C,"--video-flex-basis":"".concat(e,"px"),transform:"translateX(-".concat(n,"px)")}}),[t.length,E,I,L,C]);(0,i.useEffect)((function(){var e=null==v?void 0:v.current,t=function(){A("auto")};return null==e||e.addEventListener("transitionend",t),function(){null==e||e.removeEventListener("transitionend",t)}}),[]);var D=(0,i.useCallback)((function(e){A("none"),b(m+e),e>0&&k||e<0&&!k?d.logInteraction(p.shelfHeaderFactory().shelfCarouselControlsFactory().shelfCarouselControlsPreviousFactory().hitUiReveal()):(e<0&&k||e>0&&!k)&&d.logInteraction(p.shelfHeaderFactory().shelfCarouselControlsFactory().shelfCarouselControlsNextFactory().hitUiReveal())}),[m,k,d,p]),_=(0,Br.t)(p);return(0,x.jsx)(ll.w,{className:Gp,ref:_,children:(0,x.jsxs)(Vr.r,{spec:c,children:[(0,x.jsx)(ll.X,{children:r}),(0,x.jsxs)("div",{className:Kp,style:{"--container-gap":"".concat(tv,"px")},children:[0!==m&&(0,x.jsx)("button",{type:"button","aria-label":a,onClick:function(){return D(-1)},className:u()(Wp,Zp),children:k?(0,x.jsx)(si.V,{}):(0,x.jsx)(io.g,{})}),m<P&&(0,x.jsx)("button",{type:"button","aria-label":o,onClick:function(){return D(1)},className:u()(Wp,Xp),children:k?(0,x.jsx)(io.g,{}):(0,x.jsx)(si.V,{})}),(0,x.jsx)("ul",{ref:v,className:Jp,dir:"auto",style:T,children:t.map((function(e,t,n){var i=e.trackOfVideo;if("Track"!==i.data.__typename)return null;var r=i.data,a=r.uri,o=r.name,l=r.albumOfTrack,s=r.artists,c=r.contentRating;return(0,x.jsx)("li",{className:1===n.length?ev:$p,children:(0,x.jsx)(Vr.r,{spec:p,children:(0,x.jsx)(Qp.O,{title:o,trackUri:a,artists:s.items,album:l,contentRating:c,referrerIdentifier:"now_playing_panel",index:t,hoverBackgroundColor:"backgroundTintedHighlight",contentAlign:!0,size:"sm"})})},a)}))})]})]})})}),{name:"NPVRelatedTrackVideos"}),iv=function(e){var t,n,i=e.item,r=e.spec,o=(0,a.NC)(Tr.LX5),l=(0,a.NC)(Tr.IA_),s=(t={artistUri:i.artists[0].uri,trackUri:i.uri,enableCredits:l,enableRelatedVideos:o},n={gcTime:il,staleTime:rl},(0,tl.I)(kd,t,n)),c=s.loading,u=s.error,d=s.data,p=(0,a.NC)(Tr.yux),v=Is(i),f=(0,a.NC)(Tr.Tzx)?op:qd;if(c&&i.uri&&!u)return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(_u,{}),(0,x.jsx)(_u,{}),(0,x.jsx)(_u,{})]});if(!i.uri||"Artist"!==(null==d?void 0:d.artistUnion.__typename)||"Track"!==(null==d?void 0:d.trackUnion.__typename)||c||u)return null;var g=d.artistUnion,m=g.profile,b=g.stats,y=g.visuals,h=g.profile.externalLinks,j=d.trackUnion.credits;return(0,x.jsxs)(x.Fragment,{children:[p&&(0,x.jsx)(Ep,{item:i}),(0,x.jsxs)(Vr.r,{spec:r,children:[d.trackUnion.relatedVideos&&"RelatedVideoPage"===d.trackUnion.relatedVideos.__typename&&d.trackUnion.relatedVideos.items.length>0&&(0,x.jsx)(nv,{contextUri:i.uri,relatedVideos:d.trackUnion.relatedVideos.items}),(0,x.jsx)(f,{artistUri:d.artistUnion.uri,artist:m,stats:b,visuals:y,externalLinks:h.items}),l&&j&&(0,x.jsx)(fp,{data:j,trackUri:i.uri}),(0,x.jsx)(Hp,{artistId:d.artistUnion.id,data:d.artistUnion.goods.events.concerts}),(0,x.jsx)(Rp,{artistId:d.artistUnion.id,artistUri:d.artistUnion.uri,merch:d.trackUnion.merch.items}),v&&(0,x.jsx)(Rs,{item:i})]})]})},rv=function(e){var t=e.item,n=e.spec;return(0,Ot.n)()&&t.artists[0].uri?(0,x.jsx)(iv,{item:t,spec:n}):(0,x.jsx)(x.Fragment,{})},av=n(24777),ov=function(e){var t=e.item,n=e.spec;return(0,Mc.v)(t)&&!t.isLocal?(0,x.jsx)(rv,{item:t,spec:n}):(0,Mc.v)(t)&&t.isLocal?(0,x.jsx)(Nd,{}):(0,Fc.p)(t)?(0,x.jsx)(Ad,{item:t,spec:n}):(0,Bc.d)(t)?(0,x.jsx)(Bo,{}):(0,av.N)(t)?(0,x.jsx)(Uo,{}):null},lv=n(45362),sv=n(90495),cv=n(97252),uv=n(46351),dv=(0,Po.mc)((function(){var e=(0,i.useContext)(qe.s),t=(0,lv.a)({tryAvoidGraphQLFetching:!1}),n=(0,a.NC)(Tr.yJ8)===Tr.NtL.CANVAS_PLAY_ON_HOVER;return null!=t&&t.canvas&&e?(0,x.jsx)(uv.Gg,{fileId:t.canvas.fileId,canvasUrl:t.canvas.url,canvasType:t.canvas.type,canvasUri:t.canvas.uri,playerContainerClass:"canvasVideoContainerNPV",playbackType:n?uv.RT.LoopOnHover:uv.RT.LoopOnPlayback,allowAspectRatioFix:!0,mouseHoverRef:e,useContainerMouseOverEvents:!1}):null}),{name:"NPVCanvas"}),pv=n(96621),vv=n(57550),fv=n(94910),gv=n(80568),mv=n(38685),bv=n(99116),yv=n(68130),hv=n(76427),xv=n(96178),jv=n(54477);const wv="main-nowPlayingView-nowPlayingWidget",Ov="T5_sYfKJ2efL3n3dFNuN",Sv="main-nowPlayingView-nowPlayingGrid",Cv="main-nowPlayingView-contextItemInfo",Av="hhFdIYRyHsqlCHy7T_8A",Nv="O5NOY8Xw4NH0IhBZu8tm",kv="DFvRASpHOFAoziM4w7En",Ev="main-nowPlayingView-coverArtContainer",Pv="hjyiWzPtKHn_5kCe9vyg",Iv="hCImOEZCJwYaSy2r1Xgx",Rv="ylBRlfNqGnzVa4kjUQGP",Lv="E08D6ucrHuPJYzzGO7HG",Tv="pUIBQ9cykHKYx2A2ZIPA",Dv="_q9LkNJJIpxoOkOFI2Nd",_v="S6W0kreMgaIXYWSEYHya",Uv="main-nowPlayingView-trackInfo",Bv="eEiwEPDfVRD0HKjYM_dq";var Fv=function(e){var t=e.item,n=e.spec,r=(0,ce.s)(),a=(0,i.useCallback)((function(e){var i=e?n.heartButtonFactory().hitLike({itemToBeLiked:t.uri}):n.heartButtonFactory().hitRemoveLike({itemNoLongerLiked:t.uri});r.logInteraction(i)}),[t.uri,r,n]),o=(0,yv.v)(t),l=(0,In.y)();return o?(0,x.jsx)(bv.g,{uri:t.uri,size:l===An.E.MEDIUM?"medium":"small",className:Av}):(0,Mc.v)(t)&&!t.isLocal?(0,x.jsx)(gv.b,{uri:t.uri,size:l===An.E.MEDIUM?vv.t.sm:vv.t.xs,onClick:a,className:Av}):(0,Fc.p)(t)?(0,x.jsx)(fv.b,{uri:t.uri,size:l===An.E.MEDIUM?vv.t.sm:vv.t.xs,onClick:a,className:Av,condensed:!0}):null},Mv=function(e){var t,n,i,r=e.context,o=e.item,l=(0,Fe.r)(Ro.J,{}),s=l.spec,c=l.logger,d=(0,Fe.r)(pv.p6,{data:{identifier:pv.gw.DESKTOP}}).spec,p=(0,jv.X)(),v=(0,a.NC)(Tr.$PN),f=(0,In.y)();return(0,x.jsxs)(x.Fragment,{children:[v===Tr.X$5.NPV_ALWAYS_VISIBLE||v===Tr.X$5.NPV_VISIBLE_ON_HOVER?(0,x.jsx)(mv.w,{className:v===Tr.X$5.NPV_VISIBLE_ON_HOVER?kv:Nv,uri:o.uri,sharingInfo:null,interactionData:{intent:"share",type:"click"},condensedAll:!0,onClick:function(){c.logInteraction(s.shareButtonFactory({uri:o.uri}).hitCopyToClipboard())},ariaLabel:(0,Vi.gHQ)(o.uri)?V.Ru.get("context-menu.copy-episode-link"):V.Ru.get("context-menu.copy-track-link"),size:f===An.E.MEDIUM?"medium":"small"}):null,(0,x.jsx)(hv.a,{context:r,item:o,className:u()(Nv,Ov),onClick:function(){c.logInteraction(d.hideButtonFactory().hitRemoveRecommendation({recommendedItemUri:o.uri,contextUri:r.uri}))}}),p&&(0,Tc.N)(o)?(0,x.jsx)(Vr.r,{spec:s,children:(0,x.jsx)("div",{className:Nv,children:(0,x.jsx)(xv.o,{contextUri:null!==(t=null===(n=o.metadata)||void 0===n?void 0:n.context_uri)&&void 0!==t?t:r.uri,id:null!==(i=o.uid)&&void 0!==i?i:void 0,uri:o.uri,isActive:!0})})}):(0,x.jsx)("div",{className:Nv,children:(0,x.jsx)(Fv,{item:o,spec:s})})]})},Hv=n(25786),Vv=n(86115),qv=n(11001),Qv=n(24821);const zv="Z_lhw3kk_krs5GqxYAPn";var Yv=function(){var e=(0,qv.d)().setVideoPlayerUIFlag,t=(0,Qv.H)().close,n=(0,i.useCallback)((function(){e(zp.n.documentPip,!1),t()}),[t,e]);return(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:zv,children:[(0,x.jsx)(d.E,{variant:"bodySmall",children:V.Ru.get("web-player.now-playing-view.video.playing-in-pip")}),(0,x.jsx)(ve.n,{onClick:n,size:"small",children:V.Ru.get("web-player.now-playing-view.video.return-playback")})]})})},Gv=function(){var e=(0,Be.v)(),t=(0,E.AI)(m.Z.DevicePicker,m.Z.DevicePickerOverlay).panelSend,n=(0,i.useCallback)((function(){t(re.$S.DEVICE_PICKER_BUTTON_CLICK),(0,ne.I)("DEVICE-PICKER"),e&&(t(re.$S.PUFFIN_BUTTON_CLICK),(0,ne.I)("PUFFIN"))}),[e,t]);return(0,x.jsx)(ve.n,{size:"small",onClick:n,children:V.Ru.get("web-player.connect.device-picker.select-another-device")})},Kv=function(){var e=(0,Y.v)((function(e){var t,n=(0,z.V)(e);return{remoteDeviceName:null===(t=n.remoteDevice)||void 0===t?void 0:t.name,connectionStatus:n.connectionStatus}}),G.a),t=e.remoteDeviceName,n=e.connectionStatus,i="";return t&&n===ca.zP.CONNECTING?i=V.Ru.get("web-player.connect.bar.connecting-state",{device_name:t}):t&&n===ca.zP.CONNECTED&&(i=V.Ru.get("web-player.connect.bar.connected-state",{device_name:t})),(0,x.jsx)("div",{children:(0,x.jsxs)("div",{className:zv,children:[(0,x.jsx)(d.E,{variant:"bodySmall",children:i}),(0,x.jsx)(Gv,{})]})})},Wv=n(13156),Zv=n(12715),Xv=n(48296),Jv=n(163),$v=n(18587),ef=n(60677),tf=n(82884),nf=(0,i.memo)((function(){return(0,x.jsx)(Wv.B,{size:"small"})})),rf=(0,i.memo)((function(){return(0,x.jsx)(Zv.e,{size:"small"})})),af=function(e){var t=e.className,n=V.Ru.get("npv.song-videos.switch-to-video"),r=V.Ru.get("npv.song-videos.switch-to-audio"),o=V.Ru.get("page.loading"),c=(0,i.useState)(!1),p=(0,s.A)(c,2),v=p[0],f=p[1],g=(0,H.wA)(),m=(0,P.z)(),b=(0,St.o)((function(e){var t;return{signals:null==e?void 0:e.signals,loading:(null==e?void 0:e.isBuffering)&&!e.isPaused,uri:null==e||null===(t=e.item)||void 0===t?void 0:t.uri}})),y=b.signals,h=b.loading,j=b.uri,w=(0,$v.k)().isSongVideoDeviceRestricted,O=function(){var e=(0,P.z)(),t=function(e){var t,n=null==e?void 0:e.signals;return null!==(t=null==n?void 0:n.includes(Jv.L.SWITCH_TO_VIDEO))&&void 0!==t&&t},n=function(){var n=(0,qn.A)(zn().mark((function n(){var i,r,a,o;return zn().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!t(e.getState())){n.next=2;break}return n.abrupt("return",!0);case 2:return i=function(){},r=new Promise((function(n){i=e.getEvents().addListener(Xv.gd.UPDATE,(function(e){t(e.data)&&n(!0)}))})),a=new Promise((function(e){return setTimeout((function(){return e(null)}),2e3)})),n.next=7,Promise.race([r,a]);case 7:return o=n.sent,i(),n.abrupt("return",o);case 10:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return n}(),S=(0,Fe.r)(qp.E,{data:{uri:null!=j?j:"",identifier:zp.K.npv}}),C=S.spec,A=S.logger,N=(0,i.useCallback)((function(){var e;w?g(ef.ug.actions.open({onConfirm:(e=(0,qn.A)(zn().mark((function e(){return zn().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O();case 2:e.sent&&m.sendSignal(Jv.L.SWITCH_TO_VIDEO);case 4:case"end":return e.stop()}}),e)}))),function(){return e.apply(this,arguments)})})):(v?(m.sendSignal(Jv.L.SWITCH_TO_AUDIO),A.logInteraction(C.toggleAudioVideoButtonFactory({identifier:"switch_to_audio"}).hitPlay({itemToBePlayed:null!=j?j:""}))):(m.sendSignal(Jv.L.SWITCH_TO_VIDEO),A.logInteraction(C.toggleAudioVideoButtonFactory({identifier:"switch_to_video"}).hitPlay({itemToBePlayed:null!=j?j:""}))),f((function(e){return!e})))}),[w,v,g,O,m,A,C,j]);(0,i.useEffect)((function(){m.canSendSignal(Jv.L.SWITCH_TO_AUDIO)?f(!0):f(!1)}),[m,y]);var k=(0,Br.t)(C.toggleAudioVideoButtonFactory({identifier:v?"switch_to_audio":"switch_to_video"})),E=(0,a.NC)(Tr.KkE,{loadingValue:!1}),I=v?r:n;return E?(0,x.jsx)(i.Suspense,{fallback:!0,children:(0,x.jsxs)("div",{className:u()(tf.A.container,t),ref:k,children:[(0,x.jsxs)("div",{"aria-label":o,className:u()(tf.A.button,tf.A.loading,(0,l.A)({},tf.A.loadingVisible,v&&h)),"aria-hidden":!0,children:[(0,x.jsx)("div",{className:tf.A.spinner}),(0,x.jsx)(d.E,{as:"span",variant:"bodySmall",children:o})]}),(0,x.jsxs)("button",{"aria-label":I,className:u()(tf.A.button,tf.A.switch,(0,l.A)({},tf.A.hidden,v&&h)),onClick:N,disabled:h,children:[v?(0,x.jsx)(rf,{}):(0,x.jsx)(nf,{}),(0,x.jsx)(d.E,{as:"span",variant:"bodySmallBold",children:I})]})]})}):null},of=(0,i.lazy)((function(){return n.e(2284).then(n.bind(n,32284))})),lf=(0,i.lazy)((function(){return n.e(4008).then(n.bind(n,84008))})),sf=function(e){return e[e.NONE=0]="NONE",e[e.COVER_ART=1]="COVER_ART",e[e.VIDEO_OVER_PIP_PLACEHOLDER=2]="VIDEO_OVER_PIP_PLACEHOLDER",e[e.VIDEO_OVER_CONNECT_PLACEHOLDER=3]="VIDEO_OVER_CONNECT_PLACEHOLDER",e[e.CANVAS=4]="CANVAS",e}({}),cf=function(){var e=(0,_o.L)(),t=(0,z.l)(),n=(0,qv.d)().videoPlayerMode,i=(0,$v.k)(),r=i.isSongVideo,a=i.isSongVideoPlayingVideo,o=(0,H.d4)((function(e){var t;return null===(t=e.ads)||void 0===t?void 0:t.vto})),l=(0,lv.a)({tryAvoidGraphQLFetching:!0}).showCanvasInNPV;if(!e)return sf.NONE;var s=e.item;return n===zp.K.documentPip||n===zp.K.pip?sf.VIDEO_OVER_PIP_PLACEHOLDER:(null==s?void 0:s.type)===Cl.c.AD&&null!=o&&o.isMinimized&&"audio"!==(null==s?void 0:s.mediaType)?sf.NONE:(null==s?void 0:s.type)!==Cl.c.EPISODE||"video"!==(null==s?void 0:s.mediaType)&&"mixed"!==(null==s?void 0:s.mediaType)?r&&a?t?sf.VIDEO_OVER_CONNECT_PLACEHOLDER:sf.NONE:l?sf.CANVAS:sf.COVER_ART:t?sf.VIDEO_OVER_CONNECT_PLACEHOLDER:sf.NONE},uf=(0,Po.mc)((function(e){var t,n,r=e.hideContextItemInfo,a=void 0!==r&&r,o=(0,_o.L)(),c=cf(),d=(0,xl.P)(),p=d.draggable,v=d.onDragStart,f=(0,i.useState)(!0),g=(0,s.A)(f,2),m=g[0],b=g[1],y=(0,Fe.r)(Ro.J,{}),h=y.spec,j=y.logger,w=(0,$v.k)().isSongVideo,O=c===sf.CANVAS,S=c===sf.COVER_ART,C=(0,i.useRef)(null),A=(0,i.useRef)(null),N=(0,i.useRef)(null),k=!(0,Rn.j)(),E=(0,i.useState)(null),P=(0,s.A)(E,2),I=P[0],R=P[1];if(k&&O&&C.current&&N.current&&(R(N.current),setTimeout((function(){R(null)}),600)),C.current=S,A.current=O,N.current=o,null===o)return null;var L=o.context,T=o.item,D=o.index,_="isPodcastAd"in T&&T.isPodcastAd&&(null===(t=T.metadata)||void 0===t?void 0:t["podcast_ads.buttonMessage"])&&(null===(n=T.metadata)||void 0===n?void 0:n["podcast_ads.tagline"]);return(0,x.jsxs)("div",{className:u()(wv),children:[(0,x.jsxs)("div",{className:Sv,children:[(0,x.jsxs)("div",{onClick:function(){return O&&b(!m)},className:u()(Ev,(0,l.A)((0,l.A)((0,l.A)({},Pv,O),Iv,S),Tv,m)),children:[(0,x.jsx)("div",{className:u()(Rv,(0,l.A)({},Dv,O)),"aria-hidden":O,children:(0,x.jsx)(Hv.h,{context:(null==I?void 0:I.context)||L,item:(null==I?void 0:I.item)||T,index:D,canSwitchVisuals:!0})}),c===sf.VIDEO_OVER_PIP_PLACEHOLDER&&(0,x.jsx)(Yv,{}),c===sf.VIDEO_OVER_CONNECT_PLACEHOLDER&&(0,x.jsx)(Kv,{}),(0,x.jsx)("div",{className:u()(Lv,(0,l.A)({},_v,!O)),"aria-hidden":"true",children:(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(Do.W,{context:L,item:T,canSwitchVisuals:!0}),children:(0,x.jsx)("div",{draggable:p,onDragStart:function(e){v(e,{itemUris:[T.uri],dragLabelText:(0,sv.r)(T)})},children:O&&(0,x.jsx)(dv,{uri:T.uri})})})}),(0,x.jsx)(Vv.F,{})]}),w&&(0,x.jsx)(af,{className:O?Bv:""}),a?null:(0,x.jsxs)("div",{className:Cv,children:[(0,x.jsx)(fs.d,{className:u()(Uv),context:L,item:T,titleTypeVariant:"titleSmall",subtitleTypeVariant:"bodyMedium",onTitleClick:function(e){j.logInteraction(h.titleFactory({uri:T.uri}).hitUiNavigate({destination:e||""}))},onSubtitleClick:function(e){j.logInteraction(h.artistFactory({uri:T.uri}).hitUiNavigate({destination:e||""}))},referrer:cv.G.NPV}),(0,av.N)(T)?_?null:(0,x.jsx)(i.Suspense,{fallback:!0,children:(0,x.jsx)(of,{item:T,onCtaClick:function(e){j.logInteraction(h.titleFactory({uri:T.uri}).hitUiNavigate({destination:e||""}))}})}):(0,x.jsx)(Mv,{context:L,item:T})]})]}),_&&(0,x.jsx)(i.Suspense,{fallback:!0,children:(0,x.jsx)(lf,{item:T,onCtaClick:function(e){j.logInteraction(h.titleFactory({uri:T.uri}).hitUiNavigate({destination:e||""}))}})})]})}),{name:"NPVHeader"}),df=n(20110),pf=n(72927),vf=n(70076),ff={context:null,item:null},gf=n(30487),mf=n(82898),bf=n(99299),yf=n(29765),hf=n(77871),xf=n(99741);const jf="yvZooOj0rpfRS__cAUCo",wf="vDev2BqBHloweL24GNHK",Of="IkRGajTjItEFQkRMeH6v",Sf="f2UE9n5nZcbgZrGYTU3r",Cf="nw2W4ZMdICuBo08Tzxg9";var Af=(0,i.lazy)((function(){return Promise.all([n.e(4151),n.e(9129)]).then(n.bind(n,39129))}));function Nf(e){return(0,Mc.v)(e)||(0,xf.v)(e)||(0,Fc.p)(e)||(0,Bc.d)(e)?e.name:(0,av.N)(e)?"":(0,Li.d)(e)}var kf=i.memo((function(e){var t=e.item,n=e.spec,i=(0,Ri.x)((0,l.A)((0,l.A)((0,l.A)({},An.E.XSMALL,0),An.E.SMALL,280),An.E.MEDIUM,320)),r=i.ref,a=i.breakpoint;return(0,x.jsx)("div",{className:Cf,"data-testid":"NPV_Panel_OpenDiv",ref:r,children:t&&(0,x.jsxs)(In.o.Provider,{value:a,children:[(0,x.jsx)(uf,{}),(0,x.jsx)(ov,{item:t,spec:n}),!(0,Fc.p)(t)&&(0,x.jsx)(hu,{})]})})})),Ef=function(e){var t=e.context,n=e.item,r=e.spec,a=e.currentPanel,o=(0,bf.v7)();return(0,i.useEffect)((function(){o.current&&(o.current.scrollTop=0)}),[null==n?void 0:n.uri,o]),a===m.Z.NowPlayingView?(0,lu.bJ)(t,n)?(0,x.jsx)(gf.IT,{spec:r}):(0,x.jsx)(kf,{currentPanel:a,context:t,item:n,spec:r}):(0,x.jsx)("div",{"data-testid":"NPV_Panel_ClosedDiv"})},Pf=function(e){var t=e.context,n=e.item,i=e.spec,r=e.currentPanel;return(0,x.jsx)(Ef,{currentPanel:r,context:t,item:n,spec:i})},If=function(){return cf()===sf.CANVAS},Rf=function(e){var t=e.item,n=(0,i.useRef)(null),r=(0,_o.L)(),a=(0,mf.g)(),o=a.title,s=a.link,c=If(),d=(0,Fe.r)(Ro.J,{}),p=d.spec,v=d.logger,f=(0,i.useCallback)((function(){var e=p.closeButtonFactory().hitUiHide();v.logInteraction(e)}),[p,v]);return(0,i.useEffect)((function(){null!==n.current&&n.current.focus()}),[]),(0,x.jsx)(g.a,{title:o,link:s,actions:r&&r.context&&(0,x.jsx)(Nr.b,{menu:(0,x.jsx)(Do.W,{context:r.context,item:t,canSwitchVisuals:!0}),children:(0,x.jsx)(To.e,{size:"small",condensed:!1,label:V.Ru.get("more.label.context",t?Nf(t):""),onClick:function(){v.logInteraction(p.contextMenuButtonFactory().hitUiReveal())}})}),panelLinkRef:n,panel:m.Z.NowPlayingView,onClose:f,item:t,className:u()((0,l.A)({},jf,c))})},Lf=function(e){var t=e.item,n=(0,Lo.w)(t);return(0,i.useMemo)((function(){return n?null:(0,x.jsx)(Rf,{item:t})}),[t,n])},Tf=(0,Po.mc)((function(e){var t=e.nodeRef,n=e.currentPanel,i=(0,_o.L)()||{context:null,item:null,index:null},r=i.context,o=i.item,s=i.index,c=(0,Fe.r)(Io.t,{data:{uri:o?o.uri:""}}),d=c.spec,p=c.UBIFragment,v=If(),f=(0,Lo.w)(o),g=(0,Br.t)(d),m=function(){var e,t=((0,_o.L)()||ff).item,n=(0,pf.CV)().isYourDJNarrator,i=(0,a.NC)(Tr.yon),r=(0,vf.z)(null==t||null===(e=t.images)||void 0===e||null===(e=e[0])||void 0===e?void 0:e.url,Ds.l0o,"colorDark");return n?df.Ym:i?r:void 0}(),b={"--background-base":m,"--section-background-base":m?"var(--background-tinted-base)":"var(--background-elevated-base)"};return(0,x.jsx)(hf.P,{surface:yf.u.NOW_PLAYING,children:(0,x.jsx)(bf.ql.Provider,{value:"now_playing_panel",children:(0,x.jsx)(qe._,{nodeRef:t,label:V.Ru.get("web-player.now-playing-view.label"),style:b,itemUri:null!=o&&o.uri?o.uri:"","data-testid":"now-playing-view-container",className:"NowPlayingView",children:(0,x.jsx)(p,{spec:d,children:(0,x.jsx)(Qe.w,{className:u()(Of,(0,l.A)({},Sf,void 0!==m)),fixedHeader:(0,x.jsx)(Lf,{item:o}),scrolledClassName:v?wf:void 0,ref:g,children:f?(0,x.jsx)(Af,{item:o,context:r,index:s,currentPanel:n}):(0,x.jsx)(Pf,{spec:d,currentPanel:n,context:r,item:o})})})})})})}),{name:"NPV"});const Df="vzeIlCPBQJUaqdMZHqHE",_f="iZgGvu9g2gDlQ1ofJ7rH",Uf="FSZKuoSTDgGwCPXO_qel",Bf="cPpNQwPTiEn9Zegl5Dwz",Ff="p2Yw6bT_O5PW8yGv1R0X",Mf="pK7G3_mtRcuFjbhJzm1s",Hf="gVJxtuXo8lHAw8XLKHfQ",Vf="BR3H6wavkReGa2xeSeaV",qf="vXYSi4u1nPutJ_ZkC6mq";var Qf=function(e){var t=(0,i.useRef)(null);return(0,x.jsx)(r.A,{in:e.isActive,nodeRef:t,timeout:{enter:e.shouldPlayAnimation?200:0,exit:e.shouldPlayAnimation?300:0},classNames:{enter:e.shouldPlayAnimation?_f:Mf,enterActive:e.shouldPlayAnimation?Uf:Hf,exit:e.shouldPlayAnimation?Bf:Vf,exitActive:e.shouldPlayAnimation?Ff:Hf},unmountOnExit:!0,mountOnEnter:!0,children:(0,x.jsx)("div",{className:Df,children:(0,x.jsx)("div",{className:qf,ref:t,children:e.children})})})};var zf=n(18346),Yf=n(59073),Gf=n(77680),Kf=n(12821),Wf=n(89472),Zf=n(85662),Xf=n(66745),Jf=n(86707),$f=n(43717),eg=n(94405);const tg="PddBvUOS0_6f9B21fVGF";var ng=["items","renderRow"];function ig(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function rg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ig(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ig(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ag=function(e){var t=e.ariaLabel,n=e.onRemoveItems,r=e.nrItems,a=e.columnCount,o=e.children,l=(0,i.useRef)(null);(0,$f.g)(l);var s=(0,eg.d)(n);return(0,x.jsx)(Jf.R,{firstInteractiveIsWrapper:!0,"aria-label":t,"aria-rowcount":r,"aria-colcount":a,className:tg,ref:l,onKeyDown:s,children:o})},og=function(e){var t=e.items,n=e.renderRow,r=(0,f.A)(e,ng),a=(0,i.useCallback)((function(e,n){return t.slice(e,n+1)}),[t]);return(0,x.jsx)(Ys.k,{resolveItem:lg,getItems:a,nrTracks:t.length,children:(0,x.jsx)(ag,rg(rg({nrItems:t.length},r),{},{children:t.map(n)}))})};function lg(e){var t;return{uri:e.uri,uid:null!==(t=e.uid)&&void 0!==t?t:void 0,type:e.type}}var sg=n(76089),cg=n(51416),ug=["chapter","index","showTypeLabel"];function dg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var pg=function(e){var t=e.chapter,n=e.index,i=e.showTypeLabel,r=(0,f.A)(e,ug),a=t.uid,o=t.uri,s=t.type,c=t.name,u=t.images,d=t.book,p=Hs(t,n),v=Qc(r.section),g=(0,x.jsx)(cg.r,{uri:o,removeFromQueueData:{uid:null!=a?a:void 0,contextUri:v}}),m=(0,x.jsx)(Vc,{item:t,tooltipText:d.name,showTypeLabel:i,subtitle:(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(sg.p,{uri:d.uri}),children:(0,x.jsx)(Ye.N,{to:d.uri,stopPropagation:!0,children:d.name})})});return(0,x.jsx)(Nc,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dg(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({uid:a,uri:o,contextUri:v,id:p,index:n,type:s,title:c,subtitle:m,images:u,dragLabel:c,menu:g,moreButtonLabelName:c,ariaPauseLabel:V.Ru.get("playlist.a11y.pause",c),ariaPlayLabel:V.Ru.get("playlist.a11y.play",c)},r))},vg=(n(36497),n(99722),n(96635)),fg=n(33850),gg=n(52818),mg=n(29419),bg=(0,i.createContext)(null),yg=function(e){var t=e.children,n=(0,mg.H)().uri,r=(0,Fe.r)(fg.i,{data:{identifier:gg.$h.NOWPLAYING_QUEUE,uri:null!=n?n:""}}),a=r.spec,o=r.UBIFragment,l=(0,i.useMemo)((function(){return a.nowPlayingSectionFactory()}),[a]),s=(0,i.useMemo)((function(){return a.nextInQueueSectionFactory()}),[a]),c=(0,i.useMemo)((function(){return a.nextFromSectionFactory()}),[a]),u=(0,i.useMemo)((function(){return{queueSpec:a,nowPlayingSectionSpec:l,nextInQueueSectionSpec:s,nextFromSectionSpec:c}}),[a,l,s,c]);return(0,x.jsx)(bg.Provider,{value:u,children:(0,x.jsx)(o,{spec:a,children:t})})},hg=n(37241),xg=function(){var e=(0,i.useContext)(bg);if(!e)throw Error("useQueueUBI must be used within a QueuePanelUBIProvider!");var t=(0,mg.H)().queued,n=(0,ce.s)(),r=e.queueSpec,a=e.nowPlayingSectionSpec,o=e.nextInQueueSectionSpec,l=e.nextFromSectionSpec;return{logClearQueue:(0,i.useCallback)((function(){var e=o.clearQueueButtonFactory().hitRemoveItemsFromQueue({numberOfItemsToRemoveFromQueue:t.length});return n.logInteraction(e)}),[n,o,t.length]),logAddToQueue:(0,i.useCallback)((function(e,t){var i;switch(e){case qc.$.NowPlaying:i=a;break;case qc.$.NextInQueue:i=o;break;case qc.$.NextUp:i=l;break;default:return}var r=1===t.length?i.dragAddItemToQueue({itemToAddToQueue:t[0]}):i.dragAddItemsToQueue({numberOfItemsToAddToQueue:t.length});return n.logInteraction(r)}),[n,l,o,a]),logSort:(0,i.useCallback)((function(e){var t;switch(e){case qc.$.NextInQueue:t=o;break;case qc.$.NextUp:t=l;break;case qc.$.NowPlaying:default:return}var i=t.dragSort();return n.logInteraction(i)}),[n,l,o]),logQueuePanelTabChange:(0,i.useCallback)((function(e){if(e!==hg.p.PARTICIPANT_LIST){var t=r.queueHistoryTabFactory({identifier:e===hg.p.QUEUE?"queue":"recently_played"}).hitUiReveal();return n.logInteraction(t)}}),[n,r]),logQueueContextLinkNavigate:(0,i.useCallback)((function(e){var t=l.queueContextLinkFactory().hitUiNavigate({destination:null!=e?e:""});return n.logInteraction(t)}),[n,l])}},jg=n(73875);var wg=["item"];function Og(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Sg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Og(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Og(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Cg=(0,i.memo)((function(e){var t=e.item,n=(0,f.A)(e,wg),r=function(e,t){var n=(0,P.z)(),r=(0,i.useContext)(al.j).request,a=xg(),o=a.logAddToQueue,l=a.logSort,s=(0,i.useCallback)(function(){var i=(0,qn.A)(zn().mark((function i(a,s,c){var u,d,p,v,f,g,m,b,y,h,x,j,w,O,S,C,A,N,k,E;return zn().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:if(p=(d=null!=c?c:{}).contextUri,v=d.sectionId,f=d.itemIds,g=t===qc.$.NowPlaying,m=yc===p&&!g,b=null===(u=a[vg.fl.ALBUMS])||void 0===u?void 0:u.at(0),y=Object.values(a).flat(),h=[],!b){i.next=14;break}return i.next=9,(0,jg.s)(b,0,r);case 9:x=i.sent,j=x.trackUris,h=j.map((function(e){return{uri:e,uid:null}})),i.next=15;break;case 14:h=m&&null!=f&&f.length?f.map((function(e){return{uri:"",uid:e}})):null!==(w=Object.values(a).flat().map((function(e){return{uri:e,uid:null}})))&&void 0!==w?w:[];case 15:O=m&&v===qc.$.NowPlaying,S=s===Qs.Nz.BEFORE?{before:{uri:e.uri,uid:null!==(C=e.uid)&&void 0!==C?C:null}}:{after:{uri:e.uri,uid:null!==(A=e.uid)&&void 0!==A?A:null}},m&&!O?(t&&l(t),n.reorderQueue(h,S)):(t&&(N=o(t,y)),g?n.addToQueue(h,{interactionId:null===(k=N)||void 0===k?void 0:k.interactionId}):n.insertIntoQueue(h,S,{interactionId:null===(E=N)||void 0===E?void 0:E.interactionId}));case 18:case"end":return i.stop()}}),i)})));return function(e,t,n){return i.apply(this,arguments)}}(),[e.uid,e.uri,o,l,n,r,t]);return s}(t,n.section);switch(t.type){case Cl.c.TRACK:return(0,x.jsx)(tu,Sg({track:t,onDrop:r},n));case Cl.c.EPISODE:return(0,x.jsx)(Gc,Sg({episode:t,onDrop:r},n));case Cl.c.CHAPTER:return(0,x.jsx)(pg,Sg({chapter:t,onDrop:r},n));case Cl.c.AD:return(0,x.jsx)(Pc,Sg({ad:t,onDrop:r},n));case Cl.c.UNKNOWN:return null;default:return(0,Li.k)(t),null}})),Ag=["item"];function Ng(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function kg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ng(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ng(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Eg=(0,i.memo)((function(e){var t=e.item,n=(0,f.A)(e,Ag),i=(0,Il.P)({uri:t.uri,pages:[{items:[t]}]},{featureIdentifier:"history"}).usePlayContextItem;return(0,x.jsx)(Cg,kg(kg({item:t},n),{},{usePlayContextItem:i}))})),Pg=function(e){var t=e.items,n=(0,i.useCallback)((function(e,t){return(0,x.jsx)(Eg,{item:e,index:t},Hs(e,t))}),[]);return(0,x.jsx)(og,{items:t,ariaLabel:V.Ru.get("view.recently-played"),renderRow:n,columnCount:3})},Ig=n(93931),Rg=n(65692),Lg=function(){var e=(0,Rg.a)(),t=e.isLoading,n=e.data;return t?null:null!=n&&n.items.length?(0,x.jsx)(Pg,{items:n.items}):(0,x.jsx)(Ig.H,{})},Tg=n(68832),Dg=(n(76588),function(e,t){return!(null!=t&&t.didQueueChangeSignificantly)}),_g=function(e,t,n){Dg(null==n||n.previous,null==n?void 0:n.current)?(0,Tg.oz)({onUpdate:function(t){e.style.opacity=t.toString()}}):e.style.opacity="1"},Ug=function(e,t,n,i){Dg(null==i||i.previous,null==i?void 0:i.current)?(0,Tg.oz)({onUpdate:function(t){e.style.opacity=(1-Number(t)).toString()},onComplete:n}):n()},Bg=function(e){var t=e.hideEnteringElements,n=e.animateEnteringElements,i=e.animateExitingElements,r=e.animateFlippedElements;t(),i(),r(),n()},Fg=n(31122);function Mg(e){var t,n;return Number(!(null==e||!e.current))+(null!==(t=null==e?void 0:e.queued.length)&&void 0!==t?t:0)+(null!==(n=null==e?void 0:e.nextUp.length)&&void 0!==n?n:0)}function Hg(e,t){var n=e.current,i=e.nextUp,r=void 0===i?[]:i,a=e.queued,o="";return[[n],r,void 0===a?[]:a].forEach((function(e){e.forEach((function(e){null!=e&&e.uid&&(t.has(e.uid)||t.set(e.uid,String.fromCharCode(65+t.size)),o+=t.get(e.uid))})),e.length&&(o+=" ")})),o}function Vg(){var e=(0,Rn.j)(),t=(0,a.NC)(Tr.J9c);return!e&&t}var qg=n(13047),Qg=["children"];function zg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zg(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Gg=function(e){var t,n,r=e.current,a=e.queued,o=e.nextUp,l=e.children,s=(0,i.useMemo)((function(){return[r].concat((0,k.A)(a),(0,k.A)(o)).filter(qg.P).map(Hs).join("")}),[r,o,a]),c={didQueueChangeSignificantly:(t={current:r,nextUp:o,queued:a},n=(0,i.useRef)(t),(0,i.useMemo)((function(){var e=new Map,i=Hg(n.current,e),r=Hg(t,e),a=(0,Fg.I)(i,r),o=a>16||a>=Math.max(Mg(t),Mg(n.current));return n.current=t,o}),[t]))};return(0,x.jsx)(Tg.ZI,{flipKey:s,handleEnterUpdateDelete:Bg,decisionData:c,children:l})},Kg=function(e){var t=e.children,n=(0,f.A)(e,Qg);return Vg()?(0,x.jsx)(Gg,Yg(Yg({},n),{},{children:t})):(0,x.jsx)("div",{children:t})},Wg=["children"];function Zg(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Xg(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Zg(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Zg(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Jg=function(e){var t=e.children,n=(0,f.A)(e,Wg);return Vg()?(0,x.jsx)(Tg.lf,Xg(Xg({shouldFlip:Dg},n),{},{children:t})):(0,x.jsx)(x.Fragment,{children:t})},$g=[vg.fl.TRACKS,vg.fl.LOCAL_TRACKS,vg.fl.EPISODES,vg.fl.CHAPTERS,vg.fl.ALBUMS],em=function(e){var t=e.uri,n=e.items,r=e.ariaLabel,a=e.section,o=e.showTypeLabel,l=e.decoratedQueuedByUsersByUsername,s=(0,P.z)(),c=(0,i.useCallback)((function(e){s.removeFromQueue(e)}),[s]),u=ou(t,a).usePlayContextItem,d=(0,i.useCallback)((function(e,t){var n,i,r,s,c=Hs(e,t);return(0,x.jsx)(Jg,{flipId:null!==(n=null===(i=e.metadata)||void 0===i?void 0:i.original_uid)&&void 0!==n?n:c,onAppear:_g,onExit:Ug,translate:!0,children:(0,x.jsx)("div",{className:Zs,children:(0,x.jsx)(Cg,{item:e,index:t,usePlayContextItem:u,section:a,allowedDropMimeTypes:$g,showTypeLabel:o,queuedBy:null==l?void 0:l[null!==(r=null===(s=e.metadata)||void 0===s?void 0:s.queued_by)&&void 0!==r?r:""]})})},c)}),[l,a,o,u]);return(0,x.jsx)(og,{items:n,renderRow:d,columnCount:3,ariaLabel:r,onRemoveItems:c})},tm=n(76716);const nm="u842BXnznGeq38O3DUTQ",im="NWVZ_rxlezZ8xTHlMg4Y",rm="Oae51evvT5DrqTupCiZ2",am="LFdMliaHVgrpBcqNKHU3",om="IeeqYq0Ozrndd6STmrRk",lm="NljerwmGshDHsI7rIvWl";var sm=function(e){var t=e.nrQueuedItems,n=(0,P.z)(),r=xg().logClearQueue,a=(0,i.useState)(!1),o=(0,s.A)(a,2),l=o[0],c=o[1],u=(0,i.useCallback)((function(){c(!1)}),[]),d=(0,i.useCallback)((function(){r(),n.clearQueue(),c(!1)}),[r,n]),p=(0,i.useCallback)((function(){c(!0)}),[]);return(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(nn.H,{size:"small",onClick:p,className:om,condensed:!0,children:V.Ru.get("queue.clear-queue")}),(0,x.jsx)(tm.p,{itemCount:t,isOpen:l,onClose:u,onConfirm:d})]})},cm=n(5130),um=function(e){var t=e.queueSection,n=e.title,r=e.trailingButton,a=(0,i.useRef)(null),o=(0,cm.K)({ref:a});return(0,x.jsx)(Jg,{flipId:"section-header-".concat(t),onAppear:_g,onExit:Ug,translate:!0,children:(0,x.jsxs)("div",{className:am,children:[(0,x.jsx)(Cr.Zp,{label:n,disabled:!o,children:(0,x.jsx)(d.E,{as:"h2",variant:"bodyMediumBold",semanticColor:"textBase",className:lm,ref:a,children:n})}),r]})})},dm=n(78291),pm=(n(4129),new el.l("decorateQueuedByUsers","query","1b71b9895bad207fdac0df7ebad17c790260519f853a069ee05f20e51c08636e",null));function vm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vm(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function gm(e){var t,n,r=(0,ho.D)().currentSession,a=Array.from(new Set(e.map((function(e){var t;return(null==e||null===(t=e.metadata)||void 0===t?void 0:t.queued_by)||null})).filter(qg.P))).sort().map((function(e){return(0,Vi.Qjr)(e).toURI()})),o=(t={userUris:a},n={gcTime:36e5,staleTime:18e5,enabled:!!a.length,placeholderData:Wr.rX},(0,tl.I)(pm,t,n)).data,l=(0,i.useMemo)((function(){var e,t;return Object.fromEntries(null!==(e=null==o||null===(t=o.users)||void 0===t?void 0:t.map((function(e){return"User"===e.__typename?[e.username,(t=e,fm(fm({type:Cl.c.USER},t),{},{images:null!==(n=null===(i=t.avatar)||void 0===i?void 0:i.sources)&&void 0!==n?n:[]}))]:null;var t,n,i})).filter(qg.P))&&void 0!==e?e:[])}),[o]);return null!=r&&r.active?l:{}}var mm=n(21775),bm=n(59350);function ym(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ym(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ym(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xm=function(){var e=(0,mg.H)(),t=e.uri,n=e.description,r=e.current,a=e.nextUp,o=e.queued,l=e.isEmpty,s=e.hasQueuedTracks,c=e.hasNextTracks,u=xg().logQueueContextLinkNavigate,d=gm([r].concat((0,k.A)(a),(0,k.A)(o))),p=(0,i.useMemo)((function(){return new Set([r].concat((0,k.A)(o),(0,k.A)(a)).filter(qg.P).map((function(e){return e.type}))).size>1}),[r,a,o]),v=(0,ho.D)().currentSession,f=(0,bo.y)();return l?(0,x.jsx)(dm.K,{}):(0,x.jsxs)(Kg,hm(hm({},e),{},{children:[(0,x.jsx)(mm.Z,{className:rm}),(0,x.jsxs)("div",{className:nm,children:[r&&(0,x.jsxs)("div",{className:im,children:[(0,x.jsx)(um,{queueSection:qc.$.NowPlaying,title:V.Ru.get("queue.now-playing")}),(0,x.jsx)(em,{ariaLabel:V.Ru.get("queue.now-playing"),uri:t,items:r?[r]:[],section:qc.$.NowPlaying,showTypeLabel:p,decoratedQueuedByUsersByUsername:d})]}),!(null!=v&&v.active)&&f&&(0,x.jsx)(bm.p,{localStorageKey:"dismissStartJamButtonFromQueue"}),s&&(0,x.jsxs)("div",{className:im,children:[(0,x.jsx)(um,{queueSection:qc.$.NextInQueue,title:V.Ru.get("queue.next-in-queue"),trailingButton:(0,x.jsx)(sm,{nrQueuedItems:o.length})}),(0,x.jsx)(em,{ariaLabel:V.Ru.get("queue.next-in-queue"),uri:t,items:o,section:qc.$.NextInQueue,showTypeLabel:p,decoratedQueuedByUsersByUsername:d})]}),c&&(0,x.jsxs)("div",{className:im,children:[(0,x.jsx)(um,{queueSection:qc.$.NextUp,title:n&&!(0,mg.K)(r)&&t?(0,x.jsxs)(x.Fragment,{children:[V.Ru.get("queue.next-from")," ",(0,x.jsx)(Ye.N,{to:t,onClick:function(){u(t)},children:n})]}):V.Ru.get("queue.next-up")},n),(0,x.jsx)(em,{ariaLabel:V.Ru.get("queue.next-up"),uri:t,items:a,section:qc.$.NextUp,showTypeLabel:p})]})]})]}))},jm=n(93764),wm=n(4813);const Om="AjjTyUrCO3pZ365KtTXW",Sm="pGtUoenc5OobLi8CscJ6",Cm="cArVcLcQ85q_9QSLGYGX",Am="lDtXv1VCrs0PHHSuH5uO",Nm="ukjUoaLSzKyRcwoOQw9V",km="yQwBNeetmAr0a0OTR8t3",Em="fzB4RXxTp0rlpNQlSuu9";var Pm=function(e){var t=e.sessionMember,n=e.showRemoveButton,i=e.onClickMember,r=e.onClickRemove,a=e.index,o=(0,ho.D)().currentSession,l=(0,wm.c)(t),s=l.displayName,c=l.images,u=l.username,d=l.uri;return(0,x.jsx)(Sr.h,{menu:(0,x.jsx)(pc.B,{uri:d}),children:(0,x.jsx)(Z.v,{id:"".concat(a),variant:"naked",className:Nm,title:(0,x.jsx)(Ee.d,{lineClamp:1,children:s}),media:(0,x.jsx)("div",{role:"button",onClick:i,onKeyDown:i,tabIndex:-1,children:(0,x.jsx)(dc.e,{images:c,userIconSize:"medium",width:48,displayName:s,username:u,label:s})}),subtitle:(null==o?void 0:o.sessionOwnerId)===t.id?V.Ru.get("web-player.social-connect.participant-list.host"):V.Ru.get("web-player.social-connect.participant-list.guest"),onClick:i,trailing:n&&(0,x.jsx)(ve.n,{size:"small",className:km,onClick:r,"aria-label":V.Ru.get("web-player.social-connect.participant-list.remove-guest-accessible-label",{displayName:s}),children:V.Ru.get("web-player.social-connect.participant-list.remove-guest")})})})},Im=n(1795),Rm=n(503),Lm=n(96134),Tm=function(){var e=(0,Xr.d)(),t=(0,H.wA)(),n=(0,bl.Zp)(),r=(0,Im.Z)(),a=(0,ho.D)(),o=a.currentSession,l=a.kickAllParticipants,s=(0,jm.m)().setQueueView,c=(0,Rm.T)(),u=c.logUserClick,p=c.logRemoveClick,f=(0,i.useCallback)((function(){null!=o&&o.joinSessionShortLink&&r(null==o?void 0:o.joinSessionShortLink)}),[r,null==o?void 0:o.joinSessionShortLink]),g=(0,i.useCallback)((function(e,n){p(e),t((0,Or.A9)(Kr.EL.REMOVE_PARTICIPANT,void 0,n))}),[t,p]),m=(0,i.useCallback)((function(e,t){var i=(0,Vi.Qjr)(t.username);u(e,i.toURI()),n(i.toURLPath(!0))}),[u,n]),b=(0,i.useCallback)((function(){l(null==o?void 0:o.sessionId)}),[null==o?void 0:o.sessionId,l]),y=(0,Lm.T4)(e);return o&&y?(0,x.jsxs)("div",{className:Om,children:[(0,x.jsx)(d.E,{variant:"titleSmall",semanticColor:"textBase",children:V.Ru.get("web-player.social-connect.participant-list.title")}),(0,x.jsxs)("div",{className:Sm,children:[(0,x.jsx)(d.E,{variant:"bodySmall",semanticColor:"textSubdued",children:V.Ru.get("web-player.social-connect.participant-list.subtitle")}),(0,x.jsx)(ve.n,{size:"small",onClick:f,className:Cm,children:V.Ru.get("web-player.social-connect.invite-button")})]}),(0,x.jsx)("div",{className:Am,children:o.sessionMembers.map((function(t,n){return(0,x.jsx)(Pm,{index:n,sessionMember:t,showRemoveButton:(0,Lm.kt)(e,(0,Vi.Qjr)(t.username).toURI()),onClickRemove:function(){return g(n,t)},onClickMember:function(){return m(n,t)}},n)}))}),o.isSessionOwner&&o.sessionMembers.length>1&&(0,x.jsx)(v.$,{colorSet:"invertedLight",size:"small",onClick:b,children:V.Ru.get("web-player.social-connect.participant-list.remove-all-guests")}),(0,x.jsx)(d.E,{variant:"marginal",semanticColor:"textSubdued",className:Em,children:V.Ru.get("web-player.social-connect.participant-list.visibility-info")})]}):(s(jm.p.QUEUE),null)},Dm=n(15687);const _m="BZj_r1yzmmragvivUCrw",Um="hpzTKCoO0rllEslIOMPo",Bm="TeBVsFnI9PMHYL9ynJx9",Fm="ZDR7q1cqU2yaYjemuy9Z",Mm="OLB2ghxc09Kz8k_93eIu";function Hm(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Vm(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Hm(Object(n),!0).forEach((function(t){(0,l.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Hm(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var qm=function(){var e=(0,hg.m)(),t=e.currentQueueView,n=e.setQueueView,r=(0,Dm.y)(),a=xg().logQueuePanelTabChange,o=(0,i.useMemo)((function(){return r?{titleSlot:t!==hg.p.PARTICIPANT_LIST?(0,x.jsx)(Kf.t,{currentTab:t,onTabChange:function(e){e===(0,Zf.c)(hg.p.HISTORY)?(a(hg.p.HISTORY),n(hg.p.HISTORY)):(a(hg.p.QUEUE),n(hg.p.QUEUE))},className:Bm,children:(0,x.jsxs)(Wf.w,{"aria-label":"",className:Fm,children:[(0,x.jsx)(Zf.V,{"aria-selected":t===hg.p.QUEUE,label:V.Ru.get("playback-control.queue"),value:hg.p.QUEUE}),(0,x.jsx)(Zf.V,{"aria-selected":t===hg.p.HISTORY,label:V.Ru.get("view.recently-played"),value:hg.p.HISTORY})]})}):(0,x.jsx)(nn.H,{iconLeading:io.g,onClick:function(){return n(hg.p.QUEUE)},size:"small",condensed:!0,className:Mm,children:V.Ru.get("web-player.social-connect.participant-list.back-to-queue")})}:{title:V.Ru.get("playback-control.queue")}}),[r,a,n,t]);return(0,x.jsx)(qe._,{label:V.Ru.get("playback-control.queue"),focusTransferId:"QUEUE-HISTORY-PANEL",children:(0,x.jsx)(Qe.w,{fixedHeader:(0,x.jsx)(g.a,Vm({className:_m,panel:m.Z.Queue},o)),children:(0,x.jsx)("div",{className:Um,children:t!==hg.p.PARTICIPANT_LIST?(0,x.jsxs)(x.Fragment,{children:[(0,x.jsx)(Xf.K,{value:"queue",children:t===hg.p.QUEUE&&(0,x.jsx)(xm,{})}),(0,x.jsx)(Xf.K,{value:"history",children:t===hg.p.HISTORY&&(0,x.jsx)(Lg,{})})]}):(0,x.jsx)(Tm,{})})})})},Qm=(0,i.memo)((function(){return(0,x.jsx)(yg,{children:(0,x.jsx)(qm,{})})})),zm=n(11035),Ym=(0,i.memo)((function(){var e=(0,Yf.X)(),t=(0,zf._)(),n=function(){var e=(0,i.useRef)(m.Z.NowPlayingView),t=(0,E.XB)();return(0,i.useEffect)((function(){e.current=t}),[t]),(0,i.useCallback)((function(n){var i=e.current===m.Z.NowPlayingView,r=t===m.Z.NowPlayingView;return n.some((function(n){return i&&t===n||r&&e.current===n}))}),[t])}(),l=(0,i.useRef)(null),s=(0,a.NC)(Tr.t84)?Wi:or;return(0,x.jsxs)(o.s,{onError:function(e){(0,zm.Jy)(e,"PanelSection"),t((0,Gf.MQ)(m.Z.Disabled))},children:[(0,x.jsx)(r.A,{nodeRef:l,in:e===m.Z.NowPlayingView,timeout:{enter:0,exit:e===m.Z.Disabled?0:300},unmountOnExit:!0,mountOnEnter:!0,children:(0,x.jsx)(Tf,{nodeRef:l,currentPanel:m.Z.NowPlayingView})}),e===m.Z.BuddyFeed?(0,x.jsx)(s,{}):null,(0,x.jsx)(Qf,{isActive:e===m.Z.BuddyFeedOverlay,shouldPlayAnimation:n([m.Z.BuddyFeedOverlay]),children:(0,x.jsx)(s,{})}),e===m.Z.Queue?(0,x.jsx)(Qm,{}):null,(0,x.jsx)(Qf,{isActive:e===m.Z.QueueOverlay,shouldPlayAnimation:n([m.Z.QueueOverlay]),children:(0,x.jsx)(Qm,{})}),e===m.Z.Puffin||e===m.Z.PuffinActivation?(0,x.jsx)(_i,{}):null,(0,x.jsx)(Qf,{isActive:e===m.Z.PuffinActivationOverlay||e===m.Z.PuffinOverlay,shouldPlayAnimation:n([m.Z.PuffinActivationOverlay,m.Z.PuffinOverlay]),children:(0,x.jsx)(_i,{})}),e===m.Z.DevicePicker?(0,x.jsx)(Eo,{}):null,(0,x.jsx)(Qf,{isActive:e===m.Z.DevicePickerOverlay,shouldPlayAnimation:n([m.Z.DevicePickerOverlay]),children:(0,x.jsx)(Eo,{})})]})}))},7617:(e,t,n)=>{n.d(t,{_:()=>u,s:()=>c});var i=n(30758),r=n(97500),a=n.n(r),o=n(73364);const l="ffFwfKcPDbmAPLXzxzKq";var s=n(86070),c=(0,i.createContext)(null),u=function(e){var t=e.label,n=e.style,r=e.focusTransferId,u=e.children,d=e.className,p=e.nodeRef,v=(0,i.useRef)(null),f=null!=p?p:v;return(0,o.X)(null!=r?r:null,f),(0,s.jsx)(c.Provider,{value:f,children:(0,s.jsx)("aside",{"aria-label":t,className:a()(l,d),style:n,id:"Desktop_PanelContainer_Id",ref:f,tabIndex:-1,children:u})})}},72449:(e,t,n)=>{n.d(t,{w:()=>b});var i=n(51488),r=n(30758),a=n(97500),o=n.n(a),l=n(52952),s=n(75658),c=n(99299);const u="AAdBM1nhG73supMfnYX7",d="W3E0IT3_STcazjTeyOJa",p="mdMUqcSHFw1lZIcYEblu",v="cZCuJDjrGA2QMXja_Sua",f="zduvaX0Ioxqd5ypeWoAf";var g=n(86070),m=function(e){var t=e.fixedHeader,n=e.scrollNodeRef,r=e.children,a=e.scrolledClassName,l=(0,s.y)(n);return(0,g.jsxs)("div",{className:o()(u),children:[(0,g.jsx)("div",{className:o()(d,(0,i.A)({},null!=a?a:p,l)),children:t}),r]})},b=r.forwardRef((function(e,t){var n=e.children,i=e.className,a=e.fixedHeader,s=e.scrolledClassName,d=(0,r.useRef)(null),p=(0,g.jsx)(c.bi.Provider,{value:{scrollNodeRef:d},children:(0,g.jsx)(l.a,{className:v,onInstanceCreated:function(e){d.current=e.elements().viewport},children:(0,g.jsx)("div",{ref:t,className:o()(u,f,i),children:n})})});return a?(0,g.jsx)(m,{fixedHeader:a,scrollNodeRef:d,scrolledClassName:s,children:p}):p}))},47942:(e,t,n)=>{n.d(t,{a:()=>B});var i=n(51488),r=(n(83234),n(34518),n(56922),n(30758)),a=n(97500),o=n.n(a),l=n(7852),s=n(71591),c=n(68757),u=n(87154),d=n(2860),p=n(99),v=n(44721),f=n(59414),g=n(26132),m=n(52733),b=n(54363),y=n(42511),h=n(80553),x=n(98538),j=n(63130),w=n(28085),O=n(79655),S=n(36560),C=n(35605),A=n(24777),N=n(57965);const k="eTT681T6oUKXsIMiP8pT",E="gwmgu53xszgwAXxqLT0h",P="fNXmHtlrj4UVWmhQrJ_5",I="XOSSUjLDKk9RRmiX_UWa",R="XNFZdOLgMlx491fEWdYJ",L="icNf66tgG3uxDMbCCIaN";var T=n(86070),D=(0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)((0,i.A)({},d.NQG.PLAYLIST,y.W),d.NQG.PLAYLIST_V2,y.W),d.NQG.ALBUM,g.h),d.NQG.TRACK,h.P),d.NQG.ARTIST,m.t),d.NQG.EPISODE,b.b),_=function(e){var t,n=e.link,i=e.title,r=e.item,a=e.panelLinkRef,o=e.variant,s=e.semanticColor,c=(0,N.r)(u.J,{}),p=c.spec,v=c.logger,g=(0,T.jsx)(w.r,{children:(0,T.jsx)(l.E,{as:"h1",variant:o,semanticColor:s,children:i||""})},i||""),m=(0,d.o_h)(n),b=!1,y=[],h=m&&D[m.type];if(h){var x=m.toURI();t=(0,T.jsx)(h,{uri:x}),y=(b=!(!x||!i))?[x]:[]}var S=(0,O.XB)().split("_").join(" "),A=(0,C.P)({itemUris:y,dragLabelText:null!=i?i:""}),P=A.draggable,I=A.onDragStart;return(0,T.jsx)(f.h,{menu:t,children:(0,T.jsx)("div",{className:k,children:n&&i?(0,T.jsx)(j.N,{ref:a,"aria-label":"".concat(S," link"),draggable:P&&b,onDragStart:b?I:void 0,to:n,search:r?"?uid=".concat(r.uid,"&uri=").concat(r.uri):void 0,className:E,onClick:function(){v.logInteraction(p.contextLinkFactory().hitUiNavigate({destination:n||""}))},children:g}):g})})},U=S.$S.PANEL_CLOSE_CLICK,B=function(e){var t=e.link,n=e.title,i=e.titleSlot,a=e.actions,l=e.onClose,u=e.className,d=e.panelLinkRef,f=e.preventDefaultClose,g=void 0!==f&&f,m=e.onBack,b=e.item,y=e.titleVariant,h=void 0===y?"bodyMediumBold":y,j=e.titleSemanticColor,w=void 0===j?"textBase":j,S=(0,O._Y)(),C=(0,O.Ev)(U),N=(0,r.useCallback)((function(){null==l||l(),g||S(U)}),[l,g,S]),k=null!==b&&(0,A.N)(b);return(0,T.jsx)(r.Suspense,{fallback:null,children:(0,T.jsxs)("div",{className:o()(P,u),children:[m&&(0,T.jsx)("span",{className:L,children:(0,T.jsx)(x.Zp,{label:p.Ru.get("desktop.login.Back"),children:(0,T.jsx)(v.a,{ariaLabel:p.Ru.get("desktop.login.Back"),className:R,size:"sm",onClick:m,icon:s.g})})}),i||(0,T.jsx)(_,{title:n,panelLinkRef:d,item:b,link:t,variant:h,semanticColor:w}),(0,T.jsxs)("span",{className:o()(L,I),children:[a,!k&&(0,T.jsx)("div",{"data-testid":"PanelHeader_CloseButton",children:(0,T.jsx)(x.Zp,{label:p.Ru.get("close"),children:(0,T.jsx)(v.a,{ariaLabel:p.Ru.get("close"),className:R,size:"sm",onClick:N,icon:c.M,disabled:!C})})})]})]})})}},93931:(e,t,n)=>{n.d(t,{H:()=>s});var i=n(53952),r=n(7852),a=n(99),o=n(88282),l=n(86070),s=function(){return(0,l.jsxs)("div",{className:o.A.emptyContainer,children:[(0,l.jsx)(i.q,{size:"xxlarge","aria-hidden":"true"}),(0,l.jsxs)("div",{className:o.A.titleContainer,children:[(0,l.jsx)(r.E,{as:"h1",variant:"titleMedium",semanticColor:"textBase",children:a.Ru.get("history.empty-title")}),(0,l.jsx)("p",{children:a.Ru.get("history.empty-description")})]})]})}},24672:(e,t,n)=>{n.d(t,{$:()=>g});var i=n(5904),r=n(64501),a=n.n(r),o=n(30758),l=n(94822),s=n(36734),c=n(34770),u=n(99),d=n(65941),p=n(17979),v=n(7084),f=n(86070),g=function(e){var t=e.onClick,n=(0,l.wA)(),r=(0,p.Y)(),g=(0,o.useCallback)((0,i.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(),e.next=4,r();case 4:e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),n((0,d.A9)(v.EL.ERROR));case 9:case"end":return e.stop()}}),e,null,[[0,6]])}))),[r,n,t]);return(0,f.jsx)(s.$,{iconLeading:c.V,size:"small",onClick:g,children:u.Ru.get("web-player.social-connect.menu-action.title")})}},503:(e,t,n)=>{n.d(t,{T:()=>c});n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316);var i=n(51488),r=n(30758),a=n(35929),o=n(57965),l=n(86070);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}var c=function(){var e=(0,o.r)(a.I,{}),t=e.spec,n=e.logger,c=e.UBIFragment,u=(0,r.useCallback)((function(e,i){n.logInteraction(t.participantListFactory().participantListRowFactory({position:e}).userLinkFactory().hitUiNavigate({destination:i}))}),[n,t]),d=(0,r.useCallback)((function(e){n.logInteraction(t.participantListFactory().participantListRowFactory({position:e}).removeButtonFactory().hitUiReveal())}),[n,t]),p=(0,r.useCallback)((function(e){return(0,l.jsx)(c,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,i.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({spec:t},e))}),[c,t]);return{logUserClick:u,logRemoveClick:d,UBIFragmentWithSpec:p}}},88416:(e,t,n)=>{n.d(t,{J:()=>i.J});var i=n(6669)},25227:(e,t,n)=>{n.d(t,{W:()=>i.W});var i=n(58153)},76427:(e,t,n)=>{n.d(t,{a:()=>i.a});var i=n(55529)},90495:(e,t,n)=>{n.d(t,{r:()=>i.r});var i=n(25555)},17873:(e,t,n)=>{n.d(t,{x:()=>a});var i=n(44671),r=n(91617);function a(){var e=(0,r.t)();return(0,i.I)({queryKey:["settings-formats"],queryFn:function(){return e.quality.getFormats()},gcTime:36e5,staleTime:6e5}).data}},59350:(e,t,n)=>{n.d(t,{p:()=>y});var i=n(71523),r=(n(7651),n(14551),n(30758)),a=n(7852),o=n(84701),l=n(68757),s=n(99),c=n(78253),u=n(24672),d=n(343),p=n(73413);const v="pIxPdfuNasUDLbEDmuK_",f="T5TwrUTf23N311rgrEAc",g="BTwQUS5iBiiOBgdda2Zi",m="lu2OTpzgQ6hv6AYWXMNQ";var b=n(86070),y=function(e){var t=e.localStorageKey,n=e.onDismiss,y=(0,p.x)(t,!1),h=(0,i.A)(y,2),x=h[0],j=h[1],w=(0,d.O)().logStartJam,O=(0,c.d)().enqueueSnackbar,S=(0,r.useCallback)((function(){j(!0),n&&n(),O(s.Ru.get("web-player.social-connect.promotion.how-to-start-a-jam-reminder"),{autoHideDuration:5e3})}),[O,n,j]);return x?(0,b.jsx)(b.Fragment,{}):(0,b.jsxs)("div",{className:v,children:[(0,b.jsxs)("div",{className:f,children:[(0,b.jsx)(a.E,{as:"p",variant:"bodySmall",semanticColor:"textSubdued",children:s.Ru.get("web-player.social-connect.invitation-modal.subtitle")}),(0,b.jsx)(o.H,{iconOnly:l.M,className:g,"aria-label":s.Ru.get("close"),onClick:S,size:"small"})]}),(0,b.jsx)("div",{className:m,children:(0,b.jsx)(u.$,{onClick:w})})]})}},83892:(e,t,n)=>{n.d(t,{y:()=>i.y});var i=n(90977)},82898:(e,t,n)=>{n.d(t,{g:()=>v});n(30456),n(34518),n(47994),n(43379),n(34192),n(88856);var i=n(94822),r=n(2860),a=n(99),o=n(98782),l=n(3497),s=n(73309),c=n(2398),u=n(18621),d=n(24777),p=function(e){var t,n;return null!==(t=null===(n=(0,r.o_h)(e))||void 0===n?void 0:n.toURLPath(!0))&&void 0!==t?t:""},v=function(e){var t,n,r,v,f,g=(0,i.d4)(s.Ht).user,m=(0,u.o)((function(e){return{item:null==e?void 0:e.item,context:null==e?void 0:e.context}}),(function(e,t){var n,i,r,a;return(null===(n=e.item)||void 0===n?void 0:n.uri)===(null===(i=t.item)||void 0===i?void 0:i.uri)&&(null===(r=e.context)||void 0===r||null===(r=r.metadata)||void 0===r?void 0:r.context_description)===(null===(a=t.context)||void 0===a||null===(a=a.metadata)||void 0===a?void 0:a.context_description)})),b=m.item,y=m.context;if(!b||!y)return{title:null,link:null};var h=(0,l.Iu)();if(y.uri===h.uri||y.uri===c.bV)return{title:h.name,link:p(c.bV)};if((0,d.N)(b)&&!e)return{title:a.Ru.get("ad-formats.advertisement"),link:null};if("queue"===b.provider&&!e)return{title:a.Ru.get("playback-control.queue"),link:p("spotify:app:queue")};var x=(0,l.$R)(null==g?void 0:g.id);if(y.uri===(null==x?void 0:x.uri))return{title:null==x?void 0:x.name,link:p(null==x?void 0:x.uri)};var j,w,O=(0,l.n5)(null==g?void 0:g.id);return y.uri===(null==O?void 0:O.uri)?{title:null==O?void 0:O.name,link:p(null==O?void 0:O.uri)}:(0,o.HS)(y)?{title:[null===(j=b.metadata)||void 0===j?void 0:j.station_title,null===(w=b.metadata)||void 0===w?void 0:w.station_subtitle].filter(Boolean).join(" • "),link:null}:{title:null!==(t=null!==(n=null===(r=y.metadata)||void 0===r?void 0:r.context_description)&&void 0!==n?n:null==b?void 0:b.name)&&void 0!==t?t:"",link:null!==(v=null!==(f=p(y.uri))&&void 0!==f?f:p(b.uri))&&void 0!==v?v:""}}},65692:(e,t,n)=>{n.d(t,{a:()=>c});var i=n(88610),r=n(44671),a=n(7807),o=n(26893),l=n(30758);var s=["play-history-contents"];function c(){var e=(0,o.q)(),t=(0,i.jE)();return function(e,t){var n=(0,o.q)();(0,l.useEffect)((function(){return n.getEvents().addListener(e,t)}),[e,t,n])}(a.X.UPDATE,(function(e){return t.setQueryData(s,e.data)})),(0,r.I)({queryKey:s,queryFn:function(){return e.getContents()},gcTime:3e5,staleTime:0})}},15984:(e,t,n)=>{n.d(t,{p:()=>a});var i=n(71523),r=(n(26701),n(43379),n(34192),n(51565),n(18316),n(30758)),a=function(e){var t=(0,r.useState)(0),n=(0,i.A)(t,2),a=n[0],o=n[1];function l(t){var n,i=null===(n=e.current)||void 0===n?void 0:n.querySelectorAll('button:not([disabled]), [href], input, select, textarea, a,[tabindex]:not([tabindex="-1"])');if(i){i.forEach((function(e){e.setAttribute("tabindex","-1")})),i&&i[0].setAttribute("tabindex","0");var r=a;if(i&&i.length>0)switch(t.key){case"Tab":document.activeElement&&o(0);break;case"ArrowUp":0===r?(t.preventDefault(),r=i.length-1):r-=1,i[r].focus(),o(r);break;case"ArrowDown":t.preventDefault(),r===i.length-1?r=0:r+=1,i[r].focus(),o(r)}}}r.useEffect((function(){var t=e.current;return null==t||t.addEventListener("keydown",l),function(){null==t||t.removeEventListener("keydown",l)}}))}},70076:(e,t,n)=>{n.d(t,{r:()=>u,z:()=>d});var i=n(71523),r=n(30758),a=n(51646),o=n(6843),l=n(40940),s=n(47370),c=n(44671);function u(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=(0,r.useContext)(s.j).request,n=(0,c.I)({queryKey:["extracted-color",e],queryFn:function(){return e?(0,l.j)(t,e).then((function(e){var t=(0,i.A)(e,1)[0],n=t.colorDark,r=t.colorLight,a=t.colorRaw;return{colorDark:n.toCSS(o.a.HEX),colorLight:r.toCSS(o.a.HEX),colorRaw:a.toCSS(o.a.HEX)}})):null},gcTime:864e5,staleTime:216e5,enabled:!!e}).data;return null!=n?n:void 0}function d(){var e,t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:a.l0o,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"colorRaw";return null!==(e=null===(t=u(n))||void 0===t?void 0:t[r])&&void 0!==e?e:i}},86723:(e,t,n)=>{n.d(t,{D:()=>a});var i=n(44640),r=n(93833);function a(){return(0,r.N)(i.x)}}}]);
//# sourceMappingURL=dwp-panel-section.js.map