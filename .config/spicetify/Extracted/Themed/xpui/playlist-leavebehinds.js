"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[9718],{36959:(e,t,n)=>{n.d(t,{o:()=>F});var r=n(52542),a=n(62822),i=n(12341),s=n(93091),l=n.n(s),c=(n(7651),n(30456),n(26701),n(25550),n(47994),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(15342),n(18316),n(30758)),d=n(13534),u=n(94842),o=n(12482),v=n(76149),h=n(92107),f=n(96971),p=n(26173),b=n(66475),m=n(70080),g=n(11854),_=n(19276),k=n(93051);const y="c5Ml9BbBuUEHjNkcSwZA";var x=n(86070),j="70px",w=function(e){var t=e.adId,n=e.advertiser,r=e.tagline,a=e.displayImage,i=e.buttonMessage,s=e.cardOnClick,l=e.buttonOnClick,c=e.clickthroughUrl;return(0,x.jsx)(k.N,{to:(0,_.H)(c),className:y,"data-testid":"leavebehind",children:(0,x.jsx)(f.v,{onClick:s,onClickHint:h.Ru.get("ad-formats.learnMore"),layout:"wide",variant:"tinted",id:t,size:"xl",title:(0,x.jsx)(p.d,{weight:"bold",variant:"ballad",lineClamp:1,"data-testid":"leavebehind-advertiser",children:n}),subtitle:(0,x.jsx)(b.j,{as:"div",lineClamp:2,"data-testid":"leavebehind-tagline",children:r}),media:(0,x.jsx)(m.C,{"data-testid":"leavebehind-image",src:a.src,alt:a.alt,imageHeight:j,imageWidth:j,size:"xl"}),trailing:(0,x.jsx)(g.$,{onClick:function(){l&&l()},"data-testid":"leavebehind-button",colorSet:"invertedLight",size:"small","aria-label":h.Ru.get("ad-formats.learnMore"),children:i})})})},I=n(41243),O=n(76672),A=n(40070),E=n(85726);const q="zlUJfROzFEOsEDWL7ucP",C="Fxvq1Fw7XQdGRDvYokRg";function P(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?P(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):P(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var F=function(e){var t=e.leavebehinds,n=e.seeAllButton,r=e.surface,s=e.uri,f=(0,E.vh)(),p=(0,A.w)(A.P),b=(0,c.useState)(void 0),m=(0,i.A)(b,2),g=m[0],_=m[1];(0,c.useEffect)((function(){t&&t.length>0&&g!==t[0].requestId&&s&&(t.forEach((function(e,t){var n;e.uri===s&&(null===(n=e.trackingEvents)||void 0===n||n.viewed.forEach(function(){var t=(0,a.A)(l().mark((function t(n){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(n);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),a=t.t0,f.send((0,o.G)({error_type:"trackingURLFailure",error_message:a.message,http_error_code:422,surface:(0,I.Fh)(r),request_url:n,request_type:"leavebehindAds",lineitem_id:e.lineitemId,ad_content_origin:(0,O.Zl)(r)}));case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}()),f.send((0,v.x)({leavebehind_lineitem_id:e.lineitemId,leavebehind_request_id:e.requestId,event:"event_viewed",event_reason:"viewed_on_".concat((0,I.Fh)(r).toLowerCase()),surface:(0,I.Fh)(r),surface_position:t+1,uri:s})))})),_(t[0].requestId))}),[f,p,t,s,r,g]);var k=function(e){var t=e.eventReason,n=e.lineitemId,i=e.requestId,c=e.trackingEvents,d=e.surfacePosition;!function(e,t){null==t||t.forEach(function(){var t=(0,a.A)(l().mark((function t(n){var a;return l().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p(n);case 3:t.next=9;break;case 5:t.prev=5,t.t0=t.catch(0),a=t.t0,f.send((0,o.G)({error_type:"trackingURLFailure",error_message:a.name,http_error_code:422,surface:(0,I.Fh)(r),request_url:n,request_type:"leavebehindAds",lineitem_id:e,ad_content_origin:(0,O.Zl)(r)}));case 9:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e){return t.apply(this,arguments)}}())}(n,c),f.send((0,v.x)({leavebehind_lineitem_id:n,leavebehind_request_id:i,event:"event_clicked",event_reason:t,surface:(0,I.Fh)(r),surface_position:d,uri:s}))};return(0,x.jsxs)("section",{"data-testid":"leavebehinds-wrapper",children:[(0,x.jsxs)("div",{className:C,children:[(0,x.jsx)(d.E,{as:"h2",semanticColor:"textBase",variant:"titleSmall",paddingBottom:(0,u.po)("tighter"),"data-testid":"leavebehinds-title",children:h.Ru.get("podcast-ads.recent_ads")}),n]}),(0,x.jsx)("div",{className:q,"data-testid":"leavebehinds-list-wrapper",children:t.map((function(e,t){return(0,x.jsx)(w,N(N({},e),{},{buttonOnClick:function(){var n;k({eventReason:"button_clicked",lineitemId:e.lineitemId,trackingEvents:null===(n=e.trackingEvents)||void 0===n?void 0:n.clicked,requestId:e.requestId,surfacePosition:t+1})},cardOnClick:function(){var n;k({eventReason:"card_clicked",lineitemId:e.lineitemId,trackingEvents:null===(n=e.trackingEvents)||void 0===n?void 0:n.clicked,requestId:e.requestId,surfacePosition:t+1})}}),e.adId)}))})]})}},60425:(e,t,n)=>{n.d(t,{J:()=>o});n(83234);var r=n(68150),a=n(2648),i=n(76149),s=n(92107),l=n(41243),c=n(76672),d=n(85726),u=n(86070),o=function(e){var t=e.leavebehinds,n=e.surface,o=e.uri,v=e.pathname,h=e.state,f=(0,d.vh)(),p="".concat(s.Ru.get("view.see-all")," (").concat(t.length<=c.E9?s.Ru.formatNumber(t.length):s.Ru.formatNumber(c.E9),")");return(0,u.jsx)(r.N_,{to:v,state:h,children:(0,u.jsx)(a.H,{"data-testid":"leavebehinds-see-all",size:"small",onClick:function(){f.send((0,i.x)({leavebehind_request_id:t[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,l.Fh)(n),uri:o}))},children:p})})}},37903:(e,t,n)=>{n.d(t,{A:()=>b});var r=n(62822),a=n(12341),i=n(93091),s=n.n(i),l=(n(47994),n(30758)),c=n(12482),d=n(93493),u=n(8214),o=n(41243),v=n(76672),h=n(85726),f=n(58114),p=n(75844);const b=function(e){var t=(0,l.useState)(),n=(0,a.A)(t,2),i=n[0],b=n[1],m=(0,l.useState)(!1),g=(0,a.A)(m,2),_=g[0],k=g[1],y=(0,h.vh)(),x=(0,d.NC)(f.SAn,{loadingValue:!1});return{data:i,error:_,getLeavebehinds:(0,l.useCallback)((0,r.A)(s().mark((function t(){var n,r;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,u.b6(p.n.getInstance(),(0,o.Fh)(e.surface),e.uri,e.playlistName,x);case 3:n=t.sent,b(n.body),t.next=12;break;case 7:t.prev=7,t.t0=t.catch(0),r=t.t0,y.send((0,c.G)({error_type:"fetchAdsFailure",error_message:r.name,http_error_code:r.status,surface:(0,o.Fh)(e.surface),request_type:"leavebehindAds",ad_content_origin:(0,v.Zl)(e.surface)})),k(!0);case 12:case"end":return t.stop()}}),t,null,[[0,7]])}))),[y,e.playlistName,e.surface,e.uri,x])}}},30971:(e,t,n)=>{n.r(t),n.d(t,{default:()=>f});n(28430),n(43379),n(34192),n(9582);var r=n(30758),a=n(88677),i=n(80366),s=(n(70750),n(36959)),l=n(60425),c=n(41243),d=n(76672),u=n(86070),o=function(e){var t=e.uri,n=e.playlistId,r=e.leavebehinds,a=e.playlistName,i=c.ui.PLAYLIST;return r&&r.length>0?(0,u.jsx)(s.o,{surface:i,uri:t,leavebehinds:r.slice(0,d.pU),seeAllButton:r.length>d.pU?(0,u.jsx)(l.J,{leavebehinds:r,surface:i,pathname:"/playlist/".concat(n,"/see-all-ads"),state:{uri:t,playlistName:a},uri:t}):null}):null},v=n(37903),h=function(e){return e.ads.sponsoredPlaylist.sponsoredPlaylist.get("allSponsorships")};const f=function(e){var t,n=e.uri,s=e.playlistName,l=null===(t=(0,i.o_)(n))||void 0===t?void 0:t.id,f=(0,a.d4)(h),p=null==f?void 0:f.some((function(e){return e.playlistId===l})),b=c.ui.PLAYLIST,m=(0,v.A)({surface:b,uri:n,playlistName:s}),g=m.data,_=m.error,k=m.getLeavebehinds;if((0,r.useEffect)((function(){k()}),[k]),null==g||!g.leavebehindAds||_||p)return null;var y=(0,d.iT)(g,n);return g&&g.leavebehindAds.length>0&&l?(0,u.jsx)(o,{uri:n,playlistId:l,leavebehinds:y,playlistName:s}):null}}}]);
//# sourceMappingURL=playlist-leavebehinds.js.map