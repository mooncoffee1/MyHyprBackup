"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{48035:(e,t,n)=>{n.d(t,{I:()=>c});var r=n(12341),i=n(30758),a=n(28112),o=n(8574),s=n(99888),l=n(86070),c=i.memo((function(e){var t=e.uri,n=e.size,c=void 0===n?a.M.md:n,u=e.className,d=e.onClick,p=e.canDownload,m=e.condensedAll,v=(0,s.A)(t),h=(0,r.A)(v,2),f=h[0],g=h[1],x=(0,o.W)(),y=(0,i.useCallback)((function(){x({targetUri:t,intent:f?"unsave":"save",type:"click"}),g(!f)}),[x,t,f,g]);return(0,l.jsx)(a.f,{className:u,isFollowing:f,onFollow:y,onClick:d,uri:t,size:c,canDownload:p,condensedAll:m,condensed:!0})}))},29077:(e,t,n)=>{n.d(t,{G:()=>E});var r=n(52542),i=n(97500),a=n.n(i),o=n(92107),s=n(13534);const l="YNXLVjlRXPfM4xObTojA",c="CVRy4NtxZYSle8dJ1E67",u="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",p="_IQ8dgA5pEr_V8PfUkWa",m="xNkPMA_OvAxcFTdfyroI";var v=n(86070),h=function(e){var t=e.value,n=e.label,i=e.hasDivider,o=void 0!==i&&i;return(0,v.jsxs)("div",{className:u,"aria-hidden":"true",children:[(0,v.jsx)(s.E,{variant:"titleSmall",className:a()((0,r.A)({},p,o)),children:t}),(0,v.jsx)(s.E,{variant:"marginal",semanticColor:"textSubdued",children:n})]})},f=n(12341),g=n(30758),x=1e3,y=60*x,b=60*y,j=24*b;var k=n(81530),w=n(92200),P={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?(t=e,n=Math.abs(t),{days:Math.floor(n/j),hours:Math.floor(n%j/b),minutes:Math.floor(n%b/y),seconds:Math.floor(n%y/x)}):P;var t,n}var S=n(18180),R=n(16920),E=function(e){var t=e.targetDate,n=e.className,i=e.onComplete,s=e.images,u=e.imageTitle,p=function(e,t){var n=(0,g.useRef)(t);n.current=t;var r=(0,g.useState)((function(){return C((0,k.u)(e))})),i=(0,f.A)(r,2),a=i[0],o=i[1];return(0,w.$)((function(t){var r,i=(0,k.u)(e),a=C(i);o(a),i<=0&&(t(),null===(r=n.current)||void 0===r||r.call(n))}),1e3),a}(t,i),x=p.days,y=p.hours,b=p.minutes,j=p.seconds,P=void 0!==s&&s.length>0&&u,E=o.Ru.get("web-player.prerelease.countdown_label",{days:x,hours:y,minutes:b,seconds:j});return(0,v.jsxs)("div",{className:a()(l,n,(0,r.A)({},c,P)),role:"timer",children:[(0,v.jsx)("span",{className:m,children:E}),P&&(0,v.jsx)(S.b,{images:s,type:R.c.ALBUM,shape:S.u.ROUNDED_CORNERS,className:d,title:u}),(0,v.jsx)(h,{value:x,label:o.Ru.get("web-player.prerelease.days",x),hasDivider:!0}),(0,v.jsx)(h,{value:y,label:o.Ru.get("web-player.prerelease.hours",y),hasDivider:!0}),(0,v.jsx)(h,{value:b,label:o.Ru.get("web-player.prerelease.minutes",b),hasDivider:!0}),(0,v.jsx)(h,{value:j,label:o.Ru.get("web-player.prerelease.seconds",j)})]})}},81573:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(30758),i=n(12072),a=n(92107),o=n(86070),s=(0,r.memo)((function(e){var t=e.isFollowing,n=e.onClick,r=e.disabled,s=void 0!==r&&r,l=e.buttonText,c=e.size,u=void 0===c?"small":c,d=e.className,p=t?a.Ru.get("following"):a.Ru.get("follow");return(0,o.jsx)(i.n,{onClick:n,disabled:s,size:u,className:d,children:l||p})}))},81517:(e,t,n)=>{n.d(t,{h:()=>v});n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316);var r=n(52542),i=n(30758),a=n(57581),o=n(15868),s=n(86429),l=n(79469),c=n(3376),u=n(44551),d=n(86070);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var v=function(e){var t,n=e.children,r=e.action,p=e.uri,v=(0,s.V)(),h=(0,c.N)(l.JD);try{t=i.Children.only(n)}catch(e){return(0,d.jsx)(d.Fragment,{children:n})}return v?i.cloneElement(t,{onClick:function(){var e={triggerId:o.d,triggerAction:{type:r}};a.h.set((function(t){return m(m({},t),e)})),h.storeAction(l.j8,{operation:u.tS.ADD,uris:[p]})}}):(0,d.jsx)(d.Fragment,{children:n})}},37165:(e,t,n)=>{n.d(t,{H4:()=>r});n(30758),n(97500),n(92107),n(17011),n(56827);n(86070);var r=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({})},53489:(e,t,n)=>{n.d(t,{v:()=>p});var r=n(12072),i=n(90457),a=n(11854),o=n(49190),s=n(92107),l=n(81517),c=n(86628),u=n(52834),d=n(86070),p=function(e){var t=e.uri,n=e.isBook,p=void 0!==n&&n,m=(0,c.w)({uri:t,isBook:p}),v=m.isPreSaved,h=m.addPresave,f=m.removePresave;return v?(0,d.jsx)(r.n,{onClick:f,iconTrailing:i.k,children:s.Ru.get("web-player.prerelease.presaved")}):(0,d.jsx)(l.h,{uri:t,action:u.no.SAVE_PRERELEASE,children:(0,d.jsx)(a.$,{disabled:void 0===v,onClick:h,iconTrailing:o.P,children:s.Ru.get("web-player.prerelease.presave")})})}},23593:(e,t,n)=>{n.d(t,{g:()=>_});n(40065),n(43379),n(34192),n(4865);var r=n(30758),i=n(3074),a=n.n(i),o=n(61616),s=n(53731),l=n(13534),c=n(93493),u=n(69400),d=n(80021),p=n(52542),m=n(13734),v=(n(7651),n(30456),n(26701),n(25550),n(37417),n(11737),n(51691),n(702),n(5672),n(88856),n(51565),n(15342),n(18316),n(64539)),h=n(76348),f=n(85673),g=n(33233),x=n(67963),y=n(93195),b=n(92107),j=n(31019),k=n(77809),w=n(86070),P=function(e){var t=e.onSelect,n=(0,j.a)(),r=n.viewMode,i=n.setViewMode;return(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(g.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),k.i.map((function(e,n){var a=e.value,o=e.icon,s=e.text;return(0,w.jsx)(x.D,{role:"menuitemradio","aria-checked":r===a,divider:n===k.i.length-1?"after":void 0,autoClose:!1,leadingIcon:o(),onClick:function(){i(a),null==t||t(a)},children:s()},a)}))]})},C=["heading","selected","onSelect","options","enableViewModeMenu","onSelectViewMode","sortOrder"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,p.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t,n=e.heading,r=e.selected,i=e.onSelect,a=e.options,o=e.enableViewModeMenu,s=void 0!==o&&o,l=e.onSelectViewMode,c=e.sortOrder,u=(0,m.A)(e,C);c&&(c===y.H.ASC||c===y.H.SECONDARY_ASC?t=v.U:c!==y.H.DESC&&c!==y.H.SECONDARY_DESC||(t=h.R));return(0,w.jsxs)(f.W,R(R({getInitialFocusElement:function(e){return null==e?void 0:e.querySelector('[aria-checked="true"]')}},u),{},{children:[n?(0,w.jsx)(g.y,{children:n}):null,a.map((function(e,n){var a=e.key,o=e.value;return(0,w.jsx)(x.D,{role:"menuitemradio","aria-checked":a===r.key,CheckedIcon:t,onClick:function(){return i(a,n)},children:o},a)})),s&&(0,w.jsx)(P,{onSelect:l})]}))},A=n(44002),N=n(12574),O=n(79916);const I="x-sortBox-sortDropdown",B="cvTLPmjt6T7M85EKcB8w",D="SbDHY3fVADNJ4l9qOLQ2";var F=function(e){var t=e.isOpen,n=e.className;return t?(0,w.jsx)(o.J,{size:"small","aria-hidden":"true",className:n}):(0,w.jsx)(s.y,{size:"small","aria-hidden":"true",className:n})},_=function(e){var t=e.heading,n=e.options,i=e.selected,o=e.onSelect,s=e.sortOrder,p=e.variant,m=void 0===p?"bodySmall":p,v=e.semanticColor,h=e.disabled,f=e.onClick,g=e.ariaLabel,x=e.enableViewModeMenu,y=void 0!==x&&x,b=(0,c.NC)(O.mA)&&y,j=(0,A.a)().viewMode;i||(i=null==n?void 0:n[0]);var P=k.i.find((function(e){return e.value===j}))||k.i[0],C=(0,r.useMemo)((function(){return"sortboxlist-".concat(a().create().hex)}),[]),S=(0,N.r)(u.d,{}),R=S.spec,_=S.logger;return(0,w.jsx)(d.b,{menu:(0,w.jsx)(E,{selected:i,options:n,onSelect:function(e,t){o(e,t);var n=R.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();_.logInteraction(n)},sortOrder:s,heading:t,enableViewModeMenu:b,onSelectViewMode:function(e){var t=R.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();_.logInteraction(t)},id:C}),children:function(e,t,n){var r;return(0,w.jsxs)("button",{className:I,onClick:function(e){h||(null==f||f(e),t(e))},ref:n,type:"button","aria-label":g,role:"combobox","aria-controls":C,"aria-expanded":e,children:[(0,w.jsx)(l.E,{"data-sortbox-label":!0,semanticColor:v,variant:m,className:B,children:(null===(r=i)||void 0===r?void 0:r.value)||(b?P.text():"")}),b?P.icon():(0,w.jsx)(F,{isOpen:e,className:D})]})}})}},92769:(e,t,n)=>{n.d(t,{N:()=>v});n(83234),n(30456),n(25550),n(43379),n(34192),n(88856),n(15342);var r=n(97500),i=n.n(r),a=n(30758),o=n(89255),s=n(93051);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",u="w4ZoklZWkrsyrVA34vI8";var d=n(86070),p=function(e){var t=e.title,n=e.uri,r=e.className,l=e.onClick,p=e.position,m=(0,a.useCallback)((function(e){null==l||l(e,{uri:n,position:p})}),[l,p,n]);return(0,d.jsx)(s.N,{"aria-label":t,className:i()(c,u,r),to:n,onClick:m,children:(0,d.jsx)(o.v,{as:"span",children:t})})};function m(e){return!!e.uri&&!!e.title}var v=function(e){var t=e.topics,n=e.className,r=e.onClick;return(0,d.jsx)("div",{className:i()(l,n),children:t.filter(m).map((function(e,t){var n="".concat(e.uri,"-").concat(t);return(0,d.jsx)(p,{title:e.title,uri:e.uri,position:t,onClick:r},n)}))})}},81530:(e,t,n)=>{n.d(t,{u:()=>r});n(68216);function r(e){var t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}},12936:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(86295),i=n(87718),a=new r.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),o=function(e,t){return(0,i.I)(a,e,t)}},34412:(e,t,n)=>{n.d(t,{K:()=>r});var r=function(e){return"NotFound"!==(null==(t=e)?void 0:t.__typename)&&"GenericError"!==(null==t?void 0:t.__typename)&&"Podcast"===e.__typename;var t}},86628:(e,t,n)=>{n.d(t,{w:()=>m});var r=n(62822),i=n(93091),a=n.n(i),o=(n(16347),n(18653),n(30758)),s=n(74002),l=n(92107),c=n(62774),u=n(57261),d=n(5958),p=n(12574),m=function(e){var t=e.uri,n=e.isBook,i=(0,d.p)("prerelease"),m=i.add,v=i.remove,h=(0,u.o)("prerelease",[t]).at(0),f=(0,c.d)().enqueueSnackbar,g=(0,p.r)(s.k,{data:{uri:t}}),x=g.spec,y=g.logger;return{isPreSaved:h,addPresave:(0,o.useCallback)((0,r.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logInteraction(x.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:t,itemToBePresaved:t,contextUri:t})),e.next=3,m(t);case 3:f(n?l.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):l.Ru.get("web-player.prerelease.album_feedback_presaved"));case 4:case"end":return e.stop()}}),e)}))),[m,f,n,y,x,t]),removePresave:(0,o.useCallback)((0,r.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logInteraction(x.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:t,itemToBeRemovedFromPresaved:t,contextUri:t})),e.next=3,v(t);case 3:case"end":return e.stop()}}),e)}))),[y,v,x,t])}}},86906:(e,t,n)=>{n.r(t),n.d(t,{default:()=>ti});n(47994);var r=n(30758),i=n(44286),a=n(93493),o=n(78371),s=n(86308),l=n(80366),c=n(92107),u=n(45625),d=n(44206),p=n(52542),m=n(62822),v=n(93091),h=n.n(v),f=(n(83234),n(79024),n(43379),n(2823),n(97460),n(29426),n(93577),n(54520),n(91531),n(93678),n(34145),n(97500)),g=n.n(f),x=n(88677),y=n(13534),b=n(63666),j=n(83920),k=n(61548),w=n(79564),P=n(80021),C=n(65679),S=n(92769),R=n(14955),E=n(37165),A=n(99365),N=n(6305),O=n(64348),I=n(18180),B=n(44113),D=n(46198),F=n(42217),_=n(16920),M=n(97724);const L="Bns6t3CfzQaCA4DLRzPQ",T="zGFcpmwFVhJxRDXUXoXA",U="_FLyhB96W9W0msGYNWUl",z="Si5iVyGLDY7mGWH_U2wA",V="HLBtD6mJyIB9EeOzDtXE",H="DRO0ur1WXqpK9BelywtE",W="vtlBEOtYFwv1cxC32ccc",G="Pq_DZj9ECxwTsK8pBxe0",K="bu7LVUNyDPF_FcrKMv74",q="bYP2npsc_CeChpMGcr6g",X="Ux7aVnDYlwojS4AmkSLg";var Y=n(86070),Q=function(e){return e.SMALL="small",e.LARGE="large",e}({}),J=function(e){var t=e.images,n=e.title,r=e.contentRating,i=e.duration,a=e.moreButton,o=e.onClick,s=e.onContextMenu,l=e.onTouchStart,c=e.onTouchEnd,u=e.isPlaying,d=e.isActive,m=e.size,v=e.className,h=e.label,f=e.isPlayable,x=void 0===f||f,y=m===Q.LARGE?"medium":"small",b=(0,M.b)({contentRating:r}).badges;return(0,Y.jsxs)("div",{"data-testid":"trailer-component",className:g()(L,v,(0,p.A)({},T,d)),onContextMenu:s,onTouchStart:l,onTouchEnd:c,children:[(0,Y.jsxs)("div",{className:z,children:[(0,Y.jsxs)("div",{className:G,children:[(0,Y.jsx)(I.b,{type:_.c.EPISODE,title:n,className:g()(W,(0,p.A)((0,p.A)({},X,m===Q.SMALL),q,m===Q.LARGE)),size:B.Qe.SIZE_56,images:t,shape:I.u.ROUNDED_CORNERS}),(0,Y.jsx)("div",{className:K,children:(0,Y.jsx)(A.R,{"data-testid":"trailer-play-button",version:E.H4.transparent,size:y,isPlaying:u,onClick:o,disabled:!x})})]}),(0,Y.jsxs)("div",{children:[(0,Y.jsx)("div",{className:V,children:(0,Y.jsx)(R.Z,{dir:"auto",className:U,variant:"balladBold",children:n})}),(0,Y.jsxs)("div",{className:H,children:[(0,Y.jsx)(N.E,{text:h}),b.explicit&&(0,Y.jsx)(O.U,{}),b.nineteen&&(0,Y.jsx)(D.q,{}),(0,Y.jsx)(R.Z,{dir:"auto",variant:"mesto",children:(0,Y.jsx)(F.d,{durationMs:i})})]})]})]}),a]})},Z=(n(34518),n(10169)),$=n(8574),ee=n(70566),te=function(e){var t=e.htmlDescription,n=e.narrators,i=e.spec,a=e.isPreRelease,o=(0,$.W)(),s=(0,ee.s)(),l=(0,r.useCallback)((function(e){o({intent:"expand-description",type:"click"});var t=i.seeMoreButtonFactory();s.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[s,o,i]);return(0,Y.jsxs)(Y.Fragment,{children:[n.length?(0,Y.jsx)(y.E,{as:"p",variant:"bodyMedium",children:c.Ru.get("web-player.audiobooks.narratedByX",n.join(c.Ru.getSeparator()))}):null,t&&(0,Y.jsx)(Z.N,{maxLines:4,content:t,htmlContent:t,onExpanded:l,isOpen:a||null})]})},ne=n(12341),re=n(40927),ie=n(69045),ae=n(99217),oe=n(78988),se=n(48035),le=n(41366),ce=n(86533),ue=n(91922),de=n(78366),pe=n(5769),me=n(24119);const ve="myIGgR3zdb9nFuJ1pXYl",he="e74TmRHu_W1yZHspTBmR",fe="rrcjfInomKt1lXRDRdR8",ge="Wj9mxFJDtPdiMcUtS1te",xe="SCwESjClY3m_9JlV2L7S",ye="Yoa_yG2jhELT4w9wJpHf",be="xsw253oiwmIAafVfjl1J",je="JPqnsg5dgBTzsEoClLmD",ke="bhuRgaz03VXMf0mOG3Q2",we="GP_qgmZlmL0CJ9r22AD9",Pe="bilV2VquzmEnhV4d97Tc",Ce="caqddwmUJf4ix6GI84NX";var Se=function(e){var t,n=e.explicit,r=e.durationMs,i=e.publishDate,a=e.preReleaseEndDateTime,o=e.isPreRelease,s=e.uri,l=e.isPlaying,u=(0,pe.p)(s),d=(0,de.z)(s).isMarkedAsFinished;return o&&a?t=c.Ru.get("web-player.prerelease.releases_on",{date:c.Ru.formatDate(a)}):!o&&i&&(t=c.Ru.formatDate(i)),(0,Y.jsxs)("div",{className:ke,children:[n&&(0,Y.jsx)(O.U,{className:Ce}),(0,Y.jsxs)("div",{className:we,children:[t&&(0,Y.jsx)(y.E,{variant:"bodySmall",className:Pe,children:t}),r?(0,Y.jsxs)(Y.Fragment,{children:[null!=u&&u.playPositionMilliseconds?(0,Y.jsx)(y.E,{variant:"bodySmall",className:Pe,children:(0,Y.jsx)(F.d,{durationMs:r})}):null,(0,Y.jsx)(me.j,{isPlaying:l,fullyPlayed:d,durationMs:r,position:null==u?void 0:u.playPositionMilliseconds})]}):null]})]})},Re=n(11854),Ee=n(53489),Ae=(n(184),n(42486),(0,r.createContext)(null)),Ne=function(e){var t=e.children,n=e.isPreRelease,i=(0,r.useState)(!n),a=(0,ne.A)(i,2),o=a[0],s=a[1],l=(0,r.useMemo)((function(){return{isPreRelease:n,isCountdownFinished:o,setCountdownFinished:function(){return s(!0)}}}),[n,o,s]);return(0,Y.jsx)(Ae.Provider,{value:l,children:t})};function Oe(){var e=(0,r.useContext)(Ae);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var Ie=n(68549);const Be="nz8Wc80RAtdAb3yU9FxM";var De=function(e){var t=e.uri,n=Oe().isCountdownFinished,r=(0,Ie.W)(t).invalidateCache;return(0,Y.jsx)("div",{className:Be,children:n?(0,Y.jsx)(Re.$,{onClick:r,children:c.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,Y.jsx)(Ee.v,{uri:t,isBook:!0})})},Fe=n(94823),_e=n(15057),Me=n(62774),Le=n(86429),Te=n(59961);const Ue="NQAShVY0o7RQ2bCTDSkw";function ze(e){var t,n=e.uri,r=e.price,i=e.size,a=e.spec,o=e.logger,s=e.onPlayback,l=(0,Me.d)().enqueueSnackbar,u=(0,Le.V)(),d=0===(null==r||null===(t=r.finalPrice)||void 0===t?void 0:t.amount),p=d?a.getButtonFactory({uri:n}):a.buyButtonFactory({uri:n}),v=(0,_e.YQ)((0,m.A)(h().mark((function e(){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.logInteraction(p.hitShowPaywall({paywalledItem:n})),!u){e.next=4;break}return s(),e.abrupt("return");case 4:if(e.prev=4,null==r||!r.finalPrice){e.next=10;break}return e.next=8,(0,Te.S)({show_uri:n,currency:r.finalPrice.currency,price:r.finalPrice.amount});case 8:e.next=11;break;case 10:l(c.Ru.get("error.generic"));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),l(c.Ru.get("error.generic"));case 16:s();case 17:case"end":return e.stop()}}),e,null,[[4,13]])}))),2e3,{leading:!0,trailing:!1});return(0,Y.jsx)(Re.$,{size:i,className:Ue,style:{flexShrink:0},onClick:v,children:d?c.Ru.get("web-player.audiobooks.buyFree"):c.Ru.get("web-player.audiobooks.buy")})}var Ve=function(e){var t=e.uri,n=e.isLocked,r=e.price,i=e.isPlaying,a=e.isConsumptionCapped,o=e.onPlayback,s=e.logger,l=e.spec,c=e.size,u=void 0===c?"large":c;return n&&!a?(0,Y.jsx)(ze,{size:u,uri:t,price:r,logger:s,spec:l,onPlayback:o}):(0,Y.jsx)(Fe.D,{size:u,isPlaying:i,uri:t,onClick:o})},He=n(24787),We=n(54249),Ge=n(89923),Ke=n(99888),qe=n(87700),Xe=n(12574);const Ye="8px";var Qe=r.memo((function(e){var t=e.backgroundColor,n=e.uri,i=e.name,a=e.isPlaying,o=e.togglePlay,s=e.isLocked,l=e.isSaved,u=e.consumptionCapExplanation,d=e.price,p=e.spec,m=e.isExplicit,v=e.publishDate,h=e.preReleaseEndDateTime,f=e.duration,g=(0,Ke.A)(n,l),y=(0,ne.A)(g,2),b=y[0],j=y[1],w=!(0,Ge.n)(),C=Oe().isPreRelease,S=(0,x.wA)(),R=(0,$.W)(),E=(0,ee.s)(),A=(0,He.d$)(),N=(0,Xe.r)(re.e,{data:{uri:n}}),O=N.spec,I=N.logger;(0,r.useEffect)((function(){A&&I.logImpression(O.impression())}),[A,I,O]);var B=(0,r.useCallback)((function(){R({targetUri:n,intent:b?"unsave":"save",type:"click"});var e=p.saveToLibraryButtonFactory();b?E.logInteraction(e.hitUnfollow({itemToBeUnfollowed:n})):(E.logInteraction(e.hitFollow({itemToBeFollowed:n})),A&&I.logInteraction(O.hitFollow({itemToBeFollowed:n}))),j(!b)}),[R,n,b,p,j,E,A,I,O]),D=(0,r.useCallback)((function(e,t){var r=p.downloadButtonFactory();u?S((0,k._3)(u)):t===qe.NV.ADD?E.logInteraction(r.hitDownload({itemToDownload:n})):t===qe.NV.REMOVE?E.logInteraction(r.hitRemoveDownload({itemToRemoveFromDownloads:n})):t===qe.NV.NO_PERMISSION&&E.logInteraction(r.hitUiReveal())}),[u,S,E,p,n]),F=(0,r.useCallback)((function(){var e=p.contextButtonFactory().hitUiReveal();E.logInteraction(e)}),[E,p]),_=(0,We.j)(),M=!!u,L=!s&&!M;return(0,Y.jsxs)(ie.E,{backgroundColor:t,style:{"--action-bar-padding-bottom":Ye},children:[(0,Y.jsx)(ae.S,{testId:"book-action-bar-metadata",children:(0,Y.jsx)(Se,{explicit:m,publishDate:v,preReleaseEndDateTime:h,durationMs:f,isPreRelease:C,uri:n,isPlaying:a})}),(0,Y.jsxs)(ae.S,{children:[C&&(0,Y.jsx)(De,{uri:n}),!C&&(0,Y.jsx)(Ve,{uri:n,isLocked:s,isConsumptionCapped:M,price:d,isPlaying:a,onPlayback:o,logger:E,spec:p,size:_}),!C&&(0,Y.jsx)(ue.e,{children:(0,Y.jsx)(oe.M,{isAdded:b,onClick:B,disabled:w,size:_,isAudiobook:!0,condensed:!0})},"follow-button"),(0,Y.jsx)(se.I,{uri:n,onClick:D,size:_,canDownload:L}),(0,Y.jsx)(P.b,{menu:(0,Y.jsx)(ce.p,{uri:n,isPreRelease:C}),children:(0,Y.jsx)(le.e,{label:c.Ru.get("more.label.context",i),onClick:F,size:_})})]})]})})),Je=n(83643),Ze=n(29077),$e=n(26596),et=n(9754),tt=n(26552),nt=n(33598),rt=n(17067),it=n(85925),at=n(2238),ot=n(74351),st=n(54006),lt=n(88420),ct=n(47795),ut=n(60455);const dt="BBK_i9SHovXTLVjas0kc";var pt=r.memo((function(e){var t=e.coverArt,n=e.name,r=e.authorName,i=e.uri,a=e.backgroundColor,o=e.isPlaying,s=e.togglePlay,l=e.isLocked,u=e.price,d=e.isConsumptionCapped,p=e.logger,m=e.spec,v=e.preReleaseEndDateTime,h=(0,ut.y)(),f=h===ct.E.SMALL||h===ct.E.XSMALL,g=Oe(),x=g.isPreRelease,b=g.setCountdownFinished,j=x&&f,k=(0,Y.jsx)(ce.p,{uri:i});return(0,Y.jsxs)(et.z,{backgroundColor:a,size:x?et.K.XLARGE:et.K.DEFAULT,children:[(0,Y.jsxs)(rt.h,{children:[x&&(0,Y.jsx)(De,{uri:i}),!x&&(0,Y.jsx)(Ve,{uri:i,isLocked:l,price:u,isPlaying:o,isConsumptionCapped:d,onPlayback:s,logger:p,spec:m,size:"medium"}),(0,Y.jsx)(Je.h,{menu:k,children:(0,Y.jsx)(it.X,{text:n,dragUri:i,dragLabel:n})})]}),!j&&(0,Y.jsx)(Je.h,{menu:k,children:(0,Y.jsx)(tt.K,{images:t,name:n,dragUri:i,dragMimeType:$e.fl.AUDIOBOOKS,shape:I.u.SQUARE})}),(0,Y.jsxs)(nt.Y,{children:[(0,Y.jsx)(ot.B,{children:c.Ru.get("web-player.audiobooks.audiobook")}),(0,Y.jsx)(Je.h,{menu:k,children:(0,Y.jsx)(lt.mm,{canEdit:!1,onClick:function(){},scaleAtMinWidth:lt.tw,dragUri:i,dragMimeType:$e.fl.AUDIOBOOKS,dragLabel:n,children:n})}),x?(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(at.X,{children:(0,Y.jsx)(y.E,{className:dt,variant:"bodySmallBold","data-testid":"entityAuthor",children:r})}),v&&(0,Y.jsx)(Ze.G,{targetDate:v,images:j?t:[],imageTitle:n,onComplete:b})]}):(0,Y.jsx)(st.g,{children:r})]})]})}));const mt="pwjwUMaZVoJ0wBcQlIDf";var vt=r.memo((function(e){var t=e.price;return t.finalPrice&&t.finalListPrice?0===t.finalPrice.amount&&0===t.finalListPrice.amount?(0,Y.jsxs)("div",{className:mt,children:[(0,Y.jsx)(y.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:c.Ru.get("audiobook.freePriceDescription")}),(0,Y.jsx)(y.E,{variant:"bodySmall",children:c.Ru.get("audiobook.freePriceExplanation")})]}):(0,Y.jsxs)("div",{className:mt,children:[(0,Y.jsx)(y.E,{variant:"titleSmall",semanticColor:"textBase",children:t.finalPrice.formattedPrice}),t.finalPrice.amount<t.finalListPrice.amount&&(0,Y.jsx)(y.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:c.Ru.get("web-player.audiobooks.retailPrice",(0,Y.jsx)("span",{style:{textDecoration:"line-through"},children:t.finalListPrice.formattedPrice}))})]}):null})),ht=(n(30456),n(25550),n(34192),n(88856),n(15342),n(33814)),ft=n(46366),gt=n(58114);const xt="zh_eG8LWfdbVLacLrMEF",yt="qABKHTHkEdmK0fa7KmIv",bt="FgvV0kPK4h_EmOhrpT2d",jt="oiFRsQXb5nSBVhMVOLLG",kt="jzZ2lXuiIoAWDd7iOmJI",wt="Hv2cy05G19OhWRK4OHPv",Pt="NzouBpMYjqaK9b0f9dUk",Ct="FlMjXsCakgb_O4r1A5sA";var St=r.memo((function(e){var t=e.name,n=e.duration,i=e.uri,o=e.bookName,s=e.usePlayContextItem,l=e.isChapterLocked,u=e.isPlayable,d=e.resumePositionMs,m=e.isFullyPlayed,v=e.isExplicit,h=e.is19PlusOnly,f=e.spec,b=e.index,j=e.consumptionCapExplanation,S=(0,r.useRef)(d),R=s({uri:i}),E=R.isPlaying,N=R.togglePlay,I=R.isActive,B=(0,ee.s)(),F=(0,Le.V)(),_=(0,x.wA)(),M=(0,a.NC)(gt.HEU,{loadingValue:!1}),L=function(e,t,n,i){var a=(0,r.useRef)(null),o=(0,r.useState)(i),s=(0,ne.A)(o,2),l=s[0],c=s[1],u=(0,ht.S)(1e4,(function(t){var n;return(null==t||null===(n=t.item)||void 0===n?void 0:n.uri)===e})),d=(0,ne.A)(u,1)[0];return(0,r.useEffect)((function(){n&&(a.current=d)}),[n,d]),(0,r.useEffect)((function(){!n&&a.current&&t.milliseconds<=a.current+1e4&&c(!0)}),[n,t.milliseconds]),(0,r.useEffect)((function(){c(i)}),[i]),{position:n?d:null,isFullyPlayed:l}}(i,n,E,m),T=L.position,U=L.isFullyPlayed;null!==T&&(S.current=T);var z=(0,r.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]),V=(0,$.W)(),H=(0,r.useCallback)((function(e){if(z(e),j&&!F&&M)_((0,k._3)(j));else{var t=f.chapterBlockFactory({position:b,uri:i}).playButtonFactory();if(l)V({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),B.logInteraction(t.hitShowPaywall({paywalledItem:i}));else{var n=(0,ft.$I)({isPlaying:E,isActive:I,spec:t,logger:B,uri:i});N({loggingParams:n})}}}),[j,_,b,M,I,F,l,E,B,V,f,z,N,i]),W=(0,r.useCallback)((function(){var e=f.chapterBlockFactory({position:b,uri:i}).secondaryHitUiReveal();B.logInteraction(e)}),[b,B,f,i]),G=(0,r.useCallback)((function(e){z(e);var t=f.chapterBlockFactory({position:b,uri:i}).contextMenuFactory().hitUiReveal();B.logInteraction(t)}),[b,B,f,z,i]),K=(0,r.useMemo)((function(){return!(l||j)}),[j,l]),q=(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("hr",{className:bt,"aria-hidden":!0}),(0,Y.jsxs)("div",{className:xt,onDoubleClick:function(e){V({targetUri:i,intent:"play",type:"double-click"}),H(e)},children:[(0,Y.jsx)(y.E,{as:"h2",variant:"bodyMediumBold",className:g()(wt,(0,p.A)({},yt,I)),semanticColor:"textBase",children:t}),(0,Y.jsxs)("div",{className:Pt,children:[(0,Y.jsx)(A.R,{size:"small",version:A.H.secondary,onClick:H,isPlaying:E,ariaPlayLabel:c.Ru.get("tracklist.a11y.play",t,o),ariaPauseLabel:c.Ru.get("tracklist.a11y.pause",t,o),locked:l&&!j,disabled:!u&&!(l||j)}),v&&(0,Y.jsx)(O.U,{fullText:!0}),h&&(0,Y.jsx)(D.q,{size:16}),(0,Y.jsx)("div",{className:Ct,children:(0,Y.jsx)(me.j,{isPlaying:E,fullyPlayed:U,durationMs:n.milliseconds,resumePositionMs:S.current,position:null!=T?T:void 0})})]}),K?(0,Y.jsx)(P.b,{menu:(0,Y.jsx)(C.r,{uri:i}),children:(0,Y.jsx)(w.e,{className:kt,size:w.M.sm,label:c.Ru.get("more.label.context",t),onClick:G,condensedAll:!0})}):null]})]});return K?(0,Y.jsx)(Je.h,{menu:(0,Y.jsx)(C.r,{uri:i}),onShow:W,children:(0,Y.jsx)("div",{className:jt,children:q})}):(0,Y.jsx)("div",{className:jt,children:q})})),Rt=n(26173),Et=n(96971),At=n(5248),Nt=n(19807);const Ot="XzRW0BrBLoXKWET5f8m4",It="ooqITYCPJKua4e5yv8_9",Bt="zN8lTnSnAUSRAMPb7XYV",Dt="llVyicNXe8z0QAnoRur1",Ft="fCrjgF2UgDUWjtqWls4Q",_t="CLnKy_BRVtIluLfBWy5t",Mt="RZa0qnXymlZCoGOdE03d",Lt="RFXE57hUzWvvK4_7GX13",Tt="ALQqkJiR2lZOSYvhHesh",Ut="BQwrI2BbKK4n451iu2QC",zt="VYLq_YaQVNISHPQOu2af";var Vt=r.memo((function(e){var t=e.name,n=e.duration,i=e.uri,o=e.bookName,s=e.usePlayContextItem,l=e.isChapterLocked,u=e.isPlayable,d=e.resumePositionMs,m=e.isFullyPlayed,v=e.isExplicit,h=e.is19PlusOnly,f=e.spec,b=e.index,j=e.consumptionCapExplanation,S=(0,r.useRef)(d),R=s({uri:i}),E=R.isPlaying,N=R.togglePlay,I=R.isActive,B=(0,ee.s)(),_=(0,Le.V)(),M=(0,x.wA)(),L=(0,a.NC)(gt.HEU,{loadingValue:!1}),T=(0,At.o)((function(e){var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===i){var n,r=null!==(n=(0,Nt.s)(e))&&void 0!==n?n:0;return S.current=r,r}return 0})),U=(0,r.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]),z=(0,$.W)(),V=(0,r.useCallback)((function(e){if(U(e),j&&!_&&L)M((0,k._3)(j));else{var t=f.chapterBlockFactory({position:b,uri:i}).playButtonFactory();if(l)z({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),B.logInteraction(t.hitShowPaywall({paywalledItem:i}));else{var n=(0,ft.$I)({isPlaying:E,isActive:I,spec:t,logger:B,uri:i});N({loggingParams:n})}}}),[j,M,b,L,I,_,l,E,B,z,f,U,N,i]),H=(0,r.useCallback)((function(){var e=f.chapterBlockFactory({position:b,uri:i}).secondaryHitUiReveal();B.logInteraction(e)}),[b,B,f,i]),W=(0,r.useCallback)((function(e){U(e);var t=f.chapterBlockFactory({position:b,uri:i}).contextMenuFactory().hitUiReveal();B.logInteraction(t)}),[b,B,f,U,i]),G=!(l||j),K=(0,Y.jsx)(Rt.d,{className:g()((0,p.A)({},It,I)),children:t}),q=(0,Y.jsxs)("div",{className:_t,children:[v&&(0,Y.jsx)(O.U,{fullText:!0}),h&&(0,Y.jsx)(D.q,{size:16}),(0,Y.jsxs)("div",{className:Mt,children:[S.current?(0,Y.jsx)(y.E,{variant:"bodySmall",className:zt,children:(0,Y.jsx)(F.d,{durationMs:n.milliseconds})}):null,(0,Y.jsx)(me.j,{isPlaying:E,fullyPlayed:m,durationMs:n.milliseconds,resumePositionMs:S.current,position:E?T:void 0})]})]}),X=(0,Y.jsxs)("div",{className:Tt,children:[(0,Y.jsx)("div",{className:Ut,children:G?(0,Y.jsx)(P.b,{menu:(0,Y.jsx)(C.r,{uri:i}),children:(0,Y.jsx)(w.e,{className:Ft,size:w.M.xs,label:c.Ru.get("more.label.context",t),onClick:W})}):null}),(0,Y.jsx)("div",{className:Lt,children:(0,Y.jsx)(A.R,{size:"small",version:A.H.secondary,onClick:V,isPlaying:E,ariaPlayLabel:c.Ru.get("tracklist.a11y.play",t,o),ariaPauseLabel:c.Ru.get("tracklist.a11y.pause",t,o),locked:l&&!j,disabled:!u&&!(l||j)})})]}),Q=(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)("hr",{className:Bt,"aria-hidden":!0}),(0,Y.jsx)(Et.v,{id:"chapter-".concat(b),title:K,body:q,footer:X,onDoubleClick:function(e){z({targetUri:i,intent:"play",type:"double-click"}),V(e)},className:Ot})]});return G?(0,Y.jsx)(Je.h,{menu:(0,Y.jsx)(C.r,{uri:i}),onShow:H,children:(0,Y.jsx)("div",{className:Dt,children:Q})}):(0,Y.jsx)("div",{className:Dt,children:Q})})),Ht=n(38392),Wt=n(10789);var Gt=n(53670);var Kt=function(e){var t=e.bookUri,n=e.bookName,i=e.sampleUri,o=e.isFinishedUnlockingJourney,s=e.usePlayContextItem,l=e.spec,c=e.consumptionCapExplanation,u=function(e,t){var n=(0,Wt.T)(),i=(0,r.useCallback)(function(){var r=(0,m.A)(h().mark((function r(i,a){return h().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.getBookContents(e,{offset:i,limit:a,doRefreshSubscription:t}));case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),[t,n,e]);return i}(t,o),d=(0,r.useRef)(!1),p=(0,r.useRef)(0),v=(0,a.NC)(gt.cKd,{loadingValue:!1}),f=(0,de.z)(t).isMarkedAsFinished,g=(0,r.useState)([]),x=(0,ne.A)(g,2),y=x[0],b=x[1],j=(0,r.useCallback)((function(e){return(null==e?void 0:e.uri)===i}),[i]),k=(0,r.useCallback)((function(e){return function(e){return null!==e}(e)&&!j(e)}),[j]),w=(0,r.useCallback)((function(){u&&(d.current||null===p.current||(d.current=!0,u(p.current,50).then((function(e){d.current=!1,p.current=e.nextOffset,e.items.length>0&&b((function(t){return t.concat(e.items.filter(k))}))}))))}),[u,k]);return(0,r.useEffect)((function(){p.current=0,b([])}),[t]),(0,Y.jsx)("ul",{children:(0,Y.jsx)(Ht._,{onReachBottom:w,triggerOnInitialLoad:!0,children:y.map((function(e,t){var r=e.name,i=e.duration,a=e.uri,o=e.playability.playable,u=e.playedState,d=u.playPositionMilliseconds,p=u.state,m=e.isExplicit,h=e.is19PlusOnly,g=p===Gt._w.Completed||f,x=function(e){var t,n,r;return!(null!==(t=e.playability)&&void 0!==t&&t.playable||(null===(n=e.playability)||void 0===n?void 0:n.reason)!==Gt.Uk.PaymentRequired&&(null===(r=e.playability)||void 0===r?void 0:r.reason)!==Gt.Uk.Anonymous)}(e);return v?(0,Y.jsx)(Vt,{name:r,duration:i,uri:a,bookName:n,usePlayContextItem:s,isPlayable:o,isChapterLocked:x,consumptionCapExplanation:c,resumePositionMs:d,isFullyPlayed:g,isExplicit:m,is19PlusOnly:h,spec:l,index:t},a):(0,Y.jsx)(St,{name:r,duration:i,uri:a,bookName:n,usePlayContextItem:s,isPlayable:o,isChapterLocked:x,consumptionCapExplanation:c,resumePositionMs:d,isFullyPlayed:g,isExplicit:m,is19PlusOnly:h,spec:l,index:t},a)}))})})},qt=n(83691),Xt=n(72346),Yt=n(84827),Qt=(n(76588),n(77894)),Jt=n(76999);const Zt="_yl4tOZxcpoUt28k6B8I",$t="lcJflizNrSwDM9yPNk6h",en="ret7iHkCxcJvsZU14oPY";var tn=function(e){var t,n,r,i=e.rating,a=e.className,o=e.onClick;if(!i)return null;var s=Boolean(null===(t=i.rating)||void 0===t?void 0:t.rating);return(0,Y.jsxs)("button",{className:g()(Zt,a),onClick:o,children:[(0,Y.jsx)(R.Z,{dir:"auto",variant:"mestoBold",children:null!==(n=i.averageRating)&&void 0!==n&&n.showAverage?c.Ru.formatNumber(i.averageRating.average,{maximumFractionDigits:1}):c.Ru.get("web-player.audiobooks.noRating")}),s?(0,Y.jsx)(Qt.j,{iconSize:16,className:g()($t)}):(0,Y.jsx)(Jt.a,{iconSize:16,className:g()($t)}),(null===(r=i.averageRating)||void 0===r?void 0:r.showAverage)&&(0,Y.jsxs)(R.Z,{variant:"mesto",className:g()(en),children:["(",c.Ru.formatNumberCompact(Number(i.averageRating.totalRatings)),")"]})]})},nn=n(35793),rn=n(79431),an=n(53724),on=n(81515),sn={shuffle:!1,repeat:an.p.REPEAT_NONE},ln=r.memo((function(e){var t,n,o,l,d,v=e.metadata,f=v.uri,R=v.coverArt,E=v.name,A=v.htmlDescriptionPlain,N=v.authorName,O=v.sample,I=v.narrators,B=v.rating,D=v.isExplicit,F=v.duration,M=v.copyrights,L=v.publishDate,T=v.price,U=v.isLocked,z=v.isSaved,V=v.consumptionCapExplanation,H=v.signifierText,W=v.resumeEpisodeLink,G=v.topics,K=v.isPreRelease,q=v.preReleaseEndDateTime,X=(0,i.zy)().search,Z=!!new URLSearchParams(X).get("isUnlockingAudiobook"),ee=!(!(0,nn.Z)(Z)||Z),ne=(0,Le.V)(),re=(0,Xt.H)(null===(t=R[0])||void 0===t?void 0:t.url),ie=(0,x.wA)(),ae=(0,$.W)(),oe=(0,a.NC)(gt.HEU,{loadingValue:!1}),se=(0,Xe.r)(b.U,{data:{uri:f,identifier:s.$h.PODCAST_SHOW_AUDIOBOOK}}),le=se.spec,ce=se.logger,ue=(0,Xe.r)(b.U,{data:{uri:f,identifier:s.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),de=ue.spec,pe=ue.logger,me=(0,Xe.r)(j.Y,{data:{uri:f,identifier:s.$h.PODCAST_SHOW_AUDIOBOOK}}),ke=me.spec,we=me.logger,Pe=(0,r.useMemo)((function(){return le.actionBarFactory()}),[le]),Ce=(0,r.useMemo)((function(){return de.aboutSectionFactory()}),[de]),Se=(0,r.useMemo)((function(){return le.chapterListFactory()}),[le]);(0,r.useEffect)((function(){ae({type:"view",intent:"audiobook"})}),[ae]),(0,r.useEffect)((function(){U&&we.logImpression(ke.impression())}),[ke,we,U]);var Re=(0,rn.P)({uri:f},{featureIdentifier:"audiobook"},sn),Ee=Re.isPlaying,Ae=Re.togglePlay,Oe=Re.usePlayContextItem,Ie=Re.isActive,Be=Re.triggerPlay,De=(0,rn.P)({uri:null!==(n=null==O?void 0:O.uri)&&void 0!==n?n:"",pages:[{items:[{uri:null!==(o=null==O?void 0:O.uri)&&void 0!==o?o:"",uid:null!==(l=null==O?void 0:O.uri)&&void 0!==l?l:"",type:_.c.CHAPTER,provider:null,metadata:K?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},sn),Fe=De.togglePlay,_e=De.isPlaying,Me=De.isActive,Te=Ee&&!_e,Ue=Ie&&!Me,ze=(0,r.useCallback)((0,m.A)(h().mark((function e(){var t,n;return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=le.actionBarFactory().playButtonFactory(),!V||ne||!oe){e.next=5;break}return ce.logInteraction(t.hitShowPaywall({paywalledItem:f})),ie((0,k._3)(V)),e.abrupt("return");case 5:if(!U||ne){e.next=7;break}return e.abrupt("return");case 7:ne?Ae():(n=(0,ft.$I)({isPlaying:Te,isActive:Ue,spec:t,logger:ce,uri:f}),Ue?Ae({loggingParams:n}):Be({skipTo:W?{uri:W}:void 0,loggingParams:n}));case 8:case"end":return e.stop()}}),e)}))),[le,V,ne,oe,U,ce,f,ie,Ae,Te,Ue,Be,W]),Ve=(0,r.useCallback)((function(){null!=O&&O.uri&&(ae({targetUri:O.uri,intent:_e?"play":"pause",type:"click"}),Fe())}),[_e,ae,Fe,null==O?void 0:O.uri]),He=(0,r.useCallback)((function(){var e=Ce.ratingButtonFactory().hitUiReveal();pe.logInteraction(e),ie((0,k.eH)(f,v))}),[Ce,ie,v,pe,f]),We=(0,ut.y)(),Ge=U&&!V&&T;return(0,Y.jsx)("section",{className:ve,children:(0,Y.jsxs)(Ne,{isPreRelease:K,children:[(0,Y.jsx)(u.Q,{children:(0,on.hV)({showOrAudiobookName:E,type:"Audiobook"})}),(0,Y.jsx)(qt.c,{artistOrShow:N,title:E,uri:f,entityType:qt.p.AUDIOBOOK}),(0,Y.jsx)(pt,{name:E,authorName:N,uri:f,coverArt:R,backgroundColor:re,togglePlay:ze,isPlaying:Te,isLocked:U,isConsumptionCapped:!!V,price:T,logger:ce,spec:le.actionBarFactory(),preReleaseEndDateTime:q}),(0,Y.jsx)(Qe,{name:E,backgroundColor:re,uri:f,togglePlay:ze,isPlaying:Te,isLocked:U,isSaved:z,consumptionCapExplanation:V,isExplicit:D,duration:F,publishDate:L,preReleaseEndDateTime:q,price:T,spec:Pe}),(0,Y.jsxs)("div",{className:g()(he,"contentSpacing",(0,p.A)({},fe,We===ct.E.LARGE)),children:[(0,Y.jsxs)("div",{className:ge,children:[(0,Y.jsxs)("div",{className:je,children:[H&&(0,Y.jsx)(y.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:H}),!H&&Ge&&(0,Y.jsx)(vt,{price:T})]}),(0,Y.jsx)(te,{htmlDescription:A,narrators:I,spec:Ce,isPreRelease:null!=K&&K})]}),(0,Y.jsxs)("div",{className:xe,children:[(null==O?void 0:O.isPlayable)&&(0,Y.jsx)(J,{label:c.Ru.get("audiobook.page.sample"),images:O.coverArt,title:O.name,duration:O.duration.milliseconds,moreButton:U?null:(0,Y.jsx)(P.b,{menu:(0,Y.jsx)(C.r,{uri:O.uri}),children:(0,Y.jsx)(w.e,{})}),onClick:Ve,isPlaying:_e,isActive:Me,size:Q.LARGE,contentRating:null===(d=O.contentRating)||void 0===d?void 0:d.label,isPlayable:O.isPlayable}),!K&&(0,Y.jsx)("div",{className:ye,children:(0,Y.jsx)(tn,{rating:B,onClick:He})}),G.length>0&&(0,Y.jsx)(S.N,{topics:G})]}),(0,Y.jsxs)("div",{className:be,children:[!K&&(0,Y.jsx)(Kt,{bookUri:f,bookName:E,sampleUri:null==O?void 0:O.uri,isFinishedUnlockingJourney:ee,usePlayContextItem:Oe,spec:Se,consumptionCapExplanation:V},"".concat(f,"-").concat(U,"-").concat(!!V)),(0,Y.jsx)(Yt.Z,{copyrights:M})]})]})]})})})),cn=n(39107),un=n(45497),dn=n(64877),pn=n(81573),mn=function(e){var t=e.uri,n=e.name,i=e.isSaved,a=e.backgroundColor,o=e.spec,s=(0,ee.s)(),l=(0,$.W)(),u=!(0,Ge.n)(),d=(0,Ke.A)(t,i),p=(0,ne.A)(d,2),m=p[0],v=p[1],h=(0,He.d$)(),f=(0,Xe.r)(re.e,{data:{uri:t}}),g=f.spec,x=f.logger;(0,r.useEffect)((function(){h&&x.logImpression(g.impression())}),[h,x,g]);var y=(0,r.useCallback)((function(){l({targetUri:t,intent:m?"unsave":"save",type:"click"});var e=o.followButtonFactory();s.logInteraction(m?e.hitUnfollow({itemToBeUnfollowed:t}):e.hitFollow({itemToBeFollowed:t})),!m&&h&&x.logInteraction(g.hitFollow({itemToBeFollowed:t})),v(!m)}),[l,t,m,o,s,v,h,x,g]),b=(0,r.useCallback)((function(){s.logInteraction(o.contextButtonFactory().hitUiReveal())}),[s,o]),j=(0,We.j)();return(0,Y.jsx)(ie.E,{backgroundColor:a,children:(0,Y.jsxs)(ae.S,{children:[(0,Y.jsx)(ue.e,{children:(0,Y.jsx)(pn.W,{isFollowing:m,onClick:y,disabled:u})},"follow-button"),(0,Y.jsx)(P.b,{menu:(0,Y.jsx)(dn.H,{uri:t}),onShow:b,children:(0,Y.jsx)(le.e,{label:c.Ru.get("more.label.context",n),size:j})})]})})},vn=(n(7651),n(14551),n(79210),n(71963)),hn=(n(70750),n(70080)),fn=n(44407),gn=n(76149),xn=n(41243),yn=n(31490),bn=n(76672),jn=n(93051),kn=n(85726);const wn="BknvXMyUnN3fQCz8mvLI",Pn="slMInsl3HL9_02zHT22R";var Cn="40px",Sn=function(e){var t,n=e.leavebehinds;return 1===n.length&&(t=(0,Y.jsx)(y.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[0].advertiser})),2===n.length&&(t=c.Ru.get("podcast-ads.recent_ads_just_two",(0,Y.jsx)(y.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[0].advertiser}),(0,Y.jsx)(y.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[1].advertiser}))),n.length>2&&(t=c.Ru.get("podcast-ads.recent_ads_more_than_two",(0,Y.jsx)(y.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[0].advertiser}),(0,Y.jsx)(y.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[1].advertiser}))),(0,Y.jsxs)(y.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[c.Ru.get("podcast-ads.recent_ads_from"),t]})},Rn=function(e){var t,n=e.leavebehinds,i=e.uri,a=e.surface,o=(0,kn.vh)();if((0,r.useEffect)((function(){i&&n.length>0&&o.send((0,gn.x)({leavebehind_request_id:n[0].requestId,event:"event_viewed",event_reason:"viewed_on_".concat((0,xn.Fh)(a).toLowerCase()),surface:(0,xn.Fh)(a),uri:i}))}),[o,n,i,a]),0===n.length)return null;var s=null===(t=(0,l.o_)(i))||void 0===t?void 0:t.id,u=1===n.length?n[0].clickthroughUrl:(0,yn.q)(s),d=bn.Qd,p=n.length>d,m=n.length-(d-1),v=n.slice(0,p?d-1:d);return(0,Y.jsx)(jn.N,{to:u,pathname:n.length>1?u:void 0,state:{uri:i},className:Pn,onClick:function(){return o.send((0,gn.x)({leavebehind_request_id:n[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,xn.Fh)(a),uri:i}))},"data-testid":"show-leavebehinds-container",children:(0,Y.jsx)(Et.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,Y.jsxs)("div",{className:wn,"data-testid":"show-leavebehinds-logos-container",children:[v.map((function(e){return(0,Y.jsx)(hn.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:Cn,imageWidth:Cn},e.adId)})),p?(0,Y.jsx)(En,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:Cn,borderRadius:"4px",padding:"6px",children:(0,Y.jsx)(y.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:c.Ru.get("podcast-ads.show_more_indicator",m)})}):null]}),body:(0,Y.jsx)(Sn,{leavebehinds:n})})})},En=(0,vn.Ay)(fn.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),An=n(37903),Nn=xn.ui.SHOW_PAGE;function On(e){var t,n=e.uri,i=(0,An.A)({surface:Nn,uri:n}),a=i.data,o=i.error,s=i.getLeavebehinds;(0,r.useEffect)((function(){s()}),[s]);var l=(0,r.useMemo)((function(){return a?(0,bn.iT)(a,n):[]}),[null==a?void 0:a.requestId]);return o||null!=a&&a.leavebehindAds&&(null==a||null===(t=a.leavebehindAds)||void 0===t?void 0:t.length)<1?null:(0,Y.jsx)(Rn,{leavebehinds:l,uri:n,surface:Nn})}var In=n(53163),Bn=(n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(51565),n(18316),n(24260)),Dn=n(54769),Fn=n(12936),_n=n(37741),Mn=n(34412),Ln=n(1349),Tn=n(27124);function Un(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Un(Object(n),!0).forEach((function(t){(0,p.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Un(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Vn=function(e){var t,n=e.className,r=e.title,i=e.uri,a=(0,Fn.v)({uri:i}).data,o=null==a?void 0:a.seoRecommendedPodcast.totalCount,s=function(e){return(e||[]).filter((function(e){return(0,Mn.K)(e.data)}))}(null==a?void 0:a.seoRecommendedPodcast.items);if(0===o)return null;var u=null===(t=(0,l.o_)(i))||void 0===t?void 0:t.id;return(0,Y.jsx)(Ln.$,{className:n,title:r,seeAllLabel:c.Ru.get("shelf.see-all"),total:o,alwaysShowSeeAll:!0,seeAllUri:"spotify:app:show:".concat(u,":more-like-this"),children:null==s?void 0:s.map((function(e,t){var n,r,i,a=e.data;return(0,Y.jsx)(Bn.o,{uri:a.uri,name:a.name,images:(null===(n=a.coverArt)||void 0===n?void 0:n.sources)||[],publisher:null!==(r=null===(i=a.publisher)||void 0===i?void 0:i.name)&&void 0!==r?r:"",sharingInfo:null,mediaType:(0,Tn.w)(a.mediaType),index:t},a.uri)}))})},Hn=function(e){var t=(0,_n.D)({entityType:_.c.SHOW,componentType:"shelf",uri:e.uri});return(0,Y.jsx)(Dn.s,{onError:t,children:(0,Y.jsx)(Vn,zn({},e))})},Wn=n(22611),Gn=n(85093),Kn=(n(40122),n(89255)),qn=n(2378),Xn=n(65998),Yn=(0,r.createContext)({setSortState:function(){throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Qn=r.memo((function(e){var t=e.uri,n=e.children;return(0,Y.jsx)(Xn.E,{uri:t,defaultState:[],sortContext:Yn,localStorageKey:"showFilterParams-v2",children:n})})),Jn=(n(86746),n(28430),n(9582),n(71425),n(28912)),Zn={field:Jn.WY.PUBLISH_DATE,order:Jn.AX.DESC},$n={field:Jn.WY.PUBLISH_DATE,order:Jn.AX.ASC},er=$n,tr={episodic:Zn,sequential:$n,recent:Zn};function nr(){return new Map([[Zn,{key:"newest-to-oldest",value:c.Ru.get("shows.sort.newest-to-oldest")}],[$n,{key:"oldest-to-newest",value:c.Ru.get("shows.sort.oldest-to-newest")}]])}function rr(e){return tr[e]}var ir=(0,r.createContext)({setSortState:function(){throw new Error("setSortState must be used within a ShowSortProvider")},sortState:rr("recent")}),ar=function(e){var t=nr();return Array.from(t.keys()).some((function(t){return t.field===(null==e?void 0:e.field)}))},or=r.memo((function(e){var t=e.uri,n=e.children,r=e.defaultSortParam;return(0,Y.jsx)(Xn.E,{uri:t,defaultState:r,sortContext:ir,localStorageKey:"showSortParam",validator:ar,children:n})})),sr=n(27719),lr=n(53607),cr=n(88308);const ur="ysJC093hc_2ixGCy40_s",dr="mJP3Bamg3hN7S0p7XKfN",pr="clPqCj1L_KSfoVuTuP6x",mr="vqQmhCMZq7eUtTV7YYOQ";function vr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vr(Object(n),!0).forEach((function(t){(0,p.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var fr={totalCount:0,nextOffset:0,items:[]},gr=r.memo((function(e){var t,n,i,a,o,s,l,u=e.showMetadata,d=e.usePlayContextItem,p=(0,r.useContext)(ir).sortState,v=(0,r.useContext)(Yn).sortState,f=(t=u.uri,n=p,i=v,a=(0,Wt.T)(),o=a.capabilities.canSort,s=(0,cr.U0)(function(){var e=(0,m.A)(h().mark((function e(r,o){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getContents(t,{offset:r,limit:o,sort:n,filters:i}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a,t,n,i]),l=(0,cr.U0)(function(){var e=(0,m.A)(h().mark((function e(n,r){return h().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getContents(t,{offset:n,limit:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a,t]),o?s:l),g=(0,r.useState)(fr),x=(0,ne.A)(g,2),b=x[0],j=x[1],k=(0,r.useRef)(!1),w=(0,r.useRef)(0),P=(0,sr.c)(),C=P?6:50,S=P&&null!==w.current,R=(0,r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(f){var t=w.current;null!==t&&!k.current&&C>0&&(k.current=!0,f(t,C).then((function(n){j((function(r){var i=e?[]:(0,Gn.A)(r.items);return i.splice.apply(i,[t,n.items.length].concat((0,Gn.A)(n.items))),w.current=n.nextOffset,hr(hr({},n),{},{items:i})})),k.current=!1})))}}),[f,C]);return(0,r.useEffect)((function(){j(fr)}),[u.uri]),(0,r.useEffect)((function(){w.current=0,R(!0)}),[R]),(0,Y.jsxs)(lr.pZ,{value:"track-list",children:[(0,Y.jsx)(Ht._,{onReachBottom:P?void 0:R,triggerOnInitialLoad:!0,children:b.items.map((function(e,t){return e&&(0,Y.jsxs)("div",{className:dr,children:[(0,Y.jsx)("hr",{className:ur,"aria-hidden":!0}),(0,Y.jsx)(Wn.q,{index:t,episode:e,showMetadata:u,usePlayContextItem:d},"".concat(e.uri,"/").concat(t))]},"".concat(t).concat(e.uri))}))}),S&&(0,Y.jsx)("div",{className:pr,children:(0,Y.jsxs)(Kn.v,{onClick:function(){R()},className:mr,children:[(0,Y.jsx)(y.E,{variant:"bodySmallBold",children:c.Ru.get("internal-link-recommender.load-more-episodes")}),(0,Y.jsx)(qn.V,{size:"xsmall"})]})})]})})),xr=(n(40065),n(4865),n(23593)),yr={field:Jn.K$.ISPLAYED,operator:Jn.uj.EQUALS,value:!1},br={field:Jn.K$.STARTEDPLAYING,operator:Jn.uj.GREATER_THAN,value:0};var jr="all-episodes",kr=function(e){var t=e.onFilter,n=(0,r.useContext)(Yn),i=n.sortState,a=n.setSortState,o=new Map([[yr,{key:"is-played",value:c.Ru.get("shows.filter.unplayed")}],[br,{key:"started-playing",value:c.Ru.get("shows.filter.in-progress")}]]),s=Array.from(o.values());s.unshift({key:jr,value:c.Ru.get("mwp.podcast.all.episodes")});var l=Array.from(o.keys()),u=(0,r.useCallback)((function(e){if(e===jr)a([]);else{var n=l.find((function(t){var n;return(null===(n=o.get(t))||void 0===n?void 0:n.key)===e}));n&&a([n])}t()}),[t,a,l,o]);if(!o.size||!l)return null;var d=s[0],p=Array.from(o.entries()).filter((function(e){return null==i?void 0:i.some((function(t){return t.field===e[0].field&&t.operator===e[0].operator}))}));return p.length>0&&(d=p[0][1]),(0,Y.jsx)(xr.g,{options:s,onSelect:function(e){return u(e)},selected:d,variant:"bodyMediumBold",semanticColor:"textBase",heading:c.Ru.get("drop_down.filter_by")})},wr=function(e){var t=e.onSort,n=(0,r.useContext)(ir),i=n.sortState,a=n.setSortState,o=nr(),s=Array.from(o.values()),l=Array.from(o.keys()),u=(0,r.useCallback)((function(e){var n=l.find((function(t){var n;return(null===(n=o.get(t))||void 0===n?void 0:n.key)===e}));n&&a(n),t()}),[l,t,o,a]);if(!o.size||!i)return null;var d=Array.from(o.keys()).find((function(e){return e.field===i.field&&e.order===i.order}));if(!d)return null;var p=o.get(d);return p?(0,Y.jsx)(xr.g,{options:s,onSelect:function(e){return u(e)},selected:p,heading:c.Ru.get("drop_down.sort_by")}):null};const Pr="bOAvdKi0zqyA_S6ThcvF",Cr="jVWq1orbpiIK34UFHkFb",Sr="GMHh7OED_Nijo4zzSfrb",Rr="sNEwCEh44Lapg36PnVFw",Er="OMG3QMzpwer8oWsiJpzs",Ar="r0yVSge7A1iSTNfudfyV",Nr="yP6EeRtQJeqKq10IsMxn",Or="MIaGJ1KyQ3JLblOjWL19",Ir="p8WHC1qBUrwrBwzp_vYY",Br="Uzyuaxpkm_Gwb6jOGbva",Dr="TSNj_F4gGzCuxrzx6n98",Fr="E4HX0M3aD0MY5dUCKSCb",_r="CbSqM7wDwoLFnyIo1iKL",Mr="c0h80mSMc3PkNlHX0DYs",Lr="SGGetEMTKgQk1aJvG4k9",Tr="ne3ntrWAoMrE6_4A23Mf";var Ur=function(e){var t=e.spec,n=(0,ee.s)(),i=(0,Wt.T)().capabilities,a=i.canSort,o=i.canFilter,s=(0,r.useCallback)((function(){n.logInteraction(t.episodeListFactory().filterButtonFactory().hitFilter())}),[n,t]),l=(0,r.useCallback)((function(){n.logInteraction(t.episodeListFactory().sortButtonFactory().hitSort())}),[n,t]);return(0,Y.jsxs)("div",{className:Nr,children:[o&&(0,Y.jsx)("div",{className:Ir,children:(0,Y.jsx)(kr,{onFilter:s})}),!o&&(0,Y.jsx)(y.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Br,children:c.Ru.get("mwp.podcast.all.episodes")}),a&&(0,Y.jsx)("div",{className:Or,children:(0,Y.jsx)(wr,{onSort:l})})]})},zr=n(62562),Vr=n(53406),Hr=n(51170),Wr=n(76026),Gr=function(e){switch(e){case Gt.t5.TRAILER:return c.Ru.get("podcasts.next-episode.trailer");case Gt.t5.UP_NEXT:return c.Ru.get("podcasts.next-episode.up-next");case Gt.t5.CONTINUE_LISTENING:return c.Ru.get("podcasts.next-episode.continue-listening");case Gt.t5.FIRST_PUBLISHED:return c.Ru.get("podcasts.next-episode.first-published");case Gt.t5.LATEST_PUBLISHED:return c.Ru.get("podcasts.next-episode.latest-published");default:return}},Kr=function(e){var t,n,i=e.breakpoint,s=e.metadata,l=e.spec,u=s.uri,d=s.trailer,m=s.topics,v=s.description,h=s.htmlDescription,f=s.rating,b=(0,ee.s)(),j=(0,Xe.r)(o.R,{data:{uri:u}}),C=j.spec,R=j.logger,E=(0,r.useMemo)((function(){return C.aboutSectionFactory()}),[C]),A=(0,r.useMemo)((function(){return l.episodeListFactory()}),[l]),N=(0,x.wA)(),O=(0,a.NC)(gt.Pfj,{loadingValue:!1}),I=(0,$.W)(),B=(0,Le.V)(),D=(0,r.useContext)(Yn).sortState,F=(0,Wt.T)(),_=(0,sr.c)(),M=(0,rn.P)({uri:u,metadata:(0,p.A)((0,p.A)({},Hr.W.SORTING_CRITERIA,F.getPlayerSort(er)),Hr.W.FILTERING_PREDICATE,F.getPlayerFilter(D))},{featureIdentifier:"show"}).usePlayContextItem,L=M({uri:(null==d?void 0:d.uri)||""}),T=L.isActive,U=L.isPlaying,z=L.togglePlay,V=(0,r.useCallback)((function(e){I({intent:"expand-description",type:"click"});var t=l.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();b.logInteraction(n)}),[b,I,l]),H=(0,r.useCallback)((function(e,t){var n=l.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});b.logInteraction(n)}),[b,l]),W=d?{name:d.name,uri:d.uri,audio:{items:d.audio.items.map((function(e){return{url:e.url}}))}}:null,G=(0,Wn.B)(s),K=(0,zr.C)(W,G),q=(0,r.useCallback)((function(){null!=d&&d.uri&&(B?K():(I({targetUri:d.uri,intent:U?"play":"pause",type:"click"}),z()))}),[K,B,U,I,z,null==d?void 0:d.uri]),X=(0,Vr.x)((0,p.A)((0,p.A)({},ct.E.MEDIUM,0),ct.E.LARGE,600)),te=X.ref,ne=X.breakpoint,re=m.length>0,ie=v||h,ae=ie||re,oe=(null===(t=s.nextBestEpisode)||void 0===t?void 0:t.type)===Gt.t5.LATEST_PUBLISHED&&O;return(0,Y.jsxs)("div",{className:g()(Cr,"contentSpacing",(0,p.A)({},Sr,i===ct.E.LARGE)),ref:te,children:[(0,Y.jsxs)("div",{className:Rr,children:[ae&&(0,Y.jsxs)(Y.Fragment,{children:[(0,Y.jsx)(y.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Br,children:c.Ru.get("artist.about")}),ie&&(0,Y.jsx)(Z.N,{maxLines:4,content:(v||"").trim(),onExpanded:V,htmlContent:h||void 0}),d&&(0,Y.jsx)(Je.h,{menu:(0,Y.jsx)(In.b,{uri:d.uri,showUri:u,sharingInfo:d.sharingInfo}),children:(0,Y.jsx)(J,{label:c.Ru.get("track-trailer"),className:Dr,images:d.coverArt,title:d.name,duration:d.duration.milliseconds,moreButton:(0,Y.jsx)(P.b,{menu:(0,Y.jsx)(In.b,{uri:d.uri,sharingInfo:d.sharingInfo,showUri:u}),children:(0,Y.jsx)(w.e,{})}),onClick:q,isPlaying:U,isActive:T,size:Q.LARGE,contentRating:null===(n=d.contentRating)||void 0===n?void 0:n.label})}),(0,Y.jsxs)("div",{className:_r,children:[f&&(0,Y.jsx)("div",{className:Mr,children:(0,Y.jsx)(tn,{rating:f,onClick:function(){var e=E.ratingButtonFactory().hitUiReveal();R.logInteraction(e),N((0,k.eH)(u,s))}})}),re&&(0,Y.jsx)(S.N,{topics:m,className:Lr,onClick:H})]})]}),(0,Y.jsx)(On,{uri:u})]}),(0,Y.jsx)(ut.o.Provider,{value:ne,children:(0,Y.jsxs)("div",{className:g()(Er,(0,p.A)({},Ar,_)),"data-testid":"show-all-episode-list",children:[s.nextBestEpisode&&!oe&&(0,Y.jsx)(Wn.q,{showMetadata:s,episode:s.nextBestEpisode.data,usePlayContextItem:M,status:Gr(s.nextBestEpisode.type),variant:"next-best-episode"}),(0,Y.jsx)(Ur,{spec:l}),(0,Y.jsx)(Wr.r,{spec:A,children:(0,Y.jsx)(gr,{showMetadata:s,usePlayContextItem:M})})]})}),(0,Y.jsx)(Yt.Z,{copyrights:[]}),_&&(0,Y.jsx)(Hn,{title:c.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:u,className:Tr})]})},qr=r.memo(Kr),Xr=n(87583),Yr=n(20837),Qr=function(e){var t=e.reason,n=(0,a.NC)(gt.C2),r=function(e){switch(e){case"OTP":return c.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return c.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(t);return n&&r?(0,Y.jsx)(y.E,{className:Fr,children:r}):null};var Jr=function(e){var t=e.metadata,n=e.backgroundColor,r=t.uri,i=t.coverArt,a=t.name,o=t.podcastType,s=t.publisherName,l=t.gatedContentAccessReason,u=(0,Y.jsx)(dn.H,{uri:r});return(0,Y.jsxs)(et.z,{backgroundColor:n,children:[(0,Y.jsx)(rt.h,{children:(0,Y.jsx)(Je.h,{menu:u,children:(0,Y.jsx)(it.X,{text:a,dragUri:r,dragLabel:a})})}),(0,Y.jsx)(Xr.X,{children:(0,Y.jsx)(Je.h,{menu:u,children:(0,Y.jsx)(Yr.b,{loading:"eager",name:a,images:i,placeholderType:"show",shape:Yr.u.SQUARE})})}),(0,Y.jsxs)(nt.Y,{children:[(0,Y.jsxs)(ot.B,{children:["SHOW"===o?c.Ru.get("type.show"):c.Ru.get("type.podcast"),l&&(0,Y.jsx)(Qr,{reason:l})]}),(0,Y.jsx)(Je.h,{menu:u,children:(0,Y.jsx)(lt.mm,{dragUri:r,dragLabel:a,scaleAtMinWidth:lt.tw,children:(0,Y.jsx)("span",{"data-testid":"show-title",children:a})})}),(0,Y.jsx)(st.g,{children:s})]})]})},Zr=n(50605),$r=n(10258),ei=function(e){var t,n=e.metadata,i=e.showId,a=n.coverArt,s=n.name,l=n.uri,c=n.isSaved,d=(0,Xe.r)(o.R,{data:{uri:l}}).spec,p=(0,r.useMemo)((function(){return d.actionBarFactory()}),[d]),m=(0,Xt.H)((null===(t=a[0])||void 0===t?void 0:t.url)||null),v=(0,ut.y)();return(0,Y.jsxs)("section",{className:Pr,children:[(0,Y.jsx)(u.Q,{children:(0,on.hV)({showOrAudiobookName:s,type:"Podcast"})}),(0,Y.jsx)(qt.c,{artistOrShow:s,uri:l,entityType:qt.p.PODCAST}),(0,Y.jsx)(Jr,{metadata:n,backgroundColor:m}),(0,Y.jsx)(mn,{uri:l,name:s,isSaved:c,backgroundColor:m,spec:p}),(0,Y.jsx)(cn.q,{gatedEntityRelations:n.gatedEntityRelations,upsellExplanation:n.upsellExplanation,hasAccess:!n.isLocked}),(0,Y.jsx)(qr,{breakpoint:v,metadata:n,showId:i,spec:d})]})};const ti=(0,r.memo)((function(){var e=(0,i.g)().showId,t=void 0===e?"":e,n="spotify:show:".concat(t),o=(0,Ie.W)(n),u=o.data,p=o.error,m=o.redirectUri,v=(0,a.NC)(gt.Jl4);if(m){var h=(0,l.cA)(m);return(0,Y.jsx)(un.$,{to:h.toURLPath(!0)})}var f=u&&(0,Gt.Go)(u),g=f&&(null==u?void 0:u.isPreRelease);return!u||p||g&&!v?p instanceof $r.W?(0,Y.jsx)(d.LoadingPage,{hasError:!0,errorMessage:c.Ru.get("error-page.not-available-in-region.title")}):(0,Y.jsx)(d.LoadingPage,{hasError:!!p,errorMessage:c.Ru.get("error.not_found.title.page")}):f?(0,Y.jsx)(r.Suspense,{fallback:null,children:(0,Y.jsx)(Zr.u,{pageId:s.$h.PODCAST_SHOW_AUDIOBOOK,uri:n,children:(0,Y.jsx)(ln,{metadata:u},"".concat(!!u.consumptionCapExplanation))})}):(0,Y.jsx)(r.Suspense,{fallback:null,children:(0,Y.jsx)(Zr.u,{pageId:s.$h.PODCAST,uri:n,children:(0,Y.jsx)(Qn,{uri:u.uri,children:(0,Y.jsx)(or,{uri:u.uri,defaultSortParam:rr(u.consumptionOrder),children:(0,Y.jsx)(ei,{showId:t,metadata:u})})})})})}))},92200:(e,t,n)=>{n.d(t,{$:()=>i});n(60287);var r=n(30758),i=function(e,t){var n=(0,r.useRef)(e);(0,r.useEffect)((function(){n.current=e}),[e]),(0,r.useEffect)((function(){var e=void 0;function r(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){n.current(r)}),t),r}),[t])}}}]);
//# sourceMappingURL=xpui-routes-show.js.map