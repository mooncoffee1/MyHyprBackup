"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[8606],{1416:(e,t,n)=>{n.d(t,{I:()=>c});var r=n(71523),i=n(30758),a=n(23060),o=n(33786),s=n(69146),l=n(86070),c=i.memo((function(e){var t=e.uri,n=e.size,c=void 0===n?a.M.md:n,u=e.className,d=e.onClick,p=e.canDownload,v=e.condensedAll,m=(0,s.A)(t),h=(0,r.A)(m,2),f=h[0],g=h[1],x=(0,o.W)(),y=(0,i.useCallback)((function(){x({targetUri:t,intent:f?"unsave":"save",type:"click"}),g(!f)}),[x,t,f,g]);return(0,l.jsx)(a.f,{className:u,isFollowing:f,onFollow:y,onClick:d,uri:t,size:c,canDownload:p,condensedAll:v,condensed:!0})}))},49383:(e,t,n)=>{n.d(t,{G:()=>E});var r=n(51488),i=n(97500),a=n.n(i),o=n(99),s=n(7852);const l="YNXLVjlRXPfM4xObTojA",c="CVRy4NtxZYSle8dJ1E67",u="holKDGFNEFSz85czBeSv",d="gqidZhN1lgoZDfI_7E6w",p="_IQ8dgA5pEr_V8PfUkWa",v="xNkPMA_OvAxcFTdfyroI";var m=n(86070),h=function(e){var t=e.value,n=e.label,i=e.hasDivider,o=void 0!==i&&i;return(0,m.jsxs)("div",{className:u,"aria-hidden":"true",children:[(0,m.jsx)(s.E,{variant:"titleSmall",className:a()((0,r.A)({},p,o)),children:t}),(0,m.jsx)(s.E,{variant:"marginal",semanticColor:"textSubdued",children:n})]})},f=n(71523),g=n(30758),x=1e3,y=60*x,b=60*y,j=24*b;var w=n(86564),k=n(286),P={days:0,hours:0,minutes:0,seconds:0};function C(e){return e>0?(t=e,n=Math.abs(t),{days:Math.floor(n/j),hours:Math.floor(n%j/b),minutes:Math.floor(n%b/y),seconds:Math.floor(n%y/x)}):P;var t,n}var S=n(75599),R=n(97579),E=function(e){var t=e.targetDate,n=e.className,i=e.onComplete,s=e.images,u=e.imageTitle,p=function(e,t){var n=(0,g.useRef)(t);n.current=t;var r=(0,g.useState)((function(){return C((0,w.u)(e))})),i=(0,f.A)(r,2),a=i[0],o=i[1];return(0,k.$)((function(t){var r,i=(0,w.u)(e),a=C(i);o(a),i<=0&&(t(),null===(r=n.current)||void 0===r||r.call(n))}),1e3),a}(t,i),x=p.days,y=p.hours,b=p.minutes,j=p.seconds,P=void 0!==s&&s.length>0&&u,E=o.Ru.get("web-player.prerelease.countdown_label",{days:x,hours:y,minutes:b,seconds:j});return(0,m.jsxs)("div",{className:a()(l,n,(0,r.A)({},c,P)),role:"timer",children:[(0,m.jsx)("span",{className:v,children:E}),P&&(0,m.jsx)(S.b,{images:s,type:R.c.ALBUM,shape:S.u.ROUNDED_CORNERS,className:d,title:u}),(0,m.jsx)(h,{value:x,label:o.Ru.get("web-player.prerelease.days",x),hasDivider:!0}),(0,m.jsx)(h,{value:y,label:o.Ru.get("web-player.prerelease.hours",y),hasDivider:!0}),(0,m.jsx)(h,{value:b,label:o.Ru.get("web-player.prerelease.minutes",b),hasDivider:!0}),(0,m.jsx)(h,{value:j,label:o.Ru.get("web-player.prerelease.seconds",j)})]})}},31196:(e,t,n)=>{n.d(t,{W:()=>s});var r=n(30758),i=n(86173),a=n(99),o=n(86070),s=(0,r.memo)((function(e){var t=e.isFollowing,n=e.onClick,r=e.disabled,s=void 0!==r&&r,l=e.buttonText,c=e.size,u=void 0===c?"small":c,d=e.className,p=t?a.Ru.get("following"):a.Ru.get("follow");return(0,o.jsx)(i.n,{onClick:n,disabled:s,size:u,className:d,children:l||p})}))},20198:(e,t,n)=>{n.d(t,{h:()=>m});n(7651),n(30456),n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316);var r=n(51488),i=n(30758),a=n(74230),o=n(49629),s=n(67124),l=n(204),c=n(93833),u=n(63656),d=n(86070);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var m=function(e){var t,n=e.children,r=e.action,p=e.uri,m=(0,s.V)(),h=(0,c.N)(l.JD);try{t=i.Children.only(n)}catch(e){return(0,d.jsx)(d.Fragment,{children:n})}return m?i.cloneElement(t,{onClick:function(){var e={triggerId:o.d,triggerAction:{type:r}};a.h.set((function(t){return v(v({},t),e)})),h.storeAction(l.j8,{operation:u.tS.ADD,uris:[p]})}}):(0,d.jsx)(d.Fragment,{children:n})}},69939:(e,t,n)=>{n.d(t,{H4:()=>r});n(30758),n(97500),n(99),n(98538),n(48120);n(86070);var r=function(e){return e.primary="primary",e.secondary="secondary",e.transparent="transparent",e}({})},87520:(e,t,n)=>{n.d(t,{v:()=>p});var r=n(86173),i=n(55347),a=n(36734),o=n(34064),s=n(99),l=n(20198),c=n(49557),u=n(36591),d=n(86070),p=function(e){var t=e.uri,n=e.isBook,p=void 0!==n&&n,v=(0,c.w)({uri:t,isBook:p}),m=v.isPreSaved,h=v.addPresave,f=v.removePresave;return m?(0,d.jsx)(r.n,{onClick:f,iconTrailing:i.k,children:s.Ru.get("web-player.prerelease.presaved")}):(0,d.jsx)(l.h,{uri:t,action:u.no.SAVE_PRERELEASE,children:(0,d.jsx)(a.$,{disabled:void 0===m,onClick:h,iconTrailing:o.P,children:s.Ru.get("web-player.prerelease.presave")})})}},40407:(e,t,n)=>{n.d(t,{g:()=>T});n(40065),n(43379),n(34192),n(4865);var r=n(30758),i=n(3074),a=n.n(i),o=n(39486),s=n(31285),l=n(7852),c=n(65277),u=n(46669),d=n(10806),p=n(51488),v=n(48),m=(n(7651),n(30456),n(26701),n(25550),n(37417),n(11737),n(51691),n(702),n(5672),n(88856),n(51565),n(15342),n(18316),n(9801)),h=n(73406),f=n(56818),g=n(36178),x=n(46400),y=n(57674),b=n(99),j=n(52856),w=n(48844),k=n(86070),P=function(e){var t=e.onSelect,n=(0,j.a)(),r=n.viewMode,i=n.setViewMode;return(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)(g.y,{children:b.Ru.get("web-player.your-library-x.sort-and-view-picker.view-as")}),w.i.map((function(e,n){var a=e.value,o=e.icon,s=e.text;return(0,k.jsx)(x.D,{role:"menuitemradio","aria-checked":r===a,divider:n===w.i.length-1?"after":void 0,autoClose:!1,leadingIcon:o(),onClick:function(){i(a),null==t||t(a)},children:s()},a)}))]})},C=["heading","selected","onSelect","options","enableViewModeMenu","onSelectViewMode","sortOrder"];function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function R(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){(0,p.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E=function(e){var t,n=e.heading,r=e.selected,i=e.onSelect,a=e.options,o=e.enableViewModeMenu,s=void 0!==o&&o,l=e.onSelectViewMode,c=e.sortOrder,u=(0,v.A)(e,C);c&&(c===y.H.ASC||c===y.H.SECONDARY_ASC?t=m.U:c!==y.H.DESC&&c!==y.H.SECONDARY_DESC||(t=h.R));return(0,k.jsxs)(f.W,R(R({getInitialFocusElement:function(e){return null==e?void 0:e.querySelector('[aria-checked="true"]')}},u),{},{children:[n?(0,k.jsx)(g.y,{children:n}):null,a.map((function(e,n){var a=e.key,o=e.value;return(0,k.jsx)(x.D,{role:"menuitemradio","aria-checked":a===r.key,CheckedIcon:t,onClick:function(){return i(a,n)},children:o},a)})),s&&(0,k.jsx)(P,{onSelect:l})]}))},A=n(89851),O=n(57965),N=n(35489);const I="x-sortBox-sortDropdown",B="cvTLPmjt6T7M85EKcB8w",D="SbDHY3fVADNJ4l9qOLQ2";var _=function(e){var t=e.isOpen,n=e.className;return t?(0,k.jsx)(o.J,{size:"small","aria-hidden":"true",className:n}):(0,k.jsx)(s.y,{size:"small","aria-hidden":"true",className:n})},T=function(e){var t=e.heading,n=e.options,i=e.selected,o=e.onSelect,s=e.sortOrder,p=e.variant,v=void 0===p?"bodySmall":p,m=e.semanticColor,h=e.disabled,f=e.onClick,g=e.ariaLabel,x=e.enableViewModeMenu,y=void 0!==x&&x,b=(0,c.NC)(N.mA)&&y,j=(0,A.a)().viewMode;i||(i=null==n?void 0:n[0]);var P=w.i.find((function(e){return e.value===j}))||w.i[0],C=(0,r.useMemo)((function(){return"sortboxlist-".concat(a().create().hex)}),[]),S=(0,O.r)(u.d,{}),R=S.spec,T=S.logger;return(0,k.jsx)(d.b,{menu:(0,k.jsx)(E,{selected:i,options:n,onSelect:function(e,t){o(e,t);var n=R.sortBySectionFactory().sortOptionFactory({identifier:e}).hitSort();T.logInteraction(n)},sortOrder:s,heading:t,enableViewModeMenu:b,onSelectViewMode:function(e){var t=R.viewAsSectionFactory().viewOptionFactory({identifier:e}).hitUiElementToggle();T.logInteraction(t)},id:C}),children:function(e,t,n){var r;return(0,k.jsxs)("button",{className:I,onClick:function(e){h||(null==f||f(e),t(e))},ref:n,type:"button","aria-label":g,role:"combobox","aria-controls":C,"aria-expanded":e,children:[(0,k.jsx)(l.E,{"data-sortbox-label":!0,semanticColor:m,variant:v,className:B,children:(null===(r=i)||void 0===r?void 0:r.value)||(b?P.text():"")}),b?P.icon():(0,k.jsx)(_,{isOpen:e,className:D})]})}})}},8712:(e,t,n)=>{n.d(t,{N:()=>m});n(83234),n(30456),n(25550),n(43379),n(34192),n(88856),n(15342);var r=n(97500),i=n.n(r),a=n(30758),o=n(20087),s=n(63130);const l="nLNTsyonBwoRIzAv1AME",c="E4I5I7G2CfW32hLWZaqE",u="w4ZoklZWkrsyrVA34vI8";var d=n(86070),p=function(e){var t=e.title,n=e.uri,r=e.className,l=e.onClick,p=e.position,v=(0,a.useCallback)((function(e){null==l||l(e,{uri:n,position:p})}),[l,p,n]);return(0,d.jsx)(s.N,{"aria-label":t,className:i()(c,u,r),to:n,onClick:v,children:(0,d.jsx)(o.v,{as:"span",children:t})})};function v(e){return!!e.uri&&!!e.title}var m=function(e){var t=e.topics,n=e.className,r=e.onClick;return(0,d.jsx)("div",{className:i()(l,n),children:t.filter(v).map((function(e,t){var n="".concat(e.uri,"-").concat(t);return(0,d.jsx)(p,{title:e.title,uri:e.uri,position:t,onClick:r},n)}))})}},14810:(e,t,n)=>{n.d(t,{B:()=>I,q:()=>D});var r=n(51488),i=n(71523),a=(n(7651),n(14551),n(83234),n(30456),n(26701),n(47994),n(37417),n(11737),n(51691),n(702),n(5672),n(43379),n(34192),n(88856),n(51565),n(18316),n(30758)),o=n(94822),s=n(80349),l=n(2860),c=n(32849),u=n(41888),d=n(59414),p=n(54363),v=n(6472),m=n(81713),h=n(74230),f=n(89749),g=n(35605),x=n(33786),y=n(67124),b=n(15190),j=n(30021),w=n(14816),k=n(56122),P=n(38547),C=n(36783),S=n(57965),R=n(70525),E=n(4254),A=n(86070);function O(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function N(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?O(Object(n),!0).forEach((function(t){(0,r.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):O(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function I(e){return{uri:e.uri,name:e.name,trailer:e.trailer,showTypes:e.showTypes}}var B=function(e){return"activation-trigger-mme-".concat(e)},D=a.memo((function(e){var t,n,r,O,D,_,T,F,U,M,L,z=e.index,V=void 0===z?-1:z,W=e.showMetadata,H=e.episode,G=e.usePlayContextItem,q=e.status,K=e.variant,Y=(0,b.c)(),X=H.playedState.playPositionMilliseconds,Q=H.uri,J=(0,a.useRef)(null),Z=(0,a.useState)(H.playedState.state===R._w.Completed),$=(0,i.A)(Z,2),ee=$[0],te=$[1],ne=(0,g.P)(),re=ne.draggable,ie=ne.onDragStart,ae=(0,y.V)(),oe=(0,k.y)(),se=(0,x.W)(),le=(0,o.wA)(),ce=(0,S.r)(s.d,{data:{uri:Q,reason:H.requestId||"",position:V}}),ue=ce.UBIFragment,de=ce.spec,pe=ce.logger,ve=(0,C.t)(de),me=G({uri:Q}),he=me.isActive,fe=me.isPlaying,ge=me.togglePlay,xe=(0,P.S)(1e4,(function(e){var t;return(null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===Q})),ye=(0,i.A)(xe,1)[0];(0,a.useEffect)((function(){fe&&(J.current=ye)}),[fe,ye]),(0,a.useEffect)((function(){!fe&&J.current&&H.duration.milliseconds<=J.current&&te(!0)}),[fe,H.duration.milliseconds]);var be=(0,a.useCallback)((function(e){e||(J.current=0),te(e)}),[]),je=I(W),we=(0,j.C)(N(N({},H),{},{coverArt:{sources:H.coverArt}}),je),ke=(0,a.useCallback)((function(){if(H.episodeType===R.I_.Episode&&Y)h.h.set((function(){return{triggerId:B(H.uri),triggerAction:null}}));else if(ae)we();else{var e;e=fe?de.playButtonFactory().hitPause({itemToBePaused:Q}):he?de.playButtonFactory().hitResume({itemToBeResumed:Q}):de.playButtonFactory().hitPlay({itemToBePlayed:Q});var t=pe.logInteraction(e);se({targetUri:Q,intent:fe?"pause":"play",type:"click"}),ge({loggingParams:t})}}),[he,we,se,ge,Q,fe,ae,H,Y,pe,de]),Pe=(0,a.useCallback)((function(){pe.logInteraction(de.hitUiNavigate({destination:Q})),se({type:"click",targetUri:Q,intent:"navigate"})}),[Q,se,pe,de]),Ce=null!==(t=null===(n=H.podcastSubscription)||void 0===n?void 0:n.isPaywalled)&&void 0!==t&&t,Se=null!==(r=null===(O=H.podcastSubscription)||void 0===O?void 0:O.isUserSubscribed)&&void 0!==r&&r,Re=Ce&&!Se,Ee=Ce&&ae,Ae=(0,E.b)({contentRating:null===(D=H.contentRating)||void 0===D?void 0:D.label,isPaywalled:Ce}).badges,Oe=(0,a.useCallback)((function(){return le((0,c.Tf)(W.uri))}),[W.uri,le]),Ne=(0,a.useCallback)((function(e){var t,n=e;(Re||Ee)&&(n=(0,A.jsx)(m.f,{enabled:!0,showUri:(null===(t=H.podcast)||void 0===t?void 0:t.uri)||W.uri,renderInline:!1,children:n}));return!H.playability.playable&&Ae.nineteen&&(n=(0,A.jsx)("div",{onClick:function(e){e.stopPropagation(),Oe()},children:e})),n=(0,A.jsx)(u.k,{id:B(Q),targetURI:(0,l.o_h)(Q),children:n})}),[Q,Re,Ee,W.uri,Ae.nineteen,H.playability.playable,Oe,null===(_=H.podcast)||void 0===_?void 0:_.uri]);return(0,A.jsx)(ue,{spec:de,children:(0,A.jsx)(w.pZ,{value:"row",index:V,children:(0,A.jsx)(d.h,{onShow:function(){pe.logInteraction(de.secondaryHitUiReveal())},menu:(0,A.jsx)(p.b,{uri:Q,showUri:W.uri,sharingInfo:H.sharingInfo,isPlayed:ee,onMarkAsPlayed:be}),children:(0,A.jsx)(v.k,{ref:ve,requestId:H.requestId,index:V,uri:Q,size:oe,images:H.coverArt||[],name:H.name,showName:(null===(T=H.podcast)||void 0===T?void 0:T.name)||W.name,description:H.description,isPlayable:H.playability.playable||Re,fullyPlayed:ee,durationMs:H.duration.milliseconds,releaseDate:(null===(F=H.releaseDate)||void 0===F?void 0:F.isoString)||"",resumePositionMs:null!==(U=J.current)&&void 0!==U?U:X,draggable:re,handleDragStart:function(e){if(e.target===e.currentTarget){var t="".concat(H.name," â€¢ ").concat(W.name);ie(e,{itemUris:[Q],dragLabelText:t,contextUri:W.uri})}},handlePlaybackClick:ke,handleClick:Pe,isCurrentlyPlaying:he,isPaywalled:Ce,isUserSubscribed:Se,isPlaying:fe,position:fe?ye:void 0,episodeSharingInfo:H.sharingInfo,onMarkAsPlayed:be,contentInformation:H.contentInformation,showUri:(null===(M=H.podcast)||void 0===M?void 0:M.uri)||W.uri,mediaTypes:null!==(L=H.mediaTypes)&&void 0!==L?L:void 0,badges:(0,A.jsx)(f.P,{episode:H}),playButtonWrapper:Ne,onMoreButtonClick:function(){pe.logInteraction(de.moreButtonFactory().hitUiReveal())},status:q,variant:K})})})})}))},19813:(e,t,n)=>{n.d(t,{_:()=>d});var r=n(51488),i=n(30758),a=n(21743),o=n(97500),s=n.n(o);const l="eqw9lvuoZHrkWMTdyTpY",c="lb08f71wES9AQnKx6e0R";var u=n(86070),d=i.memo((function(e){var t=e.triggerOnInitialLoad,n=void 0!==t&&t,o=e.onReachBottom,d=e.showScrollbar,p=void 0===d||d,v=e.horizontalScroll,m=void 0!==v&&v,h=e.className,f=(0,a.Wx)({initialInView:n}),g=f.ref,x=f.inView;return(0,i.useEffect)((function(){x&&o&&o()}),[x,o]),(0,u.jsxs)("div",{className:s()((0,r.A)((0,r.A)({},c,!p),l,m),h),"data-testid":"infinite-scroll-list",children:[e.children,(0,u.jsx)("div",{ref:g})]})}))},86564:(e,t,n)=>{n.d(t,{u:()=>r});n(68216);function r(e){var t=new Date;return(e instanceof Date?e:new Date(e)).getTime()-t.getTime()}},27963:(e,t,n)=>{n.d(t,{v:()=>o});var r=n(33872),i=n(93611),a=new r.l("internalLinkRecommenderShow","query","6c369ff272a666b31fef1629c169925a1bd80f372195396c82304142cacd89e8",null),o=function(e,t){return(0,i.I)(a,e,t)}},23327:(e,t,n)=>{n.d(t,{K:()=>r});var r=function(e){return"NotFound"!==(null==(t=e)?void 0:t.__typename)&&"GenericError"!==(null==t?void 0:t.__typename)&&"Podcast"===e.__typename;var t}},49557:(e,t,n)=>{n.d(t,{w:()=>v});var r=n(5904),i=n(64501),a=n.n(i),o=(n(16347),n(18653),n(30758)),s=n(37937),l=n(99),c=n(78253),u=n(13048),d=n(73129),p=n(57965),v=function(e){var t=e.uri,n=e.isBook,i=(0,d.p)("prerelease"),v=i.add,m=i.remove,h=(0,u.o)("prerelease",[t]).at(0),f=(0,c.d)().enqueueSnackbar,g=(0,p.r)(s.k,{data:{uri:t}}),x=g.spec,y=g.logger;return{isPreSaved:h,addPresave:(0,o.useCallback)((0,r.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logInteraction(x.actionBarFactory().preSaveButtonFactory().hitPresave({prereleaseId:t,itemToBePresaved:t,contextUri:t})),e.next=3,v(t);case 3:f(n?l.Ru.get("web-player.prerelease.audiobook_feedback_presaved"):l.Ru.get("web-player.prerelease.album_feedback_presaved"));case 4:case"end":return e.stop()}}),e)}))),[v,f,n,y,x,t]),removePresave:(0,o.useCallback)((0,r.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return y.logInteraction(x.actionBarFactory().preSaveButtonFactory().hitRemovePresave({prereleaseId:t,itemToBeRemovedFromPresaved:t,contextUri:t})),e.next=3,m(t);case 3:case"end":return e.stop()}}),e)}))),[y,m,x,t])}}},54966:(e,t,n)=>{n.r(t),n.d(t,{default:()=>qr});n(47994);var r=n(30758),i=n(90543),a=n(11518),o=n(52818),s=n(2860),l=n(99),c=n(17781),u=n(96974),d=n(51488),p=n(5904),v=n(64501),m=n.n(v),h=(n(83234),n(79024),n(43379),n(2823),n(97460),n(29426),n(93577),n(54520),n(91531),n(93678),n(34145),n(97500)),f=n.n(h),g=n(94822),x=n(7852),y=n(65277),b=n(82179),j=n(31509),w=n(65941),k=n(78531),P=n(10806),C=n(51416),S=n(8712),R=n(59225),E=n(69939),A=n(42761),O=n(49259),N=n(22433),I=n(75599),B=n(22872),D=n(67515),_=n(98306),T=n(97579),F=n(4254);const U="Bns6t3CfzQaCA4DLRzPQ",M="zGFcpmwFVhJxRDXUXoXA",L="_FLyhB96W9W0msGYNWUl",z="Si5iVyGLDY7mGWH_U2wA",V="HLBtD6mJyIB9EeOzDtXE",W="DRO0ur1WXqpK9BelywtE",H="vtlBEOtYFwv1cxC32ccc",G="Pq_DZj9ECxwTsK8pBxe0",q="bu7LVUNyDPF_FcrKMv74",K="bYP2npsc_CeChpMGcr6g",Y="Ux7aVnDYlwojS4AmkSLg";var X=n(86070),Q=function(e){return e.SMALL="small",e.LARGE="large",e}({}),J=function(e){var t=e.images,n=e.title,r=e.contentRating,i=e.duration,a=e.moreButton,o=e.onClick,s=e.onContextMenu,l=e.onTouchStart,c=e.onTouchEnd,u=e.isPlaying,p=e.isActive,v=e.size,m=e.className,h=e.label,g=e.isPlayable,x=void 0===g||g,y=v===Q.LARGE?"medium":"small",b=(0,F.b)({contentRating:r}).badges;return(0,X.jsxs)("div",{"data-testid":"trailer-component",className:f()(U,m,(0,d.A)({},M,p)),onContextMenu:s,onTouchStart:l,onTouchEnd:c,children:[(0,X.jsxs)("div",{className:z,children:[(0,X.jsxs)("div",{className:G,children:[(0,X.jsx)(I.b,{type:T.c.EPISODE,title:n,className:f()(H,(0,d.A)((0,d.A)({},Y,v===Q.SMALL),K,v===Q.LARGE)),size:B.Qe.SIZE_56,images:t,shape:I.u.ROUNDED_CORNERS}),(0,X.jsx)("div",{className:q,children:(0,X.jsx)(A.R,{"data-testid":"trailer-play-button",version:E.H4.transparent,size:y,isPlaying:u,onClick:o,disabled:!x})})]}),(0,X.jsxs)("div",{children:[(0,X.jsx)("div",{className:V,children:(0,X.jsx)(R.Z,{dir:"auto",className:L,variant:"balladBold",children:n})}),(0,X.jsxs)("div",{className:W,children:[(0,X.jsx)(O.E,{text:h}),b.explicit&&(0,X.jsx)(N.U,{}),b.nineteen&&(0,X.jsx)(D.q,{}),(0,X.jsx)(R.Z,{dir:"auto",variant:"mesto",children:(0,X.jsx)(_.d,{durationMs:i})})]})]})]}),a]})},Z=(n(34518),n(83270)),$=n(33786),ee=n(68113),te=function(e){var t=e.htmlDescription,n=e.narrators,i=e.spec,a=e.isPreRelease,o=(0,$.W)(),s=(0,ee.s)(),c=(0,r.useCallback)((function(e){o({intent:"expand-description",type:"click"});var t=i.seeMoreButtonFactory();s.logInteraction(e?t.hitUiReveal():t.hitUiHide())}),[s,o,i]);return(0,X.jsxs)(X.Fragment,{children:[n.length?(0,X.jsx)(x.E,{as:"p",variant:"bodyMedium",children:l.Ru.get("web-player.audiobooks.narratedByX",n.join(l.Ru.getSeparator()))}):null,t&&(0,X.jsx)(Z.N,{maxLines:4,content:t,htmlContent:t,onExpanded:c,isOpen:a||null})]})},ne=n(71523),re=n(38546),ie=n(17636),ae=n(1958),oe=n(57550),se=n(1416),le=n(72365),ce=n(76089),ue=n(29631),de=n(77803),pe=n(35838),ve=n(67527);const me="myIGgR3zdb9nFuJ1pXYl",he="e74TmRHu_W1yZHspTBmR",fe="rrcjfInomKt1lXRDRdR8",ge="Wj9mxFJDtPdiMcUtS1te",xe="SCwESjClY3m_9JlV2L7S",ye="Yoa_yG2jhELT4w9wJpHf",be="xsw253oiwmIAafVfjl1J",je="JPqnsg5dgBTzsEoClLmD",we="bhuRgaz03VXMf0mOG3Q2",ke="GP_qgmZlmL0CJ9r22AD9",Pe="bilV2VquzmEnhV4d97Tc",Ce="caqddwmUJf4ix6GI84NX";var Se=function(e){var t,n=e.explicit,r=e.durationMs,i=e.publishDate,a=e.preReleaseEndDateTime,o=e.isPreRelease,s=e.uri,c=e.isPlaying,u=(0,pe.p)(s),d=(0,de.z)(s).isMarkedAsFinished;return o&&a?t=l.Ru.get("web-player.prerelease.releases_on",{date:l.Ru.formatDate(a)}):!o&&i&&(t=l.Ru.formatDate(i)),(0,X.jsxs)("div",{className:we,children:[n&&(0,X.jsx)(N.U,{className:Ce}),(0,X.jsxs)("div",{className:ke,children:[t&&(0,X.jsx)(x.E,{variant:"bodySmall",className:Pe,children:t}),r?(0,X.jsxs)(X.Fragment,{children:[null!=u&&u.playPositionMilliseconds?(0,X.jsx)(x.E,{variant:"bodySmall",className:Pe,children:(0,X.jsx)(_.d,{durationMs:r})}):null,(0,X.jsx)(ve.j,{isPlaying:c,fullyPlayed:d,durationMs:r,position:null==u?void 0:u.playPositionMilliseconds})]}):null]})]})},Re=n(36734),Ee=n(87520),Ae=(n(184),n(42486),(0,r.createContext)(null)),Oe=function(e){var t=e.children,n=e.isPreRelease,i=(0,r.useState)(!n),a=(0,ne.A)(i,2),o=a[0],s=a[1],l=(0,r.useMemo)((function(){return{isPreRelease:n,isCountdownFinished:o,setCountdownFinished:function(){return s(!0)}}}),[n,o,s]);return(0,X.jsx)(Ae.Provider,{value:l,children:t})};function Ne(){var e=(0,r.useContext)(Ae);if(null===e)throw new Error("Trying to use 'PreRealeaseCountdownContext' without 'PreRealeaseCountdownProvider'!");return e}var Ie=n(18767);const Be="nz8Wc80RAtdAb3yU9FxM";var De=function(e){var t=e.uri,n=Ne().isCountdownFinished,r=(0,Ie.W)(t).invalidateCache;return(0,X.jsx)("div",{className:Be,children:n?(0,X.jsx)(Re.$,{onClick:r,children:l.Ru.get("web-player.audiobooks.goToAudiobook")}):(0,X.jsx)(Ee.v,{uri:t,isBook:!0})})},_e=n(40637),Te=n(15057),Fe=n(78253),Ue=n(67124),Me=n(91785);const Le="NQAShVY0o7RQ2bCTDSkw";function ze(e){var t,n=e.uri,r=e.price,i=e.size,a=e.spec,o=e.logger,s=e.onPlayback,c=(0,Fe.d)().enqueueSnackbar,u=(0,Ue.V)(),d=0===(null==r||null===(t=r.finalPrice)||void 0===t?void 0:t.amount),v=d?a.getButtonFactory({uri:n}):a.buyButtonFactory({uri:n}),h=(0,Te.YQ)((0,p.A)(m().mark((function e(){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(o.logInteraction(v.hitShowPaywall({paywalledItem:n})),!u){e.next=4;break}return s(),e.abrupt("return");case 4:if(e.prev=4,null==r||!r.finalPrice){e.next=10;break}return e.next=8,(0,Me.S)({show_uri:n,currency:r.finalPrice.currency,price:r.finalPrice.amount});case 8:e.next=11;break;case 10:c(l.Ru.get("error.generic"));case 11:e.next=16;break;case 13:e.prev=13,e.t0=e.catch(4),c(l.Ru.get("error.generic"));case 16:s();case 17:case"end":return e.stop()}}),e,null,[[4,13]])}))),2e3,{leading:!0,trailing:!1});return(0,X.jsx)(Re.$,{size:i,className:Le,style:{flexShrink:0},onClick:h,children:d?l.Ru.get("web-player.audiobooks.buyFree"):l.Ru.get("web-player.audiobooks.buy")})}var Ve=function(e){var t=e.uri,n=e.isLocked,r=e.price,i=e.isPlaying,a=e.isConsumptionCapped,o=e.onPlayback,s=e.logger,l=e.spec,c=e.size,u=void 0===c?"large":c;return n&&!a?(0,X.jsx)(ze,{size:u,uri:t,price:r,logger:s,spec:l,onPlayback:o}):(0,X.jsx)(_e.D,{size:u,isPlaying:i,uri:t,onClick:o})},We=n(77928),He=n(22424),Ge=n(40494),qe=n(69146),Ke=n(30683),Ye=n(57965);const Xe="8px";var Qe=r.memo((function(e){var t=e.backgroundColor,n=e.uri,i=e.name,a=e.isPlaying,o=e.togglePlay,s=e.isLocked,c=e.isSaved,u=e.consumptionCapExplanation,d=e.price,p=e.spec,v=e.isExplicit,m=e.publishDate,h=e.preReleaseEndDateTime,f=e.duration,x=(0,qe.A)(n,c),y=(0,ne.A)(x,2),b=y[0],j=y[1],k=!(0,Ge.n)(),C=Ne().isPreRelease,S=(0,g.wA)(),R=(0,$.W)(),E=(0,ee.s)(),A=(0,We.d$)(),O=(0,Ye.r)(re.e,{data:{uri:n}}),N=O.spec,I=O.logger;(0,r.useEffect)((function(){A&&I.logImpression(N.impression())}),[A,I,N]);var B=(0,r.useCallback)((function(){R({targetUri:n,intent:b?"unsave":"save",type:"click"});var e=p.saveToLibraryButtonFactory();b?E.logInteraction(e.hitUnfollow({itemToBeUnfollowed:n})):(E.logInteraction(e.hitFollow({itemToBeFollowed:n})),A&&I.logInteraction(N.hitFollow({itemToBeFollowed:n}))),j(!b)}),[R,n,b,p,j,E,A,I,N]),D=(0,r.useCallback)((function(e,t){var r=p.downloadButtonFactory();u?S((0,w._3)(u)):t===Ke.NV.ADD?E.logInteraction(r.hitDownload({itemToDownload:n})):t===Ke.NV.REMOVE?E.logInteraction(r.hitRemoveDownload({itemToRemoveFromDownloads:n})):t===Ke.NV.NO_PERMISSION&&E.logInteraction(r.hitUiReveal())}),[u,S,E,p,n]),_=(0,r.useCallback)((function(){var e=p.contextButtonFactory().hitUiReveal();E.logInteraction(e)}),[E,p]),T=(0,He.j)(),F=!!u,U=!s&&!F;return(0,X.jsxs)(ie.E,{backgroundColor:t,style:{"--action-bar-padding-bottom":Xe},children:[(0,X.jsx)(ae.S,{testId:"book-action-bar-metadata",children:(0,X.jsx)(Se,{explicit:v,publishDate:m,preReleaseEndDateTime:h,durationMs:f,isPreRelease:C,uri:n,isPlaying:a})}),(0,X.jsxs)(ae.S,{children:[C&&(0,X.jsx)(De,{uri:n}),!C&&(0,X.jsx)(Ve,{uri:n,isLocked:s,isConsumptionCapped:F,price:d,isPlaying:a,onPlayback:o,logger:E,spec:p,size:T}),!C&&(0,X.jsx)(ue.e,{children:(0,X.jsx)(oe.M,{isAdded:b,onClick:B,disabled:k,size:T,isAudiobook:!0,condensed:!0})},"follow-button"),(0,X.jsx)(se.I,{uri:n,onClick:D,size:T,canDownload:U}),(0,X.jsx)(P.b,{menu:(0,X.jsx)(ce.p,{uri:n,isPreRelease:C}),children:(0,X.jsx)(le.e,{label:l.Ru.get("more.label.context",i),onClick:_,size:T})})]})]})})),Je=n(59414),Ze=n(49383),$e=n(96635),et=n(65082),tt=n(28691),nt=n(55431),rt=n(74078),it=n(27550),at=n(3596),ot=n(77238),st=n(70859),lt=n(23294),ct=n(47832),ut=n(56122);const dt="BBK_i9SHovXTLVjas0kc";var pt=r.memo((function(e){var t=e.coverArt,n=e.name,r=e.authorName,i=e.uri,a=e.backgroundColor,o=e.isPlaying,s=e.togglePlay,c=e.isLocked,u=e.price,d=e.isConsumptionCapped,p=e.logger,v=e.spec,m=e.preReleaseEndDateTime,h=(0,ut.y)(),f=h===ct.E.SMALL||h===ct.E.XSMALL,g=Ne(),y=g.isPreRelease,b=g.setCountdownFinished,j=y&&f,w=(0,X.jsx)(ce.p,{uri:i});return(0,X.jsxs)(et.z,{backgroundColor:a,size:y?et.K.XLARGE:et.K.DEFAULT,children:[(0,X.jsxs)(rt.h,{children:[y&&(0,X.jsx)(De,{uri:i}),!y&&(0,X.jsx)(Ve,{uri:i,isLocked:c,price:u,isPlaying:o,isConsumptionCapped:d,onPlayback:s,logger:p,spec:v,size:"medium"}),(0,X.jsx)(Je.h,{menu:w,children:(0,X.jsx)(it.X,{text:n,dragUri:i,dragLabel:n})})]}),!j&&(0,X.jsx)(Je.h,{menu:w,children:(0,X.jsx)(tt.K,{images:t,name:n,dragUri:i,dragMimeType:$e.fl.AUDIOBOOKS,shape:I.u.SQUARE})}),(0,X.jsxs)(nt.Y,{children:[(0,X.jsx)(ot.B,{children:l.Ru.get("web-player.audiobooks.audiobook")}),(0,X.jsx)(Je.h,{menu:w,children:(0,X.jsx)(lt.mm,{canEdit:!1,onClick:function(){},scaleAtMinWidth:lt.tw,dragUri:i,dragMimeType:$e.fl.AUDIOBOOKS,dragLabel:n,children:n})}),y?(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(at.X,{children:(0,X.jsx)(x.E,{className:dt,variant:"bodySmallBold","data-testid":"entityAuthor",children:r})}),m&&(0,X.jsx)(Ze.G,{targetDate:m,images:j?t:[],imageTitle:n,onComplete:b})]}):(0,X.jsx)(st.g,{children:r})]})]})}));const vt="pwjwUMaZVoJ0wBcQlIDf";var mt=r.memo((function(e){var t=e.price;return t.finalPrice&&t.finalListPrice?0===t.finalPrice.amount&&0===t.finalListPrice.amount?(0,X.jsxs)("div",{className:vt,children:[(0,X.jsx)(x.E,{variant:"bodyMediumBold",semanticColor:"textBase",children:l.Ru.get("audiobook.freePriceDescription")}),(0,X.jsx)(x.E,{variant:"bodySmall",children:l.Ru.get("audiobook.freePriceExplanation")})]}):(0,X.jsxs)("div",{className:vt,children:[(0,X.jsx)(x.E,{variant:"titleSmall",semanticColor:"textBase",children:t.finalPrice.formattedPrice}),t.finalPrice.amount<t.finalListPrice.amount&&(0,X.jsx)(x.E,{variant:"bodyMedium",semanticColor:"textSubdued",children:l.Ru.get("web-player.audiobooks.retailPrice",(0,X.jsx)("span",{style:{textDecoration:"line-through"},children:t.finalListPrice.formattedPrice}))})]}):null})),ht=(n(30456),n(25550),n(34192),n(88856),n(15342),n(10659)),ft=n(80080),gt=n(58237),xt=n(49093),yt=n(18621),bt=n(41772);const jt="XzRW0BrBLoXKWET5f8m4",wt="ooqITYCPJKua4e5yv8_9",kt="zN8lTnSnAUSRAMPb7XYV",Pt="llVyicNXe8z0QAnoRur1",Ct="fCrjgF2UgDUWjtqWls4Q",St="CLnKy_BRVtIluLfBWy5t",Rt="RZa0qnXymlZCoGOdE03d",Et="RFXE57hUzWvvK4_7GX13",At="ALQqkJiR2lZOSYvhHesh",Ot="BQwrI2BbKK4n451iu2QC",Nt="VYLq_YaQVNISHPQOu2af";var It=r.memo((function(e){var t=e.name,n=e.duration,i=e.uri,a=e.bookName,o=e.usePlayContextItem,s=e.isChapterLocked,c=e.isPlayable,u=e.resumePositionMs,p=e.isFullyPlayed,v=e.isExplicit,m=e.is19PlusOnly,h=e.spec,b=e.index,j=e.consumptionCapExplanation,S=(0,r.useRef)(u),R=o({uri:i}),E=R.isPlaying,O=R.togglePlay,I=R.isActive,B=(0,ee.s)(),T=(0,Ue.V)(),F=(0,g.wA)(),U=(0,y.NC)(xt.HEU,{loadingValue:!1}),M=(0,yt.o)((function(e){var t;if((null==e||null===(t=e.item)||void 0===t?void 0:t.uri)===i){var n,r=null!==(n=(0,bt.s)(e))&&void 0!==n?n:0;return S.current=r,r}return 0})),L=(0,r.useCallback)((function(e){e.stopPropagation(),e.preventDefault()}),[]),z=(0,$.W)(),V=(0,r.useCallback)((function(e){if(L(e),j&&!T&&U)F((0,w._3)(j));else{var t=h.chapterBlockFactory({position:b,uri:i}).playButtonFactory();if(s)z({type:"click",intent:"audiobook-gated-entry-point",itemIdSuffix:"target-chapter"}),B.logInteraction(t.hitShowPaywall({paywalledItem:i}));else{var n=(0,gt.$I)({isPlaying:E,isActive:I,spec:t,logger:B,uri:i});O({loggingParams:n})}}}),[j,F,b,U,I,T,s,E,B,z,h,L,O,i]),W=(0,r.useCallback)((function(){var e=h.chapterBlockFactory({position:b,uri:i}).secondaryHitUiReveal();B.logInteraction(e)}),[b,B,h,i]),H=(0,r.useCallback)((function(e){L(e);var t=h.chapterBlockFactory({position:b,uri:i}).contextMenuFactory().hitUiReveal();B.logInteraction(t)}),[b,B,h,L,i]),G=!(s||j),q=(0,X.jsx)(ht.d,{className:f()((0,d.A)({},wt,I)),children:t}),K=(0,X.jsxs)("div",{className:St,children:[v&&(0,X.jsx)(N.U,{fullText:!0}),m&&(0,X.jsx)(D.q,{size:16}),(0,X.jsxs)("div",{className:Rt,children:[S.current?(0,X.jsx)(x.E,{variant:"bodySmall",className:Nt,children:(0,X.jsx)(_.d,{durationMs:n.milliseconds})}):null,(0,X.jsx)(ve.j,{isPlaying:E,fullyPlayed:p,durationMs:n.milliseconds,resumePositionMs:S.current,position:E?M:void 0})]})]}),Y=(0,X.jsxs)("div",{className:At,children:[(0,X.jsx)("div",{className:Ot,children:G?(0,X.jsx)(P.b,{menu:(0,X.jsx)(C.r,{uri:i}),children:(0,X.jsx)(k.e,{className:Ct,size:k.M.xs,label:l.Ru.get("more.label.context",t),onClick:H})}):null}),(0,X.jsx)("div",{className:Et,children:(0,X.jsx)(A.R,{size:"small",version:A.H.secondary,onClick:V,isPlaying:E,ariaPlayLabel:l.Ru.get("tracklist.a11y.play",t,a),ariaPauseLabel:l.Ru.get("tracklist.a11y.pause",t,a),locked:s&&!j,disabled:!c&&!(s||j)})})]}),Q=(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)("hr",{className:kt,"aria-hidden":!0}),(0,X.jsx)(ft.v,{id:"chapter-".concat(b),title:q,body:K,footer:Y,onDoubleClick:function(e){z({targetUri:i,intent:"play",type:"double-click"}),V(e)},className:jt})]});return G?(0,X.jsx)(Je.h,{menu:(0,X.jsx)(C.r,{uri:i}),onShow:W,children:(0,X.jsx)("div",{className:Pt,children:Q})}):(0,X.jsx)("div",{className:Pt,children:Q})})),Bt=n(19813),Dt=n(5470);var _t=n(41511);var Tt=function(e){var t=e.bookUri,n=e.bookName,i=e.sampleUri,a=e.isFinishedUnlockingJourney,o=e.usePlayContextItem,s=e.spec,l=e.consumptionCapExplanation,c=function(e,t){var n=(0,Dt.T)(),i=(0,r.useCallback)(function(){var r=(0,p.A)(m().mark((function r(i,a){return m().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.abrupt("return",n.getBookContents(e,{offset:i,limit:a,doRefreshSubscription:t}));case 1:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}(),[t,n,e]);return i}(t,a),u=(0,r.useRef)(!1),d=(0,r.useRef)(0),v=(0,de.z)(t).isMarkedAsFinished,h=(0,r.useState)([]),f=(0,ne.A)(h,2),g=f[0],x=f[1],y=(0,r.useCallback)((function(e){return(null==e?void 0:e.uri)===i}),[i]),b=(0,r.useCallback)((function(e){return function(e){return null!==e}(e)&&!y(e)}),[y]),j=(0,r.useCallback)((function(){c&&(u.current||null===d.current||(u.current=!0,c(d.current,50).then((function(e){u.current=!1,d.current=e.nextOffset,e.items.length>0&&x((function(t){return t.concat(e.items.filter(b))}))}))))}),[c,b]);return(0,r.useEffect)((function(){d.current=0,x([])}),[t]),(0,X.jsx)("ul",{children:(0,X.jsx)(Bt._,{onReachBottom:j,triggerOnInitialLoad:!0,children:g.map((function(e,t){var r=e.name,i=e.duration,a=e.uri,c=e.playability.playable,u=e.playedState,d=u.playPositionMilliseconds,p=u.state,m=e.isExplicit,h=e.is19PlusOnly,f=p===_t._w.Completed||v,g=function(e){var t,n,r;return!(null!==(t=e.playability)&&void 0!==t&&t.playable||(null===(n=e.playability)||void 0===n?void 0:n.reason)!==_t.Uk.PaymentRequired&&(null===(r=e.playability)||void 0===r?void 0:r.reason)!==_t.Uk.Anonymous)}(e);return(0,X.jsx)(It,{name:r,duration:i,uri:a,bookName:n,usePlayContextItem:o,isPlayable:c,isChapterLocked:g,consumptionCapExplanation:l,resumePositionMs:d,isFullyPlayed:f,isExplicit:m,is19PlusOnly:h,spec:s,index:t},a)}))})})},Ft=n(19662),Ut=n(3105),Mt=n(45169),Lt=(n(76588),n(33940)),zt=n(16409);const Vt="_yl4tOZxcpoUt28k6B8I",Wt="lcJflizNrSwDM9yPNk6h",Ht="ret7iHkCxcJvsZU14oPY";var Gt=function(e){var t,n,r,i=e.rating,a=e.className,o=e.onClick;if(!i)return null;var s=Boolean(null===(t=i.rating)||void 0===t?void 0:t.rating);return(0,X.jsxs)("button",{className:f()(Vt,a),onClick:o,children:[(0,X.jsx)(R.Z,{dir:"auto",variant:"mestoBold",children:null!==(n=i.averageRating)&&void 0!==n&&n.showAverage?l.Ru.formatNumber(i.averageRating.average,{maximumFractionDigits:1}):l.Ru.get("web-player.audiobooks.noRating")}),s?(0,X.jsx)(Lt.j,{iconSize:16,className:f()(Wt)}):(0,X.jsx)(zt.a,{iconSize:16,className:f()(Wt)}),(null===(r=i.averageRating)||void 0===r?void 0:r.showAverage)&&(0,X.jsxs)(R.Z,{variant:"mesto",className:f()(Ht),children:["(",l.Ru.formatNumberCompact(Number(i.averageRating.totalRatings)),")"]})]})},qt=n(24462),Kt=n(74484),Yt=n(35949),Xt=n(86634),Qt={shuffle:!1,repeat:Yt.p.REPEAT_NONE},Jt=r.memo((function(e){var t,n,a,s,u,v=e.metadata,h=v.uri,R=v.coverArt,E=v.name,A=v.htmlDescriptionPlain,O=v.authorName,N=v.sample,I=v.narrators,B=v.rating,D=v.isExplicit,_=v.duration,F=v.copyrights,U=v.publishDate,M=v.price,L=v.isLocked,z=v.isSaved,V=v.consumptionCapExplanation,W=v.signifierText,H=v.resumeEpisodeLink,G=v.topics,q=v.isPreRelease,K=v.preReleaseEndDateTime,Y=(0,i.zy)().search,Z=!!new URLSearchParams(Y).get("isUnlockingAudiobook"),ee=!(!(0,qt.Z)(Z)||Z),ne=(0,Ue.V)(),re=(0,Ut.H)(null===(t=R[0])||void 0===t?void 0:t.url),ie=(0,g.wA)(),ae=(0,$.W)(),oe=(0,y.NC)(xt.HEU,{loadingValue:!1}),se=(0,Ye.r)(b.U,{data:{uri:h,identifier:o.$h.PODCAST_SHOW_AUDIOBOOK}}),le=se.spec,ce=se.logger,ue=(0,Ye.r)(b.U,{data:{uri:h,identifier:o.$h.RATINGS_AND_REVIEWS_RATINGS_AUDIOBOOK}}),de=ue.spec,pe=ue.logger,ve=(0,Ye.r)(j.Y,{data:{uri:h,identifier:o.$h.PODCAST_SHOW_AUDIOBOOK}}),we=ve.spec,ke=ve.logger,Pe=(0,r.useMemo)((function(){return le.actionBarFactory()}),[le]),Ce=(0,r.useMemo)((function(){return de.aboutSectionFactory()}),[de]),Se=(0,r.useMemo)((function(){return le.chapterListFactory()}),[le]);(0,r.useEffect)((function(){ae({type:"view",intent:"audiobook"})}),[ae]),(0,r.useEffect)((function(){L&&ke.logImpression(we.impression())}),[we,ke,L]);var Re=(0,Kt.P)({uri:h},{featureIdentifier:"audiobook"},Qt),Ee=Re.isPlaying,Ae=Re.togglePlay,Ne=Re.usePlayContextItem,Ie=Re.isActive,Be=Re.triggerPlay,De=(0,Kt.P)({uri:null!==(n=null==N?void 0:N.uri)&&void 0!==n?n:"",pages:[{items:[{uri:null!==(a=null==N?void 0:N.uri)&&void 0!==a?a:"",uid:null!==(s=null==N?void 0:N.uri)&&void 0!==s?s:"",type:T.c.CHAPTER,provider:null,metadata:q?{is_pre_release:"true",type:"trailer"}:void 0}]}]},{featureIdentifier:"audiobook"},Qt),_e=De.togglePlay,Te=De.isPlaying,Fe=De.isActive,Me=Ee&&!Te,Le=Ie&&!Fe,ze=(0,r.useCallback)((0,p.A)(m().mark((function e(){var t,n;return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=le.actionBarFactory().playButtonFactory(),!V||ne||!oe){e.next=5;break}return ce.logInteraction(t.hitShowPaywall({paywalledItem:h})),ie((0,w._3)(V)),e.abrupt("return");case 5:if(!L||ne){e.next=7;break}return e.abrupt("return");case 7:ne?Ae():(n=(0,gt.$I)({isPlaying:Me,isActive:Le,spec:t,logger:ce,uri:h}),Le?Ae({loggingParams:n}):Be({skipTo:H?{uri:H}:void 0,loggingParams:n}));case 8:case"end":return e.stop()}}),e)}))),[le,V,ne,oe,L,ce,h,ie,Ae,Me,Le,Be,H]),Ve=(0,r.useCallback)((function(){null!=N&&N.uri&&(ae({targetUri:N.uri,intent:Te?"play":"pause",type:"click"}),_e())}),[Te,ae,_e,null==N?void 0:N.uri]),We=(0,r.useCallback)((function(){var e=Ce.ratingButtonFactory().hitUiReveal();pe.logInteraction(e),ie((0,w.eH)(h,v))}),[Ce,ie,v,pe,h]),He=(0,ut.y)(),Ge=L&&!V&&M;return(0,X.jsx)("section",{className:me,children:(0,X.jsxs)(Oe,{isPreRelease:q,children:[(0,X.jsx)(c.Q,{children:(0,Xt.hV)({showOrAudiobookName:E,type:"Audiobook"})}),(0,X.jsx)(Ft.c,{artistOrShow:O,title:E,uri:h,entityType:Ft.p.AUDIOBOOK}),(0,X.jsx)(pt,{name:E,authorName:O,uri:h,coverArt:R,backgroundColor:re,togglePlay:ze,isPlaying:Me,isLocked:L,isConsumptionCapped:!!V,price:M,logger:ce,spec:le.actionBarFactory(),preReleaseEndDateTime:K}),(0,X.jsx)(Qe,{name:E,backgroundColor:re,uri:h,togglePlay:ze,isPlaying:Me,isLocked:L,isSaved:z,consumptionCapExplanation:V,isExplicit:D,duration:_,publishDate:U,preReleaseEndDateTime:K,price:M,spec:Pe}),(0,X.jsxs)("div",{className:f()(he,"contentSpacing",(0,d.A)({},fe,He===ct.E.LARGE)),children:[(0,X.jsxs)("div",{className:ge,children:[(0,X.jsxs)("div",{className:je,children:[W&&(0,X.jsx)(x.E,{variant:"bodyMedium",as:"p",semanticColor:"textBrightAccent",children:W}),!W&&Ge&&(0,X.jsx)(mt,{price:M})]}),(0,X.jsx)(te,{htmlDescription:A,narrators:I,spec:Ce,isPreRelease:null!=q&&q})]}),(0,X.jsxs)("div",{className:xe,children:[(null==N?void 0:N.isPlayable)&&(0,X.jsx)(J,{label:l.Ru.get("audiobook.page.sample"),images:N.coverArt,title:N.name,duration:N.duration.milliseconds,moreButton:L?null:(0,X.jsx)(P.b,{menu:(0,X.jsx)(C.r,{uri:N.uri}),children:(0,X.jsx)(k.e,{})}),onClick:Ve,isPlaying:Te,isActive:Fe,size:Q.LARGE,contentRating:null===(u=N.contentRating)||void 0===u?void 0:u.label,isPlayable:N.isPlayable}),!q&&(0,X.jsx)("div",{className:ye,children:(0,X.jsx)(Gt,{rating:B,onClick:We})}),G.length>0&&(0,X.jsx)(S.N,{topics:G})]}),(0,X.jsxs)("div",{className:be,children:[!q&&(0,X.jsx)(Tt,{bookUri:h,bookName:E,sampleUri:null==N?void 0:N.uri,isFinishedUnlockingJourney:ee,usePlayContextItem:Ne,spec:Se,consumptionCapExplanation:V},"".concat(h,"-").concat(L,"-").concat(!!V)),(0,X.jsx)(Mt.Z,{copyrights:F})]})]})]})})})),Zt=n(64926),$t=n(39342),en=n(31196),tn=function(e){var t=e.uri,n=e.name,i=e.isSaved,a=e.backgroundColor,o=e.spec,s=(0,ee.s)(),c=(0,$.W)(),u=!(0,Ge.n)(),d=(0,qe.A)(t,i),p=(0,ne.A)(d,2),v=p[0],m=p[1],h=(0,We.d$)(),f=(0,Ye.r)(re.e,{data:{uri:t}}),g=f.spec,x=f.logger;(0,r.useEffect)((function(){h&&x.logImpression(g.impression())}),[h,x,g]);var y=(0,r.useCallback)((function(){c({targetUri:t,intent:v?"unsave":"save",type:"click"});var e=o.followButtonFactory();s.logInteraction(v?e.hitUnfollow({itemToBeUnfollowed:t}):e.hitFollow({itemToBeFollowed:t})),!v&&h&&x.logInteraction(g.hitFollow({itemToBeFollowed:t})),m(!v)}),[c,t,v,o,s,m,h,x,g]),b=(0,r.useCallback)((function(){s.logInteraction(o.contextButtonFactory().hitUiReveal())}),[s,o]),j=(0,He.j)();return(0,X.jsx)(ie.E,{backgroundColor:a,children:(0,X.jsxs)(ae.S,{children:[(0,X.jsx)(ue.e,{children:(0,X.jsx)(en.W,{isFollowing:v,onClick:y,disabled:u})},"follow-button"),(0,X.jsx)(P.b,{menu:(0,X.jsx)($t.H,{uri:t}),onShow:b,children:(0,X.jsx)(le.e,{label:l.Ru.get("more.label.context",n),size:j})})]})})},nn=(n(7651),n(14551),n(79210),n(71963)),rn=(n(70750),n(9434)),an=n(69093),on=n(6046),sn=n(8430),ln=n(22281),cn=n(80267),un=n(63130),dn=n(1131);const pn="BknvXMyUnN3fQCz8mvLI",vn="slMInsl3HL9_02zHT22R";var mn="40px",hn=function(e){var t,n=e.leavebehinds;return 1===n.length&&(t=(0,X.jsx)(x.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[0].advertiser})),2===n.length&&(t=l.Ru.get("podcast-ads.recent_ads_just_two",(0,X.jsx)(x.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[0].advertiser}),(0,X.jsx)(x.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[1].advertiser}))),n.length>2&&(t=l.Ru.get("podcast-ads.recent_ads_more_than_two",(0,X.jsx)(x.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[0].advertiser}),(0,X.jsx)(x.E,{variant:"bodySmallBold",semanticColor:"textBase",children:n[1].advertiser}))),(0,X.jsxs)(x.E,{variant:"bodySmall",semanticColor:"textSubdued","data-testid":"show-leavebehinds-text",children:[l.Ru.get("podcast-ads.recent_ads_from"),t]})},fn=function(e){var t,n=e.leavebehinds,i=e.uri,a=e.surface,o=(0,dn.vh)();if((0,r.useEffect)((function(){i&&n.length>0&&o.send((0,on.x)({leavebehind_request_id:n[0].requestId,event:"event_viewed",event_reason:"viewed_on_".concat((0,sn.Fh)(a).toLowerCase()),surface:(0,sn.Fh)(a),uri:i}))}),[o,n,i,a]),0===n.length)return null;var c=null===(t=(0,s.o_h)(i))||void 0===t?void 0:t.id,u=1===n.length?n[0].clickthroughUrl:(0,ln.q)(c),d=cn.Qd,p=n.length>d,v=n.length-(d-1),m=n.slice(0,p?d-1:d);return(0,X.jsx)(un.N,{to:u,pathname:n.length>1?u:void 0,state:{uri:i},className:vn,onClick:function(){return o.send((0,on.x)({leavebehind_request_id:n[0].requestId,event:"event_clicked",event_reason:"cta_see_all",surface:(0,sn.Fh)(a),uri:i}))},"data-testid":"show-leavebehinds-container",children:(0,X.jsx)(ft.v,{layout:"wide",variant:"tinted",size:"xl",id:"show-leavebehinds",title:(0,X.jsxs)("div",{className:pn,"data-testid":"show-leavebehinds-logos-container",children:[m.map((function(e){return(0,X.jsx)(rn.C,{"data-testid":"show-leavebehind-image",src:e.displayImage.src,alt:e.displayImage.alt,imageHeight:mn,imageWidth:mn},e.adId)})),p?(0,X.jsx)(gn,{"data-testid":"show-leavebehinds-more-count-indicator",variant:"tinted",minBlockSize:mn,borderRadius:"4px",padding:"6px",children:(0,X.jsx)(x.E,{variant:"bodyMedium","data-testid":"show-leavebehinds-more-count-indicator-text",children:l.Ru.get("podcast-ads.show_more_indicator",v)})}):null]}),body:(0,X.jsx)(hn,{leavebehinds:n})})})},gn=(0,nn.Ay)(an.a).withConfig({displayName:"LeavebehindsPreview___StyledBox",componentId:"sc-qakd80-0"})({backgroundColor:"#121212",width:"40px",display:"flex",alignItems:"center",justifyContent:"center"}),xn=n(61836),yn=sn.ui.SHOW_PAGE;function bn(e){var t,n=e.uri,i=(0,xn.A)({surface:yn,uri:n}),a=i.data,o=i.error,s=i.getLeavebehinds;(0,r.useEffect)((function(){s()}),[s]);var l=(0,r.useMemo)((function(){return a?(0,cn.iT)(a,n):[]}),[null==a?void 0:a.requestId]);return o||null!=a&&a.leavebehindAds&&(null==a||null===(t=a.leavebehindAds)||void 0===t?void 0:t.length)<1?null:(0,X.jsx)(fn,{leavebehinds:l,uri:n,surface:yn})}var jn=n(54363),wn=(n(26701),n(37417),n(11737),n(51691),n(702),n(5672),n(51565),n(18316),n(27367)),kn=n(18367),Pn=n(27963),Cn=n(1360),Sn=n(23327),Rn=n(1324),En=n(71757);function An(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function On(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?An(Object(n),!0).forEach((function(t){(0,d.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):An(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Nn=function(e){var t,n=e.className,r=e.title,i=e.uri,a=(0,Pn.v)({uri:i}).data,o=null==a?void 0:a.seoRecommendedPodcast.totalCount,c=function(e){return(e||[]).filter((function(e){return(0,Sn.K)(e.data)}))}(null==a?void 0:a.seoRecommendedPodcast.items);if(0===o)return null;var u=null===(t=(0,s.o_h)(i))||void 0===t?void 0:t.id;return(0,X.jsx)(Rn.$,{className:n,title:r,seeAllLabel:l.Ru.get("shelf.see-all"),total:o,alwaysShowSeeAll:!0,seeAllUri:"spotify:app:show:".concat(u,":more-like-this"),children:null==c?void 0:c.map((function(e,t){var n,r,i,a=e.data;return(0,X.jsx)(wn.o,{uri:a.uri,name:a.name,images:(null===(n=a.coverArt)||void 0===n?void 0:n.sources)||[],publisher:null!==(r=null===(i=a.publisher)||void 0===i?void 0:i.name)&&void 0!==r?r:"",sharingInfo:null,mediaType:(0,En.w)(a.mediaType),index:t},a.uri)}))})},In=function(e){var t=(0,Cn.D)({entityType:T.c.SHOW,componentType:"shelf",uri:e.uri});return(0,X.jsx)(kn.s,{onError:t,children:(0,X.jsx)(Nn,On({},e))})},Bn=n(29213),Dn=n(14810),_n=n(22507),Tn=(n(40122),n(20087)),Fn=n(4640),Un=n(62381),Mn=(0,r.createContext)({setSortState:function(){throw new Error("setSortState must be used within a ShowFilterProvider")},sortState:[]}),Ln=r.memo((function(e){var t=e.uri,n=e.children;return(0,X.jsx)(Un.E,{uri:t,defaultState:[],sortContext:Mn,localStorageKey:"showFilterParams-v2",children:n})})),zn=(n(86746),n(28430),n(9582),n(71425),n(42745)),Vn={field:zn.WY.PUBLISH_DATE,order:zn.AX.DESC},Wn={field:zn.WY.PUBLISH_DATE,order:zn.AX.ASC},Hn=Wn,Gn={episodic:Vn,sequential:Wn,recent:Vn};function qn(){return new Map([[Vn,{key:"newest-to-oldest",value:l.Ru.get("shows.sort.newest-to-oldest")}],[Wn,{key:"oldest-to-newest",value:l.Ru.get("shows.sort.oldest-to-newest")}]])}function Kn(e){return Gn[e]}var Yn=(0,r.createContext)({setSortState:function(){throw new Error("setSortState must be used within a ShowSortProvider")},sortState:Kn("recent")}),Xn=function(e){var t=qn();return Array.from(t.keys()).some((function(t){return t.field===(null==e?void 0:e.field)}))},Qn=r.memo((function(e){var t=e.uri,n=e.children,r=e.defaultSortParam;return(0,X.jsx)(Un.E,{uri:t,defaultState:r,sortContext:Yn,localStorageKey:"showSortParam",validator:Xn,children:n})})),Jn=n(15190),Zn=n(14816),$n=n(88308);const er="ysJC093hc_2ixGCy40_s",tr="mJP3Bamg3hN7S0p7XKfN",nr="clPqCj1L_KSfoVuTuP6x",rr="vqQmhCMZq7eUtTV7YYOQ";function ir(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ar(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ir(Object(n),!0).forEach((function(t){(0,d.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ir(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var or={totalCount:0,nextOffset:0,items:[]},sr=r.memo((function(e){var t,n,i,a,o,s,c,u=e.showMetadata,d=e.usePlayContextItem,v=(0,r.useContext)(Yn).sortState,h=(0,r.useContext)(Mn).sortState,f=(t=u.uri,n=v,i=h,a=(0,Dt.T)(),o=a.capabilities.canSort,s=(0,$n.U0)(function(){var e=(0,p.A)(m().mark((function e(r,o){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getContents(t,{offset:r,limit:o,sort:n,filters:i}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a,t,n,i]),c=(0,$n.U0)(function(){var e=(0,p.A)(m().mark((function e(n,r){return m().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",a.getContents(t,{offset:n,limit:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),[a,t]),o?s:c),g=(0,r.useState)(or),y=(0,ne.A)(g,2),b=y[0],j=y[1],w=(0,r.useRef)(!1),k=(0,r.useRef)(0),P=(0,Jn.c)(),C=P?6:50,S=P&&null!==k.current,R=(0,r.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(f){var t=k.current;null!==t&&!w.current&&C>0&&(w.current=!0,f(t,C).then((function(n){j((function(r){var i=e?[]:(0,_n.A)(r.items);return i.splice.apply(i,[t,n.items.length].concat((0,_n.A)(n.items))),k.current=n.nextOffset,ar(ar({},n),{},{items:i})})),w.current=!1})))}}),[f,C]);return(0,r.useEffect)((function(){j(or)}),[u.uri]),(0,r.useEffect)((function(){k.current=0,R(!0)}),[R]),(0,X.jsxs)(Zn.pZ,{value:"track-list",children:[(0,X.jsx)(Bt._,{onReachBottom:P?void 0:R,triggerOnInitialLoad:!0,children:b.items.map((function(e,t){return e&&(0,X.jsxs)("div",{className:tr,children:[(0,X.jsx)("hr",{className:er,"aria-hidden":!0}),(0,X.jsx)(Dn.q,{index:t,episode:e,showMetadata:u,usePlayContextItem:d},"".concat(e.uri,"/").concat(t))]},"".concat(t).concat(e.uri))}))}),S&&(0,X.jsx)("div",{className:nr,children:(0,X.jsxs)(Tn.v,{onClick:function(){R()},className:rr,children:[(0,X.jsx)(x.E,{variant:"bodySmallBold",children:l.Ru.get("internal-link-recommender.load-more-episodes")}),(0,X.jsx)(Fn.V,{size:"xsmall"})]})})]})})),lr=(n(40065),n(4865),n(40407)),cr={field:zn.K$.ISPLAYED,operator:zn.uj.EQUALS,value:!1},ur={field:zn.K$.STARTEDPLAYING,operator:zn.uj.GREATER_THAN,value:0};var dr="all-episodes",pr=function(e){var t=e.onFilter,n=(0,r.useContext)(Mn),i=n.sortState,a=n.setSortState,o=new Map([[cr,{key:"is-played",value:l.Ru.get("shows.filter.unplayed")}],[ur,{key:"started-playing",value:l.Ru.get("shows.filter.in-progress")}]]),s=Array.from(o.values());s.unshift({key:dr,value:l.Ru.get("mwp.podcast.all.episodes")});var c=Array.from(o.keys()),u=(0,r.useCallback)((function(e){if(e===dr)a([]);else{var n=c.find((function(t){var n;return(null===(n=o.get(t))||void 0===n?void 0:n.key)===e}));n&&a([n])}t()}),[t,a,c,o]);if(!o.size||!c)return null;var d=s[0],p=Array.from(o.entries()).filter((function(e){return null==i?void 0:i.some((function(t){return t.field===e[0].field&&t.operator===e[0].operator}))}));return p.length>0&&(d=p[0][1]),(0,X.jsx)(lr.g,{options:s,onSelect:function(e){return u(e)},selected:d,variant:"bodyMediumBold",semanticColor:"textBase",heading:l.Ru.get("drop_down.filter_by")})},vr=function(e){var t=e.onSort,n=(0,r.useContext)(Yn),i=n.sortState,a=n.setSortState,o=qn(),s=Array.from(o.values()),c=Array.from(o.keys()),u=(0,r.useCallback)((function(e){var n=c.find((function(t){var n;return(null===(n=o.get(t))||void 0===n?void 0:n.key)===e}));n&&a(n),t()}),[c,t,o,a]);if(!o.size||!i)return null;var d=Array.from(o.keys()).find((function(e){return e.field===i.field&&e.order===i.order}));if(!d)return null;var p=o.get(d);return p?(0,X.jsx)(lr.g,{options:s,onSelect:function(e){return u(e)},selected:p,heading:l.Ru.get("drop_down.sort_by")}):null};const mr="bOAvdKi0zqyA_S6ThcvF",hr="jVWq1orbpiIK34UFHkFb",fr="gYTsg8kvcGmu41_lilIb",gr="GMHh7OED_Nijo4zzSfrb",xr="sNEwCEh44Lapg36PnVFw",yr="OMG3QMzpwer8oWsiJpzs",br="r0yVSge7A1iSTNfudfyV",jr="yP6EeRtQJeqKq10IsMxn",wr="MIaGJ1KyQ3JLblOjWL19",kr="p8WHC1qBUrwrBwzp_vYY",Pr="Uzyuaxpkm_Gwb6jOGbva",Cr="TSNj_F4gGzCuxrzx6n98",Sr="E4HX0M3aD0MY5dUCKSCb",Rr="CbSqM7wDwoLFnyIo1iKL",Er="c0h80mSMc3PkNlHX0DYs",Ar="SGGetEMTKgQk1aJvG4k9",Or="ne3ntrWAoMrE6_4A23Mf";var Nr=function(e){var t=e.spec,n=(0,ee.s)(),i=(0,Dt.T)().capabilities,a=i.canSort,o=i.canFilter,s=(0,r.useCallback)((function(){n.logInteraction(t.episodeListFactory().filterButtonFactory().hitFilter())}),[n,t]),c=(0,r.useCallback)((function(){n.logInteraction(t.episodeListFactory().sortButtonFactory().hitSort())}),[n,t]);return(0,X.jsxs)("div",{className:jr,children:[o&&(0,X.jsx)("div",{className:kr,children:(0,X.jsx)(pr,{onFilter:s})}),!o&&(0,X.jsx)(x.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Pr,children:l.Ru.get("mwp.podcast.all.episodes")}),a&&(0,X.jsx)("div",{className:wr,children:(0,X.jsx)(vr,{onSort:c})})]})},Ir=n(30021),Br=n(45335),Dr=n(12491),_r=n(84959),Tr=function(e){switch(e){case _t.t5.TRAILER:return l.Ru.get("podcasts.next-episode.trailer");case _t.t5.UP_NEXT:return l.Ru.get("podcasts.next-episode.up-next");case _t.t5.CONTINUE_LISTENING:return l.Ru.get("podcasts.next-episode.continue-listening");case _t.t5.FIRST_PUBLISHED:return l.Ru.get("podcasts.next-episode.first-published");case _t.t5.LATEST_PUBLISHED:return l.Ru.get("podcasts.next-episode.latest-published");default:return}},Fr=function(e){var t,n,i=e.breakpoint,o=e.metadata,s=e.spec,c=o.uri,u=o.trailer,p=o.topics,v=o.description,m=o.htmlDescription,h=o.rating,b=(0,ee.s)(),j=(0,Ye.r)(a.R,{data:{uri:c}}),C=j.spec,R=j.logger,E=(0,r.useMemo)((function(){return C.aboutSectionFactory()}),[C]),A=(0,r.useMemo)((function(){return s.episodeListFactory()}),[s]),O=(0,g.wA)(),N=(0,y.NC)(xt.Pfj,{loadingValue:!1}),I=(0,$.W)(),B=(0,Ue.V)(),D=(0,r.useContext)(Mn).sortState,_=(0,Dt.T)(),T=(0,Jn.c)(),F=(0,Kt.P)({uri:c,metadata:(0,d.A)((0,d.A)({},Dr.W.SORTING_CRITERIA,_.getPlayerSort(Hn)),Dr.W.FILTERING_PREDICATE,_.getPlayerFilter(D))},{featureIdentifier:"show"}).usePlayContextItem,U=F({uri:(null==u?void 0:u.uri)||""}),M=U.isActive,L=U.isPlaying,z=U.togglePlay,V=(0,r.useCallback)((function(e){I({intent:"expand-description",type:"click"});var t=s.aboutSectionFactory().seeMoreButtonFactory(),n=e?t.hitUiReveal():t.hitUiHide();b.logInteraction(n)}),[b,I,s]),W=(0,r.useCallback)((function(e,t){var n=s.aboutSectionFactory().topicFactory(t).hitUiNavigate({destination:t.uri});b.logInteraction(n)}),[b,s]),H=u?{name:u.name,uri:u.uri,audio:{items:u.audio.items.map((function(e){return{url:e.url}}))}}:null,G=(0,Dn.B)(o),q=(0,Ir.C)(H,G),K=(0,r.useCallback)((function(){null!=u&&u.uri&&(B?q():(I({targetUri:u.uri,intent:L?"play":"pause",type:"click"}),z()))}),[q,B,L,I,z,null==u?void 0:u.uri]),Y=(0,Br.x)((0,d.A)((0,d.A)({},ct.E.MEDIUM,0),ct.E.LARGE,600)),te=Y.ref,ne=Y.breakpoint,re=p.length>0,ie=v||m,ae=ie||re,oe=(null===(t=o.nextBestEpisode)||void 0===t?void 0:t.type)===_t.t5.LATEST_PUBLISHED&&N;return(0,X.jsxs)("div",{className:f()(hr,"contentSpacing",(0,d.A)({},gr,i===ct.E.LARGE)),ref:te,children:[(0,X.jsx)(Bn.q,{className:fr,gatedEntityRelations:o.gatedEntityRelations,upsellExplanation:o.upsellExplanation,hasAccess:o.hasGatedEntityRelationAccess}),(0,X.jsxs)("div",{className:xr,children:[ae&&(0,X.jsxs)(X.Fragment,{children:[(0,X.jsx)(x.E,{as:"h3",variant:"titleSmall",semanticColor:"textBase",className:Pr,children:l.Ru.get("artist.about")}),ie&&(0,X.jsx)(Z.N,{maxLines:4,content:(v||"").trim(),onExpanded:V,htmlContent:m||void 0}),u&&(0,X.jsx)(Je.h,{menu:(0,X.jsx)(jn.b,{uri:u.uri,showUri:c,sharingInfo:u.sharingInfo}),children:(0,X.jsx)(J,{label:l.Ru.get("track-trailer"),className:Cr,images:u.coverArt,title:u.name,duration:u.duration.milliseconds,moreButton:(0,X.jsx)(P.b,{menu:(0,X.jsx)(jn.b,{uri:u.uri,sharingInfo:u.sharingInfo,showUri:c}),children:(0,X.jsx)(k.e,{})}),onClick:K,isPlaying:L,isActive:M,size:Q.LARGE,contentRating:null===(n=u.contentRating)||void 0===n?void 0:n.label})}),(0,X.jsxs)("div",{className:Rr,children:[h&&(0,X.jsx)("div",{className:Er,children:(0,X.jsx)(Gt,{rating:h,onClick:function(){var e=E.ratingButtonFactory().hitUiReveal();R.logInteraction(e),O((0,w.eH)(c,o))}})}),re&&(0,X.jsx)(S.N,{topics:p,className:Ar,onClick:W})]})]}),(0,X.jsx)(bn,{uri:c})]}),(0,X.jsx)(ut.o.Provider,{value:ne,children:(0,X.jsxs)("div",{className:f()(yr,(0,d.A)({},br,T)),"data-testid":"show-all-episode-list",children:[o.nextBestEpisode&&!oe&&(0,X.jsx)(Dn.q,{showMetadata:o,episode:o.nextBestEpisode.data,usePlayContextItem:F,status:Tr(o.nextBestEpisode.type),variant:"next-best-episode"}),(0,X.jsx)(Nr,{spec:s}),(0,X.jsx)(_r.r,{spec:A,children:(0,X.jsx)(sr,{showMetadata:o,usePlayContextItem:F})})]})}),(0,X.jsx)(Mt.Z,{copyrights:[]}),T&&(0,X.jsx)(In,{title:l.Ru.get("internal-link-recommender.more-podcasts-like-this"),uri:c,className:Or})]})},Ur=r.memo(Fr),Mr=n(72138),Lr=n(91010),zr=function(e){var t=e.reason,n=(0,y.NC)(xt.C2),r=function(e){switch(e){case"OTP":return l.Ru.get("podcasts.subscriber-indicator.otp");case"SUBSCRIPTION":return l.Ru.get("podcasts.subscriber-indicator.subscription");default:return""}}(t);return n&&r?(0,X.jsx)(x.E,{variant:"bodySmall",semanticColor:"textBase",className:Sr,children:r}):null};var Vr=function(e){var t=e.metadata,n=e.backgroundColor,r=t.uri,i=t.coverArt,a=t.name,o=t.podcastType,s=t.publisherName,c=t.gatedContentAccessReason,u=(0,X.jsx)($t.H,{uri:r});return(0,X.jsxs)(et.z,{backgroundColor:n,children:[(0,X.jsx)(rt.h,{children:(0,X.jsx)(Je.h,{menu:u,children:(0,X.jsx)(it.X,{text:a,dragUri:r,dragLabel:a})})}),(0,X.jsx)(Mr.X,{children:(0,X.jsx)(Je.h,{menu:u,children:(0,X.jsx)(Lr.b,{loading:"eager",name:a,images:i,placeholderType:"show",shape:Lr.u.SQUARE})})}),(0,X.jsxs)(nt.Y,{children:[(0,X.jsxs)(ot.B,{children:["SHOW"===o?l.Ru.get("type.show"):l.Ru.get("type.podcast"),c&&(0,X.jsx)(zr,{reason:c})]}),(0,X.jsx)(Je.h,{menu:u,children:(0,X.jsx)(lt.mm,{dragUri:r,dragLabel:a,scaleAtMinWidth:lt.tw,children:(0,X.jsx)("span",{"data-testid":"show-title",children:a})})}),(0,X.jsx)(st.g,{children:s})]})]})},Wr=n(96254),Hr=n(53520),Gr=function(e){var t,n=e.metadata,i=e.showId,o=n.coverArt,s=n.name,l=n.uri,u=n.isSaved,d=(0,Ye.r)(a.R,{data:{uri:l}}).spec,p=(0,r.useMemo)((function(){return d.actionBarFactory()}),[d]),v=(0,Ut.H)((null===(t=o[0])||void 0===t?void 0:t.url)||null),m=(0,ut.y)();return(0,X.jsxs)("section",{className:mr,children:[(0,X.jsx)(c.Q,{children:(0,Xt.hV)({showOrAudiobookName:s,type:"Podcast"})}),(0,X.jsx)(Ft.c,{artistOrShow:s,uri:l,entityType:Ft.p.PODCAST}),(0,X.jsx)(Vr,{metadata:n,backgroundColor:v}),(0,X.jsx)(tn,{uri:l,name:s,isSaved:u,backgroundColor:v,spec:p}),(0,X.jsx)(Ur,{breakpoint:m,metadata:n,showId:i,spec:d})]})};const qr=(0,r.memo)((function(){var e=(0,i.g)().showId,t=void 0===e?"":e,n="spotify:show:".concat(t),a=(0,Ie.W)(n),c=a.data,d=a.error,p=a.redirectUri;if(p){var v=(0,s.Lce)(p);return(0,X.jsx)(Zt.$,{to:v.toURLPath(!0)})}var m=c&&(0,_t.Go)(c);return!c||d?d instanceof Hr.W?(0,X.jsx)(u.LoadingPage,{hasError:!0,errorMessage:l.Ru.get("error-page.not-available-in-region.title")}):(0,X.jsx)(u.LoadingPage,{hasError:!!d,errorMessage:l.Ru.get("error.not_found.title.page")}):m?(0,X.jsx)(r.Suspense,{fallback:null,children:(0,X.jsx)(Wr.u,{pageId:o.$h.PODCAST_SHOW_AUDIOBOOK,uri:n,children:(0,X.jsx)(Jt,{metadata:c},"".concat(!!c.consumptionCapExplanation))})}):(0,X.jsx)(r.Suspense,{fallback:null,children:(0,X.jsx)(Wr.u,{pageId:o.$h.PODCAST,uri:n,children:(0,X.jsx)(Ln,{uri:c.uri,children:(0,X.jsx)(Qn,{uri:c.uri,defaultSortParam:Kn(c.consumptionOrder),children:(0,X.jsx)(Gr,{showId:t,metadata:c})})})})})}))},286:(e,t,n)=>{n.d(t,{$:()=>i});n(60287);var r=n(30758),i=function(e,t){var n=(0,r.useRef)(e);(0,r.useEffect)((function(){n.current=e}),[e]),(0,r.useEffect)((function(){var e=void 0;function r(){e&&clearInterval(e)}if(null!==t)return e=setInterval((function(){n.current(r)}),t),r}),[t])}}}]);
//# sourceMappingURL=xpui-routes-show.js.map