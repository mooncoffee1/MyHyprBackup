"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{51583:(n,e,t)=>{t.r(e),t.d(e,{default:()=>m});t(42486),t(83234),t(75380),t(79024),t(68216),t(43379),t(2823),t(78397),t(97460),t(29426),t(93577),t(54520),t(91531),t(93678),t(34145);var a=t(30758),r=t(88677),i=t(44286),o=t(80366),c=t(92107),l=t(44206),u=t(7975),d=t(65249),f=t(87718),s=t(64869),k=t(45017),v=t(86070),g=a.memo((function(){var n,e=(0,i.Zp)(),t=(0,i.zy)(),g=(0,k.m)(),m=(0,s.z)(),p=(0,i.g)().trackId,h=void 0===p?"":p,b=(0,r.d4)(d.Ht).isAnonymous,U=(0,a.useMemo)((function(){return new URLSearchParams(t.search)}),[t.search]),y=U.get("context")||"",_=(0,o.tR)(h).toURI(),x=(0,u.J)({uri:_},{gcTime:30*f.i}),I=(0,a.useCallback)((function(n,t){var a,r=m.getState(),i=null===(a=(0,o.o_)(t))||void 0===a?void 0:a.toURLPath(!0);U.delete("context");var c=U.toString()?"&".concat(U.toString()):"",l="".concat(i,"?highlight=").concat(_).concat(c);b?e(l):(r&&!r.isPaused||n>-1&&m.play({uri:t},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:n}}),e(l,{replace:!0}))}),[e,b,m,_,U]),T=(0,a.useCallback)((function(){var n;if(!x.loading&&null!==(n=x.data)&&void 0!==n&&n.trackUnion&&"Track"===x.data.trackUnion.__typename){var e,t,a,r=(null!==(e=null===(t=x.data.trackUnion.albumOfTrack)||void 0===t||null===(t=t.tracks)||void 0===t?void 0:t.items)&&void 0!==e?e:[]).findIndex((function(n){return n.track.uri===_}));if(r>=0)I(r,(null===(a=x.data.trackUnion.albumOfTrack)||void 0===a?void 0:a.uri)||"")}}),[I,x,_]);return(0,a.useEffect)((function(){var n=(0,o.tb)(y);y&&n?g.getContents(y).then((function(n){var e=n.items.findIndex((function(n){return(null==n?void 0:n.uri)===_}));e<0?T():I(e,y)})):T()}),[y,T,I,g,_]),x.loading||x.error||"Track"!==(null===(n=x.data)||void 0===n||null===(n=n.trackUnion)||void 0===n?void 0:n.__typename)?(0,v.jsx)(l.LoadingPage,{hasError:!x.loading,errorMessage:c.Ru.get("track-page.error")}):null}));const m=g}}]);
//# sourceMappingURL=xpui-routes-track.js.map