"use strict";(("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[]).push([[3890],{14457:(e,n,t)=>{t.r(n),t.d(n,{default:()=>h});t(42486),t(83234),t(75380),t(79024),t(68216),t(43379),t(2823),t(78397),t(97460),t(29426),t(93577),t(54520),t(91531),t(93678),t(34145);var a=t(30758),r=t(94822),i=t(90543),o=t(2860),c=t(99),l=t(96974),u=t(62164),d=t(73309),f=t(93611),s=t(64654),k=t(4178),v=t(86070),g=a.memo((function(){var e,n=(0,i.Zp)(),t=(0,i.zy)(),g=(0,k.m)(),h=(0,s.z)(),m=(0,i.g)().trackId,p=void 0===m?"":m,b=(0,r.d4)(d.Ht).isAnonymous,U=(0,a.useMemo)((function(){return new URLSearchParams(t.search)}),[t.search]),y=U.get("context")||"",_=(0,o.Mce)(p).toURI(),x=(0,u.J)({uri:_},{gcTime:30*f.i}),I=(0,a.useCallback)((function(e,t){var a,r=h.getState(),i=null===(a=(0,o.o_h)(t))||void 0===a?void 0:a.toURLPath(!0);U.delete("context");var c=U.toString()?"&".concat(U.toString()):"",l="".concat(i,"?highlight=").concat(_).concat(c);b?n(l):(r&&!r.isPaused||e>-1&&h.play({uri:t},{featureIdentifier:"track",referrerIdentifier:"deeplink"},{skipTo:{index:e}}),n(l,{replace:!0}))}),[n,b,h,_,U]),T=(0,a.useCallback)((function(){var e;if(!x.loading&&null!==(e=x.data)&&void 0!==e&&e.trackUnion&&"Track"===x.data.trackUnion.__typename){var n,t,a,r=(null!==(n=null===(t=x.data.trackUnion.albumOfTrack)||void 0===t||null===(t=t.tracks)||void 0===t?void 0:t.items)&&void 0!==n?n:[]).findIndex((function(e){return e.track.uri===_}));if(r>=0)I(r,(null===(a=x.data.trackUnion.albumOfTrack)||void 0===a?void 0:a.uri)||"")}}),[I,x,_]);return(0,a.useEffect)((function(){var e=(0,o.tbX)(y);y&&e?g.getContents(y).then((function(e){var n=e.items.findIndex((function(e){return(null==e?void 0:e.uri)===_}));n<0?T():I(n,y)})):T()}),[y,T,I,g,_]),x.loading||x.error||"Track"!==(null===(e=x.data)||void 0===e||null===(e=e.trackUnion)||void 0===e?void 0:e.__typename)?(0,v.jsx)(l.LoadingPage,{hasError:!x.loading,errorMessage:c.Ru.get("track-page.error")}):null}));const h=g}}]);
//# sourceMappingURL=xpui-routes-track.js.map