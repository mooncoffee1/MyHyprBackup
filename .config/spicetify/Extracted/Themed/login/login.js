(()=>{var e,t={95596:(e,t,n)=>{"use strict";var r={};n.r(r),n.d(r,{enableAccountsAuthClient:()=>d,enableNewLoginExperience:()=>f,enableNothing:()=>l});var i=n(5904),o=n(64501),a=n.n(o),s=(n(184),n(42486),n(43379),n(60482),n(51234),n(99576)),u=n(65277),c=n(42094),l=(0,c.m9)({name:"enableNothing",description:"Property to that does nothing.",default:!1}),f=(0,c.m9)({name:"enableNewLoginExperience",description:"Enable new login design and experience",default:!1}),d=(0,c.m9)({name:"enableAuthClient",description:"Enable new Auth Client for accounts login",default:!1}),h=n(51488),p=n(26863),g=(n(78551),n(82467),n(30758)),v=n(36734),y=n(18896);const m="EDO6W2NIL5kJzuuvw2J7",A="bnCvPLsrkevVeOYYpwQG",b="qizIRC62kg8aAqE5y1K6";var w=n(62337),k=n(13707),x=n(63318),E=n(65968),D=(n(7651),n(14551),n(9267),n(30456),n(26701),n(86746),n(45434),n(79024),n(34518),n(25550),n(70750),n(47710),n(26851),n(68216),n(47994),n(9750),n(8674),n(5672),n(72636),n(94592),n(88345),n(2823),n(72865),n(65594),n(78397),n(59255),n(85130),n(55636),n(28509),n(97332),n(46555),n(13296),n(24594),n(97460),n(83154),n(4672),n(34072),n(34192),n(88856),n(51565),n(15342),n(18316),n(93577),n(94758)),_=n.n(D),F=n(18908),S=n(8047),C=n(58213),O=n(10942);n(83234),n(77905),n(65050),n(71425),n(90489),n(60287);function j(e,t,n,r){var i=(0,F.A)((0,C.A)(1&r?e.prototype:e),t,n);return 2&r?function(e){return i.apply(n,e)}:i}function N(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,R()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function R(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(R=function(){return!!e})()}var I,P=864e5,L=function(){return(0,E.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;if((0,x.A)(this,e),(0,h.A)(this,"_cache",new Map),this._ttl=t,null!==t&&(t<1||t>P))throw new Error("TTL should be between ".concat(1," (1 ms) and ").concat(P," (1 day)."))}),[{key:"isExpired",value:function(e){return null!==e.expiry&&e.expiry<Date.now()}},{key:"getExpiry",value:function(){return null!==this._ttl?Date.now()+this._ttl:null}},{key:"entries",value:function(){return this._cache.entries()}},{key:"has",value:function(e){return void 0!==this.get(e)}},{key:"peek",value:function(e){var t=this._cache.get(e);return null==t?void 0:t.value}},{key:"get",value:function(e){var t=this._cache.get(e);if(void 0!==t){if(!this.isExpired(t))return t.value;this._cache.delete(e)}}},{key:"set",value:function(e,t){this._cache.set(e,{value:t,expiry:this.getExpiry()})}},{key:"create",value:function(e,t){var n=this.get(e);if(void 0===n){var r=t();return this.set(e,r),r}return n}},{key:"delete",value:function(e){this._cache.delete(e)}},{key:"clear",value:function(){this._cache.clear()}},{key:"cleanup",value:function(){var e=this;this._cache.forEach((function(t,n){e.isExpired(t)&&e._cache.delete(n)}))}}])}(),M=function(e){function t(){return(0,x.A)(this,t),N(this,t,[null])}return(0,O.A)(t,e),(0,E.A)(t,[{key:"deleteOnSettle",value:function(e,t){var n=this;return t.then((function(){return n.delete(e)}),(function(){return n.delete(e)})),t}},{key:"create",value:function(e,n){var r=j(t,"create",this,3)([e,n]);return this.deleteOnSettle(e,r)}},{key:"set",value:function(e,n){j(t,"set",this,3)([e,this.deleteOnSettle(e,n)])}}])}(L),T=function(e){return e.AR="، ",e.FA="، ",e.EN=", ",e}({}),B=function(e){return e.af="af",e.am="am",e.ar="ar",e.arEG="ar-EG",e.arMA="ar-MA",e.arSA="ar-SA",e.az="az",e.bg="bg",e.bn="bn",e.bho="bho",e.bs="bs",e.ca="ca",e.cs="cs",e.da="da",e.de="de",e.el="el",e.en="en",e.enGB="en-GB",e.es419="es-419",e.es="es",e.esAR="es-AR",e.esMX="es-MX",e.et="et",e.eu="eu",e.fa="fa",e.fi="fi",e.fil="fil",e.frCA="fr-CA",e.fr="fr",e.gl="gl",e.gu="gu",e.he="he",e.hi="hi",e.hr="hr",e.hu="hu",e.id="id",e.is="is",e.it="it",e.ja="ja",e.kn="kn",e.ko="ko",e.lt="lt",e.lv="lv",e.mk="mk",e.ml="ml",e.mr="mr",e.ms="ms",e.nb="nb",e.ne="ne",e.nl="nl",e.or="or",e.paIN="pa-IN",e.paPK="pa-PK",e.pl="pl",e.ptBR="pt-BR",e.ptPT="pt-PT",e.ro="ro",e.ru="ru",e.sk="sk",e.sl="sl",e.sr="sr",e.sv="sv",e.sw="sw",e.ta="ta",e.te="te",e.th="th",e.tr="tr",e.uk="uk",e.ur="ur",e.vi="vi",e.zhCN="zh-CN",e.zhHK="zh-HK",e.zhTW="zh-TW",e.zu="zu",e}({});function U(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return W(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?W(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var H=new Intl.Locale(B.en);Object.values(B);function z(e){var t="(?:".concat(e.join("|"),")");return new RegExp(String.raw(I||(I=(0,w.A)(["({","}|%","%)"],["(\\{","\\}|%","%)"])),t,t),"g")}var V=new(function(){return(0,E.A)((function e(){(0,x.A)(this,e),(0,h.A)(this,"_localeForTranslation",H),(0,h.A)(this,"_localeForFormatting",H),(0,h.A)(this,"_localeForURLPath",H),(0,h.A)(this,"_translations",{}),(0,h.A)(this,"_relativeTimeFormat",null),(0,h.A)(this,"_dateTimeFormats",new L),(0,h.A)(this,"_pluralRules",null)}),[{key:"getRelativeTimeFormat",value:function(){return null===this._relativeTimeFormat&&(this._relativeTimeFormat=new Intl.RelativeTimeFormat(this._localeForFormatting.toString())),this._relativeTimeFormat}},{key:"getDateTimeFormat",value:function(e){var t=this,n=JSON.stringify(Object.keys(e).sort().map((function(t){return(0,h.A)({},t,e[t])})));return this._dateTimeFormats.create(n,(function(){return new Intl.DateTimeFormat(t._localeForFormatting.toString(),e)}))}},{key:"getPluralRules",value:function(){return null===this._pluralRules&&(this._pluralRules=new Intl.PluralRules(this._localeForTranslation.toString())),this._pluralRules}},{key:"getPluralKey",value:function(e){var t=this.getPluralRules();try{return"string"==typeof e&&(e=parseInt(e,10)),t.select(e)}catch(e){return"other"}}},{key:"initialize",value:function(e){var t,n=e.localeForTranslation,r=e.localeForFormatting,i=e.translations;this._localeForTranslation=new Intl.Locale(n),this._localeForFormatting=("string"==typeof(t=null!=r?r:n)&&(t=new Intl.Locale(t)),"ar"===t.baseName?new Intl.Locale(t,{numberingSystem:"latn"}):t),this._localeForURLPath=function(e){"string"==typeof e&&(e=new Intl.Locale(e));var t=new Set([B.paIN,B.paPK,B.zhCN,B.zhTW,B.zhHK]);return e?t.has(e.baseName)?e:new Intl.Locale(e.language):H}(n),this._relativeTimeFormat=null,this._dateTimeFormats.clear(),this._pluralRules=null,this._translations=i}},{key:"getLocaleForTranslation",value:function(){return this._localeForTranslation.baseName}},{key:"getLocaleForFormatting",value:function(){return this._localeForFormatting.baseName}},{key:"getLocaleForURLPath",value:function(){return this._localeForURLPath.baseName}},{key:"getLocaleForSmartling",value:function(){var e=this._localeForTranslation.baseName;return _()[e]||e}},{key:"getTranslations",value:function(){return this._translations}},{key:"toLocaleLowerCase",value:function(e){return null==e?void 0:e.toLocaleLowerCase(this._localeForTranslation.toString())}},{key:"toLocaleUpperCase",value:function(e){return null==e?void 0:e.toLocaleUpperCase(this._localeForTranslation.toString())}},{key:"get",value:function(e){for(var t=this,n=(e in this._translations?this._translations[e]:e),r="",i=arguments.length,o=new Array(i>1?i-1:0),a=1;a<i;a++)o[a-1]=arguments[a];if("string"!=typeof n){var s=o[0],u=n[this.getPluralKey(s)];void 0!==u?r=u:n.other&&(r=n.other)}else r=n;if(/%\d%/.test(r)){if(!["desktop.login.DefaultErrorMessage","desktop.login.ErrorProxyAuthRequired","desktop.login.MissingUserInfoMessage","desktop.login.RegionMismatchMessage","desktop.login.ClientUpdateFail","desktop.login.FbUserNotFoundSignUp","desktop-auth.error"].includes(e))throw new Error("i18n: The placeholder format %0% is legacy and is only allowed for existing strings.")}var c={},l={};o.forEach((function(e,t){var n,r=U("object"!==(0,k.A)(e)||null===e||(0,g.isValidElement)(e)?[[t,e]]:Object.entries(e));try{for(r.s();!(n=r.n()).done;){var i=(0,p.A)(n.value,2),o=i[0],a=i[1];(0,g.isValidElement)(a)?l[o]=a:void 0!==a&&(c[o]=a)}}catch(e){r.e(e)}finally{r.f()}})),r=r.replace(z(Object.keys(c)),(function(e,n){var r=n.slice(1,-1),i=c[r];return"number"==typeof i?t.formatNumber(i):i}));var f=Object.keys(l);return f.length?(0,g.createElement)(g.Fragment,null,r.split(z(f)).map((function(e,t){if(t%2){var n,r=e.slice(1,-1),i=l[r];return(0,g.cloneElement)(i,{key:null!==(n=i.key)&&void 0!==n?n:r})}return e})).filter((function(e){return""!==e}))):r}},{key:"getSeparator",value:function(){switch(new Intl.Locale(this._localeForTranslation).language){case B.ar:return T.AR;case B.fa:return T.FA;default:return T.EN}}},{key:"formatNumber",value:function(e,t){return e.toLocaleString(this._localeForFormatting,t)}},{key:"formatNumberCompact",value:function(e){return this.formatNumber(e,{notation:"compact",maximumFractionDigits:1})}},{key:"formatDate",value:function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||{year:"numeric",month:"long",day:"numeric"};return this.getDateTimeFormat(t).format(e)}},{key:"formatRelativeDate",value:function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date,i=this.getRelativeTimeFormat(),o=e.getTime()-r.getTime(),a=Math.abs(o)<2592e6;if(null!==i&&a){var s=(t=o,{seconds:Math.round(t/1e3),minutes:Math.round(t/1e3/60),hours:Math.round(t/1e3/60/60),days:Math.round(t/1e3/60/60/24),weeks:Math.round(t/1e3/60/60/24/7)}),u=s.weeks,c=s.days,l=s.hours,f=s.minutes,d=s.seconds;return Math.abs(c)>=7?i.format(u,"weeks"):Math.abs(l)>=24?i.format(c,"days"):Math.abs(f)>=60?i.format(l,"hours"):Math.abs(d)>=60?i.format(f,"minutes"):i.format(d,"seconds")}return this.formatDate(e,n)}}])}()),K=n(86070),G=function(e){var t=e.toggleSettings;return(0,K.jsxs)("header",{className:m,children:[(0,K.jsx)("div",{children:(0,K.jsx)("img",{className:A,src:"images/logo.svg",alt:""})}),(0,K.jsxs)("div",{className:b,children:[(0,K.jsx)(v.$,{onClick:t,size:"small",colorSet:"invertedDark",children:V.get("desktop.login.PreferencesLink")}),(0,K.jsx)(v.$,{as:"a",href:"https://open.spotify.com/",size:"small",iconTrailing:y.H,colorSet:"invertedDark",children:V.get("desktop-auth.login.preview-experience")})]})]})};const q="dDq7z7SMlOtaz9XvBhD8",J="U5LyL65TJ6tdGjHlaK1q",Z="awxiyoFzSyDm_MbWN_eY";var X=n(71121),Q=n(45959),Y=n(86173),$=function(e){return e.XSMALL="XSMALL",e.SMALL="SMALL",e.MEDIUM="MEDIUM",e.LARGE="LARGE",e.XLARGE="XLARGE",e}({});const ee="_Cavu1tQ2xHOf1gnVGLI",te="OAeAxLyDsiZO9kZm0WTJ",ne="aO8ExrFCupBc13AZlOiu";var re=n(95334);const ie="RKmCwNfF52QOvDMMoteA",oe="VDAySBjjOh9Kf83VFHyw",ae="N8UxiIkVqP_rLpZHNysn",se="E5bQk5goX9hChELcTBbe",ue="cgl3eWBkELRCNdMhDX8w",ce="cRd8EyQyHz4DK42rr3yw";n(37417),n(11737),n(51691),n(702);var le=n(48),fe=n(97500),de=n.n(fe),he=n(76595),pe=n.n(he);const ge="lij5P44ZbO8C0Oh8ZJtb",ve="x3YuUrWGHgimbC8VFa2e",ye="qQItFS8myykGhpxMYzyA",me="I3zkdnuhFFrZ1Rr1BJhb",Ae="AvH27oyRpOm17rom9Bnt",be="sXrNbiybT8RKnisJnpV3",we="qh9X1aEYVqtUP2alr32V",ke="F9EQJ9z0gxjxglXhzCcg",xe="zogFp9G1AEqb8AKOd5BO";var Ee=["isOpen","contentLabel","children","className","overlayClassName","animated","animation","shouldFocusAfterRender"];function De(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _e(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?De(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):De(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fe=function(e){var t,n,r,i,o,a,s=e.isOpen,u=e.contentLabel,c=e.children,l=e.className,f=e.overlayClassName,d=e.animated,p=e.animation,g=e.shouldFocusAfterRender,v=void 0===g||g,y=(0,le.A)(e,Ee),m=0;return d?m=300:null!=p&&p.closeTimeoutMs&&(m=p.closeTimeoutMs),(0,K.jsx)(pe(),_e(_e(_e({className:{base:de()(xe,(0,h.A)({},ge,d),[null==p||null===(t=p.modal)||void 0===t?void 0:t.base,l]),afterOpen:de()((0,h.A)({},ve,d),[null==p||null===(n=p.modal)||void 0===n?void 0:n.afterOpen]),beforeClose:de()((0,h.A)({},ye,d),[null==p||null===(r=p.modal)||void 0===r?void 0:r.beforeClose])},overlayClassName:{base:de()(me,(0,h.A)({},Ae,d),[null==p||null===(i=p.overlay)||void 0===i?void 0:i.base,f]),afterOpen:de()((0,h.A)({},be,d),[null==p||null===(o=p.overlay)||void 0===o?void 0:o.afterOpen]),beforeClose:de()((0,h.A)({},we,d),[null==p||null===(a=p.overlay)||void 0===a?void 0:a.beforeClose])},bodyOpenClassName:ke,isOpen:s},m?{closeTimeoutMS:m}:{}),{},{shouldFocusAfterRender:v,preventScroll:!0,ariaHideApp:!1,contentLabel:u},y),{},{children:c}))};const Se=function(e){return(0,K.jsx)(Fe,_e({},e))};var Ce=function(e){var t=e.isSigningUp,n=e.closeModal,r=e.retryOpeningBrowser,i=e.errorMessage,o=e.isOpen,a=void 0===o||o;return(0,K.jsx)(Se,{className:ie,isOpen:a,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:ae,onRequestClose:n,"aria-label":t?V.get("desktop-auth.login.redirect-to-browser-signup"):V.get("desktop-auth.login.redirect-to-browser-login"),children:(0,K.jsxs)("div",{className:oe,children:[(0,K.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,K.jsx)(Q.Z,{variant:"alto",semanticColor:"textBase",children:t?V.get("desktop-auth.login.redirect-to-browser-signup"):V.get("desktop-auth.login.redirect-to-browser-login")}),i&&(0,K.jsxs)("div",{className:ue,role:"alert","aria-live":"assertive",children:[(0,K.jsx)(re.b,{className:ce}),(0,K.jsx)("span",{dangerouslySetInnerHTML:{__html:i}})]}),(0,K.jsxs)("button",{className:se,onClick:r,children:[!i&&(0,K.jsx)(Q.Z,{variant:"ballad",semanticColor:"textSubdued",children:V.get("desktop-auth.login.not-seeing-browser")}),(0,K.jsx)(Q.Z,{variant:"balladBold",semanticColor:"textBase",children:V.get("desktop-auth.login.try-again")})]})]})})};n(20031);const Oe=function(e){return n.g&&"function"==typeof n.g._getSpotifyModule?new Promise((function(t,r){n.g._getSpotifyModule("bridge").executeRequest(JSON.stringify(e),{onSuccess:t,onFailure:r})})):null};var je="https://www.spotify.com/redirect/account-page/",Ne="showSettings",Re={id:"UnknownLoginErrorMessage"},Ie={id:"DefaultErrorMessage",replace:[Ne]},Pe={127:{id:"SessionTerminatedMessage"},3:{id:"BadCredentialsMessage"},4:{id:"ErrorResolvingDNS"},53:{id:"ErrorProxyUnauthorized"},54:{id:"ErrorProxyForbidden"},55:{id:"ErrorProxyAuthRequired",replace:[Ne]},400:Re,401:Re,402:{id:"CriticalUpdate"},403:{id:"UserBannedMessage"},404:Re,405:Re,406:{id:"UserNotAllowedOnPlatformMessage"},407:{id:"MissingUserInfoMessage",replace:[je]},408:{id:"RegionMismatchMessage",replace:[je,"https://www.spotify.com/redirect/upgrade-product/"]},409:{id:"PremiumUsersOnlyMessage"},410:{id:"BadCredentialsMessage"},411:Re,412:{id:"BadCredentialsMessage"},413:{id:"CreateUserDeniedMessage"},414:Re,415:Re,416:Re,417:{id:"FacebookCredentialsMisusedMessage"},418:Re,"critical-update-error":{id:"ClientUpdateFail",replace:["https://www.spotify.com/redirect/download/"]}},Le={1:Re,2:Re,3:{id:"BadCredentialsMessage"},4:Re,5:Re,6:Re,7:Re,8:Re,9:Re},Me={1:{silent:!0},2:Re,3:Re,4:{id:"SessionExpiredMessage"},5:Ie};function Te(e,t,n){if(0===t)return"";if(!e&&!t)return"";var r=Pe;switch(e){case"session":r=Le;break;case"desktop_login_accounts":r=Me}var i=r[t]||Ie;if(i.silent)return"";var o=i.replace||[],a="";switch(i.id){case"UnknownLoginErrorMessage":a=V.get("desktop.login.UnknownLoginErrorMessage");break;case"DefaultErrorMessage":a=V.get("desktop.login.DefaultErrorMessage",o[0]);break;case"SessionTerminatedMessage":a=V.get("desktop.login.SessionTerminatedMessage");break;case"SessionExpiredMessage":a=V.get("desktop.login.SessionExpiredMessage");break;case"BadCredentialsMessage":a=V.get("desktop.login.BadCredentialsMessage");break;case"ErrorResolvingDNS":a=V.get("desktop.login.ErrorResolvingDNS");break;case"ErrorProxyUnauthorized":a=V.get("desktop.login.ErrorProxyUnauthorized");break;case"ErrorProxyForbidden":a=V.get("desktop.login.ErrorProxyForbidden");break;case"ErrorProxyAuthRequired":a=V.get("desktop.login.ErrorProxyAuthRequired",o[0]);break;case"CriticalUpdate":a=V.get("desktop.login.CriticalUpdate");break;case"UserBannedMessage":a=V.get("desktop.login.UserBannedMessage");break;case"UserNotAllowedOnPlatformMessage":a=V.get("desktop.login.UserNotAllowedOnPlatformMessage");break;case"MissingUserInfoMessage":a=V.get("desktop.login.MissingUserInfoMessage",o[0]);break;case"RegionMismatchMessage":a=V.get("desktop.login.RegionMismatchMessage",o[0],o[1]);break;case"PremiumUsersOnlyMessage":a=V.get("desktop.login.PremiumUsersOnlyMessage");break;case"CreateUserDeniedMessage":a=V.get("desktop.login.CreateUserDeniedMessage");break;case"ClientUpdateFail":a=V.get("desktop.login.ClientUpdateFail",o[0]);break;case"FbUserNotFoundSignUp":a=V.get("desktop.login.FbUserNotFoundSignUp",o[0])}return n?"".concat(a,"<br>").concat(V.get("desktop.login.errorCode",n)):a}var Be=n(20543),Ue=n(3074),We=n.n(Ue),He=We().create().toString();var ze="has-used-app";const Ve=window.localStorage;const Ke=function(){var e,t=Ve.getItem("utmParameters");try{e=t?JSON.parse(t).referral:""}catch(t){e=""}return e};var Ge=function(){return(0,E.A)((function e(t){(0,x.A)(this,e),this._eventSender=t}),[{key:"logPageView",value:function(e){var t=e.page,n=e.actionHash;this.logAction({page:t,action_type:"pageview",action_intent:"",action_hash:n})}},{key:"logAction",value:function(e,t){var n,r=e.page,i=e.action_type,o=e.action_intent,a=e.item_id,s=e.action_hash;this._eventSender.send((0,Be.I)({action_type:i,action_intent:o,action_page:r,action_item_id:a,action_hash:s,device_is_new_install:(n=!window.localStorage.getItem(ze),n&&window.localStorage.setItem(ze,"true"),n),device_locale:window.__spotify.locale,device_referrer:Ke(),ab_flags:"",session_id:He}),t)}},{key:"finalFlush",value:(e=(0,i.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._eventSender.finalFlush();case 2:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})}]);var e}();function qe(){return We().create().toString()}var Je=(0,g.createContext)(null),Ze=function(e){var t=e.eventSender,n=e.children,r=new Ge(t),i=(0,g.useState)(qe()),o=(0,p.A)(i,2),a=o[0],s=o[1],u=(0,g.useCallback)((function(){s(null)}),[]);return(0,K.jsx)(Je.Provider,{value:{logger:r,pageviewActionHash:a,clearPageviewActionHash:u},children:n})},Xe=function(){var e=(0,g.useContext)(Je);if(!e)throw new Error("useDesktopLoginLogger must be used within a DesktopLoginLoggerContext");return e},Qe=function(e){return e[e.SUCCESS=0]="SUCCESS",e[e.OPERATION_ABORTED=1]="OPERATION_ABORTED",e[e.OPERATION_TIMED_OUT=2]="OPERATION_TIMED_OUT",e[e.LOGIN_BAD_CREDENTIALS=3]="LOGIN_BAD_CREDENTIALS",e[e.LOGIN_BAD_APP_KEY=4]="LOGIN_BAD_APP_KEY",e[e.LOGIN_BAD_CLIENT_VERSION_INFO=5]="LOGIN_BAD_CLIENT_VERSION_INFO",e[e.STORAGE_INITIALIZATION_FAILED=6]="STORAGE_INITIALIZATION_FAILED",e[e.MULTIPLE_LOGIN_NOT_ALLOWED=7]="MULTIPLE_LOGIN_NOT_ALLOWED",e[e.OPERATION_CANCELLED=8]="OPERATION_CANCELLED",e[e.BAD_DEVICE_INFO=9]="BAD_DEVICE_INFO",e[e.INTERNAL_ERROR=10]="INTERNAL_ERROR",e}(Qe||{}),Ye=function(){var e=(0,g.useState)(!1),t=(0,p.A)(e,2),n=t[0],r=t[1],o=(0,g.useState)(!1),s=(0,p.A)(o,2),c=s[0],l=s[1],f=(0,g.useState)(""),h=(0,p.A)(f,2),v=h[0],y=h[1],m=(0,u.NC)(d),A=(0,g.useRef)(0),b=Xe(),w=b.logger,k=b.pageviewActionHash,x=b.clearPageviewActionHash,E=function(){var e=(0,i.A)(a().mark((function e(t){var n,i,o,s;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=++A.current,l(t),y(""),r(!0),k?(i=k,x()):i=qe(),w.logAction({page:"auth-on-web",action_type:"click",action_intent:t?"sign-up-with-browser":"log-in-with-browser",action_hash:i}),e.prev=6,e.next=9,Oe({name:"login-accounts",args:[{method:"login-accounts",enableSignup:t,useAuthClient:m,actionHash:i}]});case 9:return w.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-success-signup":"show-success-login"},{flush:!1}),e.next=12,w.finalFlush();case 12:location.href="spotify:app:xpui",e.next=26;break;case 15:if(e.prev=15,e.t0=e.catch(6),o="string"==typeof e.t0?JSON.parse(e.t0):e.t0,n===A.current){e.next=21;break}return w.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"sign-up-with-browser-cancelled-by-new-attempt":"log-in-with-browser-cancelled-by-new-attempt",item_id:null==o?void 0:o.errorReference}),e.abrupt("return");case 21:r(!1),s=Te(o.errorCategory,o.errorCode,o.errorReference),"desktop_login_accounts"===o.errorCategory&&o.errorCode===Qe.OPERATION_TIMED_OUT&&(s=t?V.get("desktop-auth.login.signup-time-out"):V.get("desktop-auth.login.login-time-out")),y(s),w.logAction({page:"auth-on-web",action_type:"view",action_intent:t?"show-error-signup":"show-error-login",item_id:null==o?void 0:o.errorReference});case 26:case"end":return e.stop()}}),e,null,[[6,15]])})));return function(t){return e.apply(this,arguments)}}();return{handleLoginOrSignupClick:E,handleTryAgainClick:function(){r(!1),w.logAction({page:"auth-on-web",action_type:"click",action_intent:"try-again"})},isWaitingForBrowser:n,isSigningUp:c,errorMessage:v}},$e=function(e){var t=e.titleStrings,n=e.titleVariants,r=e.widthBreakpoint,i=e.heightBreakpoint,o=(0,g.useState)(!1),a=(0,p.A)(o,2),s=a[0],u=a[1],c=Ye(),l=c.handleLoginOrSignupClick,f=c.isSigningUp,d=c.errorMessage;return(0,K.jsxs)(K.Fragment,{children:[s&&(0,K.jsx)(Ce,{isSigningUp:f,closeModal:function(){return u(!1)},retryOpeningBrowser:function(){l(!0)},errorMessage:d}),(0,K.jsxs)("div",{className:ee,children:[(0,K.jsx)("div",{className:ne,children:t.map((function(e,t){return(0,K.jsx)(Q.Z,{variant:(o=n[null!=r?r:$.MEDIUM],r===$.LARGE&&i===$.SMALL?o=n[$.MEDIUM]:r===$.MEDIUM&&i===$.LARGE?o=n[i]:r!==$.SMALL||i!==$.MEDIUM&&i!==$.LARGE||(o=n[i]),o),semanticColor:"textBase",children:e},"title-".concat(t));var o}))}),(0,K.jsxs)("div",{className:te,children:[(0,K.jsx)(v.$,{onClick:function(){l(!0)},iconTrailing:y.H,"data-testid":"signup-button",children:V.get("desktop-auth.login.sign-up-with-browser")}),(0,K.jsx)(Y.n,{onClick:function(){l(!1)},iconTrailing:y.H,children:V.get("desktop-auth.login.log-in-with-browser")})]})]})]})};const et="pGPnNDcYgyNwnreAcAjH",tt="SH3eUKfHc4CgBmWIBRrv",nt="Tcw5QBhdNr3DQLv4tFI6",rt="Z0UVjrWuri5SAyaPIcXN",it="AW58_lCPMJQuX4DRlFnb",ot="Dd2IOSyZz6e01mIY_yfr";var at=n(71591),st=n(4640),ut=function(e){var t=e.nrSteps,n=e.atStep,r=e.navigate,i=e.backgroundImage;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:et,children:[(0,K.jsxs)("div",{className:tt,children:[(0,K.jsx)(v.$,{colorSet:"invertedDark",size:"medium",iconOnly:at.g,onClick:function(){return r((n-1+t)%t)},"aria-label":"previous page"}),(0,K.jsx)(v.$,{colorSet:"invertedDark",size:"medium",iconOnly:st.V,onClick:function(){return r((n+1)%t)},"aria-label":"next page"})]}),(0,K.jsx)("div",{className:rt,children:Array.from({length:t}).map((function(e,t){return(0,K.jsx)("button",{className:nt,onClick:function(){return r(t)},children:(0,K.jsx)("div",{className:de()(it,(0,h.A)({},ot,n===t)),"aria-label":"navigate to page ".concat(t+1)})},t)}))})]}),i]})};const ct="ziwA70F7A7bE1f_6JfC6",lt="OspetDqlUGDfoHpTMfNO",ft="GFbAscggSBjAyjtM_3jg",dt="pi2IJ4liRapxpGdxMJu5";var ht=function(e){var t=e.imageLocale,n=e.fadeInRef;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("img",{className:de()(ct,(0,h.A)({},lt,n.current)),src:"images/localised-carousel-image/login-1-".concat(t,".avif"),onAnimationEnd:function(){n.current=!1},alt:""}),(0,K.jsx)("div",{className:dt}),(0,K.jsx)("div",{className:ft})]})},pt=function(e){var t=e.imageLocale,n=e.fadeInRef;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("img",{className:de()(ct,(0,h.A)({},lt,n.current)),src:"images/localised-carousel-image/login-2-".concat(t,".avif"),onAnimationEnd:function(){n.current=!1},alt:""}),(0,K.jsx)("div",{className:dt}),(0,K.jsx)("div",{className:ft})]})},gt=n(21437);n(96794);const vt="t71Gs8ndLnfWLdcqPzTw",yt="eSEJ1rqeTzD_6sklBWTI",mt="XGEPBM1JHuPOpeuZsIwA",At="Kj3InjxX0eAmTViGluAm",bt="_SsAtuLKRe2TvyQ7V_iu",wt="IONRZYfY863Fg8_TZZwW",kt="mzc8KoGBYnUXfOViDxlH";var xt=["de","en-GB","es","es-MX","fr-CA","fr","hi","id","pt-BR","tr"],Et=function(e){var t=e.imgSrc,n=e.reverse,r=(0,g.useState)(!1),i=(0,p.A)(r,2),o=i[0],a=i[1],s=(0,g.useState)(!1),u=(0,p.A)(s,2),c=u[0],l=u[1],f=(0,g.useState)(!1),d=(0,p.A)(f,2),v=d[0],y=d[1],m=o&&c&&v;return(0,K.jsxs)("div",{className:de()(yt,(0,h.A)((0,h.A)({},mt,m&&!n),At,m&&n)),children:[(0,K.jsx)("img",{src:t,className:wt,onLoad:function(){a(!0)},alt:""}),(0,K.jsx)("img",{src:t,className:wt,onLoad:function(){l(!0)},alt:""}),(0,K.jsx)("img",{src:t,className:wt,onLoad:function(){y(!0)},alt:""})]})},Dt=function(e){var t=e.fadeInRef;return(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)("div",{className:de()(vt,(0,h.A)({},bt,t.current)),onAnimationEnd:function(){t.current=!1},children:(0,gt.A)(Array(6).keys()).concat((0,gt.A)(Array(6).keys())).concat((0,gt.A)(Array(6).keys())).map((function(e,t){return(0,K.jsx)(Et,{imgSrc:"images/artwork-grid/row-".concat(e+1,".avif"),reverse:t%2==0},"image-row-".concat(t))}))}),(0,K.jsx)("div",{className:kt})]})},_t=(n(76588),n(9856)),Ft=n.n(_t);function St(){return"Safari"===Ft().parse(window.navigator.userAgent).browser.name}const Ct="zrvvPyoxE6wQNqnu0yWA",Ot="jmu6DFPvhxRl0wSfmv2O";var jt=function(e){var t=e.value,n=e.id,r=e.children,i=e.disabled,o=e.onSelect,a=e.className,s=e.dir;return(0,K.jsx)("span",{className:a,children:(0,K.jsx)("select",{className:de()(Ct,(0,h.A)({},Ot,St())),value:null==t?void 0:t.toString(),id:n,disabled:i,onBlur:function(){},onChange:function(e){o(e.target.value)},dir:s,children:r})})};n(75380);function Nt(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Rt(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Rt(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Rt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var It=new Intl.Collator(void 0,{sensitivity:"base",usage:"search"}),Pt=/[\t-\r \x85\xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000]/,Lt=/(?:[!-#%-\*,-\/:;\?@\[-\]_\{\}\xA1\xA7\xAB\xB6\xB7\xBB\xBF\u037E\u0387\u055A-\u055F\u0589\u058A\u05BE\u05C0\u05C3\u05C6\u05F3\u05F4\u0609\u060A\u060C\u060D\u061B\u061D-\u061F\u066A-\u066D\u06D4\u0700-\u070D\u07F7-\u07F9\u0830-\u083E\u085E\u0964\u0965\u0970\u09FD\u0A76\u0AF0\u0C77\u0C84\u0DF4\u0E4F\u0E5A\u0E5B\u0F04-\u0F12\u0F14\u0F3A-\u0F3D\u0F85\u0FD0-\u0FD4\u0FD9\u0FDA\u104A-\u104F\u10FB\u1360-\u1368\u1400\u166E\u169B\u169C\u16EB-\u16ED\u1735\u1736\u17D4-\u17D6\u17D8-\u17DA\u1800-\u180A\u1944\u1945\u1A1E\u1A1F\u1AA0-\u1AA6\u1AA8-\u1AAD\u1B5A-\u1B60\u1B7D\u1B7E\u1BFC-\u1BFF\u1C3B-\u1C3F\u1C7E\u1C7F\u1CC0-\u1CC7\u1CD3\u2010-\u2027\u2030-\u2043\u2045-\u2051\u2053-\u205E\u207D\u207E\u208D\u208E\u2308-\u230B\u2329\u232A\u2768-\u2775\u27C5\u27C6\u27E6-\u27EF\u2983-\u2998\u29D8-\u29DB\u29FC\u29FD\u2CF9-\u2CFC\u2CFE\u2CFF\u2D70\u2E00-\u2E2E\u2E30-\u2E4F\u2E52-\u2E5D\u3001-\u3003\u3008-\u3011\u3014-\u301F\u3030\u303D\u30A0\u30FB\uA4FE\uA4FF\uA60D-\uA60F\uA673\uA67E\uA6F2-\uA6F7\uA874-\uA877\uA8CE\uA8CF\uA8F8-\uA8FA\uA8FC\uA92E\uA92F\uA95F\uA9C1-\uA9CD\uA9DE\uA9DF\uAA5C-\uAA5F\uAADE\uAADF\uAAF0\uAAF1\uABEB\uFD3E\uFD3F\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE61\uFE63\uFE68\uFE6A\uFE6B\uFF01-\uFF03\uFF05-\uFF0A\uFF0C-\uFF0F\uFF1A\uFF1B\uFF1F\uFF20\uFF3B-\uFF3D\uFF3F\uFF5B\uFF5D\uFF5F-\uFF65]|\uD800[\uDD00-\uDD02\uDF9F\uDFD0]|\uD801\uDD6F|\uD802[\uDC57\uDD1F\uDD3F\uDE50-\uDE58\uDE7F\uDEF0-\uDEF6\uDF39-\uDF3F\uDF99-\uDF9C]|\uD803[\uDEAD\uDF55-\uDF59\uDF86-\uDF89]|\uD804[\uDC47-\uDC4D\uDCBB\uDCBC\uDCBE-\uDCC1\uDD40-\uDD43\uDD74\uDD75\uDDC5-\uDDC8\uDDCD\uDDDB\uDDDD-\uDDDF\uDE38-\uDE3D\uDEA9]|\uD805[\uDC4B-\uDC4F\uDC5A\uDC5B\uDC5D\uDCC6\uDDC1-\uDDD7\uDE41-\uDE43\uDE60-\uDE6C\uDEB9\uDF3C-\uDF3E]|\uD806[\uDC3B\uDD44-\uDD46\uDDE2\uDE3F-\uDE46\uDE9A-\uDE9C\uDE9E-\uDEA2\uDF00-\uDF09]|\uD807[\uDC41-\uDC45\uDC70\uDC71\uDEF7\uDEF8\uDF43-\uDF4F\uDFFF]|\uD809[\uDC70-\uDC74]|\uD80B[\uDFF1\uDFF2]|\uD81A[\uDE6E\uDE6F\uDEF5\uDF37-\uDF3B\uDF44]|\uD81B[\uDE97-\uDE9A\uDFE2]|\uD82F\uDC9F|\uD836[\uDE87-\uDE8B]|\uD83A[\uDD5E\uDD5F])/,Mt=/(?:[\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u3005\u3007\u3021-\u3029\u3038-\u303B\u3400-\u4DBF\u4E00-\u9FFF\uF900-\uFA6D\uFA70-\uFAD9]|\uD81B[\uDFE2\uDFE3\uDFF0\uDFF1]|[\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD887][\uDC00-\uDFFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF39\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD888[\uDC00-\uDFAF])/;function Tt(e){return null!==e&&Pt.test(e)}function Bt(e){return null!==e&&(e<="/"||e>=":"&&e<="@"||"\\"===e||Tt(e))}function Ut(e){return null!==e&&Lt.test(e)}function Wt(e){return null!==e&&Mt.test(e)}var Ht=function(){function e(t,n,r){if((0,x.A)(this,e),n<0||r<0||n+r>t.length)throw new RangeError;this.data=t,this.offset=n,this.length=r,this.position=0}return(0,E.A)(e,[{key:"toString",value:function(){return this.data.slice(this.offset,this.offset+this.length).join("")}},{key:"slice",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.length;if(t<0||n>this.length)throw new RangeError;var r=this.offset+t,i=n-t;return new e(this.data,r,i)}},{key:"nextCodePoint",value:function(){return this.position===this.length?null:this.data[this.offset+this.position++]}}],[{key:"from",value:function(t){var n=Array.from(t.normalize("NFC"));return new e(n,0,n.length)}}])}();function zt(e){var t;do{t=e.nextCodePoint()}while(null!==t&&Tt(t)||Ut(t));return t}function Vt(e,t){var n=zt(e),r=zt(t);if(null===r)return{offset:0,length:0};for(var i=e.offset+e.position-1,o=e.offset+e.position;;){if(null===n&&null===r)return{offset:i,length:o-i};if(null===r)return{offset:i,length:o-i};if(null===n)return null;if(0!==It.compare(n,r))return null;o=e.offset+e.position,n=zt(e),r=zt(t)}}function Kt(e,t){var n,r,i;do{r=e.position,n=e.nextCodePoint()}while(null!==n&&Tt(n));if(null!=t&&t.segmentQuotedStrings&&function(e){return null!==e&&('"'===e||"'"===e)}(n)){var o=n;r=e.position;do{i=e.position,n=e.nextCodePoint()}while(null!==n&&n!==o);return null===n&&r===i?null:e.slice(r,i)}do{if(i=e.position,null!=t&&t.segmentCJKUnifieIdeographs&&Wt(n))break;n=e.nextCodePoint()}while(null!==n&&!Bt(n));return null===n&&r===i?null:e.slice(r,i)}function Gt(e){return Kt(e,{segmentQuotedStrings:!0,segmentCJKUnifieIdeographs:!1})}function qt(e){return Kt(e,{segmentQuotedStrings:!1,segmentCJKUnifieIdeographs:!0})}function Jt(e,t){for(var n=[],r=qt(e);null!==r;r=qt(e)){var i=Vt(r,t.slice());null===i?null===(i=Vt(e.slice(r.offset),t.slice()))||n.push(i):n.push(i)}return n}function Zt(e,t){return e.offset===t.offset&&e.length===t.length}var Xt=function(e,t){return"string"==typeof e&&"string"==typeof t?!(e.length>0)||null!==function(e){for(var t=Ht.from(e),n=[],r=Gt(t);null!==r;r=Gt(t)){for(var i=[],o=0;o<(arguments.length<=1?0:arguments.length-1);++o){var a,s=o+1<1||arguments.length<=o+1?void 0:arguments[o+1],u=Nt(Jt(Ht.from(s),r));try{for(u.s();!(a=u.n()).done;){var c=a.value;i.push({text:s,range:c})}}catch(e){u.e(e)}finally{u.f()}}if(0===i.length)return null;n.push.apply(n,(0,gt.A)(i.filter((function(e,t,n){return e.range.length>0&&n.findIndex((function(t){return Zt(e.range,t.range)}))===t}))))}return n.length>0?n:null}(e,t):"boolean"!=typeof e||e},Qt=((0,n(1989).vt)((function(e){return{lastFilterState:"",lastFilteredUri:"",setLastState:function(t,n){e({lastFilterState:t,lastFilteredUri:n})}}})),(0,g.createContext)({setFilter:function(){throw new Error("setFilter must be used within a FilterProvider")},filter:""})),Yt=(0,g.createContext)(void 0),$t=function(e){var t=e.children,n=(0,g.useState)(!1),r=(0,p.A)(n,2),i=r[0],o=r[1],a=(0,g.useState)(new Set),s=(0,p.A)(a,2),u=s[0],c=s[1],l=(0,g.useCallback)((function(e,t){c((function(n){if(n.has(e)===t)return n;var r=new Set(n);return t?r.add(e):r.delete(e),r}))}),[]),f=u.size>0;return(0,K.jsx)(Yt.Provider,{value:{sectionMatch:i,setSectionMatch:o,sectionContainsMatch:f,setSectionFilterMatchQueryValue:l},children:t})},en=function(){var e=(0,g.useContext)(Yt);if(void 0===e)throw new Error("useSectionMatchState() must be used within a SectionFilterMatchContextProvider");return e};const tn={section:"k6GFKyOKVR5Ruofj3aTQ",hidden:"afyQ2L5zTtlSDtn9WPjd"};function nn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function rn(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?nn(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):nn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(e){var t=e.children,n=e.filterMatchQuery,r=(0,g.useContext)(Qt).filter,i=en(),o=i.setSectionMatch,a=i.sectionContainsMatch,s=Xt(r,n);(0,g.useEffect)((function(){o(s)}),[s,o]);var u=!s&&!a;return(0,K.jsx)("div",{className:de()(tn.section,(0,h.A)({},tn.hidden,u)),children:t})}function an(e){return(0,K.jsx)($t,{children:(0,K.jsx)(on,rn({},e))})}var sn=n(7852),un=(n(42703),n(463),n(11170)),cn=n.n(un);const ln={highlightedText:"M0E2Al6URHV3iyoDbvi_"};var fn=["searchWords","textToHighlight"];function dn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function hn(e){var t=e.searchWords,n=e.textToHighlight,r=(0,le.A)(e,fn);return 0===t.length||t.every((function(e){return!e}))?(0,K.jsx)(K.Fragment,{children:n}):(0,K.jsx)(cn(),function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dn(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({highlightClassName:ln.highlightedText,searchWords:t,textToHighlight:n,autoEscape:!0},r))}function pn(e){var t=e.children,n=e.className,r=e.semanticColor,i=void 0===r?"textBase":r,o=(0,g.useContext)(Qt).filter;return(0,K.jsx)(sn.E,{as:"h2",variant:"bodyMediumBold",semanticColor:i,className:n,children:(0,K.jsx)(hn,{searchWords:[o],textToHighlight:t})})}var gn=2,vn=3,yn=4,mn={"auto-detect":{label:function(){return V.get("desktop.settings.proxy.autodetect")}},"no-proxy":{label:function(){return V.get("desktop.settings.proxy.noproxy")}},http:{label:function(){return V.get("desktop.settings.proxy.http")}},socks4:{label:function(){return V.get("desktop.settings.proxy.socks4")}},socks5:{label:function(){return V.get("desktop.settings.proxy.socks5")}}},An=[{enumKey:"auto-detect",enumValue:0},{enumKey:"no-proxy",enumValue:1},{enumKey:"http",enumValue:2},{enumKey:"socks4",enumValue:3},{enumKey:"socks5",enumValue:4}],bn=n(85770);const wn="mpdBa62OP4Fr5wvCsa89",kn="acVhMt5pELcXQyLaaPuV",xn="AavUTirpKSAHapguSAy0",En="SkbGMKYv49KtJNB5XxdX",Dn="qfjicQPaTTPrLWJWRxMQ";var _n=function(e){var t=e.id,n=e.type,r=e.placeHolder,i=e.inputRef,o=e.handleOnChange;return(0,K.jsx)("input",{type:n||"text",id:t,"data-testid":t,className:En,placeholder:r,ref:i,onChange:o})},Fn=function(e){var t=e.children,n=e.label;return(0,K.jsx)(bn.g,{label:n,className:Dn,children:t})};const Sn="wjxwX0Alq8DVfoBObi3R";function Cn(e){var t=e.onClick;return(0,K.jsx)(Y.n,{className:Sn,onClick:t,children:V.get("settings.restartApp")})}var On=function(e,t,n){var r="".concat(e,":").concat(t);switch(n){case gn:r+="@http";break;case vn:r+="@socks4";break;case yn:r+="@socks5"}return r},jn=function(e){var t=e.addr,n=e.mode,r=void 0===n?"0":n,i=e.pass,o=e.user,a=e.setValue,s=e.restartContainer,u=e.fullWidth,c=(0,g.useRef)(null),l=(0,g.useRef)(null),f=(0,g.useRef)(null),d=(0,g.useRef)(null),h=Number(r),v=(0,g.useState)(""),y=(0,p.A)(v,2),m=y[0],A=y[1],b=(0,g.useState)(""),w=(0,p.A)(b,2),k=w[0],x=w[1],E=(0,g.useState)(!1),D=(0,p.A)(E,2),_=D[0],F=D[1];(0,g.useEffect)((function(){var e=(null==t?void 0:t.split(/[:@]+/))||["",""],n=(0,p.A)(e,2),r=n[0],i=n[1];A(r),x(i),c.current&&(c.current.value=r),l.current&&(l.current.value=i)}),[t]),(0,g.useEffect)((function(){d.current&&i&&(d.current.value=i.toString())}),[i]),(0,g.useEffect)((function(){f.current&&o&&(f.current.value=o.toString())}),[o]);var S=(0,g.useCallback)((function(e){var t=e.target,n=On(t.value,k,h);A(t.value),a("network.proxy.addr",n),F(!0)}),[h,k,a]),C=(0,g.useCallback)((function(e){var t=e.target,n=On(m,t.value,h);x(t.value),a("network.proxy.addr",n),F(!0)}),[h,m,a]),O=(0,g.useCallback)((function(e){var t=e.target;a("network.proxy.user",t.value),F(!0)}),[a]),j=(0,g.useCallback)((function(e){var t=e.target;a("network.proxy.pass",t.value),F(!0)}),[a]),N=0!==h&&1!==h,R=h!==vn;return(0,K.jsxs)(an,{filterMatchQuery:V.get("desktop.settings.proxy.title"),children:[(0,K.jsx)(pn,{children:V.get("desktop.settings.proxy.title")}),(0,K.jsxs)("div",{className:de()(kn,u?xn:null),children:[(0,K.jsx)(Fn,{label:V.get("desktop.settings.proxy.type"),children:(0,K.jsx)(jt,{id:"network.proxy.mode",value:r,onSelect:function(e){var t=parseInt(e,10);a("network.proxy.mode",t),F(!0)},children:An.map((function(e){var t=e.enumKey,n=e.enumValue;return(0,K.jsx)("option",{value:n,"data-testid":t,children:mn[t]?mn[t].label():""},t)}))})}),N?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)("div",{className:wn,children:[(0,K.jsx)(Fn,{label:V.get("desktop.settings.proxy.host"),children:(0,K.jsx)(_n,{id:"network.proxy.host",handleOnChange:S,placeHolder:V.get("desktop.settings.proxy.host"),inputRef:c})}),(0,K.jsx)(Fn,{label:V.get("desktop.settings.proxy.port"),children:(0,K.jsx)(_n,{id:"network.proxy.port",type:"number",handleOnChange:C,placeHolder:V.get("desktop.settings.proxy.port"),inputRef:l})})]}),(0,K.jsxs)("div",{className:R?wn:void 0,children:[(0,K.jsx)(Fn,{label:V.get("desktop.settings.proxy.user"),children:(0,K.jsx)(_n,{id:"network.proxy.user",handleOnChange:O,placeHolder:V.get("desktop.settings.proxy.user"),inputRef:f})}),R?(0,K.jsx)(Fn,{label:V.get("desktop.settings.proxy.pass"),children:(0,K.jsx)(_n,{id:"network.proxy.pass",handleOnChange:j,placeHolder:V.get("desktop.settings.proxy.pass"),type:"password",inputRef:d})}):null]})]}):null,_&&(0,K.jsx)("div",{children:(0,K.jsx)(Cn,{onClick:s})})]})]})},Nn=(0,g.createContext)(null);function Rn(e){return function(){var e=(0,g.useContext)(Nn);if(null===e)throw new Error("Trying to use 'RegistryContext' without 'RegistryProvider'!");return e}().resolve(e)}function In(e){return Symbol.for(e)}function Pn(e){var t;return null!==(t=e.description)&&void 0!==t?t:e.toString()}var Ln=In("DesktopProxySettingsClient");function Mn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Tn(){return Tn=(0,i.A)(a().mark((function e(t,n){var r;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r={mode:n.mode},[gn,vn,yn].includes(n.mode)&&(r.addr=n.address,r.user=n.username),[gn,yn].includes(n.mode)&&(r.pass=n.password),t.setProxySettings(r);case 4:case"end":return e.stop()}}),e)}))),Tn.apply(this,arguments)}var Bn=(0,g.createContext)(null),Un=function(e){var t=e.settings,n=e.children,r=(0,g.useState)(t),i=(0,p.A)(r,2),o=i[0],a=i[1],s=Rn(Ln);(0,g.useEffect)((function(){s.getProxySettings({}).then((function(e){var t,n,r;a({mode:e.mode,address:null!==(t=e.addr)&&void 0!==t?t:"",username:null!==(n=e.user)&&void 0!==n?n:"",password:null!==(r=e.pass)&&void 0!==r?r:""})}))}),[a,s]);var u=(0,g.useCallback)((function(e){(function(e,t){return Tn.apply(this,arguments)})(s,e).then((function(){return a(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mn(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e))}))}),[a,s]);return(0,K.jsx)(Bn.Provider,{value:{settings:o,updateSettings:u},children:n})};var Wn=In("DesktopLifecycleClient");function Hn(){var e=Rn(Wn);return(0,g.useCallback)((function(){return e.restart({})}),[e])}const zn="BuzoTjBZd1UqCn6DmFJr",Vn="HKamyJi9H31s99erfVyG";var Kn=function(){return(0,K.jsxs)("div",{className:Vn,children:[(0,K.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",height:"12px",width:"56px",x:"0px",y:"0px",viewBox:"0 0 1 100",xmlSpace:"preserve","data-testid":"loadingIcon",children:[(0,K.jsx)("circle",{className:zn,cx:"-140",cy:"50",r:"32"}),(0,K.jsx)("circle",{className:zn,cx:"0",cy:"50",r:"32"}),(0,K.jsx)("circle",{className:zn,cx:"140",cy:"50",r:"32"})]}),(0,K.jsx)("span",{className:"hidden-visually",children:V.get("page.loading")})]})},Gn=["network.proxy.mode","network.proxy.addr","network.proxy.user","network.proxy.pass"];var qn,Jn=function(){var e=function(){var e=(0,g.useContext)(Bn);if(!e)throw new Error("useProxySettings must be used within a ProxySettingsContext");return{settings:e.settings,updateSettings:e.updateSettings}}(),t=e.settings,n=e.updateSettings,r=Hn(),i=(0,g.useCallback)((function(e,r){if(null!==t&&function(e){return!!Gn.includes(e)}(e)){var i=t;switch(e){case"network.proxy.mode":i.mode=r;break;case"network.proxy.addr":i.address=r;break;case"network.proxy.user":i.username=r;break;case"network.proxy.pass":i.password=r}n(i)}return Promise.resolve()}),[t,n]);return(0,K.jsxs)("main",{className:"Settings","aria-labelledby":"settings-form-title","data-testid":"settings",children:[(0,K.jsx)("h1",{className:"HeroText",id:"settings-form-title",children:V.get("desktop.login.PreferencesLink")}),null!==t?(0,K.jsx)(jn,{mode:t.mode,addr:t.address,user:t.username,pass:t.password,setValue:i,restartContainer:r,fullWidth:!0}):(0,K.jsx)(Kn,{})]})},Zn=n(84701),Xn=function(e){var t=e.toggleSettings,n=e.isOpen,r=void 0===n||n;return(0,K.jsx)(Se,{className:ie,isOpen:r,shouldCloseOnEsc:!0,shouldCloseOnOverlayClick:!0,shouldFocusAfterRender:!0,overlayClassName:ae,onRequestClose:t,"aria-label":V.get("desktop.login.PreferencesLink"),children:(0,K.jsxs)("div",{className:oe,children:[(0,K.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""}),(0,K.jsx)(Un,{settings:null,children:(0,K.jsx)(Jn,{})}),(0,K.jsx)(Zn.H,{size:"medium",semanticColor:"textBase",onClick:t,children:V.get("close")})]})})},Qn=(n(40065),n(4865),n(28492),function(){return"undefined"==typeof window});function Yn(e){return!Qn()&&e instanceof HTMLElement}var $n={subscribersByElement:new WeakMap,get resizeObserver(){return qn||(qn=new ResizeObserver((function(e){Array.isArray(e)&&e.forEach((function(t){var n,r={width:Math.round(t.contentRect.width),height:Math.round(t.contentRect.height)};(null!==(n=$n.subscribersByElement.get(t.target))&&void 0!==n?n:new Set).forEach((function(n){n(r,t,e)}))}))}))),qn}};function er(e){var t=e.onResize,n=e.refOrElement,r=e.observeOnly,i=e.observeOnMount,o=void 0!==i&&i,a=(0,g.useRef)(t);a.current=t;var s=(0,g.useRef)(r);s.current=r;var u=(0,g.useRef)({width:-1,height:-1}),c=(0,g.useCallback)((function(e,t,n){if(a.current){var r=u.current.width!==e.width,i=u.current.height!==e.height;("width"===s.current&&r||"height"===s.current&&i||!s.current&&(r||i))&&a.current(e,t,n),u.current.width=e.width,u.current.height=e.height}}),[]),l=function(e){var t,n=e.refOrElement,r=e.subscriber,i=null,o=(0,g.useRef)(null),a=(0,g.useRef)(null),s=(0,g.useRef)(null),u=(0,g.useRef)(),c=(0,g.useRef)(r);c.current=r;var l=(0,g.useCallback)((function(){var e=null;a.current?e=a.current:o.current?e=o.current:Yn(n)&&(e=n),s.current!==e&&(u.current&&(u.current(),u.current=null),s.current=e,e&&c.current&&(u.current=c.current(e)))}),[n]),f=(0,g.useCallback)((function(e){a.current=e,l()}),[l]);return n&&!Yn(n)&&(i=n),(0,g.useLayoutEffect)((function(){i&&(o.current=i.current),l()}),[i,null===(t=i)||void 0===t?void 0:t.current,l]),(0,g.useEffect)((function(){return function(){var e;null==u||null===(e=u.current)||void 0===e||e.call(u)}}),[]),f}({refOrElement:n,subscriber:function(e){var t;return o&&c({width:e.offsetWidth,height:e.offsetHeight},null,[]),$n.subscribersByElement.has(e)||($n.resizeObserver.observe(e),$n.subscribersByElement.set(e,new Set)),null===(t=$n.subscribersByElement.get(e))||void 0===t||t.add(c),function(){var t,n;null===(t=$n.subscribersByElement.get(e))||void 0===t||t.delete(c),0===(null===(n=$n.subscribersByElement.get(e))||void 0===n?void 0:n.size)&&($n.resizeObserver.unobserve(e),$n.subscribersByElement.delete(e))}}});return l}function tr(e,t,n){var r=(0,g.useState)(),i=(0,p.A)(r,2),o=i[0],a=i[1],s=Object.entries(e).sort((function(e,t){return t[1]-e[1]}));return{ref:er({refOrElement:n,observeOnly:t,observeOnMount:!0,onResize:function(e){var n=e[t];if(void 0!==n){var r=s.find((function(e){var t=(0,p.A)(e,2)[1];return n>=t})),i=r&&r[0];i&&i!==o&&a(i)}}}),breakpoint:o}}var nr=n(39138),rr=function(){return(0,E.A)((function e(t,n){(0,x.A)(this,e),(0,h.A)(this,"subscriptionId",null),(0,h.A)(this,"subscription",null),this._watchdogClient=t,this._url=n,this.subscribeToWatchdog()}),[{key:"subscribeToWatchdog",value:function(){var e=this;this.subscription=this._watchdogClient.subscribe({url:this._url},(function(t){var n;0!==t.id?(e.subscriptionId=t.id,e.scheduleNextPing()):null===(n=e.subscription)||void 0===n||n.cancel()}))}},{key:"pingWatchdog",value:(e=(0,i.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(this.subscriptionId){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,this._watchdogClient.ping({id:this.subscriptionId});case 4:this.scheduleNextPing();case 5:case"end":return e.stop()}}),e,this)}))),function(){return e.apply(this,arguments)})},{key:"scheduleNextPing",value:function(){var e=this;setTimeout((function(){e.pingWatchdog()}),6e4)}}]);var e}();var ir=n(43616);n(5015),n(66209),n(10885),n(39261),n(83700),n(83632),n(72431),n(77329),n(13740),n(96542),n(85738),n(12900),n(82051),n(53198),n(74211),n(19791),n(75294),n(41526),n(66032),n(73659),n(38551),n(28553),n(67612),n(28579),n(77719),n(97576),n(62891),n(82605),n(14863),n(59637),n(2709),n(73974),n(58941),n(51579),n(26236),n(57716),n(81913);function or(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,ar()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function ar(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ar=function(){return!!e})()}var sr=function(){return(0,E.A)((function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;(0,x.A)(this,e),this._output=t,this._offset=n,this._view=new DataView(this._output.buffer,this._output.byteOffset)}),[{key:"write",value:function(e){this._view.setInt32(this._offset,e.byteLength),this._output.set(e,this._offset+4),this._offset+=e.byteLength+4}}])}();function ur(e){var t=new TextEncoder,n=t.encode(e.service),r=t.encode(e.method),i=e.payload,o=new Uint8Array(4+n.byteLength+4+r.byteLength+4+i.byteLength),a=new sr(o);return a.write(n),a.write(r),a.write(i),o.buffer}var cr=function(e){function t(){return(0,x.A)(this,t),or(this,t,["aborted"])}return(0,O.A)(t,e),(0,E.A)(t)}((0,ir.A)(Error)),lr=In("EsperantoTransport"),fr=function(){return(0,E.A)((function e(t,n){(0,x.A)(this,e),this._onSend=t,this._onCancel=n}),[{key:"callSingle",value:function(e){var t,n=this,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).signal;return new Promise((function(i,o){var a=n.call(e,!1,i,o);null==r||r.addEventListener("abort",t=function(){a.cancel(),o(new cr)})})).finally((function(){return null==r?void 0:r.removeEventListener("abort",t)}))}},{key:"callStream",value:function(e,t){return this.call(e,!0,t,(function(e){throw e}))}},{key:"call",value:function(e,t,n,r){var i=this._onSend({request:ur(e),persistent:t,onSuccess:function(t){t instanceof ArrayBuffer?n(new Uint8Array(t)):r(new Error("".concat(e.service,".").concat(e.method," failed with invalid payload!")))},onFailure:function(t,n){r(new Error("".concat(e.service,".").concat(e.method," failed with code: ").concat(n)))}}),o=this._onCancel;return{cancel:function(){o(i)}}}}])}();function dr(){var e=n.g.window||{};return new fr(e.executeEsperantoCall,e.cancelEsperantoCall)}function hr(){return pr.apply(this,arguments)}function pr(){return(pr=(0,i.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e,t){var n=JSON.stringify({type:"view_loaded",name:"/loginUI",innerWidth:window.innerWidth,innerHeight:window.innerHeight});window.sendCosmosRequest({request:JSON.stringify({method:"POST",uri:"sp://messages/v1/container/control",body:n}),persistent:!1,onSuccess:function(){e()},onFailure:function(e,n){t(e)}});var r,i,o=dr();r=o,i="/loginUI",new rr(new nr.NH(r),i)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var gr=function(){var e=Xe(),t=e.logger,n=e.pageviewActionHash;(0,g.useEffect)((function(){hr()}),[]),(0,g.useEffect)((function(){n&&t.logPageView({page:"auth-on-web",actionHash:n})}),[t,n]);var r=(0,g.useRef)(!0),i=(0,g.useRef)(!0),o=(0,g.useRef)(!0),a=(0,g.useRef)(null),s=(0,g.useState)(!1),u=(0,p.A)(s,2),c=u[0],l=u[1],f=(0,g.useState)(0),d=(0,p.A)(f,2),v=d[0],y=d[1],m=tr((0,h.A)((0,h.A)((0,h.A)({},$.SMALL,0),$.MEDIUM,1024),$.LARGE,1600),"width",a).breakpoint,A=function(e,t){return tr(e,"height",t)}((0,h.A)((0,h.A)((0,h.A)({},$.SMALL,0),$.MEDIUM,800),$.LARGE,1200),a),b=A.breakpoint,w=(0,g.useCallback)((function(){l(!c)}),[c]),k=xt.includes(V.getLocaleForTranslation().valueOf())?V.getLocaleForTranslation().valueOf():"en",x=[{backgroundImage:(0,K.jsx)(Dt,{fadeInRef:r}),titleStrings:[V.get("desktop-auth.login.millions-of-songs"),V.get("desktop-auth.login.free-on-spotify")],titleVariants:(0,h.A)((0,h.A)((0,h.A)({},$.SMALL,"brio"),$.MEDIUM,"forte"),$.LARGE,"bass")},{backgroundImage:(0,K.jsx)(ht,{imageLocale:k,fadeInRef:i}),titleStrings:[V.get("desktop-auth.login.collect-and-create")],titleVariants:(0,h.A)((0,h.A)((0,h.A)({},$.SMALL,"alto"),$.MEDIUM,"brio"),$.LARGE,"forte")},{backgroundImage:(0,K.jsx)(pt,{imageLocale:k,fadeInRef:o}),titleStrings:[V.get("desktop-auth.login.perfect-work-environment")],titleVariants:(0,h.A)((0,h.A)((0,h.A)({},$.SMALL,"alto"),$.MEDIUM,"brio"),$.LARGE,"forte")}];return(0,K.jsx)(X.K,{children:(0,K.jsx)("div",{className:q,ref:a,"data-testid":"new-login",children:(0,K.jsxs)("main",{className:J,children:[(0,K.jsxs)("div",{className:Z,children:[(0,K.jsx)(G,{toggleSettings:w}),(0,K.jsx)($e,{titleStrings:x[v].titleStrings,titleVariants:x[v].titleVariants,widthBreakpoint:m,heightBreakpoint:b})]}),(0,K.jsx)(ut,{nrSteps:x.length,atStep:v,navigate:y,backgroundImage:x[v].backgroundImage}),c&&(0,K.jsx)(Xn,{toggleSettings:w})]})})})};const vr="_4sAimuD_zstEpQjSRHql",yr="Lo8UOyZncZeauxzo1zce",mr="Z1lRkuK3aAblyTU6eakJ",Ar="N1wj4kvAondUABJthoPs",br="jhwMfVBB2fCPloJsLNv6";var wr=function(e){var t=e.showSettings,n=Xe(),r=n.logger,i=n.pageviewActionHash;(0,g.useEffect)((function(){i&&r.logPageView({page:"auth-on-web",actionHash:i})}),[r,i]);var o=Ye(),a=o.handleLoginOrSignupClick,s=o.handleTryAgainClick,u=o.isWaitingForBrowser,c=o.isSigningUp,l=o.errorMessage;return(0,K.jsx)("main",{"data-testid":"login",children:u?(0,K.jsxs)(K.Fragment,{children:[(0,K.jsx)(Q.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:vr,children:c?V.get("desktop-auth.login.go-to-browser-signup"):V.get("desktop-auth.login.go-to-browser-login")}),(0,K.jsxs)("button",{className:mr,onClick:s,children:[(0,K.jsx)(Q.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:V.get("desktop-auth.login.not-seeing-browser")})," ",(0,K.jsx)(Q.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:V.get("desktop-auth.login.try-again")})]})]}):(0,K.jsxs)(K.Fragment,{children:[(0,K.jsxs)(Q.Z,{as:"h1",variant:"alto",semanticColor:"textBase",className:vr,children:[V.get("desktop-auth.login.millions-of-songs"),(0,K.jsx)("br",{}),V.get("desktop-auth.login.free-on-spotify")]}),l&&(0,K.jsxs)("div",{className:Ar,role:"alert",onClick:function(e){e.currentTarget.getAttribute("data-action")&&("showSettings"===e.currentTarget.getAttribute("data-action")&&t())},"aria-live":"assertive",children:[(0,K.jsx)(re.b,{className:br}),(0,K.jsx)("span",{dangerouslySetInnerHTML:{__html:l}})]}),(0,K.jsx)(v.$,{onClick:function(){a(!1)},iconTrailing:y.H,"data-testid":"login-button",children:V.get("desktop-auth.login.log-in-with-browser")}),(0,K.jsxs)("button",{className:yr,onClick:function(){a(!0)},children:[(0,K.jsx)(Q.Z,{as:"span",variant:"ballad",semanticColor:"textSubdued",children:V.get("desktop-auth.login.new-to-spotify")}),(0,K.jsx)(Q.Z,{as:"span",variant:"balladBold",semanticColor:"textBase",children:V.get("desktop-auth.login.sign-up-with-browser")}),(0,K.jsx)(y.H,{iconSize:16,semanticColor:"textBase"})]})]})})},kr=function(e){var t=e.mode,n=e.showLogin,r=e.showSettings,i=Xe().logger;return(0,K.jsx)("footer",{className:"Footer",role:"contentinfo",children:"settings"===t?(0,K.jsx)("a",{className:"Footer__link",href:"#",onClick:function(){i.logAction({page:"settings",action_type:"click",action_intent:"back-to-login"}),n()},"data-ta-id":"login-footer-settings-back-to-login",children:V.get("desktop.login.Back")}):(0,K.jsx)("a",{className:"Footer__link",href:"#",onClick:function(){i.logAction({page:"settings",action_type:"click",action_intent:"open-page-settings"}),r()},"data-ta-id":"login-footer-settings",children:V.get("desktop.login.PreferencesLink")})})},xr=function(){return(0,K.jsxs)("header",{className:"Header",children:[(0,K.jsx)("h1",{className:"hidden-visually",children:"Spotify"}),(0,K.jsx)("img",{className:"Header__logo",src:"images/logo.svg",alt:""})]})},Er=n(32961),Dr=n(24818);var _r=function(e){var t,n,r=e.initialMode,i=void 0===r?"login":r,o=(0,g.useState)(i),a=(0,p.A)(o,2),s=a[0],u=a[1],c=(t=s,n=(0,g.useRef)(),(0,g.useEffect)((function(){n.current=t}),[t]),n.current),l=Xe().logger;(0,g.useEffect)((function(){hr()}),[]),(0,g.useEffect)((function(){"login"===s?l.logPageView({page:"login"}):"settings"===s&&l.logPageView({page:"login/settings"})}),[s,l]);var f=c?"__".concat(s," __").concat(c,"-to-").concat(s):"",d=function(){return u("settings")};return(0,K.jsxs)("main",{className:"App","data-ta-id":"login-app","data-testid":"login-app","data-ta-login-mode":s,children:[(0,K.jsxs)("div",{className:"fakeWebPlayer",children:[(0,K.jsx)("aside",{}),(0,K.jsxs)("footer",{children:[(0,K.jsx)("div",{className:"fakeWebPlayer__footer-left"}),(0,K.jsx)("div",{className:"fakeWebPlayer__footer-center"}),(0,K.jsx)("div",{className:"fakeWebPlayer__footer-right"})]}),(0,K.jsx)("main",{children:(0,K.jsx)("div",{className:"fakeWebPlayer__content"})})]}),(0,K.jsx)("div",{className:"App__content ".concat(f),children:(0,K.jsx)(Dr.A,{mode:"in-out",children:(0,K.jsx)(Er.A,{timeout:{appear:0,enter:0,exit:650},children:(0,K.jsxs)("div",{className:"App__modal ".concat(f),children:[(0,K.jsx)(xr,{}),"settings"===s?(0,K.jsx)(Un,{settings:null,children:(0,K.jsx)(Jn,{})}):(0,K.jsx)(wr,{showSettings:d}),(0,K.jsx)(kr,{mode:s,showLogin:function(){return u("login")},showSettings:d})]})},f)})})]},"main1")},Fr=In("ControlMessageAPI");var Sr=function(){var e=Rn(Fr);(0,g.useEffect)((function(){e.setTitlebarHeight(64)}),[e])},Cr=function(e){var t=e.initialMode,n=(0,u.NC)(f);return Sr(),(0,K.jsx)(K.Fragment,{children:n?(0,K.jsx)(gr,{}):(0,K.jsx)(_r,{initialMode:t})})},Or=n(79716),jr=n(47551),Nr=n(82132);var Rr=function(e){return e.Web="Web",e.PWA="PWA",e.Desktop="Desktop",e}({}),Ir=function(e){return e.macOS="macOS",e.Windows="Windows",e.Linux="Linux",e.ChromeOS="ChromeOS",e.Other="Other",e}({});var Pr={BROWSER_EDGE:"spotify__browser--is-edge",BROWSER_SAFARI:"spotify__browser--is-safari",OS_MACOS:"spotify__os--is-macos",OS_WINDOWS:"spotify__os--is-windows",OS_LINUX:"spotify__os--is-linux",OS_CHROMEOS:"spotify__os--is-chromeos",CONTAINER_DESKTOP:"spotify__container--is-desktop",CONTAINER_PWA:"spotify__container--is-pwa",CONTAINER_WEB:"spotify__container--is-web"};function Lr(e,t){var n,r;n=Object.values(Pr),(r=document.documentElement.classList).remove.apply(r,(0,gt.A)(n));var i=[];"Microsoft Edge"===Ft().parse(window.navigator.userAgent).browser.name?i.push(Pr.BROWSER_EDGE):St()&&i.push(Pr.BROWSER_SAFARI),t===Ir.macOS?i.push(Pr.OS_MACOS):t===Ir.Windows?i.push(Pr.OS_WINDOWS):t===Ir.Linux?i.push(Pr.OS_LINUX):t===Ir.ChromeOS&&i.push(Pr.OS_CHROMEOS),e===Rr.Desktop?i.push(Pr.CONTAINER_DESKTOP):e===Rr.PWA?i.push(Pr.CONTAINER_PWA):e===Rr.Web&&i.push(Pr.CONTAINER_WEB),function(e){e.forEach((function(e){document.documentElement.classList.add(e)}))}(i)}var Mr=n(51789),Tr=function(e,t){var n=e.event_sender_context_information;return[(0,Mr.QI)({version_code:n.client_version_int,version_string:n.client_version_string}),(0,Mr.ks)(t),(0,Mr.xB)(n.installation_id),(0,Mr.es)({device_id:n.device_id,device_manufacturer:n.device_manufacturer,device_model:n.device_model,os_version:n.os_version,platform_type:n.platform_type})]},Br=function(e,t,n){var r=n.clientId,i=n.ownerProvider,o=n.storagePrefix,a=n.useInMemoryStorage,s=n.useOptimizedESS2NA;return(0,Mr.kE)({transport:t,suppressPersist:false,context:Tr(e,r),storage:a?{adapter:new Mr.ty,flushStrategy:{kind:Mr.aN.IMMEDIATE}}:void 0,storagePrefix:o,ownerProvider:i,useOptimizedESS2NA:s})},Ur=(n(28965),n(38408),n(87456),n(80456),n(64329));n(53276),n(91281),n(29426);function Wr(){Wr=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,i){var o=RegExp(e,r);return t.set(o,i||t.get(e)),(0,Ur.A)(o,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var i=r[n];if("number"==typeof i)t[n]=e[i];else{for(var o=0;void 0===e[i[o]]&&o+1<i.length;)o++;t[n]=e[i[o]]}return t}),Object.create(null))}return(0,O.A)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var i=n.indices;i&&(i.groups=r(i,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var o=t.get(this);return e[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(e,t){var n=o[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof i){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,k.A)(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),i.apply(this,e)}))}return e[Symbol.replace].call(this,n,i)},Wr.apply(this,arguments)}var Hr=Wr(/Spotify\/(.+)\s/,{version:1});function zr(){if(!!window.navigator.userAgent.match(Hr))return Rr.Desktop;var e="serviceWorker"in window.navigator,t=window.matchMedia("(display-mode: standalone)").matches,n="Windows"in window;return e&&(t||n)?Rr.PWA:Rr.Web}var Vr=n(45822);function Kr(){Kr=function(e,t){return new n(e,void 0,t)};var e=RegExp.prototype,t=new WeakMap;function n(e,r,i){var o=RegExp(e,r);return t.set(o,i||t.get(e)),(0,Ur.A)(o,n.prototype)}function r(e,n){var r=t.get(n);return Object.keys(r).reduce((function(t,n){var i=r[n];if("number"==typeof i)t[n]=e[i];else{for(var o=0;void 0===e[i[o]]&&o+1<i.length;)o++;t[n]=e[i[o]]}return t}),Object.create(null))}return(0,O.A)(n,RegExp),n.prototype.exec=function(t){var n=e.exec.call(this,t);if(n){n.groups=r(n,this);var i=n.indices;i&&(i.groups=r(i,this))}return n},n.prototype[Symbol.replace]=function(n,i){if("string"==typeof i){var o=t.get(this);return e[Symbol.replace].call(this,n,i.replace(/\$<([^>]+)>/g,(function(e,t){var n=o[t];return"$"+(Array.isArray(n)?n.join("$"):n)})))}if("function"==typeof i){var a=this;return e[Symbol.replace].call(this,n,(function(){var e=arguments;return"object"!=(0,k.A)(e[e.length-1])&&(e=[].slice.call(e)).push(r(e,a)),i.apply(this,e)}))}return e[Symbol.replace].call(this,n,i)},Kr.apply(this,arguments)}var Gr=Kr(/Spotify\/(.+)\s/,{version:1});var qr=n(22459),Jr=n(76784),Zr=["country_code","type"];function Xr(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Qr(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Qr(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Qr(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Yr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $r(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yr(Object(n),!0).forEach((function(t){(0,h.A)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ei=function(){return(0,E.A)((function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new L(36e5);(0,x.A)(this,e),(0,h.A)(this,"_subs",new Set),(0,h.A)(this,"_inFlightCache",new M),this.productStateApi=t,this.cache=r,this.productStateApi.subValues(Jr.kM.fromPartial({}),function(){var e=(0,i.A)(a().mark((function e(t){var r,i,o,s,u,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n.mapKeys(t.pairs),!(i=n.cache.get("productState"))){e.next=7;break}o=$r($r({},i),r),n.cache.set("productState",o),e.next=10;break;case 7:return e.next=9,n.getValues();case 9:o=e.sent;case 10:s=Xr(n._subs);try{for(s.s();!(u=s.n()).done;){c=u.value;try{c(o)}catch(e){}}}catch(e){s.e(e)}finally{s.f()}case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[{key:"mapKeys",value:function(e){var t=e.country_code,n=e.type,r=$r({},(0,le.A)(e,Zr));return void 0!==t&&(r.country=t),void 0!==n&&(r.product=n),r}},{key:"getValues",value:(t=(0,i.A)(a().mark((function e(){var t,n,r,i=this;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.cache.get("productState"))){e.next=3;break}return e.abrupt("return",t);case 3:return e.next=5,this._inFlightCache.create("getValues",(function(){return i.productStateApi.getValues(Jr.kM.fromPartial({}))}));case 5:return n=e.sent,r=this.mapKeys(n.pairs),this.cache.set("productState",r),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"getCachedValues",value:function(){var e;return null!==(e=this.cache.get("productState"))&&void 0!==e?e:null}},{key:"subValues",value:function(e){var t=this;return this._subs.add(e),function(){t._subs.delete(e)}}},{key:"setValues",value:(e=(0,i.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this.productStateApi.putValues(Jr.n3.fromPartial({pairs:t}));case 2:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})}]);var e,t}(),ti=n(93461),ni=n(88610);function ri(e,t,n,r){for(var i,o=[{node:e,path:[]}],a={terminate:!1,exclude:!1},s=r,u=function(){var e=o.pop(),r=e.node,i=e.path;if(s=n(s,r,i,a),!0===a.terminate)return{v:s};if(!0===a.exclude)return a.exclude=!1,0;var u=r.getNodes(t).reverse();o.push.apply(o,(0,gt.A)(u.map((function(e){return{node:e,path:[].concat((0,gt.A)(i),[r])}}))))};o.length>0;)if(0!==(i=u())&&i)return i.v;return s}var ii=function(e){return e[e.FORWARD=0]="FORWARD",e[e.BACKWARD=1]="BACKWARD",e}({});function oi(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,ai()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function ai(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ai=function(){return!!e})()}var si=function(e){function t(){return(0,x.A)(this,t),oi(this,t,arguments)}return(0,O.A)(t,e),(0,E.A)(t)}((0,ir.A)(Error));function ui(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,ci()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function ci(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ci=function(){return!!e})()}var li=function(e){function t(e,n){return(0,x.A)(this,t),ui(this,t,[null,e,n])}return(0,O.A)(t,e),(0,E.A)(t)}(function(){function e(t,n,r){(0,x.A)(this,e),(0,h.A)(this,"_parents",new Set),(0,h.A)(this,"_children",new Map),this._key=n,this._value=r,null!==t&&this._parents.add(t)}return(0,E.A)(e,[{key:"addChild",value:function(t,n){var r=this._children.get(t);return void 0!==r?(r._parents.add(this),r):(function(e,t,n){t(e,ii.BACKWARD,(function(e,t,r){var i=r.map((function(e){return e.getKey()}));if(i.includes(n))throw new si("Found dependency cycle! ".concat([n].concat((0,gt.A)(i)).reverse().join(" -> ")))}),void 0)}(this,ri,t),r=new e(this,t,n),this._children.set(t,r),r)}},{key:"removeChild",value:function(e){this._children.delete(e)}},{key:"getNodes",value:function(e){switch(e){default:case ii.FORWARD:return this.getChildren();case ii.BACKWARD:return this.getParents()}}},{key:"getParents",value:function(){return Array.from(this._parents.values())}},{key:"getChildren",value:function(){return Array.from(this._children.values())}},{key:"isRoot",value:function(){return 0===this._parents.size}},{key:"getKey",value:function(){return this._key}},{key:"getValue",value:function(){return this._value}}])}()),fi=function(){return(0,E.A)((function e(){(0,x.A)(this,e)}),[{key:"addChild",value:function(){return this}},{key:"removeChild",value:function(){}},{key:"getNodes",value:function(){return[]}},{key:"getParents",value:function(){return[]}},{key:"getChildren",value:function(){return[]}},{key:"isRoot",value:function(){return!0}},{key:"getKey",value:function(){throw new Error("Method not supported.")}},{key:"getValue",value:function(){throw new Error("Method not supported.")}}])}(),di=function(e){return e[e.ROOT=0]="ROOT",e[e.DEPENDENCY=1]="DEPENDENCY",e[e.INSTANCE=2]="INSTANCE",e[e.VALUE=3]="VALUE",e}({});function hi(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,pi()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function pi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(pi=function(){return!!e})()}var gi=function(e){function t(){return(0,x.A)(this,t),hi(this,t,arguments)}return(0,O.A)(t,e),(0,E.A)(t)}((0,ir.A)(Error)),vi=function(){return(0,E.A)((function e(t,n){(0,x.A)(this,e),this._resolve=t,this._wrap=n}),[{key:"resolve",value:function(e){return yi(e,this.resolveImpl(e))}},{key:"resolveNoThrow",value:function(e){return this.resolveImpl(e)}},{key:"resolveImpl",value:function(e){return this._resolve(e)}},{key:"wrap",value:function(e,t){return this.wrapImpl(e,t)}},{key:"wrapImpl",value:function(e,t){return this._wrap(e,t)}}])}();function yi(e,t){if(null===t)throw new gi("No registration was found for token '".concat(Pn(e),"'!"));return t}function mi(e,t){e.getChildren().forEach((function(e){var n=t.addChild(e.getKey(),e.getValue());mi(e,n)}))}function Ai(e){var t=new li(e.getKey(),e.getValue());return mi(e,t),t}function bi(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return wi(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?wi(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function wi(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}var ki=function(){return(0,E.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];(0,x.A)(this,e),(0,h.A)(this,"_map",new Map),(0,h.A)(this,"_tree",new fi),this._parents=t}),[{key:"registerValue",value:function(e,t){return this.registerImpl(e,{instance:t})}},{key:"registerFactory",value:function(e,t){return this.registerImpl(e,{factory:t,instance:void 0})}},{key:"registerImpl",value:function(e,t){var n=Pn(e);return this._tree.addChild("dependency:".concat(n),{type:di.DEPENDENCY,name:n,token:e}),this._map.set(e,t),this}},{key:"resolve",value:function(e){return yi(e,this.resolveImpl(this._tree,e))}},{key:"resolveNoThrow",value:function(e){return this.resolveImpl(this._tree,e)}},{key:"resolveImpl",value:function(e,t){var n=this,r=Pn(t);e=e.addChild("dependency:".concat(r),{type:di.DEPENDENCY,name:r,token:t});var i=this._map.get(t);if(void 0===i){var o,a=bi(this._parents);try{for(a.s();!(o=a.n()).done;){var s=o.value.resolveNoThrow(t);if(null!==s)return s}}catch(e){a.e(e)}finally{a.f()}return null}if(function(e){return void 0!==e.instance}(i))return i.instance;var u=new vi((function(t){return n.resolveImpl(e,t)}),(function(t,r){return n.wrapImpl(e,t,r)})),c=i.factory(u),l=function(e){return null===e?"null":"object"===(0,k.A)(e)?e.constructor.name:"".concat((0,k.A)(e))}(c);return e=e.addChild("instance:".concat(l),{type:di.INSTANCE,name:l}),i.instance=c}},{key:"wrap",value:function(e,t){return this.wrapImpl(this._tree,e,t)}},{key:"wrapImpl",value:function(e,t,n){return e=e.addChild("value:".concat(n),{type:di.VALUE,name:n}),t}},{key:"getDependencyTree",value:function(){var e=this;return this._map.forEach((function(t,n){return e.resolve(n)})),Ai(this._tree)}}])}();function xi(){return new ki(arguments.length>0&&void 0!==arguments[0]?arguments[0]:[])}function Ei(e){return Object.keys(e).reduce((function(t,n){return t[n.toLowerCase()]=e[n],t}),{})}var Di=function(e){return e.DELETE="DELETE",e.GET="GET",e.HEAD="HEAD",e.POST="POST",e.PUT="PUT",e.SUB="SUB",e.PATCH="PATCH",e}({}),_i=function(){function e(t,n,r,i){(0,x.A)(this,e),this.uri=n,this.headers=Ei(r),this.body=this.stringifyBody(i||""),this.method=t}return(0,E.A)(e,[{key:"stringify",value:function(){return JSON.stringify({headers:this.headers,body:this.body,method:this.method,uri:this.uri})}},{key:"stringifyBody",value:function(e){return"string"!=typeof e?JSON.stringify(e):e}}],[{key:"parse",value:function(t){var n=JSON.parse(t);return new e(n.method,n.uri,n.headers,n.body)}}])}(),Fi=In("Cosmos"),Si=function(){return(0,E.A)((function e(t,n){(0,x.A)(this,e),this.resolver=t,this.requestFactory=n}),[{key:"head",value:function(e,t){return this.resolve(Di.HEAD,e,null,t).then((function(e){return e.headers}))}},{key:"get",value:function(e,t,n){return this.resolve(Di.GET,e,t,n).then((function(e){return e.body}))}},{key:"post",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0;return this.resolve(Di.POST,e,t,n).then((function(e){return e.body}))}},{key:"put",value:function(e,t,n){return this.resolve(Di.PUT,e,t,n).then((function(e){return e.body}))}},{key:"del",value:function(e,t,n){return this.resolve(Di.DELETE,e,t,n).then((function(e){return e.body}))}},{key:"patch",value:function(e,t,n){return this.resolve(Di.PATCH,e,t,n).then((function(e){return e.body}))}},{key:"sub",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{},o=this.requestFactory(Di.SUB,e,i,r);return this.resolver.resolve(o,(function(e){return t(e.body)}),n)}},{key:"postSub",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2?arguments[2]:void 0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:function(e){},i=this.requestFactory(Di.SUB,e,{},t);return this.resolver.resolve(i,(function(e){return n(e.body)}),r)}},{key:"request",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=arguments.length>3?arguments[3]:void 0;return this.resolve(e,t,n,r)}},{key:"resolve",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};return new Promise((function(o,a){var s=n.requestFactory(e,t,i,r);n.resolver.resolve(s,o,a)}))}}])}(),Ci=(n(38414),n(80654));function Oi(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,ji()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function ji(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(ji=function(){return!!e})()}function Ni(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(e){if("string"==typeof e)return Ri(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ri(e,t):void 0}}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,i=function(){};return{s:i,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:i}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var o,a=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return a=e.done,e},e:function(e){s=!0,o=e},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw o}}}}function Ri(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Ii(e,t,n){return t=(0,C.A)(t),(0,S.A)(e,Pi()?Reflect.construct(t,n||[],(0,C.A)(e).constructor):t.apply(e,n))}function Pi(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(e){}return(Pi=function(){return!!e})()}var Li=function(e){function t(e,n){var r;return(0,x.A)(this,t),r=Ii(this,t),(0,h.A)(r,"_numListeners",0),(0,h.A)(r,"_subscriptions",[]),r._cosmos=e,r._endpoints=n,r.onAddListener("message",r.onListenerAdded.bind(r)),r.onRemoveListener("message",r.onListenerRemoved.bind(r)),r}return(0,O.A)(t,e),(0,E.A)(t,[{key:"onListenerAdded",value:function(){var e=this;if(++this._numListeners,0===this._subscriptions.length){var t,n=Ni(this._endpoints);try{for(n.s();!(t=n.n()).done;){var r=t.value,i=this._cosmos.sub(r,(function(t){e.emit("message",t)}),(function(){}));this._subscriptions.push(i)}}catch(e){n.e(e)}finally{n.f()}}}},{key:"onListenerRemoved",value:function(){0==--this._numListeners&&this._subscriptions.length>0&&(this._subscriptions.forEach((function(e){return e.cancel()})),this._subscriptions=[])}}])}(function(e){function t(){return(0,x.A)(this,t),Oi(this,t,arguments)}return(0,O.A)(t,e),(0,E.A)(t)}(function(){return(0,E.A)((function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Ci.bk;(0,x.A)(this,e),this._emitter=t,this._emitter=t||new Ci.bk}),[{key:"createEvent",value:function(e,t){return this._emitter.createEvent(e,t)}},{key:"addListener",value:function(e,t,n){var r=this;this._emitter.addListener(e,t,n);return function(){r.removeListener(e,t,n)}}},{key:"removeListener",value:function(e,t,n){return this._emitter.removeListener(e,t,n),this}},{key:"onAddListener",value:function(e,t){return this._emitter.onAddListener(e,t),this}},{key:"onRemoveListener",value:function(e,t){return this._emitter.onRemoveListener(e,t),this}},{key:"emit",value:function(e,t){return this._emitter.emit(e,t)}},{key:"emitSync",value:function(e,t){return this._emitter.emitSync(e,t)}}])}()));var Mi=function(){return(0,E.A)((function e(t){(0,x.A)(this,e),this._cosmos=t}),[{key:"enableMenuItem",value:(s=(0,i.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cosmos.post("sp://messages/v1/container/control",(0,h.A)({type:"update_menu_state"},t,!0));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return s.apply(this,arguments)})},{key:"disableMenuItem",value:(o=(0,i.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cosmos.post("sp://messages/v1/container/control",(0,h.A)({type:"update_menu_state"},t,!1));case 2:case"end":return e.stop()}}),e,this)}))),function(e){return o.apply(this,arguments)})},{key:"setTitlebarHeight",value:(r=(0,i.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cosmos.post("sp://messages/v1/container/control",{type:"update_titlebar",height:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return r.apply(this,arguments)})},{key:"notifyUsableStateReached",value:(n=(0,i.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cosmos.post("sp://messages/v1/container/control",{type:"loaded_initial_state",name:t});case 2:case"end":return e.stop()}}),e,this)}))),function(e){return n.apply(this,arguments)})},{key:"notifyReadyStateReached",value:(t=(0,i.A)(a().mark((function e(){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cosmos.post("sp://messages/v1/container/control",{type:"ready"});case 2:case"end":return e.stop()}}),e,this)}))),function(){return t.apply(this,arguments)})},{key:"notifyViewLoaded",value:(e=(0,i.A)(a().mark((function e(t){return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,this._cosmos.post("sp://messages/v1/container/control",{type:"view_loaded",name:t,innerWidth:window.innerWidth,innerHeight:window.innerHeight});case 2:case"end":return e.stop()}}),e,this)}))),function(t){return e.apply(this,arguments)})},{key:"getEvents",value:function(){return e=this._cosmos,new Li(e,["sp://messages/v1/container/control","sp://desktop/v1/navigation"]);var e}}]);var e,t,n,r,o,s}(),Ti=function(){function e(t,n,r){(0,x.A)(this,e),this.status=t,this.headers=Ei(n),this.body=this.parseBody(r)}return(0,E.A)(e,[{key:"parseBody",value:function(e){return""!==e?JSON.parse(e):{}}}],[{key:"isSuccessStatus",value:function(e){return e>=200&&e<=299}},{key:"parse",value:function(t){var n=JSON.parse(t),r=this.isSuccessStatus(n.status)&&n.body?n.body:"";return new e(n.status,n.headers||{},r)}}])}(),Bi=n(91771),Ui=n.n(Bi),Wi=function(){return(0,E.A)((function e(t,n){(0,x.A)(this,e),this.send=t,this.cancel=n}),[{key:"resolve",value:function(e,t,n){var r=this,i=this.send({request:e.stringify(),persistent:e.method===Di.SUB,onSuccess:function(i){return r.onSuccess(e,i,t,n)},onFailure:function(t,i){return r.onFailure(e,t,i,n)}});return{cancel:function(){r.cancel(i)}}}},{key:"onSuccess",value:function(e,t,n,r){try{var i,o=Ti.parse(t);if(Ti.isSuccessStatus(o.status))n(o);else r(Ui()(o.status,"".concat(e.method," request to ").concat(e.uri," failed with status code ").concat(o.status)))}catch(i){var a=i instanceof Error?i.message:"(unknown error object)";r(new Error("".concat(e.method," request to ").concat(e.uri," failed with exception '").concat(a,"'")))}}},{key:"onFailure",value:function(e,t,n,r){r(new Error("".concat(e.method," request to ").concat(e.uri," request failed with error code ").concat(t," (").concat(n,")")))}}])}();var Hi=n(28824);function zi(){var e=function(){var e=n.g.window||{};return new Wi(e.sendCosmosRequest,e.cancelCosmosRequest)}(),t=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return(0,Hi.A)(_i,t)};return new Si(e,t)}var Vi=function(e){var t=e.registry,n=e.children,r=(0,g.useContext)(Nn);return null!==r&&(t=xi([t,r])),(0,K.jsx)(Nn.Provider,{value:t,children:n})},Ki=In("ProductStateAPI"),Gi=In("EventSender"),qi=(In("History"),In("Transport")),Ji=n(1464),Zi=Object.values(r);function Xi(){return(Xi=(0,i.A)(a().mark((function e(){var t,n,r,i;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=0,n=[window.__spotify.locale,B.en];case 1:if(!(t<n.length)){e.next=17;break}return r=n[t],e.prev=3,e.next=6,fetch("i18n/".concat(r,".json")).then((function(e){return e.json()}));case 6:return i=e.sent,V.initialize({localeForTranslation:r,localeForFormatting:navigator.language,translations:i}),e.abrupt("return");case 11:e.prev=11,e.t0=e.catch(3);case 14:t++,e.next=1;break;case 17:throw new Error("Cannot find a suitable locale! Something is wrong: talk to #desktop.");case 18:case"end":return e.stop()}}),e,null,[[3,11]])})))).apply(this,arguments)}function Qi(e){e.registerFactory(Fi,(function(e){return zi()})).registerFactory(lr,(function(e){return dr()})).registerFactory(Ki,(function(e){return new ei(new Jr.EW(e.resolve(lr)))})).registerFactory(qi,(function(e){return(t=(0,Vr.ZA)({providers:{endpoints:(0,Vr.u6)(),token:function(){return Promise.reject()}}})).connect(),t;var t}))}function Yi(){return(Yi=(0,i.A)(a().mark((function e(){var t,n,r,i,o,c;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Lr(zr(),(f=void 0,"macOS"===(f=Ft().parse(window.navigator.userAgent).os.name)?Ir.macOS:"Windows"===f?Ir.Windows:"Linux"===f?Ir.Linux:"Chrome OS"===f?Ir.ChromeOS:Ir.Other)),Qi(n=xi()),n.registerFactory(Fr,(function(e){return new Mi(e.resolve(Fi))})),n.registerFactory(Wn,(function(e){return new qr.A(e.resolve(lr))})),n.registerFactory(Ln,(function(e){return new Ji.ni(e.resolve(lr))})),r="65b708073fc0480ea92a077233ca87bd",n.registerFactory(Gi,(function(e){return Br(window.__spotify,e.resolve(qi),{clientId:r,ownerProvider:function(){return null},storagePrefix:"".concat(r,"-loginui"),useInMemoryStorage:!0,useOptimizedESS2NA:!1})})),(i=window.__spotify&&window.__spotify.locale)&&document.documentElement.setAttribute("lang",i),o=jr.HZ.addMiddleware(Or.F),c=new ti.E({defaultOptions:{queries:{gcTime:0,networkMode:"always"},mutations:{networkMode:"always"}}}),(0,s.H)(document.getElementById("main")).render((0,K.jsx)(u.PE,{resolver:o,context:{username:null},options:{clientId:"client-desktop-ui-app-login",properties:Zi,timeout:1e4,transport:n.resolve(qi),eventSender:n.resolve(Gi),version:(a=void 0,l=void 0,l=window.navigator.userAgent.match(Gr),(null==l||null===(a=l.groups)||void 0===a?void 0:a.version)||"unknown"),sp_t_cookie:null===(t=window.__spotify.event_sender_context_information)||void 0===t?void 0:t.installation_id},children:(0,K.jsx)(Vi,{registry:n,children:(0,K.jsx)(ni.Ht,{client:c,children:(0,K.jsx)(Ze,{eventSender:n.resolve(Gi),children:(0,K.jsx)(g.Suspense,{fallback:null,children:(0,K.jsx)(Cr,{})})})})})})),document.documentElement.setAttribute("dir",window.__spotify.localization_is_rtl?"rtl":"ltr"),(0,Nr.Lj)("UI init phase is done for login");case 16:case"end":return e.stop()}var a,l,f}),e)})))).apply(this,arguments)}(0,Nr.Cd)(),function(){return Xi.apply(this,arguments)}().then((function(){return Yi.apply(this,arguments)}))},94758:e=>{e.exports={af:"af-ZA",am:"am-ET",ar:"ar",az:"az-AZ",bg:"bg-BG",bn:"bn-IN",bho:"bp",cs:"cs-CZ",da:"da-DK",de:"de-DE",el:"el-GR",es:"es-ES","es-419":"es-LA",et:"et-EE",fa:"fa-IR",fr:"fr-FR",fi:"fi-FI",fil:"fp-PH","fr-CA":"fr-CA",gu:"gu-IN",hu:"hu-HU",he:"he-IL",hi:"hi-IN",hr:"hr-HR",id:"id-ID",is:"is-IS",it:"it-IT",ja:"ja-JP",kn:"kn-IN",ko:"ko-KR",lt:"lt-LT",lv:"lv-LV",ml:"ml-IN",mr:"mr-IN",ms:"ms-MY",nb:"nb-NO",ne:"ne-NP",nl:"nl-NL",or:"or-IN","pa-IN":"pa-IN","pa-PK":"pa-PK",pl:"pl-PL","pt-PT":"pt-PT","pt-BR":"pt-BR",ro:"ro-RO",ru:"ru-RU",sk:"sk-SK",sl:"sl-SI",sr:"sr-RS",sv:"sv-SE",sw:"sw",ta:"ta-IN",te:"te-IN",th:"th-TH",tr:"tr-TR",uk:"uk-UA",ur:"ur",vi:"vi-VN","zh-CN":"zh-CN","zh-TW":"zh-TW",zu:"zu-ZA","ar-EG":"ar-EG","ar-MA":"ar-MA","ar-SA":"ar-SA",eu:"eu-ES",bs:"bs-BA",ca:"ca-ES","zh-HK":"zh-HK","en-GB":"en-GB",gl:"gl-ES",mk:"mk-MK","es-AR":"es-AR","es-MX":"es-MX"}}},n={};function r(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={id:e,loaded:!1,exports:{}};return t[e].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}r.m=t,e=[],r.O=(t,n,i,o)=>{if(!n){var a=1/0;for(l=0;l<e.length;l++){for(var[n,i,o]=e[l],s=!0,u=0;u<n.length;u++)(!1&o||a>=o)&&Object.keys(r.O).every((e=>r.O[e](n[u])))?n.splice(u--,1):(s=!1,o<a&&(a=o));if(s){e.splice(l--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[n,i,o]},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e={966:0};r.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,s,u]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in s)r.o(s,i)&&(r.m[i]=s[i]);if(u)var l=u(r)}for(t&&t(n);c<a.length;c++)o=a[c],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(l)},n=("undefined"!=typeof self?self:global).webpackChunkclient_web=("undefined"!=typeof self?self:global).webpackChunkclient_web||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})(),r.nc=void 0;var i=r.O(void 0,[452],(()=>r(95596)));i=r.O(i)})();
//# sourceMappingURL=login.js.map